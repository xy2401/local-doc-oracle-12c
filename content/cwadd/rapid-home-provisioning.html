<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Rapid Home Provisioning is a method of deploying software homes to any number of nodes in a data center from a single cluster, and also facilitates scaling, patching, and upgrading software.">
      <meta name="description" content="Rapid Home Provisioning is a method of deploying software homes to any number of nodes in a data center from a single cluster, and also facilitates scaling, patching, and upgrading software.">
      <title>Rapid Home Provisioning, Scaling, Patching, and Upgrading</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Administration and Deployment Guide">
      <meta property="og:description" content="Rapid Home Provisioning is a method of deploying software homes to any number of nodes in a data center from a single cluster, and also facilitates scaling, patching, and upgrading software.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Administration and Deployment Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 17.8.1">
      <link rel="alternate" href="clusterware-administration-and-deployment-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2017-10-24T13:53:03-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2007, 2017">
      <meta name="dcterms.category" content="database">
      
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="oracle-flex-clusters.html" title="Previous" type="text/html">
      <link rel="next" href="managing-oracle-cluster-registry-and-voting-files.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">
            {
                "primary":
                {
                    "category":{
                      "short_name":"database",
                      "element_name":"Database",
                      "display_in_url":true
                    },
                    "suite":{
                      "short_name":"oracle",
                      "element_name":"Oracle",
                      "display_in_url":true
                    },
                    "product_group":{
                      "short_name":"not-applicable",
                      "element_name":"Not applicable",
                      "display_in_url":false
                    },
                    "product":{
                      "short_name":"oracle-database",
                      "element_name":"Oracle Database",
                      "display_in_url":true
                    },
                    "release":{
                      "short_name":"12.2",
                      "element_name":"Release 12.2",
                      "display_in_url":true
                    },
                    "platform":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    },
                    "component":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    }
                }
            }
            </script>
      
    <meta name="dcterms.title" content="Clusterware Administration and Deployment Guide">
    <meta name="dcterms.isVersionOf" content="CWADD">
    <meta name="dcterms.identifier" content="E85822-02">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="oracle-flex-clusters.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="managing-oracle-cluster-registry-and-voting-files.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Administration and Deployment Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Rapid Home Provisioning, Scaling, Patching, and Upgrading</li>
            </ol>
            <a id="GUID-CCEC5960-EDA4-4A3F-9643-0CA308EA49AA" name="GUID-CCEC5960-EDA4-4A3F-9643-0CA308EA49AA"></a><a id="CWADD92402"></a>
            
            <h2 id="CWADD-GUID-CCEC5960-EDA4-4A3F-9643-0CA308EA49AA" class="sect2"><span class="enumeration_chapter">5 </span>Rapid Home Provisioning, Scaling, Patching, and Upgrading
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Rapid Home Provisioning is a method of deploying software homes to any number of nodes in a data center from a single cluster, and also facilitates scaling, patching, and upgrading software.</p>
               <p>With Rapid Home Provisioning, you create, store, and manage templates of Oracle homes as <a href="glossary.html#GUID-2241F26E-0652-46E7-A3C4-B8EBC0939F3E"><span class="xrefglossterm">image</span></a>s (called <a href="glossary.html#GUID-FE7C4C15-DA65-4737-B310-3284EB59EBA0"><span class="xrefglossterm">gold image</span></a>s) of Oracle software, such as databases, middleware, and applications. You can make a <a href="glossary.html#GUID-9C502BE7-E589-4C58-AE1A-4C71BF53601D"><span class="xrefglossterm">working copy</span></a> of any gold image, and then you can provision that working copy to any node in the data center.
               </p>
               <p>You store the gold images in a repository located on a <a href="glossary.html#GUID-9B0F2E98-277F-478E-8D49-3216423E061C"><span class="xrefglossterm">Rapid Home Provisioning Server</span></a>, which runs on one server in the Rapid Home Provisioning Server cluster that is a highly available provisioning system. This provisioning method simplifies quick patching of Oracle homes, thereby minimizing or completely eliminating downtime.
               </p>
               <p>Rapid Home Provisioning simplifies maintenance in large environments because you have only to update software homes one time on the Rapid Home Provisioning Server.</p>
               <p>Following is a list of Rapid Home Provisioning features:</p>
               <div class="section">
                  <p class="subhead1">Clientless Targets</p>
                  <p>In the previous release of Oracle Clusterware, the Rapid Home Provisioning Server could manage software only on Rapid Home Provisioning Clients of the same release, in addition to the server itself. With this release of Oracle Clusterware, the Rapid Home Provisioning Server can manage Rapid Home Provisioning Clients of the same release, itself, and can also manage installations running Oracle Grid Infrastructure 11<span class="italic">g</span> release 2 (11.2.0.3 and 11.2.0.4) and 12<span class="italic">c</span> release 1 (12.1.0.2). These targets may be RHP Server provisioned installations or may be preexisting installations.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Provision New Server Pools</p>
                  <p>The Rapid Home Provisioning Server can install and configure Oracle Grid Infrastructure (11<span class="italic">g</span> release 2 (11.2.0.4), and 12<span class="italic">c</span> release 1 (12.1.0.2) and release 2 (12.2)) on nodes that have no Oracle software inventory and can then manage those deployments with the full complement of Rapid Home Provisioning functionality.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Provision and Manage Any Software Home</p>
                  <p>Rapid Home Provisioning enables you to create a gold image from any software home. You can then provision that software to any Rapid Home Provisioning Client or target as a working copy. The software may be any binary that you will run on a Rapid Home Provisioning Client or target.</p>
                  <p>Since Rapid Home Provisioning is part of Oracle Grid Infrastructure and has knowledge of Oracle Database, it has built-in capabilities to provision, scale, patch, and upgrade Oracle Grid Infrastructure and Oracle Database homes as described in subsequent sections.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Provision, Scale, Patch, and Upgrade Oracle Grid Infrastructure</p>
                  <div class="p">The Rapid Home Provisioning Server can provision Oracle Grid Infrastructure (11<span class="italic">g</span> release 2 (11.2.0.4), and 12<span class="italic">c</span> release 1 (12.1.0.2) and release 2 (12.2)) homes, add or delete nodes from an Oracle Grid Infrastructure configuration, and can also be used to patch and upgrade Oracle Grid Infrastructure homes. In addition, there is a rollback capability that facilitates reverting from a patch procedure. While patching Oracle Grid infrastructure, you can use Rapid Home Provisioning to optionally patch any database homes hosted on the cluster.
                     <div class="infoboxnote" id="GUID-CCEC5960-EDA4-4A3F-9643-0CA308EA49AA__GUID-A4AAEEC4-34BE-46DC-9F3A-2252430C284B">
                        <p class="notep1">Note:</p>Rapid Home Provisioning does not provision, patch, or upgrade Oracle Restart, but you can provision single-instance databases on Oracle Restart, as explained in the subsequent section.
                     </div>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Provision, Scale, Patch, and Upgrade Oracle Database</p>
                  <div class="p">You can use Rapid Home Provisioning to provision Oracle Database software for the following releases of Oracle Database: 
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.4)
                           </p>
                        </li>
                        <li>
                           <p>Oracle Database 12<span class="italic">c</span> release 1 (12.1.0.2)
                           </p>
                        </li>
                        <li>
                           <p>Oracle Database 12<span class="italic">c</span> release 2 (12.2)
                           </p>
                        </li>
                     </ul>When you provision such software, Rapid Home Provisioning offers additional features for creating various types of databases (such as Oracle Real Application Clusters (Oracle RAC), single instance, and Oracle Real Application Clusters One Node (Oracle RAC One Node) databases) on different types of storage, and other options, such as using templates and creating container databases (CDBs). The Rapid Home Provisioning Server can add nodes to an Oracle RAC configuration, and remove nodes from an Oracle RAC configuration. Rapid Home Provisioning also improves and makes more efficient patching of database software, allowing for rapid and remote patching of the software, in most cases, without any downtime for the database.
                  </div>
                  <p>Using Rapid Home Provisioning, you can provision, scale, and patch Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.4), 12<span class="italic">c</span> release 1 (12.1.0.2), and 12<span class="italic">c</span> release 2 (12.2). You can also upgrade Oracle Databases from 11<span class="italic">g</span> release 2 (11.2.0.3) to 11<span class="italic">g</span> release 2 (11.2.0.4); from 11<span class="italic">g</span> release 2 (11.2.0.4) to 12<span class="italic">c</span> release 1 (12.1.0.2); and from 11<span class="italic">g</span> release 2 (11.2.0.4) or 12<span class="italic">c</span> release 1 (12.1.0.2) to 12<span class="italic">c</span> release 2 (12.2).
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Support for Single Instance Databases</p>
                  <p>You can use Rapid Home Provisioning to provision, patch, and upgrade single-instance databases running on clusters or Oracle Restart, or on single, standalone nodes.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Advanced Patching Capabilities</p>
                  <p>When patching an Oracle Grid Infrastructure or Oracle Database home, Rapid Home Provisioning offers a batch mode that speeds the patching process by patching some or all nodes of a cluster in parallel, rather than sequentially.</p>
                  <p>For Oracle Database homes, you can define disjoint sets of nodes. Each set of nodes is updated sequentially. By defining sets with reference to the database instances running on them, you can minimize the impact of rolling updates by ensuring that services are never taken completely offline. A “smartmove” option is available to help define the sets of batches to meet this goal.</p>
                  <p>Integration with Application Continuity is another enhancement to help eliminate the impact of maintenance. This provides the ability to gracefully drain and relocate services within a cluster, completely masking the maintenance from users.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Notifications</p>
                  <p>The Rapid Home Provisioning Server is the central repository for the software homes available to the data center. Therefore, it is essential that administrators throughout the data center be aware of changes to the inventory which might impact their areas of responsibility.</p>
                  <p>Rapid Home Provisioning enables you and other users to subscribe to image series events. Anyone subscribed will be notified by email of any changes to the images available in a particular image series. Also, users can be notified by email when a working copy is added to or deleted from a client.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Custom Workflow Support</p>
                  <p>You can create actions for various Rapid Home Provisioning operations, such as importing images, adding or deleting working copies, and managing a software home. You can define different actions for each operation, and further differentiate by the type of image to which the operation applies. Actions that you define can be executed before or after the given operation, and are executed on the deployment the operation applies to, whether it is the Rapid Home Provisioning Server, a target that is not running a Rapid Home Provisioning Client, or a target that is running a Rapid Home Provisioning Client.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Resume Failed Operations</p>
                  <p>If an operation, such as adding an image, provisioning a working copy, or performing a scale, patch or upgrade fails, then Rapid Home Provisioning reports the error and stops. After the problem is corrected (for example, a directory permissions or ownership misconfiguration on a target node), you can rerun the RHPCTL command that failed, and it will resume from the point of failure. This avoids redoing any work that may have been completed prior to the failure.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Audit Command</p>
                  <p>The Rapid Home Provisioning Server records the execution of all Rapid Home Provisioning operations and also records their outcome (whether success or failure). An audit mechanism enables you to query the audit log in a variety of dimensions, and also to manage its contents and size.</p>
               </div>
               <!-- class="section" -->
               <div class="infoboxnote" id="GUID-CCEC5960-EDA4-4A3F-9643-0CA308EA49AA__GUID-9726D570-4A7D-4DF5-8464-8E4C2769B59B">
                  <p class="notep1">Note:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Oracle does not support Rapid Home Provisioning on HP-UX or Windows operating systems.</p>
                     </li>
                     <li>
                        <p>The Rapid Home Provisioning Server does not manage operating system images.</p>
                     </li>
                  </ul>
               </div>
               <p>This section includes the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="rapid-home-provisioning.html#GUID-CA5067D0-3847-48F5-BBC7-37617DDBCF66" title="Conceptual information regarding Rapid Home Provisioning architecture.">Rapid Home Provisioning Architecture</a></p>
                  </li>
                  <li>
                     <p><a href="rapid-home-provisioning.html#GUID-33FC643F-0A2C-4EFF-A13A-D3054D945119" title="Implementing Rapid Home Provisioning involves creating a Rapid Home Provisioning Server, adding gold images to the server, and creating working copies to provision software.">Rapid Home Provisioning Implementation</a></p>
                  </li>
                  <li>
                     <p><a href="rapid-home-provisioning.html#GUID-F4F263A1-0580-4386-B929-5252A196632E" title="The Rapid Home Provisioning Server provides an efficient and secure platform for the distribution of Oracle Grid Infrastructure homes to targets and Rapid Home Provisioning Clients.">Oracle Grid Infrastructure Management</a></p>
                  </li>
                  <li>
                     <p><a href="rapid-home-provisioning.html#GUID-F1F48984-C440-44F4-9D62-BDB4BE1CDB4A" title="The Rapid Home Provisioning Server provides an efficient and secure platform for the distribution of Oracle Database Homes to targets and Rapid Home Provisioning Clients.">Oracle Database Software Management</a></p>
                  </li>
                  <li>
                     <p><a href="rapid-home-provisioning.html#GUID-6CDC373B-6261-4BF8-BD60-2E9E2C3E0168" title="Oracle recommends out-of-place patching when applying updates.">Persistent Home Path During Patching</a></p>
                  </li>
                  <li>
                     <p><a href="rapid-home-provisioning.html#GUID-8D6EC31C-C179-4939-B153-C02F4398C9E0" title="Management tasks for Rapid Home Provisioning Clients include creation, enabling and disabling, creating users and assigning roles to those users, and managing passwords.">Managing Rapid Home Provisioning Clients</a></p>
                  </li>
               </ul>
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/cwadd&amp;id=RIGEN"><span><cite>Oracle Real Application Clusters Installation Guide</cite></span></a></li>
                  </ul>
               </div>
            </div><a id="CWADD92545"></a><div class="props_rev_3"><a id="GUID-CA5067D0-3847-48F5-BBC7-37617DDBCF66" name="GUID-CA5067D0-3847-48F5-BBC7-37617DDBCF66"></a><h3 id="CWADD-GUID-CA5067D0-3847-48F5-BBC7-37617DDBCF66" class="sect3"><span class="enumeration_section">5.1 </span>Rapid Home Provisioning Architecture
               </h3>
               <div>
                  <p>Conceptual information regarding Rapid Home Provisioning architecture.</p>
                  <p>The Rapid Home Provisioning architecture consists of a Rapid Home Provisioning Server and any number of Rapid Home Provisioning Clients and targets. Oracle recommends deploying the Rapid Home Provisioning Server in a multi-node cluster so that it is highly available.</p>
                  <p>The Rapid Home Provisioning Server cluster is a repository for all data, of which there are primarily two types:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Gold images</p>
                     </li>
                     <li>
                        <p>Metadata related to users, roles, permissions, and identities</p>
                     </li>
                  </ul>
                  <p>The Rapid Home Provisioning Server acts as a central server for provisioning Oracle Database homes, Oracle Grid Infrastructure homes, and other application software homes, making them available to the cluster hosting the Rapid Home Provisioning Server and to the Rapid Home Provisioning Client clusters and targets.</p>
                  <p>Users operate on the Rapid Home Provisioning Server or Rapid Home Provisioning Client to request deployment of Oracle homes or to query gold images. When a user makes a request for an Oracle home, specifying a gold image, the Rapid Home Provisioning Client communicates with the Rapid Home Provisioning Server to pass on the request. The Rapid Home Provisioning Server processes the request by taking appropriate action to instantiate a copy of the gold image, and to make it available to the Rapid Home Provisioning Client cluster using available technologies such as Oracle Automatic Storage Management Cluster File System (Oracle ACFS), network file systems (NFSs), and local file systems.</p>
               </div><a id="CWADD92585"></a><div class="props_rev_3"><a id="GUID-3B15B8F9-208E-4881-B62F-1B35E70FB64E" name="GUID-3B15B8F9-208E-4881-B62F-1B35E70FB64E"></a><h4 id="CWADD-GUID-3B15B8F9-208E-4881-B62F-1B35E70FB64E" class="sect4"><span class="enumeration_section">5.1.1 </span>Rapid Home Provisioning Server
                  </h4>
                  <div>
                     <p>The Rapid Home Provisioning Server is a highly available software provisioning system that uses Oracle Automatic Storage Management (Oracle ASM), Oracle Automatic Storage Management Cluster File System (Oracle ACFS), Grid Naming Service (GNS), and other components.</p>
                     <p>The Rapid Home Provisioning Server primarily acts as a central server for provisioning Oracle homes, making them available to Rapid Home Provisioning Client and targets.</p>
                     <p>Features of the Rapid Home Provisioning Server:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Efficiently stores gold images and image series for the managed homes, including separate binaries, and metadata related to users, roles, and permissions.</p>
                        </li>
                        <li>
                           <p>Provides highly available network file system (HANFS) exports for homes accessed using mounts on remote clusters.</p>
                        </li>
                        <li>
                           <p>Provides a list of available homes to clients upon request.</p>
                        </li>
                        <li>
                           <p>Patch a software home once and then deploy the home to any Rapid Home Provisioning Client or any other target, instead of patching every site.</p>
                        </li>
                        <li>
                           <p>Provides the ability to report on existing deployments.</p>
                        </li>
                        <li>
                           <p>Deploys homes on physical servers and virtual machines.</p>
                        </li>
                        <li>
                           <p>Notifies subscribers of changes to image series.</p>
                        </li>
                        <li>
                           <p>Maintains an audit log of all RHPCTL commands run.</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-817F0470-7F7F-446B-9160-AA63DE5EF09E" name="GUID-817F0470-7F7F-446B-9160-AA63DE5EF09E"></a><h4 id="CWADD-GUID-817F0470-7F7F-446B-9160-AA63DE5EF09E" class="sect4"><span class="enumeration_section">5.1.2 </span>Rapid Home Provisioning Targets
                  </h4>
                  <div>
                     <p>Computers that Rapid Home Provisioning is aware of are known as targets.</p>
                     <p>Rapid Home Provisioning Servers in Oracle Clusterware 12<span class="italic">c</span> release 1 (12.1) can only communicate with Rapid Home Provisioning Clients from the same Oracle Clusterware release. Rapid Home Provisioning Servers in Oracle Clusterware 12<span class="italic">c</span> release 2 (12.2) can create new targets, and can also install and configure Oracle Grid Infrastructure on targets with only an operating system installed.
                     </p>
                     <p>Subsequently, Rapid Home Provisioning Server can provision database and other software on those targets. The communication between the Rapid Home Provisioning Server is always one way, from Server to target, with targets running Oracle Clusterware 11<span class="italic">g</span> and Oracle Clusterware 12<span class="italic">c</span> and no Rapid Home Provisioning Client present. The communication between a Rapid Home Provisioning Server and a Rapid Home Provisioning Client running Oracle Clusterware 12<span class="italic">c</span> release 2 (12.2) flows in both directions.
                     </p>
                  </div>
               </div><a id="CWADD92586"></a><div class="props_rev_3"><a id="GUID-67917A2D-9C1E-423D-9BCB-FDD88E5663DD" name="GUID-67917A2D-9C1E-423D-9BCB-FDD88E5663DD"></a><h4 id="CWADD-GUID-67917A2D-9C1E-423D-9BCB-FDD88E5663DD" class="sect4"><span class="enumeration_section">5.1.3 </span>Rapid Home Provisioning Clients
                  </h4>
                  <div>
                     <p>The Rapid Home Provisioning Client is part of the Oracle Grid Infrastructure. Users operate on a Rapid Home Provisioning Client to perform tasks such as requesting deployment of Oracle homes and listing available gold images.</p>
                     <p>When a user requests an Oracle home specifying a gold image, the Rapid Home Provisioning Client communicates with the Rapid Home Provisioning Server to pass on the request. The Rapid Home Provisioning Server processes the request by instantiating a working copy of the gold image and making it available to the Rapid Home Provisioning Client using Oracle ACFS, a different local file system, or through NFS.</p>
                     <p>The Rapid Home Provisioning Client:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Can use Oracle ACFS to store working copies which can be rapidly provisioned as local homes; new homes can be quickly created or undone using Oracle ACFS snapshots.</p>
                           <div class="infoboxnote" id="GUID-67917A2D-9C1E-423D-9BCB-FDD88E5663DD__GUID-E97A141E-2147-487D-8B9F-E88A25B2E8F0">
                              <p class="notep1">Note:</p>
                              <p>Oracle supports using other local file systems besides Oracle ACFS.</p>
                           </div>
                        </li>
                        <li>
                           <p>Provides a list of available homes from the Rapid Home Provisioning Server.</p>
                        </li>
                        <li>
                           <p>Allows high availability NFS (HANFS) mounts from the Rapid Home Provisioning Server to be provisioned as working copies on the Rapid Home Provisioning Client cluster.</p>
                        </li>
                        <li>
                           <p>Has full functionality in Oracle Clusterware 12<span class="italic">c</span> release 2 (12.2) and can communicate with Rapid Home Provisioning Servers from Oracle Clusterware 12<span class="italic">c</span> release 2 (12.2), or later.
                           </p>
                        </li>
                     </ul>
                     <p>The NFS home client is a Rapid Home Provisioning Client that does not have Oracle ACFS installed, but can still access the Rapid Home Provisioning Server through an NFS protocol.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="rapid-home-provisioning.html#GUID-E65C9FC4-C8AC-4BF6-A689-A70C70B3A636" title="Users operate on a Rapid Home Provisioning Client to perform tasks such as requesting deployment of Oracle homes and querying gold images.">Creating a Rapid Home Provisioning Client</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92588"></a><div class="props_rev_3"><a id="GUID-3AE65540-02ED-4178-8ACC-BC45094C214B" name="GUID-3AE65540-02ED-4178-8ACC-BC45094C214B"></a><h4 id="CWADD-GUID-3AE65540-02ED-4178-8ACC-BC45094C214B" class="sect4"><span class="enumeration_section">5.1.4 </span>Rapid Home Provisioning Roles
                  </h4>
                  <div>
                     <p>An administrator assigns <a id="d24937e1058" class="indexterm-anchor"></a>roles to Rapid Home Provisioning users with access-level permissions defined for each role. Users on Rapid Home Provisioning Clients are also assigned specific roles. Rapid Home Provisioning includes basic built-in and composite built-in roles.
                     </p>
                  </div>
                  <div class="props_rev_3"><a id="GUID-BBB0C3C2-40C5-4595-A699-C410EB9BCD1A" name="GUID-BBB0C3C2-40C5-4595-A699-C410EB9BCD1A"></a><h5 id="CWADD-GUID-BBB0C3C2-40C5-4595-A699-C410EB9BCD1A" class="sect5"><span class="enumeration_section">5.1.4.1 </span>Basic Built-In Roles
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <a id="d24937e1177" class="indexterm-anchor"></a>basic built-in roles and their functions are:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>GH_ROLE_ADMIN: An administrative role for everything related to roles. Users assigned this role are able to run <code class="codeph">rhpctl <span class="variable">verb</span> role</code> commands.
                                 </p>
                              </li>
                              <li>
                                 <p>GH_SITE_ADMIN: An administrative role for everything related to Rapid Home Provisioning Clients. Users assigned this role are able to run <code class="codeph">rhpctl <span class="variable">verb</span> client</code> commands.
                                 </p>
                              </li>
                              <li>
                                 <p>GH_SERIES_ADMIN: An administrative role for everything related to image series. Users assigned this role are able to run <code class="codeph">rhpctl <span class="variable">verb</span> series</code> commands.
                                 </p>
                              </li>
                              <li>
                                 <p>GH_SERIES_CONTRIB: Users assigned this role can add images to a series using the <code class="codeph">rhpctl insertimage series</code> command, or delete images from a series using the <code class="codeph">rhpctl deleteimage series</code> command.
                                 </p>
                              </li>
                              <li>
                                 <p>GH_WC_ADMIN: An administrative role for everything related to working copies. Users assigned this role are able to run <code class="codeph">rhpctl <span class="variable">verb</span> workingcopy</code> commands.
                                 </p>
                              </li>
                              <li>
                                 <p>GH_WC_OPER: A role that enables users to create a working copy for themselves or others using the <code class="codeph">rhpctl add workingcopy</code> command with the <code class="codeph">-user</code> option (when creating for others). Users assigned this role do not have administrative privileges and can only administer the working copies that they create.
                                 </p>
                              </li>
                              <li>
                                 <p>GH_WC_USER: A role that enables users to create a working copy using the <code class="codeph">rhpctl add workingcopy</code> command. Users assigned this role do not have administrative privileges and can only delete working copies that they create.
                                 </p>
                              </li>
                              <li>
                                 <p>GH_IMG_ADMIN: An administrative role for everything related to images. Users assigned this role are able to run <code class="codeph">rhpctl <span class="variable">verb</span> image</code> commands.
                                 </p>
                              </li>
                              <li>
                                 <p>GH_IMG_USER: A role that enables users to create an image using the <code class="codeph">rhpctl add | import image</code> commands. Users assigned this role do not have administrative privileges and can only delete images that they create.
                                 </p>
                              </li>
                              <li>
                                 <p>GH_IMG_TESTABLE: A role that enables users to add a working copy of an image that is in the <code class="codeph">TESTABLE</code> state. Users assigned this role must also be assigned either the GH_WC_ADMIN role or the GH_WC_USER role to add a working copy.
                                 </p>
                              </li>
                              <li>
                                 <p>GH_IMG_RESTRICT: A role that enables users to add a working copy from an image that is in the <code class="codeph">RESTRICTED</code> state. Users assigned this role must also be assigned either the GH_WC_ADMIN role or the GH_WC_USER role to add a working copy.
                                 </p>
                              </li>
                              <li>
                                 <p>GH_IMG_PUBLISH: Users assigned this role can promote an image to another state or retract an image from the <code class="codeph">PUBLISHED</code> state to either the <code class="codeph">TESTABLE</code> or <code class="codeph">RESTRICTED</code> state.
                                 </p>
                              </li>
                              <li>
                                 <p>GH_IMG_VISIBILITY: Users assigned this role can modify access to promoted or published images using the <code class="codeph">rhpctl allow | disallow image</code> commands.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-DDFA409C-8C12-453E-907D-6D75E50BFE7B" name="GUID-DDFA409C-8C12-453E-907D-6D75E50BFE7B"></a><h5 id="CWADD-GUID-DDFA409C-8C12-453E-907D-6D75E50BFE7B" class="sect5"><span class="enumeration_section">5.1.4.2 </span>Composite Built-In Roles
                     </h5>
                     <div>
                        <div class="section">
                           <p>The <a id="d24937e1405" class="indexterm-anchor"></a>composite built-in roles and their functions are:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>GH_SA: The Oracle Grid Infrastructure user on a Rapid Home Provisioning Server automatically inherits this role.</p>
                                 <p>The GH_SA role includes the following basic built-in roles: GH_ROLE_ADMIN, GH_SITE_ADMIN, GH_SERIES_ADMIN, GH_SERIES_CONTRIB, GH_WC_ADMIN, GH_IMG_ADMIN, GH_IMG_TESTABLE, GH_IMG_RESTRICT, GH_IMG_PUBLISH, and GH_IMG_VISIBILITY.</p>
                              </li>
                              <li>
                                 <p>GH_CA: The Oracle Grid Infrastructure user on a Rapid Home Provisioning Client automatically inherits this role.</p>
                                 <p>The GH_CA role includes the following basic built-in roles: GH_SERIES_ADMIN, GH_SERIES_CONTRIB, GH_WC_ADMIN, GH_IMG_ADMIN, GH_IMG_TESTABLE, GH_IMG_RESTRICT, GH_IMG_PUBLISH, and GH_IMG_VISIBILITY.</p>
                              </li>
                              <li>
                                 <p>GH_OPER: This role includes the following built-in roles: GH_WC_OPER, GH_SERIES_ADMIN, GH_IMG_TESTABLE, GH_IMG_RESTRICT, and GH_IMG_USER. Users assigned this role can delete only images that they have created.</p>
                              </li>
                           </ul>
                           <p>Consider a gold image called <code class="codeph">G1</code> that is available on the Rapid Home Provisioning Server.
                           </p>
                           <p>Further consider that a user, <code class="codeph">U1</code>, on a Rapid Home Provisioning Client, <code class="codeph">Cl1</code>, has the GH_WC_USER role. If <code class="codeph">U1</code> requests to provision an Oracle home based on the gold image <code class="codeph">G1</code>, then <code class="codeph">U1</code> can do so, because of the permissions granted by the GH_WC_USER role. If <code class="codeph">U1</code> requests to delete <code class="codeph">G1</code>, however, then that request would be denied because the GH_WC_USER role does not have the necessary permissions.
                           </p>
                           <p>The Rapid Home Provisioning Server can associate user-role mappings to the Rapid Home Provisioning Client. After the Rapid Home Provisioning Server delegates user-role mappings, the Rapid Home Provisioning Client can then modify user-role mappings on the Rapid Home Provisioning Server for all users that belong to the Rapid Home Provisioning Client. This is implied by the fact that only the Rapid Home Provisioning Server qualifies user IDs from a Rapid Home Provisioning Client site with the client cluster name of that site. Thus, the Rapid Home Provisioning Client <code class="codeph">CL1</code> will not be able to update user mappings of a user on <code class="codeph">CL2</code>, where <code class="codeph">CL2</code> is the cluster name of a different Rapid Home Provisioning Client.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="CWADD93060"></a><div class="props_rev_3"><a id="GUID-DF1DCE94-B92D-4925-971C-6C60929E455F" name="GUID-DF1DCE94-B92D-4925-971C-6C60929E455F"></a><h4 id="CWADD-GUID-DF1DCE94-B92D-4925-971C-6C60929E455F" class="sect4"><span class="enumeration_section">5.1.5 </span>Rapid Home Provisioning Images
                  </h4>
                  <div>
                     <p></p>
                     <p>By default, when you create a gold image using either <code class="codeph">rhpctl import image</code> or <code class="codeph">rhpctl add image</code>, the image is ready to provision working copies. However, under certain conditions, you may want to restrict access to images and require someone to test or validate the image before making it available for general use.
                     </p>
                     <p>You can also create a set of gold images on the Rapid Home Provisioning Server that can be collectively categorized as a gold image series which relate to each other, such as identical release versions, gold images published by a particular user, or images for a particular department within an organization.</p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="rapid-home-provisioning.html#GUID-7D5E221B-4F74-4ECE-ADD1-6F060D6D7A7C">Image State</a></li>
                           <li><a href="rapid-home-provisioning.html#GUID-1FE5E4A1-3920-467C-B2DD-749F436D35E6" title="An image series is a convenient way to group different gold images into a logical sequence.">Image Series</a></li>
                           <li><a href="rapid-home-provisioning.html#GUID-E3AF7DAC-8612-445B-9368-60A30C1DA474" title="When you add or import a gold image, you must specify an image type. Oracle Clusterware provides three built-in image types: ORACLEDBSOFTWARE, ORACLEGISOFTWARE, and SOFTWARE, and you can create custom image types.">Image Type</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A12679AF-D30B-4E96-94AF-ED2AA703F428" name="GUID-A12679AF-D30B-4E96-94AF-ED2AA703F428"></a><h4 id="CWADD-GUID-A12679AF-D30B-4E96-94AF-ED2AA703F428" class="sect4"><span class="enumeration_section">5.1.6 </span>Rapid Home Provisioning Server Auditing
                  </h4>
                  <div>
                     <p>The Rapid Home Provisioning Server records the execution of all Rapid Home Provisioning operations, and also records whether those operations succeeded or failed.</p>
                     <div class="section">
                        <p>An audit mechanism enables administrators to query the audit log in a variety of dimensions, and also to manage its contents and size.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-80D9C9A4-12EF-4D3C-8750-DCF3A4933C2E" name="GUID-80D9C9A4-12EF-4D3C-8750-DCF3A4933C2E"></a><h4 id="CWADD-GUID-80D9C9A4-12EF-4D3C-8750-DCF3A4933C2E" class="sect4"><span class="enumeration_section">5.1.7 </span>Rapid Home Provisioning Notifications
                  </h4>
                  <div>
                     <p>The Rapid Home Provisioning Server is the central repository for the software homes available to the data center. Therefore, it is essential for administrators throughout the data center to be aware of changes to the inventory that may impact their areas of responsibility.</p>
                     <div class="section">
                        <p>You can create subscriptions to image series events. Rapid Home Provisioning notifies a subscribed role or number of users by email of any changes to the images available in the series, including addition or removal of an image. Each series may have a unique group of subscribers.</p>
                        <p>Also, when a working copy is added to or deleted from a target, the owner of the working copy and any additional users can be notified by email. If you want to enable notifications for additional Rapid Home Provisioning events, you can create a user-defined action as described in the next section.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A3D8F47A-688B-4404-BAC9-3AFD2DA124BE" name="GUID-A3D8F47A-688B-4404-BAC9-3AFD2DA124BE"></a><h4 id="CWADD-GUID-A3D8F47A-688B-4404-BAC9-3AFD2DA124BE" class="sect4"><span class="enumeration_section">5.1.8 </span>User-Defined Actions
                  </h4>
                  <div>
                     <p>You can create actions for various Rapid Home Provisioning operations, such as import image, add and delete working copy, and add, delete, move, and upgrade a software home.</p>
                     <div class="section">
                        <p>You can create actions for various Rapid Home Provisioning operations, such as import image, add and delete working copy, and add, delete, move, and upgrade a software home. You can define different actions for each operation, which can be further differentiated by the type of image to which the operation applies. User-defined actions can be run before or after a given operation, and are run on the deployment on which the operation is run, whether it be a Rapid Home Provisioning Server, a Rapid Home Provisioning Client (12<span class="italic">c</span> release 2 (12.2), or later), or a target that is not running a Rapid Home Provisioning Client.
                        </p>
                        <p>User-defined actions are shell scripts which are stored on the Rapid Home Provisioning Server. When a script runs, it is given relevant information about the operation on the command line. Also, you can associate a file with the script. The Rapid Home Provisioning Server will copy that file to the same location on the Client or target where the script is run.</p>
                        <p>For example, perhaps you want to create user-defined actions that are run after a database upgrade, and you want to define different actions for Oracle Database 11<span class="italic">g</span> and 12<span class="italic">c</span>. This requires you to define new image types, as in the following example procedure.
                        </p>
                        <ol>
                           <li>
                              <p>Create a new image type, (<code class="codeph">DB11IMAGE</code>, for example), based on the ORACLEDBSOFTWARE image type, as follows:
                              </p><pre class="pre codeblock"><code>$ rhpctl add imagetype -imagetype DB11IMAGE -basetype ORACLEDBSOFTWARE</code></pre><p>When you add or import an Oracle Database 11<span class="italic">g</span> gold image, you specify the image type as <code class="codeph">DB11IMAGE</code>.
                              </p>
                           </li>
                           <li>
                              <p>Define a user action and associate it with the <code class="codeph">DB11IMAGE</code> image type and the upgrade operation. You can have different actions that are run before or after upgrade.
                              </p>
                           </li>
                           <li>
                              <div class="p">To define an action for Oracle Database 12<span class="italic">c</span>, create a new image type (<code class="codeph">DB12IMAGE</code>, for example) that is based on the ORACLEDBSOFTWARE image type, as in the preceding step, but with the <code class="codeph">DB12IMAGE</code> image type.
                                 <div class="infoboxnote" id="GUID-A3D8F47A-688B-4404-BAC9-3AFD2DA124BE__GUID-6D2C5185-5278-4E25-9325-D5D2E1E68CC2">
                                    <p class="notep1">Note:</p>If you define user actions for the base type of a user-defined image type (in this case the base type is ORACLEDBSOFTWARE), then Rapid Home Provisioning performs those actions before the actions for the user-defined image type.
                                 </div>
                              </div>
                           </li>
                        </ol>
                        <p>You can modify the image type of an image using the <code class="codeph">rhpctl modify image</code> command. Additionally, you can modify, add, and delete other actions. The following two tables<a href="rapid-home-provisioning.html#GUID-A3D8F47A-688B-4404-BAC9-3AFD2DA124BE__GUID-8C76537B-0D99-4674-AB59-48B303BDB7EB" title="Lists various Rapid Home Provisioning operations that you can define and their associated parameters.">Table 5-1</a> and <a href="rapid-home-provisioning.html#GUID-A3D8F47A-688B-4404-BAC9-3AFD2DA124BE__GUID-E7885154-CB30-4E23-BE67-E6C835B1AD71" title="Lists and describes the parameters you can use with various user-defined operations">Table 5-2</a> list the operations you can customize and the parameters you can use to define those operations, respectively.
                        </p>
                        <div class="tblformal" id="GUID-A3D8F47A-688B-4404-BAC9-3AFD2DA124BE__GUID-8C76537B-0D99-4674-AB59-48B303BDB7EB">
                           <p class="titleintable">Table 5-1 Rapid Home Provisioning User-Defined Operations</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Rapid Home Provisioning User-Defined Operations" summary="Lists various Rapid Home Provisioning operations that you can define and their associated parameters." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d24937e2055">Operation</th>
                                    <th align="left" valign="bottom" width="20%" id="d24937e2057">Parameter List</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2061" headers="d24937e2055 "><code class="codeph">IMPORT_IMAGE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2061 d24937e2057 ">
                                       <p><code class="codeph">RHP_OPTYPE</code>, <code class="codeph">RHP_PHASE</code>, <code class="codeph">RHP_PATH</code>, <code class="codeph">RHP_PATHOWNER</code>, <code class="codeph">RHP_PROGRESSLISTENERHOST</code>, <code class="codeph">RHP_PROGRESSLISTENERPORT</code>, <code class="codeph">RHP_IMAGE</code>, <code class="codeph">RHP_IMAGETYPE</code>, <code class="codeph">RHP_VERSION</code>, <code class="codeph">RHP_CLI</code>, <code class="codeph">RHP_USERACTIONDATA</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2100" headers="d24937e2055 "><code class="codeph">ADD_WORKINGCOPY</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2100 d24937e2057 ">
                                       <p><code class="codeph">RHP_OPTYPE</code>, <code class="codeph">RHP_PHASE</code>, <code class="codeph">RHP_WORKINGCOPY</code>, <code class="codeph">RHP_PATH</code>, <code class="codeph">RHP_STORAGETYPE</code>, <code class="codeph">RHP_USER</code>, <code class="codeph">RHP_NODES</code>, <code class="codeph">RHP_ORACLEBASE</code>, <code class="codeph">RHP_DBNAME</code>, <code class="codeph">RHP_PROGRESSLISTENERHOST</code>, <code class="codeph">RHP_PROGRESSLISTENERPORT</code>, <code class="codeph">RHP_IMAGE</code>, <code class="codeph">RHP_IMAGETYPE</code>, <code class="codeph">RHP_VERSION</code>, <code class="codeph">RHP_CLI</code>, <code class="codeph">RHP_USERACTIONDATA</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2155" headers="d24937e2055 "><code class="codeph">ADD_DATABASE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2155 d24937e2057 ">
                                       <p><code class="codeph">RHP_OPTYPE</code>, <code class="codeph">RHP_PHASE</code>, <code class="codeph">RHP_WORKINGCOPY</code>, <code class="codeph">RHP_CLIENT</code>, <code class="codeph">RHP_DBNAME</code>, <code class="codeph">RHP_PROGRESSLISTENERHOST</code>, <code class="codeph">RHP_PROGRESSLISTENERPORT</code>, <code class="codeph">RHP_IMAGE</code>, <code class="codeph">RHP_IMAGETYPE</code>, <code class="codeph">RHP_VERSION</code>, <code class="codeph">RHP_CLI</code>, <code class="codeph">RHP_USERACTIONDATA</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2197" headers="d24937e2055 "><code class="codeph">DELETE_WORKINGCOPY</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2197 d24937e2057 ">
                                       <p><code class="codeph">RHP_OPTYPE</code>, <code class="codeph">RHP_PHASE</code>, <code class="codeph">RHP_WORKINGCOPY</code>, <code class="codeph">RHP_CLIENT</code>, <code class="codeph">RHP_PATH</code>, <code class="codeph">RHP_PROGRESSLISTENERHOS</code>, <code class="codeph">RHP_PROGRESSLISTENERPORT</code>, <code class="codeph">RHP_IMAGE</code>, <code class="codeph">RHP_IMAGETYPE</code>, <code class="codeph">RHP_VERSION</code>, <code class="codeph">RHP_CLI</code>, <code class="codeph">RHP_USERACTIONDATA</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2239" headers="d24937e2055 "><code class="codeph">DELETE_DATABASE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2239 d24937e2057 ">
                                       <p><code class="codeph">RHP_OPTYPE</code>, <code class="codeph">RHP_PHASE</code>, <code class="codeph">RHP_WORKINGCOPY</code>, <code class="codeph">RHP_CLIENT</code>, <code class="codeph">RHP_DBNAME</code>, <code class="codeph">RHP_PROGRESSLISTENERHOST</code>, <code class="codeph">RHP_PROGRESSLISTENERPORT</code>, <code class="codeph">RHP_IMAGE</code>, <code class="codeph">RHP_IMAGETYPE</code>, <code class="codeph">RHP_VERSION</code>, <code class="codeph">RHP_CLI</code>, <code class="codeph">RHP_USERACTIONDATA</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2281" headers="d24937e2055 "><code class="codeph">MOVE_GIHOME</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2281 d24937e2057 ">
                                       <p><code class="codeph">RHP_OPTYPE</code>, <code class="codeph">RHP_PHASE</code>, <code class="codeph">RHP_SOURCEWC</code>, <code class="codeph">RHP_SOURCEPATH</code>, <code class="codeph">RHP_DESTINATIONWC</code>, <code class="codeph">RHP_DESTINATIONPATH</code>, <code class="codeph">RHP_IMAGE</code>, <code class="codeph">RHP_IMAGETYPE</code>, <code class="codeph">RHP_PROGRESSLISTENERHOS</code>, <code class="codeph">RHP_PROGRESSLISTENERPORT</code>, <code class="codeph">RHP_VERSION</code>, <code class="codeph">RHP_CL</code>, <code class="codeph">RHP_USERACTIONDATA</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2327" headers="d24937e2055 "><code class="codeph">MOVE_DATABASE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2327 d24937e2057 ">
                                       <p><code class="codeph">RHP_OPTYPE</code>, <code class="codeph">RHP_PHASE</code>, <code class="codeph">RHP_SOURCEWC</code>, <code class="codeph">RHP_SOURCEPATH</code>, <code class="codeph">RHP_DESTINATIONWC</code>, <code class="codeph">RHP_DESTINATIONPATH</code>, <code class="codeph">RHP_DBNAME</code>, <code class="codeph">RHP_IMAGE</code>, <code class="codeph">RHP_IMAGETYPE</code>, <code class="codeph">RHP_PROGRESSLISTENERHOST</code>, <code class="codeph">RHP_PROGRESSLISTENERPORT</code>, <code class="codeph">RHP_VERSION</code>, <code class="codeph">RHP_CLI</code>, <code class="codeph">RHP_DATAPATCH</code>, <code class="codeph">RHP_USERACTIONDATA</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2379" headers="d24937e2055 "><code class="codeph">UPGRADE_GIHOME</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2379 d24937e2057 ">
                                       <p><code class="codeph">RHP_OPTYPE</code>, <code class="codeph">RHP_PHASE</code>, <code class="codeph">RHP_SOURCEWC</code>, <code class="codeph">RHP_SOURCEPATH</code>, <code class="codeph">RHP_DESTINATIONWC</code>, <code class="codeph">RHP_DESTINATIONPATH</code>, <code class="codeph">RHP_IMAGE</code>, <code class="codeph">RHP_IMAGETYPE</code>, <code class="codeph">RHP_PROGRESSLISTENERHOST</code>, <code class="codeph">RHP_PROGRESSLISTENERPORT</code>, <code class="codeph">RHP_VERSION</code>, <code class="codeph">RHP_CLI</code>, <code class="codeph">RHP_USERACTIONDATA</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2425" headers="d24937e2055 "><code class="codeph">UPGRADE_DATABASE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2425 d24937e2057 ">
                                       <p><code class="codeph">RHP_OPTYPE</code>, <code class="codeph">RHP_PHASE</code>, <code class="codeph">RHP_SOURCEWC</code>, <code class="codeph">RHP_SOURCEPATH</code>, <code class="codeph">RHP_DESTINATIONWC</code>, <code class="codeph">RHP_DESTINATIONPATH</code>, <code class="codeph">RHP_DBNAME</code>, <code class="codeph">RHP_IMAGE</code>, <code class="codeph">RHP_IMAGETYPE</code>, <code class="codeph">RHP_PROGRESSLISTENERHOST</code>, <code class="codeph">RHP_PROGRESSLISTENERPORT</code>, <code class="codeph">RHP_VERSION</code>, <code class="codeph">RHP_CLI</code>, <code class="codeph">RHP_USERACTIONDATA</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2474" headers="d24937e2055 "><code class="codeph">ADDNODE_DATABASE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2474 d24937e2057 ">
                                       <p><code class="codeph">RHP_OPTYPE</code>, <code class="codeph">RHP_PHASE</code>, <code class="codeph">RHP_WORKINGCOPY</code>, <code class="codeph">RHP_CLIENT</code>, <code class="codeph">RHP_DBNAME</code>, <code class="codeph">RHP_PROGRESSLISTENERHOST</code>, <code class="codeph">RHP_PROGRESSLISTENERPORT</code>, <code class="codeph">RHP_IMAGE</code>, <code class="codeph">RHP_IMAGETYPE</code>, <code class="codeph">RHP_VERSION</code>, <code class="codeph">RHP_CLI</code>, <code class="codeph">RHP_USERACTIONDATA</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2516" headers="d24937e2055 "><code class="codeph">DELETENODE_DATABASE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2516 d24937e2057 ">
                                       <p><code class="codeph">RHP_OPTYPE</code>, <code class="codeph">RHP_PHASE</code>, <code class="codeph">RHP_WORKINGCOPY</code>, <code class="codeph">RHP_CLIENT</code>, <code class="codeph">RHP_DBNAME</code>, <code class="codeph">RHP_PROGRESSLISTENERHOST</code>, <code class="codeph">RHP_PROGRESSLISTENERPORT</code>, <code class="codeph">RHP_IMAGE</code>, <code class="codeph">RHP_IMAGETYPE</code>, <code class="codeph">RHP_VERSION</code>, <code class="codeph">RHP_CLI</code>, <code class="codeph">RHP_USERACTIONDATA</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2559" headers="d24937e2055 "><code class="codeph">ADDNODE_GIHOME</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2559 d24937e2057 ">
                                       <p><code class="codeph">RHP_OPTYPE</code>, <code class="codeph">RHP_PHASE</code>, <code class="codeph">RHP_WORKINGCOPY</code>, <code class="codeph">RHP_CLIENT</code>, <code class="codeph">RHP_PATH</code>, <code class="codeph">RHP_PROGRESSLISTENERHOST</code>, <code class="codeph">RHP_PROGRESSLISTENERPORT</code>, <code class="codeph">RHP_IMAGE</code>, <code class="codeph">RHP_IMAGETYPE</code>, <code class="codeph">RHP_VERSION</code>, <code class="codeph">RHP_CLI</code>, <code class="codeph">RHP_USERACTIONDATA</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2601" headers="d24937e2055 "><code class="codeph">DELETENODE_GIHOME</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2601 d24937e2057 ">
                                       <p><code class="codeph">RHP_OPTYPE</code>, <code class="codeph">RHP_PHASE</code>, <code class="codeph">RHP_WORKINGCOPY</code>, <code class="codeph">RHP_CLIENT</code>, <code class="codeph">RHP_PATH</code>, <code class="codeph">RHP_PROGRESSLISTENERHOST</code>, <code class="codeph">RHP_PROGRESSLISTENERPORT</code>, <code class="codeph">RHP_IMAGE</code>, <code class="codeph">RHP_IMAGETYPE</code>, <code class="codeph">RHP_VERSION</code>, <code class="codeph">RHP_CLI</code>, <code class="codeph">RHP_USERACTIONDATA</code></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2643" headers="d24937e2055 "><code class="codeph">ADDNODE_WORKINGCOPY</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2643 d24937e2057 ">
                                       <p><code class="codeph">RHP_OPTYPE</code>, <code class="codeph">RHP_PHASE</code>, <code class="codeph">RHP_WORKINGCOPY</code>, <code class="codeph">RHP_CLIENT</code>, <code class="codeph">RHP_PATH</code>, <code class="codeph">RHP_PROGRESSLISTENERHOST</code>, <code class="codeph">RHP_PROGRESSLISTENERPORT</code>, <code class="codeph">RHP_IMAGE</code>, <code class="codeph">RHP_IMAGETYPE</code>, <code class="codeph">RHP_VERSION</code>, <code class="codeph">RHP_CLI</code>, <code class="codeph">RHP_USERACTIONDATA</code></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="tblformal" id="GUID-A3D8F47A-688B-4404-BAC9-3AFD2DA124BE__GUID-E7885154-CB30-4E23-BE67-E6C835B1AD71">
                           <p class="titleintable">Table 5-2 User-Defined Operations Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="User-Defined Operations Parameters" summary="Lists and describes the parameters you can use with various user-defined operations" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d24937e2694">Parameter</th>
                                    <th align="left" valign="bottom" width="20%" id="d24937e2696">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2700" headers="d24937e2694 "><code class="codeph">RHP_OPTYPE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2700 d24937e2696 ">
                                       <p>The operation type for which the user action is being executed, as listed in the previous table.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2707" headers="d24937e2694 "><code class="codeph">RHP_PHASE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2707 d24937e2696 ">
                                       <p>This parameter indicates whether the user action is executed before or after the operation (is either PRE or POST).</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2714" headers="d24937e2694 "><code class="codeph">RHP_PATH</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2714 d24937e2696 ">
                                       <p>This is the path to the location of the software home. This parameter represents the path on the local node from where the RHPCTL command is being run for an <code class="codeph">IMPORT_IMAGE</code> operation. For all other operations, this path is present on the site where the operation is taking place.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2724" headers="d24937e2694 "><code class="codeph">RHP_PATHOWNER</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2724 d24937e2696 ">
                                       <p>The owner of the path for the gold image that is being imported.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2731" headers="d24937e2694 "><code class="codeph">RHP_PROGRESSLISTENERHOST</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2731 d24937e2696 ">
                                       <p>The host on which the progress listener is listening. You can use this parameter, together with a progress listener port, to create a TCP connection to print output to the console on which the RHPCTL command is being run.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2738" headers="d24937e2694 "><code class="codeph">RHP_PROGRESSLISTENERPORT</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2738 d24937e2696 ">
                                       <p>The port on which the progress listener host is listening. You can use this parameter, together with a progress listener host name, to create a TCP connection to print output to the console on which the RHPCTL command is being run.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2745" headers="d24937e2694 "><code class="codeph">RHP_IMAGE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2745 d24937e2696 ">
                                       <p>The image associated with the operation. In the case of a move operation, it will reflect the name of the destination image.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2752" headers="d24937e2694 "><code class="codeph">RHP_IMAGETYPE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2752 d24937e2696 ">
                                       <p>The image type of the image associated with the operation. In the case of a move operation, it will reflect the name of the destination image.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2759" headers="d24937e2694 "><code class="codeph">RHP_VERSION</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2759 d24937e2696 ">
                                       <p>The version of the Oracle Grid Infrastructure software running on the Rapid Home Provisioning Server.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2766" headers="d24937e2694 "><code class="codeph">RHP_CLI</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2766 d24937e2696 ">
                                       <p>The exact command that was run to invoke the operation.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2773" headers="d24937e2694 "><code class="codeph">RHP_STORAGETYPE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2773 d24937e2696 ">
                                       <p>The type of storage for the home (is either <code class="codeph">NFS</code>, <code class="codeph">LOCAL</code>, or <code class="codeph">RHP_MANAGED</code>)
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2790" headers="d24937e2694 "><code class="codeph">RHP_USER</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2790 d24937e2696 ">
                                       <p>The user for whom the operation is being performed.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2797" headers="d24937e2694 "><code class="codeph">RHP_NODES</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2797 d24937e2696 ">
                                       <p>The nodes on which a database will be created.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2804" headers="d24937e2694 "><code class="codeph">RHP_ORACLEBASE</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2804 d24937e2696 ">
                                       <p>The Oracle base location for the provisioned home.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2811" headers="d24937e2694 "><code class="codeph">RHP_DBNAME</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2811 d24937e2696 ">
                                       <p>The name of the database to be created.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2818" headers="d24937e2694 "><code class="codeph">RHP_CLIENT</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2818 d24937e2696 ">
                                       <p>The name of the client cluster.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2825" headers="d24937e2694 "><code class="codeph">RHP_SOURCEWC</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2825 d24937e2696 ">
                                       <p>The source working copy name for a patch of upgrade operation.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2832" headers="d24937e2694 "><code class="codeph">RHP_SOURCEPATH</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2832 d24937e2696 ">
                                       <p>The path of the source working copy home.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2839" headers="d24937e2694 "><code class="codeph">RHP_DESTINATIONWC</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2839 d24937e2696 ">
                                       <p>The destination working copy name for a patch or upgrade operation.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2846" headers="d24937e2694 "><code class="codeph">RHP_DESTINATIONPATH</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2846 d24937e2696 ">
                                       <p>The path of the destination working copy home.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2853" headers="d24937e2694 "><code class="codeph">RHP_DATAPATCH</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2853 d24937e2696 ">
                                       <p>This parameter is set to TRUE at the conclusion of the user action on the node where the SQL patch will be run after the move database operation is complete.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d24937e2860" headers="d24937e2694 "><code class="codeph">RHP_USERACTIONDATA</code></td>
                                    <td align="left" valign="top" width="20%" headers="d24937e2860 d24937e2696 ">
                                       <p>This parameter is present in all of the operations and is used to pass user-defined items to the user action as an argument during runtime.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Example of User-Defined Action</p>
                        <p>The following is a sample script that is registered as a user action for an <code class="codeph">ADD_WORKINGCOPY</code> operation:
                        </p><pre class="pre codeblock"><code><span class="bold">#!/bin/sh</span>
touch /tmp/SAMPLEOUT.txt;
echo $* &gt;&gt; /tmp/SAMPLEOUT.txt;</code></pre><p>The preceding user action is invoked as part of the following command:</p><pre class="pre codeblock"><code>$ rhpctl add workingcopy -workingcopy apachecopy -image apacheinstall 
  -path /scratch/mjkeenan/apacheinstallloc -sudouser mjkeenan -sudopath
  /usr/local/bin/sudo -node rws1290753 -user mjkeenan -useractiondata 
  "/tmp/SAMPLEUA.txt"</code></pre><p>When the user action gets invoked during this command, the command returns output similar to the following:</p><pre class="pre codeblock"><code><span class="bold">$ cat /tmp/SAMPLEOUT.txt</span>
RHP_OPTYPE=ADD_WORKINGCOPY
RHP_PHASE=PRE
RHP_WORKINGCOPY=apachecopy
RHP_PATH=/scratch/mjkeenan/apacheinstallloc
RHP_STORAGETYPE=
RHP_USER=mjkeenan
RHP_NODES=rws1290753
RHP_ORACLEBASE=
RHP_DBNAME=
RHP_PROGRESSLISTENERHOST=mds11042003.my.company.com
RHP_PROGRESSLISTENERPORT=58068
RHP_IMAGE=apacheinstall
RHP_IMAGETYPE=apachetype
RHP_VERSION=12.2.0.1.0
RHP_CLI=rhpctl__add__workingcopy__-image__apacheinstall__
  -path__/scratch/mjkeenan/apacheinstallloc__-node__rws1290753__
  -useractiondata__/tmp/SAMPLEUA.txt__-sudopath__/usr/local/bin/sudo__
  -workingcopy__apachecopy__-user__mjkeenan__
  -sudouser__mjkeenan__
RHP_USERACTIONDATA=/tmp/SAMPLEUA.txt</code></pre><div class="infoboxnote" id="GUID-A3D8F47A-688B-4404-BAC9-3AFD2DA124BE__GUID-929E539E-023C-4C7B-868D-D36A23FB1384">
                           <p class="notep1">Notes:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>In the preceding output example empty values terminate with an equals sign (<code class="codeph">=</code>).
                                 </p>
                              </li>
                              <li>
                                 <p>The spaces in the command-line value of the RHP_CLI parameter are replaced by two underscore characters (<code class="codeph">__</code>) to differentiate this from other parameters.
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="CWADD92589"></a><div class="props_rev_3"><a id="GUID-33FC643F-0A2C-4EFF-A13A-D3054D945119" name="GUID-33FC643F-0A2C-4EFF-A13A-D3054D945119"></a><h3 id="CWADD-GUID-33FC643F-0A2C-4EFF-A13A-D3054D945119" class="sect3"><span class="enumeration_section">5.2 </span>Rapid Home Provisioning Implementation
               </h3>
               <div>
                  <p>Implementing Rapid Home Provisioning involves creating a Rapid Home Provisioning Server, adding gold images to the server, and creating working copies to provision software.</p>
                  <p>After you install and configure Oracle Clusterware, you can configure and start using Rapid Home Provisioning. You must create a Rapid Home Provisioning Server where you create and store gold images of database and other software homes.</p>
               </div><a id="CWADD92648"></a><div class="props_rev_3"><a id="GUID-50B4A759-EE58-47AF-9B50-84572A58606A" name="GUID-50B4A759-EE58-47AF-9B50-84572A58606A"></a><h4 id="CWADD-GUID-50B4A759-EE58-47AF-9B50-84572A58606A" class="sect4"><span class="enumeration_section">5.2.1 </span>Creating a Rapid Home Provisioning Server
                  </h4>
                  <div>
                     <p>The Rapid Home Provisioning Server uses a repository that you create in an Oracle ACFS file system in which you store all the software homes that you want to make available to clients and targets.</p>
                     <div class="section">
                        <p>To create a Rapid Home Provisioning Server:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Use the Oracle ASM configuration assistant (ASMCA) to create an Oracle ASM disk group on the Rapid Home Provisioning Server to store software, as follows:</span><div><pre class="pre codeblock"><code>$ <span class="variable">Grid_home</span>/bin/asmca</code></pre><p>Because this disk group is used to store software, Oracle recommends a minimum of 50 GB for this disk group.</p>
                              <div class="infoboxnote" id="GUID-50B4A759-EE58-47AF-9B50-84572A58606A__GUID-9549C3DB-B206-4219-840D-065F282FC846">
                                 <p class="notep1">Note:</p>
                                 <p>You must set Oracle ASM Dynamic Volume Manager (Oracle ADVM) compatibility settings for this disk group to <code class="codeph">12.1</code>.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Provide a mount path that exists on all nodes of the cluster. The Rapid Home Provisioning Server uses this path to mount gold images.</span><div><pre class="pre codeblock"><code>$ mkdir -p <span class="variable">storage_path</span>/images</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>As <code class="codeph">root</code>, create the Rapid Home Provisioning Server resource, as follows:</span><div><pre class="pre codeblock"><code># <span class="variable">Grid_home</span>/bin/srvctl add rhpserver -storage <span class="variable">storage_path</span>
    -diskgroup <span class="variable">disk_group_name</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Start the Rapid Home Provisioning Server, as follows:</span><div><pre class="pre codeblock"><code>$ <span class="variable">Grid_home</span>/bin/srvctl start rhpserver</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>After you start the Rapid Home Provisioning Server, use the Rapid Home Provisioning Control (RHPCTL) utility to further manage Rapid Home Provisioning.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../ostmg/diskgroup-compatibility.html#OSTMG-GUID-FBB5AA72-5208-48E1-BD8D-0FD4C6876F34"><span><cite>Oracle Automatic Storage Management Administrator's Guide</cite></span></a></li>
                           <li><a href="rapid-home-provisioning-and-server-control-command-reference.html#GUID-66345667-F035-4ADB-A25F-5530299E04B7" title="Use the Rapid Home Provisioning Control (RHPCTL) utility to manage Rapid Home Provisioning in your cluster.">Rapid Home Provisioning Control (RHPCTL) Command Reference</a></li>
                           <li><a href="server-control-command-reference.html#GUID-1DCA9E3F-B929-4555-B673-921FF3588AC3" title="Use the Server Control (SRVCTL) utility to manage various components and applications in your cluster.">Server Control (SRVCTL) Command Reference</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD92649"></a><div class="props_rev_3"><a id="GUID-58793EAD-3C8B-4C3F-A5CB-680BD5693A14" name="GUID-58793EAD-3C8B-4C3F-A5CB-680BD5693A14"></a><h4 id="CWADD-GUID-58793EAD-3C8B-4C3F-A5CB-680BD5693A14" class="sect4"><span class="enumeration_section">5.2.2 </span>Adding Gold Images to the Rapid Home Provisioning Server
                  </h4>
                  <div>
                     <p>Use RHPCTL to add gold images for later provisioning of software.</p>
                     <div class="section">
                        <p>The Rapid Home Provisioning Server stores and serves gold images of software homes. These images must be instantiated on the Rapid Home Provisioning Server.</p>
                        <div class="infoboxnote" id="GUID-58793EAD-3C8B-4C3F-A5CB-680BD5693A14__GUID-B9C7EF26-38E3-4A25-9163-839FC055AB01">
                           <p class="notep1">Note:</p>
                           <p>Images are read-only, and you cannot run programs from them. To create a usable software home from an image, you must create a working copy. You cannot directly use images as software homes. You can, however, use images to create working copies (software homes).</p>
                        </div>
                        <p>You can import software to the Rapid Home Provisioning Server using any one of the following methods:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>You can import an image from an installed home on the Rapid Home Provisioning Server using the following command:</p><pre class="pre codeblock"><code>rhpctl import image -image <span class="variable">image_name</span> -path <span class="variable">path_to_installed_home</span>
  [-imagetype ORACLEDBSOFTWARE | ORACLEGISOFTWARE | SOFTWARE]
</code></pre></li>
                           <li>
                              <p>You can import an image from an installed home on a Rapid Home Provisioning Client, using the following command run from the Rapid Home Provisioning Client:</p><pre class="pre codeblock"><code>rhpctl import image -image <span class="variable">image_name</span> -path <span class="variable">path_to_installed_home</span>
</code></pre></li>
                           <li>
                              <p>You can create an image from an existing working copy using the following command:</p><pre class="pre codeblock"><code>rhpctl add image &#x2013;image <span class="variable">image_name</span> -workingcopy <span class="variable">working_copy_name</span>
</code></pre></li>
                        </ul>
                        <p>Use the first two commands in the preceding list to seed the image repository, and to add additional images over time. Use the third command on the Rapid Home Provisioning Server as part of the workflow for creating a gold image that includes patches applied to a pre-existing gold image.</p>
                        <p>The preceding three commands also create an Oracle ACFS file system in the Rapid Home Provisioning root directory, similar to the following:</p><pre class="pre codeblock"><code>/u01/rhp/images/images/RDBMS_121020617524</code></pre></div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="rapid-home-provisioning.html#GUID-CD92C0DB-D5E2-427A-8784-94F4C140B279" title="To patch an Oracle Database, you move the database home to a working copy which includes the patches you want to implement.">Patching Oracle Database Software</a></li>
                           <li><a href="rapid-home-provisioning-and-server-control-command-reference.html#GUID-BB5B4501-E270-482A-ADEF-B3D487A9055E" title="This section describes RHPCTL command usage information, and lists and describes RHPCTL commands.">RHPCTL Command Reference</a></li>
                        </ul>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-7D5E221B-4F74-4ECE-ADD1-6F060D6D7A7C" name="GUID-7D5E221B-4F74-4ECE-ADD1-6F060D6D7A7C"></a><h5 id="CWADD-GUID-7D5E221B-4F74-4ECE-ADD1-6F060D6D7A7C" class="sect5"><span class="enumeration_section">5.2.2.1 </span>Image State
                     </h5>
                     <div>
                        <p>You can set the <a id="d24937e3517" class="indexterm-anchor"></a>state of an image to <code class="codeph">TESTABLE</code> or <code class="codeph">RESTRICTED</code> so that only users with the GH_IMG_TESTABLE or GH_IMG_RESTRICT roles can provision working copies from this image. Once the image has been tested or validated, you can change the state and make the image available for general use by running the <code class="codeph">rhpctl promote image -image </code><span class="italic"><code class="codeph">image_name</code></span><code class="codeph"> -state PUBLISHED</code> command. The default image state is <code class="codeph">PUBLISHED</code> when you add a new gold image, but you can optionally specify a different state with the <code class="codeph">rhpctl add image</code> and <code class="codeph">rhpctl import image</code> commands.
                        </p>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-1FE5E4A1-3920-467C-B2DD-749F436D35E6" name="GUID-1FE5E4A1-3920-467C-B2DD-749F436D35E6"></a><h5 id="CWADD-GUID-1FE5E4A1-3920-467C-B2DD-749F436D35E6" class="sect5"><span class="enumeration_section">5.2.2.2 </span>Image Series
                     </h5>
                     <div>
                        <p>An image series is a convenient way to group different gold images into a logical sequence.</p>
                        <p>Rapid Home Provisioning treats each image as an independent entity with respect to other images. No relationship is assumed between images, even if they follow some specific nomenclature. The image administrator may choose to name images in a logical manner that makes sense to the user community, but this does not create any management grouping within the Rapid Home Provisioning framework.</p>
                        <p>Use the <code class="codeph">rhpctl add series</code> command to create an image series and associate one or more images to this series. The list of images in an image series is an ordered list. Use the <code class="codeph">rhpctl insertimage series</code> and <code class="codeph">rhpctl deleteimage series</code> to add and delete images in an image series. You can also change the order of images in a series using these commands.
                        </p>
                        <p>The <code class="codeph">insertimage</code> and <code class="codeph">deleteimage</code> commands do not instantiate or delete actual gold images but only change the list. Also, an image can belong to more than one series (or no series at all).
                        </p>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-E3AF7DAC-8612-445B-9368-60A30C1DA474" name="GUID-E3AF7DAC-8612-445B-9368-60A30C1DA474"></a><h5 id="CWADD-GUID-E3AF7DAC-8612-445B-9368-60A30C1DA474" class="sect5"><span class="enumeration_section">5.2.2.3 </span>Image Type
                     </h5>
                     <div>
                        <p>When you add or import a gold image, you must specify an image type. Oracle Clusterware provides three built-in image types: ORACLEDBSOFTWARE, ORACLEGISOFTWARE, and SOFTWARE, and you can create custom image types.</p>
                        <p>Every gold image must have an image type, and you can create your own image types. A new image type must be based on one of the built-in types. The image type directs Rapid Home Provisioning to apply its capabilities for managing Oracle Grid Infrastructure and Oracle Database homes. Rapid Home Provisioning also uses image type to organize the custom workflow support framework.</p>
                        <div class="section">
                           <p class="subhead3">Creating a Custom Image Type</p>
                           <p>Use the <code class="codeph">rhpctl add imagetype</code> command to create custom image types.
                           </p>
                           <p>For example, to create an image type called DBTEST, which is based on the ORACLEDBSOFTWARE image type:</p><pre class="pre codeblock"><code>$ rhpctl add imagetype -imagetype DBTEST -basetype ORACLEDBSOFTWARE</code></pre><div class="infoboxnote" id="GUID-E3AF7DAC-8612-445B-9368-60A30C1DA474__GUID-4C069D6E-91A9-4425-A9EE-C92DA864AB6C">
                              <p class="notep1">Note:</p>When you create an image type that is based on an existing image type, the new image type does not inherit any user actions (for custom workflow support) from the base type.
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="CWADD93063"></a><div class="props_rev_3"><a id="GUID-FE6E954E-89D7-4AE3-9B9B-A26B787ECBAE" name="GUID-FE6E954E-89D7-4AE3-9B9B-A26B787ECBAE"></a><h4 id="CWADD-GUID-FE6E954E-89D7-4AE3-9B9B-A26B787ECBAE" class="sect4"><span class="enumeration_section">5.2.3 </span>Creating Working Copies to Provision Software
                  </h4>
                  <div>
                     <p>Use RHPCTL to create working copies and provision software to Rapid Home Provisioning Servers, Clients, and targets.</p>
                     <div class="section">
                        <p>After you create and import a gold image, you can provision software by adding a working copy on the Rapid Home Provisioning Server, on a Rapid Home Provisioning Client, or a target. You can run the software provisioning command on either the Server or a Client.</p>
                     </div>
                     <!-- class="section" -->
                     <ul>
                        <li class="stepexpand"><span>To create a working copy on the Rapid Home Provisioning Server:</span><div><pre class="pre codeblock"><code>$ rhpctl add workingcopy -workingcopy <span class="variable">working_copy_name</span> -image <span class="variable">image_name</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>To create a working copy in a local file system on a Rapid Home Provisioning Client:</span><div><pre class="pre codeblock"><code>$ rhpctl add workingcopy -workingcopy <span class="variable">working_copy_name</span> -image <span class="variable">image_name</span>
   -storagetype LOCAL -path <span class="variable">path_to_software_home</span></code></pre></div>
                        </li>
                        <li class="stepexpand"><span>To create a working copy on a Rapid Home Provisioning Client from the Rapid Home Provisioning Server:</span><div><pre class="pre codeblock"><code>$ rhpctl add workingcopy -workingcopy <span class="variable">working_copy_name</span> -image <span class="variable">image_name</span>
   -client <span class="variable">client_cluster_name</span></code></pre></div>
                        </li>
                     </ul>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-FE6E954E-89D7-4AE3-9B9B-A26B787ECBAE__GUID-9286594C-2C93-4D9D-BF55-96B9B0431749">
                           <p class="notep1">Note:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>The directory you specify in the <code class="codeph">-path</code> parameter must be empty.
                                 </p>
                              </li>
                              <li>
                                 <p>You can re-run the provisioning command in case of an interruption or failure due to system or user errors. After you fix the reported errors, re-run the command and it will resume from the point of failure.</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="rapid-home-provisioning.html#GUID-94758068-0E75-40E1-BCAC-EFF25CBB76F1" title="Choose one of three storage options where Rapid Home Provisioning stores working copies.">Storage Options for Provisioned Software</a></li>
                        </ul>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-F343ADA0-D2B1-4451-AF2B-3E069FE15279" name="GUID-F343ADA0-D2B1-4451-AF2B-3E069FE15279"></a><h5 id="CWADD-GUID-F343ADA0-D2B1-4451-AF2B-3E069FE15279" class="sect5"><span class="enumeration_section">5.2.3.1 </span>User Group Management in Rapid Home Provisioning
                     </h5>
                     <div>
                        <p>When you create a working copy as part of a move or upgrade operation, Rapid Home Provisioning configures the operating system groups in the new working copy to match those of the source software home (either the unmanaged or the managed home from which you move or upgrade).</p>
                        <p>When you create a gold image of SOFTWARE image type, any user groups in the source are not inherited and images of this type never contain user group information. When you provision a working copy from a SOFTWARE gold image using the <code class="codeph">rhpctl add workingcopy</code> command, you can, optionally, configure user groups in the working copy using the <code class="codeph">-group</code> parameter.
                        </p>
                        <p>The <code class="codeph">rhpctl move database</code>, <code class="codeph">rhpctl move gihome</code>, <code class="codeph">rhpctl upgrade database</code>, and <code class="codeph">rhpctl upgrade gihome</code> commands all require you to specify a source home (either an unmanaged home or a managed home (working copy) that you provisioned using Rapid Home Provisioning), and a destination home (which must be a working copy). For the destination home, all of the previously mentioned commands enable you to specify an existing working copy that you provisioned previously using <code class="codeph">rhpctl add workingcopy</code>, and all of the commands also enable you to, instead, specify a gold image from which to create a new working copy making that the destination home.
                        </p>
                        <p>When you have provisioned the destination home using the <code class="codeph">rhpctl add workingcopy</code> command, prior to performing a move or upgrade operation, you must ensure that the groups configured in the source home match those in the destination home. Rapid Home Provisioning configures the groups as part of the add operation.
                        </p>
                        <p>When you create a gold image of either the ORACLEGISOFTWARE or the ORACLEDBSOFTWARE image type from a source software home (using the <code class="codeph">rhpctl import image</code> command) or from a working copy (using the <code class="codeph">rhpctl add image</code> command), the gold image inherits the Oracle user groups that were configured in the source. You cannot override this feature.
                        </p>
                        <p>You can define user groups for ORACLEGISOFTWARE and ORACLEDBSOFTWARE working copies using the <code class="codeph">rhpctl add workingcopy</code> command, depending on the image type and user group, as discussed in the subsequent sections.
                        </p>
                        <p>This section describes how Rapid Home Provisioning manages user group configuration, and how the <code class="codeph">-group</code> command-line option of <code class="codeph">rhpctl add workingcopy</code> functions.
                        </p>
                        <div class="section">
                           <p class="subhead3">ORACLEGISOFTWARE (Oracle Grid Infrastructure 11<span class="italic">g</span> release 2 (11.2), and 12<span class="italic">c</span> release 1 (12.1) and release 2 (12.2))
                           </p>
                           <p>When you provision an Oracle Grid Infrastructure working copy, the groups are set in the working copy according to the type of provisioning (whether regular provisioning or software only, and with or without the <code class="codeph">-local</code> parameter), and whether you specify the <code class="codeph">-group</code> parameter with <code class="codeph">rhpctl add workingcopy</code>. You can define OSDBA and OSASM user groups in Oracle Grid Infrastructure software with either the <code class="codeph">-softwareonly</code> command parameter or by using a response file with the <code class="codeph">rhpctl add workingcopy</code> command.
                           </p>
                           <p>If you are provisioning only the Oracle Grid Infrastructure software using the <code class="codeph">-softwareonly</code> command parameter, then you cannot use the <code class="codeph">-group</code> parameter, and Rapid Home Provisioning obtains OSDBA and OSASM user group information from the active Grid home.
                           </p>
                           <p>If you use the <code class="codeph">-local</code> command parameter (which is only valid when you use the <code class="codeph">-softwareonly</code> command parameter) with <code class="codeph">rhpctl add workingcopy</code>, then Rapid Home Provisioning takes the values of the groups from the command line (using the <code class="codeph">-group</code> parameter) or uses the default values, which Rapid Home Provisioning obtains from the <code class="codeph">osdbagrp</code> binary of the gold image.
                           </p>
                           <p>If none of the preceding applies, then Rapid Home Provisioning uses the installer default user group.</p>
                           <div class="p">If you are provisioning and configuring a working copy using information from a response file, then Rapid Home Provisioning:
                              <ol>
                                 <li>
                                    <p>Uses the value of the user group from the command line, if provided, for OSDBA or OSASM, or both.</p>
                                 </li>
                                 <li>
                                    <p>If you provide no value on the command line, then Rapid Home Provisioning retrieves the user group information defined in the response file.</p>
                                 </li>
                              </ol>
                           </div>
                           <p>If you are defining the OSOPER Oracle group, then, again, you can either use the <code class="codeph">-softwareonly</code> command parameter or use a response file with the <code class="codeph">rhpctl add workingcopy</code> command.
                           </p>
                           <p>If you use the <code class="codeph">-softwareonly</code> command parameter, then you can provide the value on the command line (using the <code class="codeph">-group</code> parameter) or leave the user group undefined.
                           </p>
                           <p>If you are provisioning and configuring a working copy using information from a response file, then you can provide the value on the command line, use the information contained in the response file, or leave the OSOPER Oracle group undefined.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3">ORACLEDBSOFTWARE (Oracle Database 11<span class="italic">g</span> release 2 (11.2), and 12<span class="italic">c</span> release 1 (12.1) and release 2 (12.2))
                           </p>
                           <p>If you are provisioning a working copy of Oracle Database software and you want to define Oracle groups, then use the <code class="codeph">-group</code> command parameter with the <code class="codeph">rhpctl add workingcopy</code> command. Oracle groups available in the various Oracle Database releases are as follows:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Oracle Database 11<span class="italic">g</span> release 2 (11.2)
                                 </p>
                                 <ul class="simple" style="list-style-type: none;padding-left:0;">
                                    <li>OSDBA</li>
                                    <li>OSOPER</li>
                                 </ul>
                              </li>
                              <li>
                                 <p>Oracle Database 12<span class="italic">c</span> release 1 (12.1)
                                 </p>
                                 <ul class="simple" style="list-style-type: none;padding-left:0;">
                                    <li>OSDBA</li>
                                    <li>OSOPER</li>
                                    <li>OSBACKUP</li>
                                    <li>OSDG</li>
                                    <li>OSKM</li>
                                 </ul>
                              </li>
                              <li>
                                 <p>Oracle Database 12<span class="italic">c</span> release 2 (12.2)
                                 </p>
                                 <ul class="simple" style="list-style-type: none;padding-left:0;">
                                    <li>OSDBA</li>
                                    <li>OSOPER</li>
                                    <li>OSBACKUP</li>
                                    <li>OSDG</li>
                                    <li>OSKM</li>
                                    <li>OSRAC</li>
                                 </ul>
                              </li>
                           </ul>
                           <p>Regardless of which of the preceding groups you are defining (except for OSOPER), Rapid Home Provisioning takes the values of the groups from the command line (using the <code class="codeph">-group</code> parameter) or uses the default values, which Rapid Home Provisioning obtains from the <code class="codeph">osdbagrp</code> binary of the gold image.
                           </p>
                           <p>If any group picked up from the <code class="codeph">osdbagrp</code> binary is not in the list of groups to which the database user belongs (given by the <code class="codeph">id</code> command), then Rapid Home Provisioning uses the installer default user group. Otherwise, the database user is the user running the <code class="codeph">rhpctl add workingcopy</code> command.
                           </p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CWADD93064"></a><div class="props_rev_3"><a id="GUID-94758068-0E75-40E1-BCAC-EFF25CBB76F1" name="GUID-94758068-0E75-40E1-BCAC-EFF25CBB76F1"></a><h5 id="CWADD-GUID-94758068-0E75-40E1-BCAC-EFF25CBB76F1" class="sect5"><span class="enumeration_section">5.2.3.2 </span>Storage Options for Provisioned Software
                     </h5>
                     <div>
                        <p>Choose one of three storage options where Rapid Home Provisioning stores working copies.</p>
                        <p>When you provision software using the <code class="codeph">rhpctl add workingcopy</code> command, you can choose from three storage options where Rapid Home Provisioning places that software:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>In an Oracle ACFS shared file system managed by Rapid Home Provisioning (for database homes only)</p>
                           </li>
                           <li>
                              <p>In a local file system not managed by Rapid Home Provisioning</p>
                           </li>
                           <li>
                              <p>In an NFS file system provided and managed by the Rapid Home Provisioning Server </p>
                           </li>
                        </ul>
                        <p>Using the <code class="codeph">rhpctl add workingcopy</code> command with the <code class="codeph">&#x2013;storagetype</code> and <code class="codeph">&#x2013;path</code> parameters, you can choose where you store provisioned working copies. The applicability of the parameters depends on whether the node (or nodes) to which you are provisioning the working copy is a Rapid Home Provisioning Server, Rapid Home Provisioning Client, or a non-Rapid Home Provisioning client. You can choose from three different values for the <code class="codeph">&#x2013;stroragetype</code> parameter:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">RHP_MANAGED</code>: Choosing this value, which is available for Rapid Home Provisioning Servers and Rapid Home Provisioning Clients, stores working copies in an Oracle ACFS shared file system. The <code class="codeph">&#x2013;path</code> parameter is not used with this option because Rapid Home Provisioning manages the storage option.
                              </p>
                              <div class="infoboxnote" id="GUID-94758068-0E75-40E1-BCAC-EFF25CBB76F1__GUID-E13E3FE5-B983-4191-A717-370F849A5391">
                                 <p class="notep1">Notes:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>You cannot store Oracle Grid Infrastructure homes in <code class="codeph">RHP_MANAGED</code> storage.
                                       </p>
                                    </li>
                                    <li>
                                       <p>Oracle recommends using the <code class="codeph">RHP_MANAGED</code> storage type, which is available on Rapid Home Provisioning Servers, and on Clients configured with an Oracle ASM disk group.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If you provision working copies on a Rapid Home Provisioning Server, then you do not need to specify the <code class="codeph">-storagetype</code> option because it will default to <code class="codeph">RHP_MANAGED</code>.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If you choose to provision working&nbsp;copies on a Rapid Home Provisioning Client, and you do not specify the <code class="codeph">-path</code> parameter, then the storage type defaults to <code class="codeph">RHP_MANAGED</code> only if there is an Oracle ASM disk group on the client. Otherwise the command will fail. If you specify a location on the client for the <code class="codeph">-path</code> parameter, then the storage type defaults to <code class="codeph">LOCAL</code> with or without an Oracle ASM disk group.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                           <li>
                              <p><code class="codeph">LOCAL</code>: Choosing this value stores working copies in a local file system that is not managed by Rapid Home Provisioning. You must specify a path to the file system on the Rapid Home Provisioning Server, Rapid Home Provisioning Client, or non-Rapid Home Provisioning client, or to the Oracle ASM disk group on the Rapid Home Provisioning Client.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">NFS</code>: If you choose this value, then the path you provide is used as an NFS mount point. With NFS storage, the software resides on the Rapid Home Provisioning Server cluster, and is accessible as read/write on the Rapid Home Provisioning Client cluster over NFS. In this case, the same software is visible on all nodes of the client and is therefore shared across all nodes.
                              </p>
                              <div class="infoboxnote" id="GUID-94758068-0E75-40E1-BCAC-EFF25CBB76F1__GUID-500757AA-C18F-4538-A1C0-0FCD19A48C93">
                                 <p class="notep1">Note:</p>If you choose to store working copies on a Rapid Home Provisioning Server, then you cannot use <code class="codeph">NFS</code> and it becomes an invalid choice as a storage type.
                              </div>
                           </li>
                        </ul>
                        <p>In cases where you specify the <code class="codeph">&#x2013;path</code> parameter, if the file system is shared among all of the nodes in the cluster, then the working copy gets created on this shared storage. If the file system is not shared, then the working copy gets created in the location of the given path on every node in the cluster.
                        </p>
                        <div class="infoboxnote" id="GUID-94758068-0E75-40E1-BCAC-EFF25CBB76F1__GUID-095CD677-DCCD-441C-AC1B-9E70E7767F49">
                           <p class="notep1">Note:</p>The directory you specify in the <code class="codeph">-path</code> parameter must be empty.
                        </div>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="rapid-home-provisioning-and-server-control-command-reference.html#GUID-61929F3C-A50A-45EA-8B4A-D11E245A6493" title="Creates a working copy on a client cluster.">rhpctl add workingcopy</a></li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="CWADD93065"></a><div class="props_rev_3"><a id="GUID-40F14729-5687-404E-8F89-83144E4673CF" name="GUID-40F14729-5687-404E-8F89-83144E4673CF"></a><h5 id="CWADD-GUID-40F14729-5687-404E-8F89-83144E4673CF" class="sect5"><span class="enumeration_section">5.2.3.3 </span>Provisioning for a Different User
                     </h5>
                     <div>
                        <p>If you want a different user to provision software other than the user running the command, then use the <code class="codeph">-user</code> parameter of the <code class="codeph">rhpctl add workingcopy</code> command.
                        </p>
                        <div class="section">
                           <p>When the provisioning is completed, all files and directories of the provisioned software are owned by the user you specified. Permissions on files on the remotely provisioned software are the same as the permissions that existed on the gold image from where you provisioned the application software.</p>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-F4F263A1-0580-4386-B929-5252A196632E" name="GUID-F4F263A1-0580-4386-B929-5252A196632E"></a><h3 id="CWADD-GUID-F4F263A1-0580-4386-B929-5252A196632E" class="sect3"><span class="enumeration_section">5.3 </span>Oracle Grid Infrastructure Management
               </h3>
               <div>
                  <p>The Rapid Home Provisioning Server provides an efficient and secure platform for the distribution of Oracle Grid Infrastructure homes to targets and Rapid Home Provisioning Clients.</p>
                  <p>Also, Rapid Home Provisioning Clients have the ability to fetch Oracle Grid Infrastructure homes from the Rapid Home Provisioning Server.</p>
                  <p>Oracle Grid Infrastructure homes are distributed in the form of working copies. After a working copy has been provisioned, Rapid Home Provisioning can optionally configure Oracle Grid Infrastructure. This gives Rapid Home Provisioning the ability to create an Oracle Grid Infrastructure installation on a group of one or more nodes that initially do not have Oracle Grid Infrastructure installed.</p>
                  <p>Rapid Home Provisioning also has commands for managing Oracle Grid Infrastructure homes, such as switching to a patched home or upgrading to a new Oracle Grid Infrastructure version. These are both single commands that orchestrate the numerous steps involved. Reverting to the original home is just as simple. Also, Rapid Home Provisioning can add or delete nodes from an Oracle Grid Infrastructure configuration.</p>
               </div>
               <div class="sect3"><a id="GUID-CD7FC0E1-31BD-45D3-A3D0-2DB788E4DB24" name="GUID-CD7FC0E1-31BD-45D3-A3D0-2DB788E4DB24"></a><h4 id="CWADD-GUID-CD7FC0E1-31BD-45D3-A3D0-2DB788E4DB24" class="sect4"><span class="enumeration_section">5.3.1 </span>Provisioning Oracle Grid Infrastructure Software
                  </h4>
                  <div>
                     <p>Rapid Home Provisioning has several methods to provision and, optionally, configure Oracle Grid Infrastructure homes.</p>
                     <div class="section">First, Rapid Home Provisioning can provision and configure Oracle Grid Infrastructure on one or more nodes that do not currently have a Grid home, and then configure Oracle Grid Infrastructure to form a single node or multi-node Oracle Grid Infrastructure installation.</div>
                     <!-- class="section" -->
                     <div class="section">Use the <code class="codeph">rhpctl add workingcopy</code> command to install and configure Oracle Grid Infrastructure, and to enable simple and repeatable creation of standardized deployments.
                     </div>
                     <!-- class="section" -->
                     <div class="section">Second, the Rapid Home Provisioning Server can provision an Oracle Grid Infrastructure home to a node or cluster that is currently running Oracle Grid Infrastructure. The currently running Grid home can be a home that Rapid Home Provisioning did not provision (an <span class="italic">unmanaged</span> home) or a home that Rapid Home Provisioning did provision (a <span class="italic">managed</span> home).
                     </div>
                     <!-- class="section" -->
                     <div class="section">In either case, use the <code class="codeph">-softwareonly</code> parameter of the <code class="codeph">rhpctl add workingcopy</code> command. This provisions but does not activate the new Grid home, so that when you are ready to switch to that new home, you can do so with a single command.
                     </div>
                     <!-- class="section" -->
                     <ul>
                        <li class="stepexpand"><span>To inform Rapid Home Provisioning the nodes on which to install Oracle Grid Infrastructure, and to configure Oracle Grid Infrastructure, you provide directions in a response file, as in the following example:</span><div><pre class="pre codeblock"><code>$ rhpctl add workingcopy -workingcopy GI_HOME_11204_WCPY -image GI_HOME_11204 &#x2013;responsefile /u01/app/rhpinfo/GI_11204_install.txt &#x2013;root <span class="variable">root/sudo credentials</span></code></pre><div class="p">The preceding command provisions the <code class="codeph">GI_HOME_11204_WCPY</code> working copy based on the <code class="codeph">GI_HOME_11204</code> gold image to a target specified in the <code class="codeph">GI_11204_install.txt</code> response file. In addition to identifying the target nodes, the response file specifies information about the Oracle Grid Infrastructure configuration, such as Oracle ASM and GNS parameters.
                                 <div class="infoboxnote" id="GUID-CD7FC0E1-31BD-45D3-A3D0-2DB788E4DB24__GUID-91F9102A-ED77-4C5A-8A85-5D5BF3A38093">
                                    <p class="notep1">Note:</p>The <code class="codeph">oracle.install.crs.rootconfig.executeRootScript=<span class="variable">xxx</span></code> response file parameter is overridden and always set to <code class="codeph">false</code> for Rapid Home Provisioning, regardless of what you specify in the response file.
                                 </div>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>To provision an Oracle Grid Infrastructure home to a node or cluster that is currently running Oracle Grid Infrastructure:</span><div><pre class="pre codeblock"><code>$ rhpctl add workingcopy -workingcopy GI_HOME_12201_PATCHED_WCPY -image GI_HOME_12201_PSU1 &#x2013;client CLUST_002 -softwareonly</code></pre><p>The preceding command provisions a new working copy based on the <code class="codeph">GI_HOME_12201_PSU1</code> gold image to the Rapid Home Provisioning Client (that is running Oracle Grid Infrastructure 12<span class="italic">c</span> release 2 (12.2)) named <code class="codeph">CLUST_002</code>. When you provision to a target that is not running Oracle Grid Infrastructure 12<span class="italic">c</span> release 2 (12.2) (such as, a target running Oracle Grid Infrastructure 12<span class="italic">c</span> release 1 (12.1) or Oracle Grid Infrastructure 11<span class="italic">g</span> release 2 (11.2)), use the <code class="codeph">-targetnode</code> parameter instead of <code class="codeph">-client</code>.
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-856C7378-2510-4B3E-8BE1-B4D79DF4FE8B" name="GUID-856C7378-2510-4B3E-8BE1-B4D79DF4FE8B"></a><h4 id="CWADD-GUID-856C7378-2510-4B3E-8BE1-B4D79DF4FE8B" class="sect4"><span class="enumeration_section">5.3.2 </span>Patching Oracle Grid Infrastructure Software
                  </h4>
                  <div>
                     <p>Rapid Home Provisioning provides three methods to patch Oracle Grid Infrastructure software homes: rolling, non-rolling, and in batches.</p>
                     <div class="section">Patching Oracle Grid Infrastructure software involves moving the Grid home to a patched version of the current Grid home. The patched version must be a working copy. The working copy to which you are moving the Grid home can be at a lower patch level than the current home. This facilitates rollback if any problems occur after moving to the higher-level patched home.
                        <p>This section includes the following topics:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="rapid-home-provisioning.html#GUID-98C7EAF9-D7B3-4293-ABE5-ACC2F270F632" title="The rolling method for patching Oracle Grid Infrastructure is the default method.">Patching Oracle Grid Infrastructure Using the Rolling Method</a></p>
                           </li>
                           <li>
                              <p><a href="rapid-home-provisioning.html#GUID-5C9CE736-0C43-4E55-9275-F655AB73C140" title="You can use the -nonrolling parameter with the rhpctl move gihome command, which restarts the Oracle Grid Infrastructure stack on all nodes in parallel.">Patching Oracle Grid Infrastructure Using the Non-Rolling Method</a></p>
                           </li>
                           <li>
                              <p><a href="rapid-home-provisioning.html#GUID-83518C02-E439-49E7-A406-47FE5DCF49B0" title="The third patching method is to sequentially process batches of nodes, with a number of nodes in each batch being restarted in parallel.">Patching Oracle Grid Infrastructure Using Batches</a></p>
                           </li>
                           <li>
                              <p><a href="rapid-home-provisioning.html#GUID-A0C98197-0383-4B9F-A520-C4166EAF3180" title="When you patch an Oracle Grid Infrastructure deployment, Rapid Home Provisioning enables you to simultaneously patch the Oracle Database homes on the cluster, so you can patch both types of software homes in a single maintenance operation.">Combined Oracle Grid Infrastructure and Oracle Database Patching</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="rapid-home-provisioning-and-server-control-command-reference.html#GUID-61929F3C-A50A-45EA-8B4A-D11E245A6493">rhpctl add workingcopy</a></li>
                           <li><a href="rapid-home-provisioning-and-server-control-command-reference.html#GUID-4706B307-CEDE-4A91-97DE-6AFF552AEDC8">rhpctl move gihome</a></li>
                        </ul>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-98C7EAF9-D7B3-4293-ABE5-ACC2F270F632" name="GUID-98C7EAF9-D7B3-4293-ABE5-ACC2F270F632"></a><h5 id="CWADD-GUID-98C7EAF9-D7B3-4293-ABE5-ACC2F270F632" class="sect5"><span class="enumeration_section">5.3.2.1 </span>Patching Oracle Grid Infrastructure Using the Rolling Method
                     </h5>
                     <div>
                        <p>The rolling method for patching Oracle Grid Infrastructure is the default method.</p>
                        <div class="section">You use the <code class="codeph">rhpctl move gihome</code> command (an atomic operation), which returns after the Oracle Grid Infrastructure stack on each node has been restarted on the new home. Nodes are restarted sequentially, so that only one node at a time will be offline, while all other nodes in the cluster remain online.
                        </div>
                        <!-- class="section" -->
                        <ul>
                           <li class="stepexpand"><span>Move the Oracle Grid Infrastructure home to a working copy of the same release level, as follows:</span><div><pre class="pre codeblock"><code>$ rhpctl move gihome -client <span class="variable">cluster_name</span> &#x2013;sourcewc <span class="variable">Grid_home_1</span> &#x2013;destwc <span class="variable">Grid_home_2</span></code></pre></div>
                           </li>
                        </ul>
                        <div class="section">
                           <p>The preceding command moves the running Oracle Grid Infrastructure home from the current managed home (the <code class="codeph">sourcewc</code>) to the patched home (<code class="codeph">destwc</code>) on the specific client cluster. The patched working copy must be provisioned on the client.
                           </p>
                           <div class="infoboxnote" id="GUID-98C7EAF9-D7B3-4293-ABE5-ACC2F270F632__GUID-33238487-FB19-4BC9-89D0-F1146D5497A0">
                              <p class="notep1">Notes:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>You cannot move the Grid home to a home that Rapid Home Provisioning does not manage. Therefore, rollback applies only to moves between two working copies.</p>
                                 </li>
                                 <li>
                                    <p>You can delete the source working copy at any time after moving a Grid home. Once you delete the working copy, however, you cannot perform a rollback. Also, use the <code class="codeph">rhpctl delete workingcopy</code> command (as opposed to <code class="codeph">rm</code>, for example) to remove the source working copy to keep the Rapid Home Provisioning inventory correct.
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-5C9CE736-0C43-4E55-9275-F655AB73C140" name="GUID-5C9CE736-0C43-4E55-9275-F655AB73C140"></a><h5 id="CWADD-GUID-5C9CE736-0C43-4E55-9275-F655AB73C140" class="sect5"><span class="enumeration_section">5.3.2.2 </span>Patching Oracle Grid Infrastructure Using the Non-Rolling Method
                     </h5>
                     <div>
                        <p>You can use the <code class="codeph">-nonrolling</code> parameter with the <code class="codeph">rhpctl move gihome</code> command, which restarts the Oracle Grid Infrastructure stack on all nodes in parallel.
                        </p>
                        <div class="section">As with the rolling method, this is an atomic command which returns after all nodes are online.</div>
                        <!-- class="section" -->
                        <ul>
                           <li class="stepexpand"><span>Use the following command to patch Oracle Grid Infrastructure in an non-rolling fashion:</span><div><pre class="pre codeblock"><code>$ rhpctl move gihome -client <span class="variable">cluster_name</span> &#x2013;sourcewc <span class="variable">Grid_home_1</span> &#x2013;destwc <span class="variable">Grid_home_2</span> -nonrolling</code></pre></div>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-83518C02-E439-49E7-A406-47FE5DCF49B0" name="GUID-83518C02-E439-49E7-A406-47FE5DCF49B0"></a><h5 id="CWADD-GUID-83518C02-E439-49E7-A406-47FE5DCF49B0" class="sect5"><span class="enumeration_section">5.3.2.3 </span>Patching Oracle Grid Infrastructure Using Batches
                     </h5>
                     <div>
                        <p>The third patching method is to sequentially process batches of nodes, with a number of nodes in each batch being restarted in parallel.</p>
                        <div class="section">This method maximizes service availability during the patching process. When you patch Oracle release 2 (12.2.x) software homes, you can define the batches on the command line or choose to have Rapid Home Provisioning generate the list of batches based on its analysis of the database services running in the cluster.</div>
                        <!-- class="section" -->
                        <div class="section">There are two methods for defining batches:
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="rapid-home-provisioning.html#GUID-83518C02-E439-49E7-A406-47FE5DCF49B0__USER-DEFINEDBATCHES-5B5324C9">User-Defined Batches</a></p>
                              </li>
                              <li>
                                 <p><a href="rapid-home-provisioning.html#GUID-83518C02-E439-49E7-A406-47FE5DCF49B0__RAPIDHOMEPROVISIONING-DEFINEDBATCHE-5B531F59">Rapid Home Provisioning-Defined Batches</a></p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-83518C02-E439-49E7-A406-47FE5DCF49B0__USER-DEFINEDBATCHES-5B5324C9">
                           <p class="subhead3">User-Defined Batches</p>
                           <p>When you use this method of patching, the first time you run the <code class="codeph">rhpctl move gihome</code> command, you must specify the source home, the destination home, the batches, and other options, as needed. The command terminates after the first node restarts.
                           </p>
                           <p>To patch Oracle Grid Infrastructure using batches that you define:</p>
                           <ol>
                              <li>
                                 <p>Define a list of batches on the command line and begin the patching process, as in the following example:</p><pre class="pre codeblock"><code>$ rhpctl move gihome -sourcewc wc1 -destwc wc2 -firstnode n1 -batches "(n2,n3),(n4)"</code></pre><p>The preceding command example initiates the move operation, and terminates and reports successful when the Oracle Grid Infrastructure stack restarts in the first batch. Oracle Grid Infrastructure restarts the batches in the order you specified in the <code class="codeph">-batches</code> parameter.
                                 </p>
                                 <p>In the command example, node <code class="codeph">n1</code> forms the first batch, nodes <code class="codeph">n2</code> and <code class="codeph">n3</code> form the second batch, and node <code class="codeph">n4</code> forms the last batch. The command defines the source working copy as <code class="codeph">wc1</code> and the patched (destination) working copy as <code class="codeph">wc2</code>.
                                 </p>
                                 <div class="infoboxnote" id="GUID-83518C02-E439-49E7-A406-47FE5DCF49B0__GUID-9C2857EF-2E1A-48DA-AD2E-84EFC1BB49BB">
                                    <p class="notep1">Notes:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p> If the deployment you are patching is an Oracle Flex Cluster, then you must specify the name of a Hub Node with the <code class="codeph">-firstnode</code> parameter.
                                          </p>
                                       </li>
                                       <li>
                                          <p>You can specify batches such that singleton services (policy-managed singleton services or administrator-managed services running on one instance) are relocated between batches and non-singleton services remain partially available during the patching process.</p>
                                       </li>
                                    </ul>
                                 </div>
                              </li>
                              <li>
                                 <p>You must process the next batch by running the <code class="codeph">rhpctl move gihome</code> command, again, as follows:
                                 </p><pre class="pre codeblock"><code>$ rhpctl move gihome -sourcewc wc1 -continue</code></pre><p>The preceding command example restarts the Oracle Grid Infrastructure stack on the second batch (nodes <code class="codeph">n2</code> and <code class="codeph">n3</code>). The command terminates by reporting that the second batch was successfully patched.
                                 </p>
                              </li>
                              <li>
                                 <p>Repeat the previous step until you have processed the last batch of nodes. If you attempt to run the command with the <code class="codeph">-continue</code> parameter after the last batch has been processed, then the command returns an error.
                                 </p>
                                 <p>If the <code class="codeph">rhpctl move gihome</code> command fails at any time during the above sequence, then rerun the command with the <code class="codeph">-continue</code> option to attempt to patch the failed batch. If you want to skip the failed batch and continue with the next batch, use the <code class="codeph">-continue</code> and <code class="codeph">-skip</code>parameters. If you attempt to skip over the last batch, then the move operation is terminated.
                                 </p>
                                 <p>You can use the <code class="codeph">-abort</code> parameter instead of the <code class="codeph">-continue</code> parameter at any point in the preceding procedure to terminate the patching process and leave the cluster in its current state.
                                 </p>
                                 <div class="infoboxnote" id="GUID-83518C02-E439-49E7-A406-47FE5DCF49B0__GUID-72638C6B-CE52-42DF-83EF-7FD38AF37124">
                                    <p class="notep1">Notes:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Policy-managed services hosted on a server pool with one active server, and administrator-managed services with one preferred instance and no available instances cannot be relocated and will go OFFLINE while instances are being restarted.</p>
                                       </li>
                                       <li>
                                          <p>If a move operation is in progress, then you cannot initiate another move operation from the same source home or to the same destination home.</p>
                                       </li>
                                       <li>
                                          <p>After the move operation has ended, services may be running on nodes different from the ones they were running on before the move and you will have to manually relocate them back to the original instances, if necessary.</p>
                                       </li>
                                       <li>
                                          <p>Depending on the start dependencies, services that were offline before the move began could come online during the move.</p>
                                       </li>
                                    </ul>
                                 </div>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section" id="GUID-83518C02-E439-49E7-A406-47FE5DCF49B0__RAPIDHOMEPROVISIONING-DEFINEDBATCHE-5B531F59">
                           <p class="subhead3">Rapid Home Provisioning-Defined Batches</p>
                           <p>Using Rapid Home Provisioning to define and patch batches of nodes means that you need only run one command, as shown in the following command example, where the source working is <code class="codeph">wc1</code> and the destination working copy is <code class="codeph">wc2</code>:
                           </p><pre class="pre codeblock"><code>$ rhpctl move gihome -sourcewc wc1 -destwc wc2 -smartmove -saf <span class="variable">Z+</span> [-eval]</code></pre><p>There is no need for you to do anything else unless you used the <code class="codeph">-separate</code> parameter with the command. In that case, the move operation waits for user intervention to proceed to the next batch, and then you will have to run the command with the <code class="codeph">-continue</code> parameter after each batch completes.
                           </p>
                           <p>The parameters used in the preceding example are as follows:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <div class="p"><code class="codeph">-smartmove</code>: This parameter restarts the Oracle Grid Infrastructure stack on disjoint sets of nodes so that singleton resources are relocated before Oracle Grid Infrastructure starts.
                                    <div class="infoboxnote" id="GUID-83518C02-E439-49E7-A406-47FE5DCF49B0__GUID-7A593538-CE7D-45A7-ADD3-8CC20B343F54">
                                       <p class="notep1">Note:</p>If the server pool to which a resource belongs contains only one active server, then that resource will go offline as relocation cannot take place.
                                    </div>
                                 </div>
                                 <p>The <code class="codeph">-smartmove</code> parameter:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Creates a map of services and nodes on which they are running.</p>
                                    </li>
                                    <li>
                                       <p>Creates batches of nodes. The first batch will contain only the Hub node, if the configuration is an Oracle Flex Cluster. For additional batches, a node can be merged into a batch if:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>The availability of any non-singleton service, running on this node, does not go below the specified service availability factor (or the default of 50%).</p>
                                          </li>
                                          <li>
                                             <p>There is a singleton service running on this node and the batch does not contain any of the relocation target nodes for the service.</p>
                                          </li>
                                       </ul>
                                    </li>
                                    <li>
                                       <p>Restarts the Oracle Grid Infrastructure stack batch by batch.</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>Service availability factor (<code class="codeph">-saf <span class="variable">Z+</span></code>): You can specify a positive number, as a percentage, that will indicate the minimum number of database instances on which a database service must be running. For example:
                                 </p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>If you specify <code class="codeph">-saf 50</code> for a service running on two instances, then only one instance can go offline at a time.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If you specify <code class="codeph">-saf 50</code> for a service running on three instances, then only one instance can go offline at a time.
                                       </p>
                                    </li>
                                    <li>
                                       <p>If you specify <code class="codeph">-saf 75</code> for a service running on two instances, then an error occurs because the target can never be met.
                                       </p>
                                    </li>
                                    <li>
                                       <p>The service availability factor is applicable for services running on at least two instances. As such, the service availability factor can be 0% to indicate a non-rolling move, but not 100%. The default is 50%.</p>
                                    </li>
                                    <li>
                                       <p>If you specify a service availability factor for singleton services, then the parameter will be ignored because the availability of such services is 100% and the services will be relocated.</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p><code class="codeph">-eval</code>: You can optionally use this parameter to view the auto-generated batches. This parameter also shows the sequence of the move operation without actually patching the software.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-A0C98197-0383-4B9F-A520-C4166EAF3180" name="GUID-A0C98197-0383-4B9F-A520-C4166EAF3180"></a><h5 id="CWADD-GUID-A0C98197-0383-4B9F-A520-C4166EAF3180" class="sect5"><span class="enumeration_section">5.3.2.4 </span>Combined Oracle Grid Infrastructure and Oracle Database Patching
                     </h5>
                     <div>
                        <p>When you patch an Oracle Grid Infrastructure deployment, Rapid Home Provisioning enables you to simultaneously patch the Oracle Database homes on the cluster, so you can patch both types of software homes in a single maintenance operation.</p>
                        <p>The following optional parameters of the <code class="codeph">rhpctl move gihome</code> command are relevant to the combined Oracle Grid Infrastructure and Oracle Database patching use case:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">-auto</code>: Automatically patch databases along with patching Oracle Grid Infrastructure
                              </p>
                           </li>
                           <li>
                              <div class="p"><code class="codeph">-dbhomes <span class="variable">mapping_of_Oracle_homes</span></code>: Mapping of source and destination working copies in the following format:<pre class="pre codeblock"><code>sourcewc1=destwc1,...,<span class="variable">source_oracle_home_path</span>=destwc<span class="variable">N</span></code></pre></div>
                           </li>
                           <li>
                              <p><code class="codeph">-dblist <span class="variable">db_name_list</span></code>: Patch only the specified databases
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-excludedblist <span class="variable">db_name_list</span></code>: Patch all databases except the specified databases
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-nodatapatch</code>: Indicates that <code class="codeph">datapatch</code> is not be run for databases being moved
                              </p>
                           </li>
                        </ul>
                        <p>As an example, assume that a Rapid Home Provisioning Server with Oracle Grid Infrastructure 12<span class="italic">c</span> release 2 (12.2) has provisioned the following working copies on an Oracle Grid Infrastructure 12<span class="italic">c</span> release 1 (12.1.0.2) target cluster which includes the node <code class="codeph">test_749</code>:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">GI121WC1</code>: The active Grid home on the Oracle Grid Infrastructure 12<span class="italic">c</span> release 1 (12.1.0.2) cluster
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">GI121WC2</code>: A software-only Grid home on the Oracle Grid Infrastructure 12<span class="italic">c</span> release 1 (12.1.0.2) cluster
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">DB121WC1</code>: An Oracle RAC 12<span class="italic">c</span> release 1 (12.1.0.2.0) database home running database instances
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">DB121025WC1</code>: An Oracle RAC 12<span class="italic">c</span> release 1 (12.1.0.2.5) database home with no database instances (this is the patched home)
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">DB112WC1</code>: An Oracle RAC 11<span class="italic">g</span> release 2 (11.2.0.4.0) database home running database instances
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">DB112045WC1</code>: An Oracle RAC 11<span class="italic">g</span> release 2 (11.2.0.4.5) database home with no database instances (this is the patched home)
                              </p>
                           </li>
                        </ul>
                        <p>Further assume that you want to simultaneously move</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Oracle Grid Infrastructure from working copy <code class="codeph">GI121WC1</code> to working copy <code class="codeph">GI121WC2</code></p>
                           </li>
                           <li>
                              <p>Oracle RAC Database <code class="codeph">db1</code> from working copy <code class="codeph">DB121WC1</code> to working copy <code class="codeph">DB121025WC1</code></p>
                           </li>
                           <li>
                              <p>Oracle RAC Database <code class="codeph">db2</code> in working copy <code class="codeph">DB112WC1</code> to working copy <code class="codeph">DB112045WC1</code></p>
                           </li>
                        </ul>
                        <p>The following single command accomplishes the moves:</p><pre class="pre codeblock"><code>$ rhpctl move gihome -sourcewc GI121WC1 -destwc GI121WC2 -auto
  -dbhomes DB121WC1=DB121025WC1,DB112WC1=DB112045WC1 -targetnode test_749 -root</code></pre><div class="infoboxnote" id="GUID-A0C98197-0383-4B9F-A520-C4166EAF3180__GUID-BA4F9D32-F682-43B8-9844-314B594002C7">
                           <p class="notep1">Note:</p>If you have an existing Oracle home that is not currently a working copy, then specify the Oracle home path instead of the working copy name for the source home. In the preceding example, if the Oracle home path for an existing 12.1.0.2 home is <code class="codeph">/u01/app/prod/12.1.0.2/dbhome1</code>, then replace <code class="codeph">DB121WC1=DB121025WC1</code> with <code class="codeph">/u01/app/prod/12.1.0.2/dbhome1=DB121025WC1</code>.
                        </div>
                        <p>In the preceding command example, the Oracle Grid Infrastructure 12<span class="italic">c</span> release 1 (12.1.0.2) Grid home moves from working copy <code class="codeph">GI121WC1</code> to working copy <code class="codeph">GI121WC2</code>, databases running on working copy <code class="codeph">DB121WC1</code> move to working copy <code class="codeph">DB121025WC1</code>, and databases running on working copy <code class="codeph">DB112WC1</code> move to working copy <code class="codeph">DB112045WC1</code>.
                        </p>
                        <p>For each node in the client cluster, RHPCTL:</p>
                        <ol>
                           <li>
                              <p>Runs any configured pre-operation user actions for moving the Oracle Grid Infrastructure (<code class="codeph">move gihome</code>).
                              </p>
                           </li>
                           <li>
                              <p>Runs any configured pre-operation user actions for moving the database working copies (<code class="codeph">move database</code>).
                              </p>
                           </li>
                           <li>
                              <p>Stops services running on the node, and applies drain and disconnect options.</p>
                           </li>
                           <li>
                              <p>Performs the relevant patching operations for Oracle Clusterware and Oracle Database.</p>
                           </li>
                           <li>
                              <p>Runs any configured post-operation user actions for moving the database working copies (<code class="codeph">move database</code>).
                              </p>
                           </li>
                           <li>
                              <p>Runs any configured post-operation user actions for moving the Oracle Grid Infrastructure working copy (<code class="codeph">move gihome</code>).
                              </p>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-8CFE4E4C-DD4E-4E5B-81E7-A71CBC220E1E" name="GUID-8CFE4E4C-DD4E-4E5B-81E7-A71CBC220E1E"></a><h4 id="CWADD-GUID-8CFE4E4C-DD4E-4E5B-81E7-A71CBC220E1E" class="sect4"><span class="enumeration_section">5.3.3 </span>Upgrading Oracle Grid Infrastructure Software
                  </h4>
                  <div>
                     <p>If you are using Rapid Home Provisioning, then you can use a single command to upgrade an Oracle Grid Infrastructure home.</p>
                     <div class="section">
                        <p>Rapid Home Provisioning supports upgrades to Oracle Grid Infrastructure 12<span class="italic">c</span> release 1 (12.1.0.2) from 11<span class="italic">g</span> release 2 (11.2.0.3 and 11.2.0.4). Upgrading to Oracle Grid Infrastructure 12<span class="italic">c</span> release 2 (12.2.0.1) is supported from 11<span class="italic">g</span> release 2 (11.2.0.3 and 11.2.0.4) and 12<span class="italic">c</span> release 1 (12.1.0.2). The destination for the upgrade can be a working copy already provisioned or you can choose to create the working copy as part of this operation.
                        </p>
                        <p>As an example, assume that a target cluster is running Oracle Grid Infrastructure on an Oracle Grid Infrastructure home that was provisioned by Rapid Home Provisioning. This Oracle Grid Infrastructure home is 11<span class="italic">g</span> release 2 (11.2.0.4) and the working copy is named accordingly.
                        </p>
                        <p>After provisioning a working copy version of Oracle Grid Infrastructure 12<span class="italic">c</span> release 2 (12.2.0.1) (named GIOH12201 in this example), you can upgrade to that working copy with this single command:
                        </p><pre class="pre codeblock"><code>$ rhpctl upgrade gihome -sourcewc GIOH11204 -destwc GIOH12201</code></pre><div class="p">Rapid Home Provisioning is able to identify the cluster to upgrade based on the name of the source working copy. If the target cluster was running on an unmanaged Oracle Grid Infrastructure home, then you would specify the path of the source home rather than providing a source working copy name, and you must also specify the target cluster.
                           <div class="infoboxnote" id="GUID-8CFE4E4C-DD4E-4E5B-81E7-A71CBC220E1E__GUID-9B09578B-20DE-421E-A27C-DA5830DF152A">
                              <p class="notep1">Note:</p>You can delete the source working copy at any time after completing an upgrade. Once you delete the working copy, however, you cannot perform a rollback. Also, use the <code class="codeph">rhpctl delete workingcopy</code> command (as opposed to <code class="codeph">rm</code>, for example) to remove the source working copy to keep the Rapid Home Provisioning inventory correct.
                           </div>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-F1F48984-C440-44F4-9D62-BDB4BE1CDB4A" name="GUID-F1F48984-C440-44F4-9D62-BDB4BE1CDB4A"></a><h3 id="CWADD-GUID-F1F48984-C440-44F4-9D62-BDB4BE1CDB4A" class="sect3"><span class="enumeration_section">5.4 </span>Oracle Database Software Management
               </h3>
               <div>
                  <p>The Rapid Home Provisioning Server provides an efficient and secure platform for the distribution of Oracle Database Homes to targets and Rapid Home Provisioning Clients.</p>
                  <p>Also, Rapid Home Provisioning Clients have the ability to fetch database homes from the Rapid Home Provisioning Server.</p>
                  <p>Oracle Database homes are distributed in the form of working copies. Database instances (one or more) can then be created on the working copy.</p>
                  <p>Rapid Home Provisioning also has commands for managing existing databases, such as switching to a patched home or upgrading to a new database version. These are both single commands which orchestrate the numerous steps involved. Reverting to the original home is just as simple.</p>
               </div>
               <div class="sect3"><a id="GUID-34B6F969-E70E-480D-AC7F-9858E11FF293" name="GUID-34B6F969-E70E-480D-AC7F-9858E11FF293"></a><h4 id="CWADD-GUID-34B6F969-E70E-480D-AC7F-9858E11FF293" class="sect4"><span class="enumeration_section">5.4.1 </span>Provisioning a Working Copy of a Database Home
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">rhpctl add workingcopy</code> command to provision a working copy of a database home on a Rapid Home Provisioning Server, Client, or target.
                     </p>
                     <ul>
                        <li class="stepexpand"><span>Run the <code class="codeph">rhpctl add workingcopy</code> command on a Rapid Home Provisioning Server, similar to the following example:</span><div><pre class="pre codeblock"><code>$ rhpctl add workingcopy -image db12c -path /u01/app/dbusr/product/12.2.0/db12201
  -client client_007 -oraclebase /u01/app/dbusr/ -workingcopy wc_db122_1</code></pre><p>The preceding command example creates a working copy named <code class="codeph">wc_db122_1</code> on all nodes of the Rapid Home Provisioning Client cluster named <code class="codeph">client_007</code>. The gold image <code class="codeph">db12c</code> is the source of the workingcopy. The directory path locations that you specify in the command must be empty.
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="rapid-home-provisioning-and-server-control-command-reference.html#GUID-61929F3C-A50A-45EA-8B4A-D11E245A6493">rhpctl add workingcopy</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-8EEE7B35-43C4-4C26-95C6-C39B702F1EF1" name="GUID-8EEE7B35-43C4-4C26-95C6-C39B702F1EF1"></a><h4 id="CWADD-GUID-8EEE7B35-43C4-4C26-95C6-C39B702F1EF1" class="sect4"><span class="enumeration_section">5.4.2 </span>Creating an Oracle Database on a Working Copy
                  </h4>
                  <div>
                     <p>Create an Oracle Database on a working copy.</p>
                     <div class="section">
                        <p>The Rapid Home Provisioning Server can add a database on a working copy that is on the Rapid Home Provisioning Server, itself, a Rapid Home Provisioning Client, or a non-Rapid Home Provisioning Client target. A Rapid Home Provisioning Client can create a database on a working copy that is running on the Rapid Home Provisioning Client, itself.</p>
                     </div>
                     <!-- class="section" -->
                     <ul>
                        <li class="stepexpand"><span>After you create a working copy of a gold image and provision that working copy to a target, you can create an Oracle Database on the working copy using the <code class="codeph">rhpctl add database</code> command, similar to the following command example, which creates an Oracle Real Application Clusters (Oracle RAC) database called <code class="codeph">db12201</code> on a working copy called <code class="codeph">wc_db122_1</code>:</span><div><pre class="pre codeblock"><code>$ rhpctl add database &#x2013;workingcopy wc_db122_1 &#x2013;dbname db12201 -node client_007_node1,client_007_node2 -dbtype RAC -datafileDestination DATA007_DG</code></pre></div>
                        </li>
                     </ul>
                     <div class="section">The preceding example creates an administrator-managed Oracle RAC database on two nodes in a client cluster. The data file destination is an Oracle ASM disk group that was created prior to running the command. Additionally, you can create Oracle RAC One Node and non-cluster databases.
                        <div class="infoboxnote" id="GUID-8EEE7B35-43C4-4C26-95C6-C39B702F1EF1__GUID-32A4EDD9-193D-4203-AB58-A59C7F235C1D">
                           <p class="notep1">Note:</p>When you create a database using Rapid Home Provisioning, the feature uses random passwords for both the SYS and SYSTEM schemas in the database and you cannot retrieve these passwords. A user with the DBA or operator role must connect to the database, locally, on the node where it is running and reset the passwords to these two accounts.
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-CD92C0DB-D5E2-427A-8784-94F4C140B279" name="GUID-CD92C0DB-D5E2-427A-8784-94F4C140B279"></a><h4 id="CWADD-GUID-CD92C0DB-D5E2-427A-8784-94F4C140B279" class="sect4"><span class="enumeration_section">5.4.3 </span>Patching Oracle Database Software
                  </h4>
                  <div>
                     <p>To patch an Oracle Database, you move the database home to a working copy which includes the patches you want to implement.</p>
                     <div class="section">Use the <code class="codeph">rhpctl move database</code> command to move one or more database homes to a working copy of the same database release level. The databases may be running on a working copy, or on an Oracle Database home that is not managed by Rapid Home Provisioning. The command creates a new&nbsp;<code class="codeph">ORACLE_HOME</code>&nbsp;based on a patched image, if it does not exist, and also makes the database run from this new location instead of its current&nbsp;<code class="codeph">ORACLE_HOME</code>&nbsp;location.
                     </div>
                     <!-- class="section" -->
                     <div class="section">The working copy to which you are moving the database can be at a lower patch level than the current database home. This facilitates rollback in the event that you encounter any problems after moving to the higher level patched home.
                        <div class="infoboxnote" id="GUID-CD92C0DB-D5E2-427A-8784-94F4C140B279__GUID-F06FD71D-16D9-4F29-ABAE-6A19938ECC6C">
                           <p class="notep1">Note:</p>Because you cannot move to a home that is not managed by Rapid Home Provisioning, rollback applies to working copies, only.
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">The working copy to which you are moving the database home can be at the same patch level as the original working copy. This is useful if you are moving a database home from one storage location to another, or if you wish to convert an unmanaged home to a managed home while staying at the same patch level.</div>
                     <!-- class="section" -->
                     <div class="section">Rapid Home Provisioning applies all patches out-of-place, minimizing the downtime necessary for maintenance. Rapid Home Provisioning also preserves the current configuration, enabling the rollback capability previously described. By default, Rapid Home Provisioning applies patches in a rolling manner, which reduces, and in many cases eliminates, service downtime. Use the&nbsp;<code class="codeph">-nonrolling</code> option to perform patching in non-rolling mode.&nbsp;The database is then completely stopped on the old&nbsp;<code class="codeph">ORACLE_HOME</code>, and then restarted to make it run from the newly patched&nbsp;<code class="codeph">ORACLE_HOME</code>.
                        <div class="infoboxnote" id="GUID-CD92C0DB-D5E2-427A-8784-94F4C140B279__GUID-798067EB-E9CA-4292-B958-1538CFF860E8">
                           <p class="notep1">Note:</p>Part of the patching process includes applying Datapatch. When you move an Oracle Database 12<span class="italic">c</span> release 1 (12.1) or higher, Rapid Home Provisioning completes this step for you. When you move to a version previous to Oracle Database 12<span class="italic">c</span> release 1 (12.1), however, you must run Datapatch manually.
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><span class="bold">Workflow for Database Patching</span></p>Assume that a database named <code class="codeph">myorcldb</code> is running on a working copy that was created from an Oracle Database 12c release 2 (12.2) gold image named <code class="codeph">DB122</code>. The typical workflow for patching an Oracle Database home is as follows:
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create a working copy of the Oracle Database that you want to patch, in this case <code class="codeph">DB122</code>.</span></li>
                        <li class="stepexpand"><span>Apply the patch to the working copy you created.</span></li>
                        <li class="stepexpand"><span>Test and validate the patched working copy.</span></li>
                        <li class="stepexpand"><span>Use the <code class="codeph">rhpctl add image</code> command to create a gold image (for example, <code class="codeph">DB122_PATCH</code>) from the patched working copy.</span><div>
                              <div class="infoboxnote" id="GUID-CD92C0DB-D5E2-427A-8784-94F4C140B279__GUID-37F07A1D-A6CB-4C90-974F-B3EA70C70D16">
                                 <p class="notep1">Note:</p>The working copy you specify in the preceding command must be hosted on the Rapid Home Provisioning Server in Rapid Home Provisioning-managed storage.
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Delete the patched working copy with the patched Oracle Database using the <code class="codeph">rhpctl delete workingcopy</code> command.</span><div>
                              <div class="infoboxnote" id="GUID-CD92C0DB-D5E2-427A-8784-94F4C140B279__GUID-56F8104D-9F2F-4B39-BE0E-8F0CFC7DB106">
                                 <p class="notep1">Note:</p>Do not remove directly using the <code class="codeph">rm</code> command or some other method, because this does not update the Rapid Home Provisioning inventory information.
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create a working copy from the patched gold image, (<code class="codeph">DB122_PATCH</code>).</span></li>
                        <li class="stepexpand"><span>Move <code class="codeph">myorcldb</code> to the working copy you just created.</span></li>
                        <li class="stepexpand"><span>When you are confident that you will not need to roll back to the working copy on which the database was running at the beginning of the procedure, delete that working copy using the <code class="codeph">rhpctl delete workingcopy</code> command.</span></li>
                     </ol>
                     <div class="section">
                        <p><span class="bold">Patching Oracle Database Using Batches</span></p>
                        <p>During database patching, Rapid Home Provisioning can sequentially process batches of nodes, with a number of nodes in each batch being restarted in parallel. This method maximizes service availability during the patching process. You can define the batches on the command line or choose to have Rapid Home Provisioning generate the list of batches based on its analysis of the database services running in the cluster.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="rapid-home-provisioning.html#GUID-856C7378-2510-4B3E-8BE1-B4D79DF4FE8B">Patching Oracle Grid Infrastructure Software</a></li>
                           <li><a href="rapid-home-provisioning.html#GUID-FE6E954E-89D7-4AE3-9B9B-A26B787ECBAE">Creating Working Copies to Provision Software</a></li>
                           <li><a href="rapid-home-provisioning.html#GUID-58793EAD-3C8B-4C3F-A5CB-680BD5693A14">Adding Gold Images to the Rapid Home Provisioning Server</a></li>
                           <li><a href="rapid-home-provisioning-and-server-control-command-reference.html#GUID-BB5B4501-E270-482A-ADEF-B3D487A9055E">RHPCTL Command Reference</a></li>
                           <li><a href="rapid-home-provisioning.html#GUID-856C7378-2510-4B3E-8BE1-B4D79DF4FE8B" title="Rapid Home Provisioning provides three methods to patch Oracle Grid Infrastructure software homes: rolling, non-rolling, and in batches.">Patching Oracle Grid Infrastructure Software</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-3EDC1553-8411-4363-BCDC-DF4687AB3D60" name="GUID-3EDC1553-8411-4363-BCDC-DF4687AB3D60"></a><h4 id="CWADD-GUID-3EDC1553-8411-4363-BCDC-DF4687AB3D60" class="sect4"><span class="enumeration_section">5.4.4 </span>Upgrading Oracle Database Software
                  </h4>
                  <div>
                     <p>There is a single Rapid Home Provisioning command for upgrading a database.</p>
                     <div class="section">Use the <code class="codeph">rhpctl upgrade database</code> command to upgrade to Oracle Database 12<span class="italic">c</span> release 1 (12.1.0.2) from Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.3 and 11.2.0.4). Upgrading to Oracle Database 12<span class="italic">c</span> release 2 (12.2.0.1) is supported from Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.3 and 11.2.0.4) and Oracle Database 12<span class="italic">c</span> release 1 (12.1.0.2).
                        <div class="infoboxnote" id="GUID-3EDC1553-8411-4363-BCDC-DF4687AB3D60__GUID-6AB1793C-A365-4CB9-8BEC-ED9A83D5E9D4">
                           <p class="notep1">Note:</p>The version of Oracle Grid Infrastructure on which the pre-upgrade database is running must be the same version or higher than the version of the database to which you are upgrading.
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">The destination for the upgrade can be a working copy already provisioned, or you can choose to create the working copy as part of this operation.</div>
                     <!-- class="section" -->
                     <div class="section">The pre-upgrade database can be running on a working copy (a managed home that was provisioned by Rapid Home Provisioning) or on an unmanaged home. In the first case, you can revert the upgrade process with a single RHPCTL command. Rapid Home Provisioning cannot revert an unmanaged home.
                        <div class="infoboxnote" id="GUID-3EDC1553-8411-4363-BCDC-DF4687AB3D60__GUID-732520D0-C464-4C9D-83F1-9F91B902889B">
                           <p class="notep1">Note:</p>You can delete the source working copy at any time after completing an upgrade. Once you delete the working copy, however, you cannot perform a rollback. Also, use the <code class="codeph">rhpctl delete workingcopy</code> command (as opposed to <code class="codeph">rm</code>, for example) to remove the source working copy to keep the Rapid Home Provisioning inventory correct.
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="rapid-home-provisioning-and-server-control-command-reference.html#GUID-926A4D78-0BAB-45EA-B5A4-B9B11BF77374" title="Upgrades a database to the version of the destination working copy.">rhpctl upgrade database</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-6CDC373B-6261-4BF8-BD60-2E9E2C3E0168" name="GUID-6CDC373B-6261-4BF8-BD60-2E9E2C3E0168"></a><h3 id="CWADD-GUID-6CDC373B-6261-4BF8-BD60-2E9E2C3E0168" class="sect3"><span class="enumeration_section">5.5 </span>Persistent Home Path During Patching
               </h3>
               <div>
                  <p>Oracle recommends out-of-place patching when applying updates.</p>
                  <p>Out-of-place patching involves deploying the patched environment in a new directory path and then switching the software home to the new path. This approach allows for non-disruptive software distribution because the existing home remains active while the new home is provisioned, and also facilitates rollback because the unpatched software home is available if any problems are encountered after the switch.</p>
                  <p>A potential impediment to traditional out-of-place patching is that the software home path changes. While Rapid Home Provisioning manages this internally and transparently for Oracle Database and Oracle Grid Infrastructure software, some users have developed scripts which depend on the path. To address this, Rapid Home Provisioning uses a file system feature that enables separation of gold image software from the site-specific configuration changes, so the software home path is persistent throughout updates.</p>
                  <p>This feature is available with Oracle Database 12<span class="italic">c</span> release 2 (12.2) and Oracle Grid Infrastructure 12<span class="italic">c</span> release 2 (12.2) working copies provisioned in local storage. Also, if you provision an Oracle Database 12<span class="italic">c</span> release 2 (12.2) or an Oracle Grid Infrastructure 12<span class="italic">c</span> release 2 (12.2) home without using this feature, then, during a patching operation using either the <code class="codeph">rhpctl move database</code> or <code class="codeph">rhpctl move gihome</code> command, you can convert to this configuration and take advantage of the feature.
                  </p>
                  <div class="infoboxnote" id="GUID-6CDC373B-6261-4BF8-BD60-2E9E2C3E0168__GUID-CB083092-3523-462B-80B5-714A419C5525">
                     <p class="notep1">Note:</p>You can only patch Oracle Grid Infrastructure on a Rapid Home Provisioning Client with a home that is based on a persistent home path from a Rapid Home Provisioning Server.
                  </div>
               </div>
            </div><a id="CWADD93066"></a><div class="props_rev_3"><a id="GUID-8D6EC31C-C179-4939-B153-C02F4398C9E0" name="GUID-8D6EC31C-C179-4939-B153-C02F4398C9E0"></a><h3 id="CWADD-GUID-8D6EC31C-C179-4939-B153-C02F4398C9E0" class="sect3"><span class="enumeration_section">5.6 </span>Managing Rapid Home Provisioning Clients
               </h3>
               <div>
                  <p>Management tasks for Rapid Home Provisioning Clients include creation, enabling and disabling, creating users and assigning roles to those users, and managing passwords.</p>
                  <p>Using SRVCTL and RHPCTL, you can perform all management tasks for a Rapid Home Provisioning Client.</p>
               </div><a id="CWADD92650"></a><div class="props_rev_3"><a id="GUID-E65C9FC4-C8AC-4BF6-A689-A70C70B3A636" name="GUID-E65C9FC4-C8AC-4BF6-A689-A70C70B3A636"></a><h4 id="CWADD-GUID-E65C9FC4-C8AC-4BF6-A689-A70C70B3A636" class="sect4"><span class="enumeration_section">5.6.1 </span>Creating a Rapid Home Provisioning Client
                  </h4>
                  <div>
                     <p>Users operate on a Rapid Home Provisioning Client to perform tasks such as requesting deployment of Oracle homes and querying gold images.</p>
                     <div class="section">
                        <p>To create a Rapid Home Provisioning Client:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>If there is no highly available VIP (HAVIP) on the Rapid Home Provisioning Server, then, as the <code class="codeph">root</code> user, create an HAVIP, as follows:</span><div><pre class="pre codeblock"><code># srvctl add havip -id <span class="variable">id</span> -address {<span class="variable">host_name</span> | <span class="variable">ip_address</span>}
</code></pre><p>You can specify either a host name or IPv4 or IPv6 IP address. The IP address that you specify for HAVIP or the address that is resolved from the specified host name <span class="italic">must not</span> be in use when you run this command.
                              </p>
                              <div class="infoboxnote" id="GUID-E65C9FC4-C8AC-4BF6-A689-A70C70B3A636__GUID-66427A78-96F0-4C53-9BE4-A8E25BD634B3">
                                 <p class="notep1">Note:</p>
                                 <p>The highly available VIP must be in the same subnet as the default network configured in the Rapid Home Provisioning Server cluster. You can obtain the subnet by running the following command:</p><pre class="pre codeblock"><code>$ srvctl config network -netnum <span class="variable">network_number</span></code></pre></div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>On the Rapid Home Provisioning Server as the Grid home owner, create the client data file, as follows:</span><div><pre class="pre codeblock"><code>$ rhpctl add client -client <span class="variable">client_cluster_name</span> -toclientdata <span class="variable">path</span>
</code></pre><p>RHPCTL creates the client data file in the directory path you specify after the <code class="codeph">-toclientdata</code> flag. The name of the client data file is <code class="codeph"><span class="variable">client_cluster_name</span>.xml</code>.
                              </p>
                              <div class="infoboxnote" id="GUID-E65C9FC4-C8AC-4BF6-A689-A70C70B3A636__GUID-851AD92A-B2B4-4235-AC50-4500FAAC177B">
                                 <p class="notep1">Note:</p>
                                 <p>The <code class="codeph"><span class="variable">client_cluster_name</span></code> must be unique and it must match the cluster name of the client cluster where you run step <a href="rapid-home-provisioning.html#GUID-E65C9FC4-C8AC-4BF6-A689-A70C70B3A636__CBBBIDBH">4</a>.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Copy the client data file that you created in the previous step to a directory on the client cluster that has read/write permissions to the Grid home owner on the Rapid Home Provisioning Client.</span></li>
                        <li class="stepexpand" id="GUID-E65C9FC4-C8AC-4BF6-A689-A70C70B3A636__CBBBIDBH"><span>Create the Rapid Home Provisioning Client by running the following command as <code class="codeph">root</code> on the client cluster:</span><div><pre class="pre codeblock"><code># srvctl add rhpclient -clientdata <span class="variable">path_to_client_data</span>
   [-diskgroup <span class="variable">disk_group_name</span> -storage <span class="variable">base_path</span>]</code></pre><p>If you want to provision working copies to Oracle ACFS storage on this cluster, and you have already created a disk group for this purpose, then specify this disk group in the preceding command. In this case, also specify a storage path which will be used as a base path for all mount points when creating Oracle ACFS file systems for storing working copies.</p>
                              <div class="infoboxnote" id="GUID-E65C9FC4-C8AC-4BF6-A689-A70C70B3A636__GUID-6A053CB3-5CAE-4B12-AFE1-0E45D5DC3398">
                                 <p class="notep1">Note:</p>
                                 <p>Once you configure a disk group on a Rapid Home Provisioning Client, you cannot remove it from or change it in the Rapid Home Provisioning Client configuration. The only way you can do either (change or remove) is to completely remove the Rapid Home Provisioning Client using the <code class="codeph">srvctl remove client</code> command, and then add it back with a different disk group, if necessary. Before you remove a Rapid Home Provisioning Client, ensure that you remove all registered users from this cluster and all working copies provisioned on this cluster.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Start the Rapid Home Provisioning Client, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl start rhpclient</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Check the status of the Rapid Home Provisioning Client, as follows:</span><div><pre class="pre codeblock"><code>$ srvctl status rhpclient</code></pre></div>
                        </li>
                     </ol>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="../racad/server-control-utility-reference.html#RACAD-GUID-C2D37BAB-DA98-49B4-A777-F2B3AA8D2E7A"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a></li>
                           <li><a href="rapid-home-provisioning-and-server-control-command-reference.html#GUID-66345667-F035-4ADB-A25F-5530299E04B7" title="Use the Rapid Home Provisioning Control (RHPCTL) utility to manage Rapid Home Provisioning in your cluster.">Rapid Home Provisioning Control (RHPCTL) Command Reference</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="CWADD93067"></a><div class="props_rev_3"><a id="GUID-E9DBA610-DF3C-45F3-9127-070BE602A52E" name="GUID-E9DBA610-DF3C-45F3-9127-070BE602A52E"></a><h4 id="CWADD-GUID-E9DBA610-DF3C-45F3-9127-070BE602A52E" class="sect4"><span class="enumeration_section">5.6.2 </span>Enabling and Disabling Rapid Home Provisioning Clients
                  </h4>
                  <div>
                     <div class="section">
                        <p>Rapid Home Provisioning Clients communicate with the Rapid Home Provisioning Server for all actions. You cannot run any RHPCTL commands without a connection to a Rapid Home Provisioning Server.</p>
                        <p>On the Rapid Home Provisioning Server, you can enable or disable <a id="d24937e7854" class="indexterm-anchor"></a>a Rapid Home Provisioning Client by running the following command from the Rapid Home Provisioning Server cluster:
                        </p><pre class="oac_no_warn" dir="ltr">$ rhpctl modify client -client <span class="italic">client_name</span> -enabled TRUE | FALSE
</pre><p>To enable a Rapid Home Provisioning Client, specify <code class="codeph">-enabled TRUE</code>. Conversely, specify <code class="codeph">-enabled FALSE</code> to disable the client. When you disable a Rapid Home Provisioning Client cluster, all RHPCTL commands from that client cluster will be rejected by the Rapid Home Provisioning Server, unless and until you re-enable the client.
                        </p>
                        <div class="infoboxnote" id="GUID-E9DBA610-DF3C-45F3-9127-070BE602A52E__GUID-815C0EC2-C183-4C62-8E55-85DA0C3D58B4">
                           <p class="notep1">Note:</p>
                           <p>Disabling a Rapid Home Provisioning Client cluster does not disable any existing working copies on the client cluster. The working copies will continue to function and any databases in those working copies will continue to run, even if their Oracle home storage comes from the Rapid Home Provisioning Server cluster over NFS.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-838D76D6-C7BB-4057-BCFE-9ED92139EC42" name="GUID-838D76D6-C7BB-4057-BCFE-9ED92139EC42"></a><h4 id="CWADD-GUID-838D76D6-C7BB-4057-BCFE-9ED92139EC42" class="sect4"><span class="enumeration_section">5.6.3 </span>Deleting a Rapid Home Provisioning Client
                  </h4>
                  <div>
                     <p>Use the following procedure to delete a Rapid Home Provisioning Client.</p>
                     <ol>
                        <li class="stepexpand"><span>Before deleting the Rapid Home Provisioning Client, you must first delete the working copies and users on the Rapid Home Provisioning Server, as follows:</span><ol type="a">
                              <li class="substepexpand"><span>Query the list of working copies that have been provisioned on the Rapid Home Provisioning Client cluster.</span><div>
                                    <p>Run the following command:</p><pre class="pre codeblock"><code>$ rhpctl query workingcopy -client <span class="italic">client_name</span></code></pre></div>
                              </li>
                              <li class="substepexpand"><span>Delete each of the working copies listed in the output of the preceding command.</span><div>
                                    <p>Run the following command for each working copy and specify the name of the working copy you want to delete:</p><pre class="pre codeblock"><code>$ rhpctl delete workingcopy -workingcopy <span class="italic">working_copy_name</span></code></pre></div>
                              </li>
                              <li class="substepexpand"><span>Query the list of users from the Rapid Home Provisioning Client cluster.</span><div>
                                    <p>Run the following command:</p><pre class="pre codeblock"><code>$ rhpctl query user -client <span class="italic">client_name</span></code></pre></div>
                              </li>
                              <li class="substepexpand"><span>Delete the users listed in the output of the preceding command, as follows:</span><div>
                                    <p>Run the following command and specify the name of the user you want to delete and the name of the client:</p><pre class="pre codeblock"><code>$ rhpctl delete user -user <span class="italic">user_name</span> —client <span class="italic">client_name</span></code></pre></div>
                              </li>
                           </ol>
                        </li>
                        <li class="stepexpand"><span>On the Rapid Home Provisioning Client cluster, delete the client, as follows:</span><ol type="a">
                              <li class="substepexpand"><span>Stop the Rapid Home Provisioning Client daemon.</span><div>
                                    <p>Run the following command:</p><pre class="pre codeblock"><code>$ srvctl stop rhpclient</code></pre></div>
                              </li>
                              <li class="substepexpand"><span>Delete the Rapid Home Provisioning Client configuration.</span><div>
                                    <p>Run the following command:</p><pre class="pre codeblock"><code>$ srvctl remove rhpclient</code></pre></div>
                              </li>
                           </ol>
                        </li>
                        <li class="stepexpand"><span>Delete the client site configuration on the Rapid Home Provisioning Server cluster.<code class="codeph"></code></span><div>
                              <p>Run the following command and specify the name of the client:</p><pre class="pre codeblock"><code>$ rhpctl delete client -client <span class="italic">client_name</span></code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="CWADD93068"></a><div class="props_rev_3"><a id="GUID-43A1B15A-CF4A-4C1F-BFE1-C830CFD4D44F" name="GUID-43A1B15A-CF4A-4C1F-BFE1-C830CFD4D44F"></a><h4 id="CWADD-GUID-43A1B15A-CF4A-4C1F-BFE1-C830CFD4D44F" class="sect4"><span class="enumeration_section">5.6.4 </span>Creating Users and Assigning Roles for Rapid Home Provisioning Client Cluster Users
                  </h4>
                  <div>
                     <div class="section">
                        <p>When you create a Rapid Home Provisioning Client with the <code class="codeph">rhpctl add client</code> command, you can use the <code class="codeph">-maproles</code> parameter to create users and assign roles to them. You can associate multiple users with roles, or you can assign a single user multiple roles with this command.
                        </p>
                        <p>After the client has been created, you can add and remove roles for users using the <code class="codeph">rhpctl grant role</code> command and the <code class="codeph">rhpctl revoke role</code>, respectively.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="CWADD93069"></a><div class="props_rev_3"><a id="GUID-8429C5C1-44B7-4FDF-8DCE-B5F536AA2054" name="GUID-8429C5C1-44B7-4FDF-8DCE-B5F536AA2054"></a><h4 id="CWADD-GUID-8429C5C1-44B7-4FDF-8DCE-B5F536AA2054" class="sect4"><span class="enumeration_section">5.6.5 </span>Managing the Rapid Home Provisioning Client Password
                  </h4>
                  <div>
                     <div class="section">
                        <p>The <a id="d24937e8324" class="indexterm-anchor"></a>Rapid Home Provisioning Client uses a password stored internally to authenticate itself with the RHP server. You cannot query this password, however, if for some reason, you are required to reset this password, then you can do so, as follows, on the RHP server cluster:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Run the following command on the Rapid Home Provisioning Server cluster to generate a new password and store it in the client credential:</span><div><pre class="oac_no_warn" dir="ltr">$ rhpctl modify client -client <span class="italic">client_name</span> -password
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the following command on the Rapid Home Provisioning Server cluster to generate a credential file:</span><div><pre class="oac_no_warn" dir="ltr">$ rhpctl export client -client <span class="italic">client_name</span> -clientdata <span class="italic">file_path</span>
</pre><p>For example, to generate a credential file for a Rapid Home Provisioning Client named <code class="codeph">mjk9394</code>:
                              </p><pre class="oac_no_warn" dir="ltr">$ rhpctl export client -client mjk9394 -clientdata /tmp/mjk9394.xml
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Continuing with the preceding example, transport the generated credential file securely to the Rapid Home Provisioning Client cluster and then run the following command on any node in the Rapid Home Provisioning Client cluster:</span><div><pre class="oac_no_warn" dir="ltr">$ srvctl modify rhpclient -clientdata <span class="italic">path_to_mjk9394.xml</span>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Restart the Rapid Home Provisioning Client daemon by running the following commands on the Rapid Home Provisioning Client cluster:</span><div><pre class="oac_no_warn" dir="ltr">$ srvctl stop rhpclient
$ srvctl start rhpclient</pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-4A987DBE-1BBC-4FEE-B576-A06308AA05C8" name="GUID-4A987DBE-1BBC-4FEE-B576-A06308AA05C8"></a><h3 id="CWADD-GUID-4A987DBE-1BBC-4FEE-B576-A06308AA05C8" class="sect3"><span class="enumeration_section">5.7 </span>Rapid Home Provisioning Use Cases
               </h3>
               <div>
                  <p>Review these topics for step-by-step procedures to provision, patch, and upgrade your software using Rapid Home Provisioning. </p>
                  <p>Rapid Home Provisioning is a software lifecycle management solution and helps standardize patching, provisioning, and upgrade of your standard operating environment.</p>
               </div>
               <div class="sect3"><a id="GUID-576A8A2F-A7E2-4678-BD3F-ACF1E731B3A9" name="GUID-576A8A2F-A7E2-4678-BD3F-ACF1E731B3A9"></a><h4 id="CWADD-GUID-576A8A2F-A7E2-4678-BD3F-ACF1E731B3A9" class="sect4"><span class="enumeration_section">5.7.1 </span>Creating an Oracle Grid Infrastructure 12<span class="italic">c</span> Release 2 Deployment
                  </h4>
                  <div>
                     <p>Provision Oracle Grid Infrastructure software on two nodes that do not currently have a Grid home, and then configure Oracle Grid Infrastructure to form a multi-node Oracle Grid Infrastructure installation.</p>
                     <div class="section">
                        <p class="subhead3">Before You Begin</p>
                        <p>Provide configuration details for storage, network, users and groups, and node information for installing Oracle Grid Infrastructure in a response file. You can store the response file in any location on the Rapid Home Provisioning Server. </p>
                        <p>You can provision an Oracle Standalone Cluster, Oracle Application Clusters, Oracle Domain Services Cluster, or Oracle Member Clusters. Ensure that the response file has the required cluster configuration details.</p>
                        <p>Ensure that you have storage, network, and operating system requirements configured as stated in the <cite>Oracle Grid Infrastructure Installation Guide</cite>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Procedure</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>From the Rapid Home Provisioning Server, run the command:</span><div><pre class="pre codeblock"><code>rhpctl add workingcopy -workingcopy GI122 -image GI_HOME_12201 &#x2013;responsefile /u01/app/rhpinfo/GI_12201_install.rsp &#x2013;root</code></pre><p><code class="codeph">GI122</code> is the working copy based on the image <code class="codeph">GI_HOME_12201</code></p>
                              <p><code class="codeph">/u01/app/rhpinfo/GI_12201_install.rsp</code> is the response file location. 
                              </p>
                              <p>Provide <code class="codeph">root</code> or <code class="codeph">sudo</code> credentials to connect to the nodes.
                              </p>
                           </div>
                           <div>Cluster Verification Utility checks for preinstallation configuration as per requirements. Rapid Home Provisioning configures Oracle Grid Infrastructure. </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Oracle Grid Infrastructure 12<span class="italic">c</span> release 2 is provisioned as per the settings in the same response file.
                        </p>
                        <p>During provisioning, if an error occurs, the procedure stops and allows you to fix the error. After fixing the error, you can resume the provisioning operation from where it last stopped.</p>
                        <p>Watch a video
                           <div class="video-box">
                              <div id="18888" class="video-container"></div>
                           </div>
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-EE5A5ED3-5ACF-4745-AB9D-6A4D2E438D09" name="GUID-EE5A5ED3-5ACF-4745-AB9D-6A4D2E438D09"></a><h4 id="CWADD-GUID-EE5A5ED3-5ACF-4745-AB9D-6A4D2E438D09" class="sect4"><span class="enumeration_section">5.7.2 </span>Provisioning an Oracle Database Home and Creating a Database
                  </h4>
                  <div>
                     <p>This procedure provisions Oracle Database 12<span class="italic">c</span> release 2 (12.2) software and creates Oracle Database instances.
                     </p>
                     <div class="section">
                        <p class="subhead3">Before You Begin</p>
                        <p>Ensure that there exists a gold image <code class="codeph">db12201</code> stored on the Rapid Home Provisioning Server.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Procedure</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>From the Rapid Home Provisioning Server, provision the Oracle Database home software:</span><div><pre class="pre codeblock"><code>rhpctl add workingcopy -image db12201 -path /u01/app/dbusr/product/12.2.0/db12201
  -client client_001 -oraclebase /u01/app/dbusr/ 
-workingcopy db122 </code></pre></div>
                           <div>The command provisions the working copy <code class="codeph">db122</code> to the specified path on the cluster <code class="codeph">client_001</code>, from the image <code class="codeph">db12201</code> .
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create the database instance:</span><div><pre class="pre codeblock"><code>rhpctl add database -workingcopy db122 -dbname db -dbtype RAC</code></pre></div>
                           <div>The command creates an Oracle RAC database instance <code class="codeph">db</code> . You can use the <code class="codeph">add database</code> command repeatedly to create more instances on the working copy.
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Watch a video
                           <div class="video-box">
                              <div id="18874" class="video-container"></div>
                           </div>
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-018ACE1C-D873-45CF-A2D7-D7BD7B9C7AFA" name="GUID-018ACE1C-D873-45CF-A2D7-D7BD7B9C7AFA"></a><h4 id="CWADD-GUID-018ACE1C-D873-45CF-A2D7-D7BD7B9C7AFA" class="sect4"><span class="enumeration_section">5.7.3 </span>Upgrading to Oracle Grid Infrastructure 12<span class="italic">c</span> Release 2
                  </h4>
                  <div>
                     <p>This procedure uses Rapid Home Provisioning to upgrade your Oracle Grid Infrastructure cluster from  11<span class="italic">g</span> release 2 (11.2.0.4) to  12<span class="italic">c</span> release 2 (12.2).
                     </p>
                     <div class="section">
                        <p class="subhead3">Before You Begin</p>
                        <p>To upgrade to Oracle Grid Infrastructure 12<span class="italic">c</span> release 2 (12.2.0.1), your source must be Oracle Grid Infrastructure 11<span class="italic">g</span> release 2 (11.2.0.3 or 11.2.0.4), or Oracle Grid Infrastructure 12<span class="italic">c</span> release 2 (12.1.0.2).
                        </p>
                        <p>Ensure that groups configured in the source home match those in the destination home.</p>
                        <p>Ensure that you have an image <code class="codeph">GI_HOME_12201</code> of the Oracle Grid Infrastructure 12<span class="italic">c</span> release 2 (12.2.0.1) software to provision your working copy.
                        </p>
                        <p><code class="codeph">GI_11204</code> is the active Grid Infrastructure home on the cluster being upgraded.  It is a working copy because in this example, Rapid Home Provisioning provisioned the cluster.  Rapid Home Provisioning can also upgrade clusters whose Grid Infrastructure homes are unmanaged that is, homes that Rapid Home Provisioning did not provision.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Procedure</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Provision a working copy of the Oracle Grid Infrastructure 12<span class="italic">c</span> release 2 (12.2.0.1) software:</span><div><pre class="pre codeblock"><code>rhpctl add workingcopy -workingcopy GI122 -image GI_HOME_12201 -root root</code></pre><p><code class="codeph">GI122</code> is the working copy based on the image <code class="codeph">GI_HOME_12201</code>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Upgrade your target cluster to the <code class="codeph">GI122</code> working copy:</span><div><pre class="pre codeblock"><code>rhpctl upgrade gihome -sourcewc GI11204 -destwc GI122</code></pre></div>
                           <div>Rapid Home Provisioning identifies the cluster to upgrade based on the name of the source working copy, and upgrades to the working copy<code class="codeph">GI122</code>.
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-01E1C53C-CD9E-4E96-BA2A-C061821768D2" name="GUID-01E1C53C-CD9E-4E96-BA2A-C061821768D2"></a><h4 id="CWADD-GUID-01E1C53C-CD9E-4E96-BA2A-C061821768D2" class="sect4"><span class="enumeration_section">5.7.4 </span>Patching Oracle Grid Infrastructure Without Changing the Grid Home Path
                  </h4>
                  <div>
                     <p>This procedure explains how to patch Oracle Grid Infrastructure without changing the Grid home path.</p>
                     <div class="section">
                        <p class="subhead3">Before You Begin</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Ensure that the gold image containing the Grid home is imported and exists on the Rapid Home Provisioning Server.</p>
                           </li>
                           <li>
                              <p>Ensure that the directory you provide in the <code class="codeph">­path</code> option is not an existing directory.
                              </p>
                           </li>
                           <li>
                              <p>If you are moving from one OLFS-compliant Grid home to another, then ensure that the image <code class="codeph">GIHOME_12201_LPM</code> with Oracle Layered File System (OLFS) enabled, is available.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Procedure for Patching</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>To patch a Grid home and move it to Oracle Layered File System (OLFS), from the Rapid Home Provisioning Server, run one of the following commands:</span><ol type="a">
                              <li class="substepexpand"><span>To patch a Grid home managed by Rapid Home Provisioning (the source working copy exists because the Oracle home is managed by Rapid Home Provisioning):</span><div><pre class="pre codeblock"><code>[GRID:grid@testuser:/grid_home]&gt; rhpctl move gihome -srcwc GI_HOME_12201
 -destwc GI_HOME_12201_PSU1 -aupath  /u01/app/orabase/product/12.2.0.1/aupath
-agpath /u01/app/orabase/product/12.2.0.1/aupath -image -path /u01/app/orabase/product/12.2.0.1/grid</code></pre><p><code class="codeph">GI_HOME_12201</code> is the source working copy of Grid home to be patched and <code class="codeph">GI_HOME_12201_PSU1</code> is the working copy of the Grid home software with the patches applied.
                                    </p>
                                    <p><code class="codeph">/u01/app/orabase/product/12.2.0.1/agpath</code> and <code class="codeph">/u01/app/orabase/product/12.2.0.1/aupath</code> are the logical paths that resolve to the physical path <code class="codeph">/u01/app/orabase/product/12.2.0.1/grid</code> when the Grid home is patched.
                                    </p>
                                 </div>
                              </li>
                              <li class="substepexpand"><span>To patch an unmanaged Grid home (the source working copy does not exist because the Oracle home is not managed by Rapid Home Provisioning):</span><div><pre class="pre codeblock"><code>[GRID:grid@testuser:/grid_home]&gt; rhpctl move gihome -sourcehome /u01/app/grid
 -destwc GI_HOME_12201_PSU1 -aupath /u01/app/orabase/product/12.2.0.1/aupath 
-agpath /u01/app/orabase/product/12.2.0.1/agpath -image -path /u01/app/orabase/product/12.2.0.1/grid</code></pre><p><code class="codeph">/u01/app/grid</code> is the path of the Grid home to be patched and <code class="codeph">GI_HOME_12201_PSU1</code> is the working copy of the Grid home software with the patches applied.
                                    </p>
                                    <p><code class="codeph">/u01/app/orabase/product/12.2.0.1/agpath</code> and <code class="codeph">/u01/app/orabase/product/12.2.0.1/aupath</code> are the logical paths that resolve to the physical path <code class="codeph">/u01/app/orabase/product/12.2.0.1/grid</code> when the Grid home is patched.
                                    </p>
                                 </div>
                              </li>
                           </ol>
                           <div></div>
                        </li>
                        <li class="stepexpand"><span>To patch a Grid home that is compliant with Oracle Layered File System (OLFS), from the Rapid Home Provisioning Server, run the following:</span><div><pre class="pre codeblock"><code>[GRID:grid@testuser:/grid_home]&gt; rhpctl move gihome -sourcewc gihome12201_lpm
 -destwc gihome12201_psu1_lpm -aupath /u01/app/orabase/product/12.2.0.1/aupath 
-image GIHOME_12201_LPM</code></pre><p>The Grid home running from the source working copy <code class="codeph">gihome12201_lpm</code> is moved to the working copy <code class="codeph">gihome12201_psu1_lpm</code>, based on the image <code class="codeph">GIHOME_12201_LPM</code> and contains the patches.
                              </p>
                           </div>
                           <div></div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-4E6A7A57-BB3C-49A1-9C9F-820EA62D675A" name="GUID-4E6A7A57-BB3C-49A1-9C9F-820EA62D675A"></a><h4 id="CWADD-GUID-4E6A7A57-BB3C-49A1-9C9F-820EA62D675A" class="sect4"><span class="enumeration_section">5.7.5 </span>Patching Oracle Grid Infrastructure and Oracle Databases Simultaneously
                  </h4>
                  <div>
                     <p>This procedure patches Oracle Grid Infrastructure and Oracle Databases on the cluster to the latest patch level without cluster downtime.</p>
                     <div class="section">
                        <p class="subhead3">Before You Begin</p>
                        <p>In this procedure, Oracle Grid Infrastructure 12<span class="italic">c</span> release 2 (12.2.0.1) is running on the target cluster. Working copy <code class="codeph">GI_HOME_12201_WCPY</code> is the active Grid home on this cluster. Working copy <code class="codeph">DB_HOME_12201_WCPY</code> runs an Oracle RAC 12<span class="italic">c</span> release 2 (12.2.0.1) Database with running database instance <code class="codeph">db1</code>. Working copy <code class="codeph">DB_HOME_12102_WCPY</code> runs an Oracle RAC 12<span class="italic">c</span> release 1 (12.1.0.2) Database with running database instance <code class="codeph">db2</code></p>
                        <p>Ensure that you have images <code class="codeph">GI_HOME_12201_PSU1</code>, <code class="codeph">DB_HOME_12201_PSU1</code>, <code class="codeph">DB_HOME_12102_PSU5</code> with the required patches for Oracle Grid Infrastructure and Oracle RAC Database on the Rapid Home Provisioning Server. 
                        </p>
                        <p>The groups configured in the source home must match with those in the destination home.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Procedure</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Prepare target Oracle homes as follows:</span><ol type="a">
                              <li class="substepexpand"><span>Provision software-only Grid home on the cluster to be patched:</span><div><pre class="pre codeblock"><code>rhpctl add workingcopy -workingcopy GI_HOME_12201_PATCHED_WCPY 
-image GI_HOME_12201_PSU1 &#x2013;client CLUSTER_005 -softwareonly</code></pre></div>
                              </li>
                              <li class="substepexpand"><span>Provision each release Database home, without database instances, to be patched:</span><div><pre class="pre codeblock"><code>rhpctl add workingcopy -workingcopy DB_HOME_12201_PATCHED_WCPY 
-image DB_HOME_12201_PSU1
rhpctl add workingcopy -workingcopy DB_HOME_12102_PATCHED_WCPY 
-image DB_HOME_12102_PSU5</code></pre></div>
                              </li>
                           </ol>
                        </li>
                        <li class="stepexpand"><span>Patch Oracle Grid Infrastructure and all Oracle RAC Databases on <code class="codeph">node1</code> as follows:</span><div><pre class="pre codeblock"><code>rhpctl move gihome -sourcewc GI_HOME_12201_WCPY -destwc GI_HOME_12201_PATCHED_WCPY -auto 
-dbhomes DB_HOME_12102_WCPY=DB_HOME_12102_PATCHED_WCPY,DB_HOME_12201_WCPY=DB_HOME_12201_PATCHED_WCPY -targetnode node1 -root</code></pre><p>When you run the command, you move your active Oracle Grid Infrastructure from working copy <code class="codeph">GI_HOME_12201_WCPY</code> to <code class="codeph">GI_HOME_12201_PATCHED_WCPY</code>, Oracle RAC Database <code class="codeph">db1</code> from <code class="codeph">DB_HOME_12201_WCPY</code> to <code class="codeph">DB_HOME_12201_PATCHED_WCPY</code>, and Oracle RAC Database <code class="codeph">db2</code> from <code class="codeph">DB_HOME_12102_WCPY</code> to <code class="codeph">DB_HOME_12102_PATCHED_WCPY</code>.
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-666A28B6-66D5-48F6-AD2B-7606E300517E" name="GUID-666A28B6-66D5-48F6-AD2B-7606E300517E"></a><h4 id="CWADD-GUID-666A28B6-66D5-48F6-AD2B-7606E300517E" class="sect4"><span class="enumeration_section">5.7.6 </span>Patching Oracle Database 12<span class="italic">c</span> Release 1 Without Downtime
                  </h4>
                  <div>
                     <p>This procedure explains how to patch Oracle Database 12<span class="italic">c</span> release 1 (12.1.0.2) with the latest patching without bringing down the database.
                     </p>
                     <div class="section">
                        <p class="subhead3">Before You Begin</p>
                        <p>You have an Oracle Database <code class="codeph">db12102</code> that you want to patch to the latest patch level.
                        </p>
                        <p>Ensure that the working copy <code class="codeph">db12102_psu</code> based on the image <code class="codeph">DB12102_PSU</code> contains the latest patches and is available.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Procedure</p>
                        <p>From the Rapid Home Provisioning Server, run one of the following commands as per your source and destination database:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>To patch an Oracle Database home managed by Rapid Home Provisioning, and there exist working copies of the source and destination databases, run:</span><div><pre class="pre codeblock"><code>rhpctl move database -sourcewc db12102 -patchedwc db12102_psu</code></pre><p><code class="codeph">db12102</code> is the source working copy of the database being patched
                              </p>
                              <p><code class="codeph">db12102_psu</code> is the working copy of the Oracle Database software with patches applied, based on the image <code class="codeph">DB12102_PSU</code>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>To patch an unmanaged Oracle Database home (source working copy does not exist because the Oracle home is not managed by Rapid Home Provisioning), run:</span><div><pre class="pre codeblock"><code>rhpctl move database -sourcehome /u01/app/orabase/product/12.1.0.2/dbhome_1
 -patchedwc db12102_psu -targetnode node1</code></pre><p><code class="codeph">targetnode</code> specifies the node on which the database to be upgraded is running, because the source Oracle Database is on a 12.1.0.2 cluster.
                              </p>
                              <p><code class="codeph">/u01/app/orabase/product/12.1.0.2/dbhome_1</code> is the path of the database being patched
                              </p>
                              <p><code class="codeph">db12102_psu</code> is the working copy of the Oracle Database software with patches applied, based on the image <code class="codeph">DB12102_PSU</code>.
                              </p>
                           </div>
                           <div></div>
                           <div>Use the saved gold image for standardized patching of all your databases of release 12<span class="italic">c</span> release 1 to the same patch level.
                           </div>
                        </li>
                        <li class="stepexpand"><span>If for some reason, you want to rollback the patches applied to an unmanaged Oracle Database home, run:</span><div><pre class="pre codeblock"><code>rhpctl move database -patchedwc db12102_psu 
-sourcehome /u01/app/orabase/product/12.1.0.2/dbhome_1
 targetnode node1</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>For all Oracle Databases, you can also specify these additional options with the <code class="codeph">move database</code> command:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">-keepplacement</code>: For admin-managed Oracle RAC Databases (not Oracle RAC One Node Database), Rapid Home Provisioning retains the services on the same nodes after the move. 
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-disconnect</code>: Disconnects all sessions before stopping or relocating services.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-drain_timeout</code>: Specify the time, in seconds, allowed for resource draining to be completed for planned maintenance operations. During the draining period, all current client requests are processed, but new requests are not accepted. This option is available only with Oracle Database 12<span class="italic">c</span> release 2 (12.2) or later.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-stopoption</code>: Stops the database.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">-nodatapatch</code>: Ensures <code class="codeph">datapatch</code> is not run for databases you are moving.
                              </p>
                           </li>
                        </ul>
                        <p>Watch a video
                           <div class="video-box">
                              <div id="18887" class="video-container"></div>
                           </div>
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-3C43BA78-B15B-4235-9088-81D65A13C497" name="GUID-3C43BA78-B15B-4235-9088-81D65A13C497"></a><h4 id="CWADD-GUID-3C43BA78-B15B-4235-9088-81D65A13C497" class="sect4"><span class="enumeration_section">5.7.7 </span>Upgrading to Oracle Database 12<span class="italic">c</span> Release 2
                  </h4>
                  <div>
                     <p>This procedure describes how to upgrade an Oracle Database from 11.2 to 12<span class="italic">c</span> release 2 with a single command, using Rapid Home Provisioning, both for managed and unmanaged Oracle homes.
                     </p>
                     <div class="section">
                        <p class="subhead3">Before you Begin</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>To upgrade to Oracle Database 12<span class="italic">c</span> release 2 (12.2.0.1), your source database must be either Oracle Database 11<span class="italic">g</span> release 2 (11.2.0.3 or 11.2.0.4), or Oracle Database 12<span class="italic">c</span> release 1 (12.1.0.2).
                              </p>
                           </li>
                           <li>
                              <p>Oracle Grid Infrastructure on which the pre-upgrade database is running must be of the same release or later than the database release to which you are upgrading.</p>
                           </li>
                           <li>
                              <p>The source Oracle home to be upgraded can be a managed working copy, that is an Oracle home provisioned using Rapid Home Provisioning, or an unmanaged home, that is, an Oracle home not provisioned using Rapid Home Provisioning. If you are upgrading an unmanaged Oracle home, provide the complete path of the database for upgrade.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Procedure to Upgrade Oracle Database using Rapid Home Provisioning</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>From the Rapid Home Provisioning Server, run one of the following commands as per your source and destination database:</span><ol type="a">
                              <li class="substepexpand"><span>To upgrade an Oracle home managed by Rapid Home Provisioning, and there exist working copies of the source and destination databases, run: </span><div><pre class="pre codeblock"><code>[GRID:grid@testuser:/grid_home]&gt;  rhpctl upgrade database -dbname test_database 
-sourcewc db112 -destwc db122 -root</code></pre><p><code class="codeph">test_database</code> is the name of the database being upgraded. 
                                    </p>
                                    <p><code class="codeph">db112</code> is the source working copy of the pre-upgrade database.
                                    </p>
                                    <p><code class="codeph">db122</code> is the working copy of the upgraded Oracle Database software.
                                    </p>
                                 </div>
                              </li>
                              <li class="substepexpand"><span>To upgrade an unmanaged Oracle home (source working copy does not exist because the Oracle home is not managed by Rapid Home Provisioning), run:</span><div><pre class="pre codeblock"><code>[GRID:grid@testuser:/grid_home]&gt;  rhpctl move database -sourcehome 
/u01/app/orabase/product/11.2.0/dbhome_1 -destwc db122 -targetnode node1 -root</code></pre><p><code class="codeph">/u01/app/orabase/product/11.2.0/dbhome_1</code> is the path of the database being upgraded. 
                                    </p>
                                    <p><code class="codeph">db122</code> is the working copy of the upgraded Oracle Database software.
                                    </p>
                                    <p><code class="codeph">targetnode</code> specifies the node on which the database to be upgraded is running, because the source Oracle Database is on a 11.2.0.4 cluster.
                                    </p>
                                 </div>
                              </li>
                           </ol>
                           <div></div>
                        </li>
                     </ol>
                     <div class="section">The upgraded database is now managed by Rapid Home Provisioning. You can ensure that your database is patched to the latest level, using Rapid Home Provisioning.
                        <div class="infoboxnote" id="GUID-3C43BA78-B15B-4235-9088-81D65A13C497__GUID-E187BA50-88F6-4D33-8567-DC16F1FF03D6">
                           <p class="notep1">Note:</p> During upgrade, if an error occurs, the procedure stops and allows you to fix the error. After fixing the error, you can resume the upgrade operation from where it last stopped.
                        </div>
                        <p>Watch a video
                           <div class="video-box">
                              <div id="18886" class="video-container"></div>
                           </div>
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-34F15203-2715-47CE-80EE-962355B61CAE" name="GUID-34F15203-2715-47CE-80EE-962355B61CAE"></a><h4 id="CWADD-GUID-34F15203-2715-47CE-80EE-962355B61CAE" class="sect4"><span class="enumeration_section">5.7.8 </span>Adding a Node to a Cluster and Scaling an Oracle RAC Database to the Node
                  </h4>
                  <div>
                     <p>To your two-node cluster, you can add a new node, and extend an Oracle RAC Database to the new node, using Rapid Home Provisioning.</p>
                     <div class="section">
                        <p class="subhead3">Before You Begin</p>
                        <p>In this procedure, Oracle Grid Infrastructure 12c release 2 (12.2.0.1) is running on the  cluster. Working copy <code class="codeph">GI_HOME_12202_WCPY</code> is the active Grid home on this cluster.
                        </p>
                        <p>The Oracle RAC Database home runs on the working copy <code class="codeph">DB_HOME_12202_WCPY</code> .
                        </p>
                        <p>Ensure that you have storage, network, and operating system requirements configured for the new node as stated in <cite>Oracle Grid Infrastructure Installation Guide</cite>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Procedure</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>From the Rapid Home Provisioning Server, run the following command to add a node to the existing Oracle Grid Infrastructure working copy:</span><div><pre class="pre codeblock"><code>rhpctl addnode gihome -workingcopy GI_HOME_12202_WCPY -newnodes -root n3:n3-vip -root</code></pre></div>
                           <div>The command extends the cluster by adding <code class="codeph">node3</code>.
                           </div>
                        </li>
                        <li class="stepexpand"><span>Add instances to the administrator-managed Oracle RAC Database on the new node:</span><div><pre class="pre codeblock"><code>rhpctl addnode database -workingcopy DB_HOME_12202_WCPY -dbname db321 -node n3 -root</code></pre></div>
                           <div>The command extends the database home on the <code class="codeph">node3</code> and creates database <code class="codeph">db321</code> on this node.
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>Watch a video
                           <div class="video-box">
                              <div id="18899" class="video-container"></div>
                           </div>
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-53F8804C-E900-4B92-A092-5C2EF4B61CEE" name="GUID-53F8804C-E900-4B92-A092-5C2EF4B61CEE"></a><h4 id="CWADD-GUID-53F8804C-E900-4B92-A092-5C2EF4B61CEE" class="sect4"><span class="enumeration_section">5.7.9 </span>Adding Gold Images for Rapid Home Provisioning
                  </h4>
                  <div>
                     <p>Create gold images of software home and store them on the Rapid Home Provisioning Server, to use later to provision Oracle homes.</p>
                     <div class="section">
                        <p class="subhead3">Before You Begin</p>
                        <p>The Oracle home to be used for creating the gold image can be on the Rapid Home Provisioning Server, or Rapid Home Provisioning Client,  or any target machine that the Rapid Home Provisioning Server can communicate with.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Procedure</p>
                        <p>Create gold images of Oracle homes in any of the following ways and store them on the Rapid Home Provisioning server:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Import an image from an installed Oracle home on the Rapid Home Provisioning Server:</span><div><pre class="pre codeblock"><code>rhpctl import image -image db12201 -path /share/software/122/dbhome -imagetype ORACLEDBSOFTWARE </code></pre><p>The gold image of <code class="codeph">imagetype</code> Oracle Database 12<span class="italic">c</span> release 2 software is created and stored on the Rapid Home Provisioning Server. 
                              </p>
                              <p>You can also create by gold images of Oracle Grid Infrastructure or any other software by specifying <code class="codeph">-imagetype</code> as <code class="codeph">ORACLEGISOFTWARE</code> or <code class="codeph">SOFTWARE</code> respectively.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Import an image from an installed Oracle home on a Rapid Home Provisioning Client by running the following command from the Rapid Home Provisioning Client:</span><div><pre class="pre codeblock"><code>rhpctl import image -image db12201 -path /u01/app/dbusr/product/12.2.0/</code></pre><p>The command creates and adds the image <code class="codeph">db12201</code> based on the local Oracle home installed in the specified path.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-53F8804C-E900-4B92-A092-5C2EF4B61CEE__GUID-9D279974-9A5E-43E3-B27A-33AE1971A20F">
                           <p class="notep1">Note:</p>You cannot directly use images as software homes. Use images to create working copies of software homes.
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-ED72B0AF-5D45-43CC-AF03-8399D1FBC7F6" name="GUID-ED72B0AF-5D45-43CC-AF03-8399D1FBC7F6"></a><h4 id="CWADD-GUID-ED72B0AF-5D45-43CC-AF03-8399D1FBC7F6" class="sect4"><span class="enumeration_section">5.7.10 </span>Creating User Action to Deploy a Web Server
                  </h4>
                  <div>
                     <p>You can install and configure any type of software using Rapid Home Provisioning user actions. Review this procedure to automate deployment of Apache Web Server using Rapid Home Provisioning.</p>
                     <div class="section">Rapid Home Provisioning supports creation of work flows to deploy and manage all types of software.</div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Create the script to install Apache Web server:</span><ol type="a">
                              <li><span>On the Rapid Home Provisioning Server, download and extract the Apache Web server installation kit.</span></li>
                              <li><span>Create the script to install, configure, and start the Apache Web server. </span></li>
                           </ol>
                        </li>
                        <li class="stepexpand"><span>Register the script as a user action with Rapid Home Provisioning. Run the following command from the Rapid Home Provisioning Server:</span><div><pre class="pre codeblock"><code>rhpctl useraction -useraction apachestart 
-actionscript /user1/useractions/apacheinstall.sh 
-post -optype ADD_WORKINGCOPY -onerror ABORT</code></pre><p>The command adds the <code class="codeph">apachestart</code> user action for the action script stored in the specified directory. As per the specified properties, the user action runs after the <code class="codeph">ADD_WORKINGCOPY</code> operation and aborts if there is any error.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create an image type and associate the user action with the image type:</span><div><pre class="pre codeblock"><code>rhpctl add imagetype -imagetype apachetype -basetype SOFTWARE 
-useraction "apachestart"</code></pre><p>The command creates a new image type called <code class="codeph">apachetype</code>, a derivative of the basic image type <code class="codeph">SOFTWARE</code> with an associated user action <code class="codeph">apacherstart</code>.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create a gold image of the image type:</span><div><pre class="pre codeblock"><code>rhpctl import image -image apacheinstall -path /user1/apache2219_kit/ 
-imagetype apachetype</code></pre><p>The command creates a gold image <code class="codeph">apacheinstall</code> with the script for Apache Web server installation, in the specified path based on the <code class="codeph">imagetype</code> created earlier.
                              </p>
                           </div>
                           <div>To view the properties of this image, run the <code class="codeph">rhpctl query image -image apacheinstall</code> command.
                           </div>
                        </li>
                        <li class="stepexpand"><span>Deploy a working copy of the gold image on the target:</span><div><pre class="pre codeblock"><code>rhpctl add workingcopy -workingcopy apachecopy -image apacheinstall 
-path /user1/apacheinstallloc -sudouser user1 
-sudopath /usr/local/bin/sudo -node node1 -user user1 
-useractiondata "/user1/apachehome:1080:2.2.19</code></pre><p>Rapid Home Provisioning provisions the software to the target and runs the script <code class="codeph">apachestart</code> specified in the user action. You provide the Apache Web server configuration details such as port number with the <code class="codeph">useractiondata</code> option. If the target is a Rapid Home Provisioning Client, then you need not specify <code class="codeph">sudo</code> credentials.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">You can similarly, create other user actions and automate installation and configuration of software homes using Rapid Home Provisioning.</div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>