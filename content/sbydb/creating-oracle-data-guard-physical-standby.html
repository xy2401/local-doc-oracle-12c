<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can manually create a physical standby database in maximum performance mode using asynchronous redo transport and real-time apply, the default Oracle Data Guard configuration.">
      <meta name="description" content="You can manually create a physical standby database in maximum performance mode using asynchronous redo transport and real-time apply, the default Oracle Data Guard configuration.">
      <title>Creating a Physical Standby Database</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Concepts and Administration ">
      <meta property="og:description" content="You can manually create a physical standby database in maximum performance mode using asynchronous redo transport and real-time apply, the default Oracle Data Guard configuration.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Concepts and Administration">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 17.8.1">
      <link rel="alternate" href="data-guard-concepts-and-administration.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2017-10-11T12:53:16-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1999, 2017">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E85767-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="getting-started-with-oracle-data-guard.html" title="Previous" type="text/html">
      <link rel="next" href="creating-oracle-data-guard-logical-standby.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">
            {
                "primary":
                {
                    "category":{
                      "short_name":"database",
                      "element_name":"Database",
                      "display_in_url":true
                    },
                    "suite":{
                      "short_name":"oracle",
                      "element_name":"Oracle",
                      "display_in_url":true
                    },
                    "product_group":{
                      "short_name":"not-applicable",
                      "element_name":"Not applicable",
                      "display_in_url":false
                    },
                    "product":{
                      "short_name":"oracle-database",
                      "element_name":"Oracle Database",
                      "display_in_url":true
                    },
                    "release":{
                      "short_name":"12.2",
                      "element_name":"Release 12.2",
                      "display_in_url":true
                    },
                    "platform":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    },
                    "component":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    }
                }
            }
            </script>
      
    <meta name="dcterms.title" content="Data Guard Concepts and Administration">
    <meta name="dcterms.isVersionOf" content="SBYDB">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="getting-started-with-oracle-data-guard.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="creating-oracle-data-guard-logical-standby.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Concepts and Administration </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="oracle-data-guard-concepts.html" property="item" typeof="WebPage"><span property="name">  Concepts and Administration </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Creating a Physical Standby Database</li>
            </ol>
            <a id="GUID-B511FB6E-E3E7-436D-94B5-071C37550170" name="GUID-B511FB6E-E3E7-436D-94B5-071C37550170"></a><a id="SBYDB00200"></a>
            
            <h2 id="SBYDB-GUID-B511FB6E-E3E7-436D-94B5-071C37550170" class="sect2"><span class="enumeration_chapter">3 </span> Creating a Physical Standby Database
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can manually create a physical standby database in maximum performance mode using asynchronous redo transport and real-time apply, the default Oracle Data Guard configuration.</p>
               <p>See the following main topics: </p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-3DA747A3-1976-4A70-A96A-56281872D4D9" title="Before you create a standby database you must first ensure the primary database is properly configured.">Preparing the Primary Database for Standby Database Creation</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-A86D403B-B3F5-4B05-9255-5BADD513F9CF" title="These are the tasks you perform to create a physical standby database.">Step-by-Step Instructions for Creating a Physical Standby Database</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-3A0F8F9C-EF69-4BE4-9F7B-98AED4BEC4AC" title="After the physical standby database is running, you can upgrade the data protection mode, and you can enable Flashback Database.">Post-Creation Steps</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-7C55FE8A-50C3-4601-9ADA-98BE6D65F1DD" title="The Database Configuration Assistant (DBCA) can also be used as a simple command-line method to create an Oracle Data Guard physical standby database.">Using DBCA to Create a Data Guard Standby</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-D5F0EB8F-8534-462A-911C-216E6DC7CE69" title="You can create a physical standby of a multitenant container database (CDB) just as you can create a physical standby of a regular primary database.">Creating a Physical Standby of a CDB</a></p>
                  </li>
                  <li>
                     <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-20D2DEAC-0355-4FBB-ADB8-37BF5F4328E2" title="In an Oracle Data Guard configuration, a PDB on a primary database is created in the same way that a PDB on a regular database is created.">Creating a PDB in a Primary Database</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-B511FB6E-E3E7-436D-94B5-071C37550170__GUID-A18BD0A2-FB8D-4195-9C26-DA4AEC6CFBE1">
                  <p class="notep1">See Also:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=ADMIN11117"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about creating and using server parameter files
                        </p>
                     </li>
                     <li>
                        <p>Enterprise Manager online help system for information about using the Oracle Data Guard broker graphical user interface (GUI) to automatically create a physical standby database</p>
                     </li>
                     <li>
                        <p><a href="creating-data-guard-standby-database-using-RMAN.html#GUID-82731D59-A20F-45DD-A235-267B3B0E38C5" title="These topics describe how to use Oracle Recovery Manager to create a standby database."> Creating a Standby Database with Recovery Manager</a> for information about alternative methods of creating a physical standby database that automate much of the process by using Oracle Recovery Manager (RMAN) and either backup based duplication or active duplication over a network
                        </p>
                     </li>
                     <li>
                        <p><a href="../dgbkr/oracle-data-guard-broker-installation-requirements.html#DGBKR090"><span class="italic">Oracle Data Guard Broker</span></a> for information about configuring a database so that it can be managed by Oracle Data Guard broker
                        </p>
                     </li>
                  </ul>
               </div>
               <div class="infoboxnote" id="GUID-B511FB6E-E3E7-436D-94B5-071C37550170__GUID-A2C04D1E-5EB6-4CF9-BE44-43505962F4E0">
                  <p class="notep1">Note:</p>
                  <p>If you are working in a multitenant container database (CDB) environment, then see <a href="creating-oracle-data-guard-physical-standby.html#GUID-D5F0EB8F-8534-462A-911C-216E6DC7CE69" title="You can create a physical standby of a multitenant container database (CDB) just as you can create a physical standby of a regular primary database.">Creating a Physical Standby of a CDB</a> for information about behavioral differences from non-CDB environments. For instance, in a CDB environment, many DBA views have analogous CDB views that you should use instead. 
                  </p>
               </div>
            </div><a id="SBYDB5015"></a><a id="SBYDB4718"></a><div class="props_rev_3"><a id="GUID-3DA747A3-1976-4A70-A96A-56281872D4D9" name="GUID-3DA747A3-1976-4A70-A96A-56281872D4D9"></a><h3 id="SBYDB-GUID-3DA747A3-1976-4A70-A96A-56281872D4D9" class="sect3"><span class="enumeration_section">3.1 </span>Preparing the Primary Database for Standby Database Creation
               </h3>
               <div>
                  <p>Before you create a standby database you must first ensure the primary database is properly configured.</p>
                  <div class="section">
                     <p>Perform the following tasks on the primary database to prepare for physical standby database creation:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-AE2B1237-57A1-4745-A04C-4246A831A963" title="As part of preparing the primary database for standby database creation, you place the primary database in FORCE LOGGING mode.">Enable Forced Logging</a></p>
                        </li>
                        <li>
                           <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-0DC30726-3471-4588-BFE0-9CA0736328E2" title="Oracle Data Guard uses Oracle Net sessions to transport redo data and control messages between the members of an Oracle Data Guard configuration.">Configure Redo Transport Authentication</a></p>
                        </li>
                        <li>
                           <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-CA9076B9-3360-4A36-87AF-3390B391CEFF" title="It is a best practice to configure the primary database to receive redo if this is the first time a standby database is added to the configuration.">Configure the Primary Database to Receive Redo Data</a></p>
                        </li>
                        <li>
                           <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84" title="On the primary database, you define initialization parameters that control redo transport services while the database is in the primary role.">Set Primary Database Initialization Parameters</a></p>
                        </li>
                        <li>
                           <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-0379019D-0995-4EB7-8861-B07B708C7B4C" title="If archiving is not enabled, then you must put the primary database in ARCHIVELOG mode and enable automatic archiving.">Enable Archiving</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnote" id="GUID-3DA747A3-1976-4A70-A96A-56281872D4D9__GUID-2C0A3837-59E6-42CA-BA31-6F891FA30F5E">
                        <p class="notep1">Note:</p>
                        <p>Perform these preparatory tasks only once. After you complete these steps, the database is prepared to serve as the primary database for one or more standby databases.</p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="SBYDB4719"></a><div class="props_rev_3"><a id="GUID-AE2B1237-57A1-4745-A04C-4246A831A963" name="GUID-AE2B1237-57A1-4745-A04C-4246A831A963"></a><h4 id="SBYDB-GUID-AE2B1237-57A1-4745-A04C-4246A831A963" class="sect4"><span class="enumeration_section">3.1.1 </span>Enable Forced Logging
                  </h4>
                  <div>
                     <p>As part of preparing the primary database for standby database creation, you place the primary database in <code class="codeph">FORCE LOGGING</code> mode.
                     </p>
                     <div class="section">
                        <p>You can do this after database creation using the following SQL statement:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE FORCE LOGGING;
</pre><p>When you issue this statement, the primary database must at least be mounted (and it can also be open). This statement can take a considerable amount of time to complete, because it waits for all unlogged direct write I/O to finish.</p>
                        <div class="infoboxnotealso" id="GUID-AE2B1237-57A1-4745-A04C-4246A831A963__GUID-5584756B-129C-46A1-97A2-63718104B4AA">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=ADMIN11096"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about the ramifications of specifying <code class="codeph">FORCE</code> <code class="codeph">LOGGING</code> mode
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB00424"></a><div class="props_rev_3"><a id="GUID-0DC30726-3471-4588-BFE0-9CA0736328E2" name="GUID-0DC30726-3471-4588-BFE0-9CA0736328E2"></a><h4 id="SBYDB-GUID-0DC30726-3471-4588-BFE0-9CA0736328E2" class="sect4"><span class="enumeration_section">3.1.2 </span>Configure Redo Transport Authentication
                  </h4>
                  <div>
                     <p>Oracle Data Guard uses Oracle Net sessions to transport redo data and control messages between the members of an Oracle Data Guard configuration. </p>
                     <p>These redo transport sessions are authenticated using either the Secure Sockets Layer (SSL) protocol or a remote login password file.</p>
                     <p>SSL is used to authenticate redo transport sessions between two databases if:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The databases are members of the same Oracle Internet Directory (OID) enterprise domain and it allows the use of current user database links</p>
                        </li>
                        <li>
                           <p>The <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span>, and <code class="codeph">FAL_SERVER</code> database initialization parameters that correspond to the databases use Oracle Net connect descriptors configured for SSL
                           </p>
                        </li>
                        <li>
                           <p>Each database has an Oracle wallet or supported hardware security module that contains a user certificate with a distinguished name (DN) that matches the DN in the OID entry for the database</p>
                        </li>
                     </ul>
                     <p>If the SSL authentication requirements are not met, then each member of an Oracle Data Guard configuration must be configured to use a remote login password file and every physical standby database in the configuration must have an up-to-date copy of the password file from the primary database.</p>
                     <div class="infoboxnote" id="GUID-0DC30726-3471-4588-BFE0-9CA0736328E2__GUID-386E79D8-99A8-47C6-9721-53DED3AEB1CD">
                        <p class="notep1">Note:</p>
                        <p>As of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1) password file changes done on a primary database are automatically propagated to standby databases. The only exception to this is far sync instances. Updated password files must still be manually copied to far sync instances because far sync instances receive redo, but do not apply it. Once the password file is up-to-date at the far sync instance, the redo is automatically propagated to any standby databases that are set up to receive redo logs from that far sync instance. The password file is updated on the standby when the redo is applied. 
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-0DC30726-3471-4588-BFE0-9CA0736328E2__GUID-8FF931DF-1863-4243-9387-3D63161690E9">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../admin/toc.htm"><span class="italic">Oracle Database Administrator's Guide</span></a> and <a href="../refrn/REMOTE_LOGIN_PASSWORDFILE.html#REFRN10184"><span class="italic">Oracle Database Reference</span></a> for more information about remote login password files
                              </p>
                           </li>
                           <li>
                              <p><a href="../dbseg/configuring-secure-sockets-layer-authentication.html#DBSEG070"><span class="italic">Oracle Database Security Guide</span></a> for more information about SSL
                              </p>
                           </li>
                           <li>
                              <p><a href="../netag/introducing-oracle-net-services.html#NETAG001"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> for more information about Oracle Net Services
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="SBYDB00426"></a><div class="props_rev_3"><a id="GUID-CA9076B9-3360-4A36-87AF-3390B391CEFF" name="GUID-CA9076B9-3360-4A36-87AF-3390B391CEFF"></a><h4 id="SBYDB-GUID-CA9076B9-3360-4A36-87AF-3390B391CEFF" class="sect4"><span class="enumeration_section">3.1.3 </span>Configure the Primary Database to Receive Redo Data
                  </h4>
                  <div>
                     <p>It is a best practice to configure the primary database to receive redo if this is the first time a standby database is added to the configuration. </p>
                     <p>The primary database can then quickly transition to the standby role and begin receiving redo data, if necessary.</p>
                     <p>To create a standby redo log, use the SQL <code class="codeph">ALTER</code> <code class="codeph">DATABASE</code> <code class="codeph">ADD</code> <code class="codeph">STANDBY</code> <code class="codeph">LOGFILE</code> statement. For example:
                     </p><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE ADD STANDBY LOGFILE ('/oracle/dbs/slog1.rdo') SIZE 500M;
 
SQL&gt; ALTER DATABASE ADD STANDBY LOGFILE ('/oracle/dbs/slog2.rdo') SIZE 500M;
</pre><p>See <a href="oracle-data-guard-redo-transport-services.html#GUID-AF64C4FE-2D16-4197-953A-25930F36CFA8" title="Redo transport destination must be configured to receive and to archive redo data from a redo source database.">Configuring an Oracle Database to Receive Redo Data</a> for a discussion of how to determine the size of each log file and the number of log groups, as well as other background information about managing standby redo logs.
                     </p>
                  </div>
               </div><a id="SBYDB4720"></a><div class="props_rev_3"><a id="GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84" name="GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84"></a><h4 id="SBYDB-GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84" class="sect4"><span class="enumeration_section">3.1.4 </span>Set Primary Database Initialization Parameters
                  </h4>
                  <div>
                     <p>On the primary database, you define initialization parameters that control redo transport services while the database is in the primary role. </p>
                     <p>There are additional parameters you need to add that control the receipt of the redo data and apply services when the primary database is transitioned to the standby role.</p>
                     <p> The following example shows the primary role initialization parameters that you maintain on the primary database. This example represents an Oracle Data Guard configuration with a primary database located in Chicago and one physical standby database located in Boston. The parameters shown in this example are valid for the Chicago database when it is running in either the primary or the standby database role. The configuration examples use the names shown in the following table:</p>
                     <div class="tblformal" id="GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84__GUID-CA398D21-3C1C-442B-829B-22477670CEAE">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="This 3 column tables shows the DB_UNIQUE_NAME and Oracle Net service names that are used in this chapters examples. Column 1 is the database, Column 2 is the DB_UNIQUE_NAME. Column 3 is the Oracle Net Service Name . " width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d6976e706">Database</th>
                                 <th align="left" valign="bottom" width="31%" id="d6976e709">DB_UNIQUE_NAME</th>
                                 <th align="left" valign="bottom" width="38%" id="d6976e712">Oracle Net Service Name </th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d6976e717" headers="d6976e706 ">
                                    <p>Primary</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d6976e717 d6976e709 ">
                                    <p>chicago</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d6976e717 d6976e712 ">
                                    <p>chicago</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d6976e727" headers="d6976e706 ">
                                    <p>Physical standby</p>
                                 </td>
                                 <td align="left" valign="top" width="31%" headers="d6976e727 d6976e709 ">
                                    <p>boston</p>
                                 </td>
                                 <td align="left" valign="top" width="38%" headers="d6976e727 d6976e712 ">
                                    <p>boston</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" --><pre class="oac_no_warn" dir="ltr">DB_NAME=chicago
DB_UNIQUE_NAME=chicago
<a id="d6976e738" class="indexterm-anchor"></a>LOG_ARCHIVE_CONFIG='DG_CONFIG=(chicago,boston)'
CONTROL_FILES='/arch1/chicago/control1.ctl', '/arch2/chicago/control2.ctl'
LOG_ARCHIVE_DEST_1=
 'LOCATION=USE_DB_RECOVERY_FILE_DEST 
  VALID_FOR=(ALL_LOGFILES,ALL_ROLES)
  DB_UNIQUE_NAME=chicago'
LOG_ARCHIVE_DEST_2=
 'SERVICE=boston ASYNC
  VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE) 
  DB_UNIQUE_NAME=boston'
REMOTE_LOGIN_PASSWORDFILE=EXCLUSIVE
LOG_ARCHIVE_FORMAT=%t_%s_%r.arc
</pre><p>These parameters control how redo transport services transmit redo data to the standby system and the archiving of redo data on the local file system. Note that the example specifies asynchronous (<code class="codeph">ASYNC</code>) network transmission to transmit redo data on the <code class="codeph">LOG_ARCHIVE_DEST_2</code> initialization parameter. These are the recommended settings and require standby redo log files (see <a href="creating-oracle-data-guard-physical-standby.html#GUID-CA9076B9-3360-4A36-87AF-3390B391CEFF" title="It is a best practice to configure the primary database to receive redo if this is the first time a standby database is added to the configuration.">Configure the Primary Database to Receive Redo Data</a>).
                     </p>
                     <p>The following shows the additional standby role initialization parameters on the primary database. These parameters take effect when the primary database is transitioned to the standby role.</p><pre class="oac_no_warn" dir="ltr">FAL_SERVER=boston
DB_FILE_NAME_CONVERT='/boston/','/chicago/'
LOG_FILE_NAME_CONVERT='/boston/','/chicago/' 
STANDBY_FILE_MANAGEMENT=AUTO
</pre><p>Specifying the initialization parameters shown above sets up the primary database to resolve gaps, converts new data file and log file path names from a new primary database, and archives the incoming redo data when this database is in the standby role. With the initialization parameters for both the primary and standby roles set as described, none of the parameters need to change after a role transition. </p>
                     <p>The following table provides a brief explanation about each parameter setting shown in the previous two examples.</p>
                     <div class="tblformalwide" id="GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84__GUID-AD33B23C-C22E-4924-9029-1D06B2983132">
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="Briefly explains each initialization parameter that was set in Examples 3-1 and 3-2." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="30%" id="d6976e772">Parameter</th>
                                 <th align="left" valign="bottom" width="70%" id="d6976e775">Recommended Setting</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d6976e780" headers="d6976e772 ">
                                    <p><a href="../refrn/DB_NAME.html#REFRN10041"><code class="codeph">DB_NAME</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d6976e780 d6976e775 ">
                                    <p>On a primary database, specify the name used when the database was created. On a physical standby database, use the <code class="codeph">DB_NAME</code> of the primary database.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d6976e793" headers="d6976e772 ">
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=REFRN10242"><code class="codeph">DB_UNIQUE_NAME</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d6976e793 d6976e775 ">
                                    <p>Specify a unique name for each database. This name stays with the database and does not change, even if the primary and standby databases reverse roles.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d6976e803" headers="d6976e772 ">
                                    <p><a href="../refrn/LOG_ARCHIVE_CONFIG.html#REFRN10237"><code class="codeph">LOG_ARCHIVE_CONFIG</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d6976e803 d6976e775 ">
                                    <p>The <code class="codeph">DG_CONFIG</code> attribute of this parameter must be explicitly set on each database in an Oracle Data Guard configuration to enable full Oracle Data Guard functionality. Set <code class="codeph">DG_CONFIG</code> to a text string that contains the <code class="codeph">DB_UNIQUE_NAME</code> of each database in the configuration, with each name in this list separated by a comma.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d6976e822" headers="d6976e772 ">
                                    <p><a href="../refrn/CONTROL_FILES.html#REFRN10021"><code class="codeph">CONTROL_FILES</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d6976e822 d6976e775 ">
                                    <p>Specify the path name for the control files on the primary database. It is recommended that a second copy of the control file is available so an instance can be easily restarted after copying the good control file to the location of the bad control file.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d6976e832" headers="d6976e772 ">
                                    <p><a href="../refrn/LOG_ARCHIVE_DEST_n.html#REFRN10086"><code class="codeph">LOG_ARCHIVE_DEST_n</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d6976e832 d6976e775 ">
                                    <p>Specify where the redo data is to be archived on the primary and standby systems.</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_1</code> archives redo data generated by the primary database from the local online redo log files to the local archived redo log files in /arch1/chicago/.
                                          </p>
                                       </li>
                                       <li>
                                          <p><code class="codeph">LOG_ARCHIVE_DEST_2</code> is valid only for the primary role. This destination transmits redo data to the remote physical standby destination <code class="codeph">boston</code>.
                                          </p>
                                       </li>
                                    </ul>
                                    <p><span class="bold">Note: </span>If a fast recovery area was configured (with the <code class="codeph">DB_RECOVERY_FILE_DEST</code> initialization parameter) and you have not explicitly configured a local archiving destination with the <code class="codeph">LOCATION</code> attribute, Oracle Data Guard automatically uses the <code class="codeph">LOG_ARCHIVE_DEST_1</code> initialization parameter (if it has not already been set) as the default destination for local archiving. Also, see <a href="LOG_ARCHIVE_DEST_n-parameter-attributes.html#GUID-B04FC22C-F0B0-440F-BAF4-182EE547FCC1" title="This is a list of the attributes for the LOG_ARCHIVE_DEST_n initialization parameter, (where n is an integer between 1 and 31)."> LOG_ARCHIVE_DEST_n Parameter Attributes</a> for complete <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span> information.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d6976e895" headers="d6976e772 ">
                                    <p><a href="../refrn/REMOTE_LOGIN_PASSWORDFILE.html#REFRN10184"><code class="codeph">REMOTE_LOGIN_PASSWORDFILE</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d6976e895 d6976e775 ">
                                    <p>This parameter must be set to <code class="codeph">EXCLUSIVE</code> or <code class="codeph">SHARED</code> if a remote login password file is used to authenticate administrative users or redo transport sessions.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d6976e911" headers="d6976e772 ">
                                    <p><a href="../refrn/LOG_ARCHIVE_FORMAT.html#REFRN10089"><code class="codeph">LOG_ARCHIVE_FORMAT</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d6976e911 d6976e775 ">
                                    <p>Specify the format for the archived redo log files using a thread (%t), sequence number (%s), and resetlogs ID (%r).</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d6976e921" headers="d6976e772 ">
                                    <p><a href="../refrn/FAL_SERVER.html#REFRN10056"><code class="codeph">FAL_SERVER</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d6976e921 d6976e775 ">
                                    <p>Specify the Oracle Net service name of the FAL server (typically this is the database running in the primary role). When the Chicago database is running in the standby role, it uses the Boston database as the FAL server from which to fetch (request) missing archived redo log files if Boston is unable to automatically send the missing log files.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d6976e931" headers="d6976e772 ">
                                    <p><a href="../refrn/DB_FILE_NAME_CONVERT.html#REFRN10038"><code class="codeph">DB_FILE_NAME_CONVERT</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d6976e931 d6976e775 ">
                                    <p>Specify the path name and filename location of the standby database data files followed by the primary location. This parameter converts the path names of the primary database data files to the standby data file path names. This parameter is used only to convert path names for physical standby databases. Multiple pairs of paths may be specified by this parameter.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d6976e941" headers="d6976e772 ">
                                    <p><a href="../refrn/LOG_FILE_NAME_CONVERT.html#REFRN10098"><code class="codeph">LOG_FILE_NAME_CONVERT</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d6976e941 d6976e775 ">
                                    <p>Specify the location of the standby database online redo log files followed by the primary location. This parameter converts the path names of the primary database log files to the path names on the standby database. Multiple pairs of paths may be specified by this parameter.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="30%" id="d6976e951" headers="d6976e772 ">
                                    <p><a href="../refrn/STANDBY_FILE_MANAGEMENT.html#REFRN10212"><code class="codeph">STANDBY_FILE_MANAGEMENT</code></a></p>
                                 </td>
                                 <td align="left" valign="top" width="70%" headers="d6976e951 d6976e775 ">
                                    <p>Set to <code class="codeph">AUTO</code> so when data files are added to or dropped from the primary database, corresponding changes are made automatically to the standby database.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p></p>
                     <div class="infoboxnote" id="GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84__GUID-34E39F48-BBFC-4943-A3C9-01C2DF0DDC91">
                        <p class="notep1">Note:</p>
                        <p>Review the initialization parameter file for additional parameters that may need to be modified. For example, you may need to modify the dump destination parameters if the directory location on the standby database is different from those specified on the primary database.</p>
                     </div>
                  </div>
               </div><a id="SBYDB4721"></a><div class="props_rev_3"><a id="GUID-0379019D-0995-4EB7-8861-B07B708C7B4C" name="GUID-0379019D-0995-4EB7-8861-B07B708C7B4C"></a><h4 id="SBYDB-GUID-0379019D-0995-4EB7-8861-B07B708C7B4C" class="sect4"><span class="enumeration_section">3.1.5 </span>Enable Archiving
                  </h4>
                  <div>
                     <p>If archiving is not enabled, then you must put the primary database in <code class="codeph">ARCHIVELOG</code> mode and enable automatic archiving.
                     </p>
                     <div class="section">
                        <p>Issue the following SQL statements:</p><pre class="oac_no_warn" dir="ltr">SQL&gt; SHUTDOWN IMMEDIATE;
SQL&gt; STARTUP MOUNT;
SQL&gt; ALTER DATABASE ARCHIVELOG;
SQL&gt; ALTER DATABASE OPEN;
</pre><p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=ADMIN008"><span class="italic">Oracle Database Administrator's Guide</span></a> for information about archiving.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SBYDB5018"></a><a id="SBYDB00210"></a><div class="props_rev_3"><a id="GUID-A86D403B-B3F5-4B05-9255-5BADD513F9CF" name="GUID-A86D403B-B3F5-4B05-9255-5BADD513F9CF"></a><h3 id="SBYDB-GUID-A86D403B-B3F5-4B05-9255-5BADD513F9CF" class="sect3"><span class="enumeration_section">3.2 </span>Step-by-Step Instructions for Creating a Physical Standby Database
               </h3>
               <div>
                  <p>These are the tasks you perform to create a physical standby database. </p>
                  <p>The information in this topic is written at a level of detail that requires you to already have a thorough understanding of the following topics: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Database administrator authentication</p>
                     </li>
                     <li>
                        <p>Database initialization parameters</p>
                     </li>
                     <li>
                        <p>Managing redo logs, data files, and control files</p>
                     </li>
                     <li>
                        <p>Managing archived redo logs</p>
                     </li>
                     <li>
                        <p>Fast recovery areas</p>
                     </li>
                     <li>
                        <p>Oracle Net configuration</p>
                     </li>
                  </ul>
                  <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-A86D403B-B3F5-4B05-9255-5BADD513F9CF__BACHCEHE" title="This is a task-oriented 2 column table that provides a link to sections in the chapter that describe how to create a physical standby database. Column 1 is the task. Column 2 is the database.">Table 3-1</a> provides a checklist of the tasks that you perform to create a physical standby database and the database or databases on which you perform each task.
                  </p>
                  <div class="tblformalwide" id="GUID-A86D403B-B3F5-4B05-9255-5BADD513F9CF__BACHCEHE">
                     <p class="titleintable">Table 3-1 Creating a Physical Standby Database</p>
                     <table cellpadding="4" cellspacing="0" class="FormalWide" title="Creating a Physical Standby Database" summary="This is a task-oriented 2 column table that provides a link to sections in the chapter that describe how to create a physical standby database. Column 1 is the task. Column 2 is the database. " width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="50%" id="d6976e1179">Task</th>
                              <th align="left" valign="bottom" width="50%" id="d6976e1182">Database</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d6976e1187" headers="d6976e1179 ">
                                 <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-C40DD1FB-1DB5-4674-839D-D17ECA99FB93" title="You can use any backup copy of the primary database to create the physical standby database, as long as you have the necessary archived redo log files to completely recover the database.">Create a Backup Copy of the Primary Database Data Files</a></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d6976e1187 d6976e1182 ">
                                 <p>Primary</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d6976e1199" headers="d6976e1179 ">
                                 <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-B471D788-AFD3-48B3-9709-D63C34DBC269" title="Create the control file for the standby database (the primary database does not have to be open, but it must at least be mounted).">Create a Control File for the Standby Database</a></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d6976e1199 d6976e1182 ">
                                 <p>Primary</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d6976e1211" headers="d6976e1179 ">
                                 <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA" title="Create a parameter file (PFILE) from the server parameter file (SPFILE) used by the primary database.">Create a Parameter File for the Standby Database</a></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d6976e1211 d6976e1182 ">
                                 <p>Primary</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d6976e1223" headers="d6976e1179 ">
                                 <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-4834C26E-6493-4C5A-91F7-680FD43FADF7" title="Ensure that all required directories are created. Use an operating system copy utility to copy binary files from the primary system to their correct locations on the standby system.">Copy Files from the Primary System to the Standby System</a></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d6976e1223 d6976e1182 ">
                                 <p>Primary</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d6976e1235" headers="d6976e1179 ">
                                 <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-2FD8DBAB-C439-4F03-9A94-01C6FEF33392" title="Set up the environment by creating a Windows-based service, a password file and an SPFILE, and setting up the Oracle Net environment.">Set Up the Environment to Support the Standby Database</a></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d6976e1235 d6976e1182 ">
                                 <p>Standby</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d6976e1247" headers="d6976e1179 ">
                                 <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-3D65210D-9FE5-490E-938E-57FC2E07A569" title="These are the steps to start the physical standby database and Redo Apply.">Start the Physical Standby Database</a></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d6976e1247 d6976e1182 ">
                                 <p>Standby</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="50%" id="d6976e1259" headers="d6976e1179 ">
                                 <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-AAA6D97B-A345-4825-A320-B662BB16E2ED" title="After you create the physical standby database and set up redo transport services, you may want to verify database modifications are being successfully transmitted from the primary database to the standby database.">Verify the Physical Standby Database Is Performing Properly</a></p>
                              </td>
                              <td align="left" valign="top" width="50%" headers="d6976e1259 d6976e1182 ">
                                 <p>Standby</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="SBYDB4722"></a><div class="props_rev_3"><a id="GUID-C40DD1FB-1DB5-4674-839D-D17ECA99FB93" name="GUID-C40DD1FB-1DB5-4674-839D-D17ECA99FB93"></a><h4 id="SBYDB-GUID-C40DD1FB-1DB5-4674-839D-D17ECA99FB93" class="sect4"><span class="enumeration_section">3.2.1 </span>Creating a Physical Standby Task 1: Create a Backup Copy of the Primary Database Data Files
                  </h4>
                  <div>
                     <p>You can use any backup copy of the primary database to create the physical standby database, as long as you have the necessary archived redo log files to completely recover the database. </p>
                     <div class="section">
                        <p>You can use any backup copy of the primary database to create the physical standby database, as long as you have the necessary archived redo log files to completely recover the database. Oracle recommends that you use the Recovery Manager utility (RMAN).</p>
                        <p>See <a href="../haovw/ha-features.html#HAOVW132"><span class="italic">Oracle Database High Availability Architecture and Best Practices</span></a> for backup recommendations and <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=BRADV191"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> to perform a database backup operation.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4723"></a><div class="props_rev_3"><a id="GUID-B471D788-AFD3-48B3-9709-D63C34DBC269" name="GUID-B471D788-AFD3-48B3-9709-D63C34DBC269"></a><h4 id="SBYDB-GUID-B471D788-AFD3-48B3-9709-D63C34DBC269" class="sect4"><span class="enumeration_section">3.2.2 </span>Creating a Physical Standby Task 2: Create a Control File for the Standby Database
                  </h4>
                  <div>
                     <p>Create the control file for the standby database (the primary database does not have to be open, but it must at least be mounted).</p>
                     <div class="section">
                        <p>The following is an example of creating the control file for the standby database:</p><pre class="oac_no_warn" dir="ltr">SQL&gt;<a id="d6976e1437" class="indexterm-anchor"></a><a id="d6976e1441" class="indexterm-anchor"></a> ALTER DATABASE CREATE STANDBY CONTROLFILE AS '/tmp/boston.ctl';
</pre><p>The <code class="codeph">ALTER DATABASE</code> command designates the database that is to operate in the standby role; in this case, a database named <code class="codeph">boston</code>.
                        </p>
                        <p>You cannot use a single control file for both the primary and standby databases. They must each have their own file.</p>
                        <div class="infoboxnote" id="GUID-B471D788-AFD3-48B3-9709-D63C34DBC269__GUID-F79A72B2-361F-4CF6-B59F-1C56B77ACDB4">
                           <p class="notep1">Note:</p>
                           <p>If a control file backup is taken on the primary and restored on a standby (or vice versa), then the location of the snapshot control file on the restored system is configured to be the default. (The default value for the snapshot control file name is platform-specific and dependent on Oracle home.) Manually reconfigure it to the correct value using the RMAN <code class="codeph">CONFIGURE SNAPSHOT CONTROLFILE</code> command.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB5019"></a><a id="SBYDB4724"></a><div class="props_rev_3"><a id="GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA" name="GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA"></a><h4 id="SBYDB-GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA" class="sect4"><span class="enumeration_section">3.2.3 </span>Creating a Physical Standby Task 3: Create a Parameter File for the Standby Database
                  </h4>
                  <div>
                     <p>Create a parameter file (PFILE) from the server parameter file (SPFILE) used by the primary database.</p>
                     <div class="section">
                        <p>Perform the following steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Issue a SQL statement such as the following:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE PFILE='/tmp/initboston.ora' FROM SPFILE;
</pre><p>In <a href="creating-oracle-data-guard-physical-standby.html#GUID-2FD8DBAB-C439-4F03-9A94-01C6FEF33392" title="Set up the environment by creating a Windows-based service, a password file and an SPFILE, and setting up the Oracle Net environment.">Set Up the Environment to Support the Standby Database</a>, you then create a server parameter file from this parameter file, after it has been modified to contain parameter values appropriate for use at the physical standby database.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Modify the parameter values in the parameter file created in the previous step. </span><div>
                              <p>Although most of the initialization parameter settings in the parameter file are also appropriate for the physical standby database, some modifications must be made.</p>
                              <p><a href="creating-oracle-data-guard-physical-standby.html#GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA__I70559">Example 3-1</a> shows, in bold typeface, the parameters created earlier on the primary that must be changed.
                              </p>
                           </div>
                        </li>
                     </ol>
                     <div class="example" id="GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA__I70559">
                        <p class="titleinexample">Example 3-1 Modifying Initialization Parameters for a Physical Standby Database</p><pre class="oac_no_warn" dir="ltr">.
.
.
DB_NAME=chicago
<span class="bold">DB_UNIQUE_NAME=boston</span>
LOG_ARCHIVE_CONFIG<a id="d6976e1569" class="indexterm-anchor"></a>='DG_CONFIG=(chicago,boston)'
<span class="bold">CONTROL_FILES='/arch1/boston/control1.ctl</span>', '<span class="bold">/arch2/boston/control2.ctl</span>'
<span class="bold">DB_FILE_NAME_CONVERT=</span><span class="bold">'/chicago/','/boston/'</span>
<span class="bold">LOG_FILE_NAME_CONVERT='/chicago/','/boston/'</span>
LOG_ARCHIVE_FORMAT=log%t_%s_%r.arc
<span class="bold">LOG_ARCHIVE_DEST_1=</span>
 'LOCATION=USE_DB_RECOVERY_FILE_DEST
<span class="bold">  VALID_FOR=(ALL_LOGFILES,ALL_ROLES) </span>
<span class="bold">  DB_UNIQUE_NAME=boston'</span>
<span class="bold">LOG_ARCHIVE_DEST_2=</span>
<span class="bold"> 'SERVICE=chicago </span><span class="bold">ASYNC</span>
<span class="bold">  VALID_FOR=(ONLINE_LOGFILES,PRIMARY_ROLE) </span>
<span class="bold">  DB_UNIQUE_NAME=chicago'</span>
REMOTE_LOGIN_PASSWORDFILE=EXCLUSIVE
STANDBY_FILE_MANAGEMENT=AUTO
<span class="bold">FAL_SERVER=chicago</span>
.
.
.</pre></div>
                     <!-- class="example" -->
                     <div class="section">
                        <p>Ensure the <code class="codeph">COMPATIBLE</code> initialization parameter is set to the same value on both the primary and standby databases. If the values differ, then redo transport services may be unable to transmit redo data from the primary database to the standby databases.
                        </p>
                        <p>It is always a good practice to use the <code class="codeph">SHOW PARAMETERS</code> command to verify no other parameters need to be changed.
                        </p>
                        <p>The following table provides a brief explanation about the parameter settings shown in <a href="creating-oracle-data-guard-physical-standby.html#GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA__I70559">Example 3-1</a> that have different settings from the primary database.
                        </p>
                        <div class="tblformalwide" id="GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA__GUID-72D11A33-652F-4E6D-BC0C-07DB98F40D62">
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="" summary="This 2 column table describes each initialization parameter that was set in Example 3-3." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="34%" id="d6976e1637">Parameter</th>
                                    <th align="left" valign="bottom" width="66%" id="d6976e1640">Recommended Setting</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d6976e1645" headers="d6976e1637 ">
                                       <p><a href="../refrn/DB_UNIQUE_NAME.html#REFRN10242"><code class="codeph">DB_UNIQUE_NAME</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d6976e1645 d6976e1640 ">
                                       <p>Specify a unique name for this database. This name stays with the database and does not change even if the primary and standby databases reverse roles.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d6976e1655" headers="d6976e1637 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=REFRN10021"><code class="codeph">CONTROL_FILES</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d6976e1655 d6976e1640 ">
                                       <p>Specify the path name for the control files on the standby database. <a href="creating-oracle-data-guard-physical-standby.html#GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA__I70559">Example 3-1</a> shows how to do this for two control files. It is recommended that a second copy of the control file is available so an instance can be easily restarted after copying the good control file to the location of the bad control file.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d6976e1667" headers="d6976e1637 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=REFRN10038"><code class="codeph">DB_FILE_NAME_CONVERT</code></a><a id="d6976e1673" class="indexterm-anchor"></a><a id="d6976e1677" class="indexterm-anchor"></a></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d6976e1667 d6976e1640 ">
                                       <p>Specify the path name and filename location of the primary database data files followed by the standby location. This parameter converts the path names of the primary database data files to the standby data file path names.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d6976e1685" headers="d6976e1637 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=REFRN10098"><code class="codeph">LOG_FILE_NAME_CONVERT</code></a><a id="d6976e1691" class="indexterm-anchor"></a><a id="d6976e1695" class="indexterm-anchor"></a></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d6976e1685 d6976e1640 ">
                                       <p>Specify the location of the primary database online redo log files followed by the standby location. This parameter converts the path names of the primary database log files to the path names on the standby database.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d6976e1703" headers="d6976e1637 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=REFRN10086"><code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span></a></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d6976e1703 d6976e1640 ">
                                       <p>Specify where the redo data is to be archived. In <a href="creating-oracle-data-guard-physical-standby.html#GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA__I70559">Example 3-1</a>:
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">LOG_ARCHIVE_DEST_1</code> archives redo data received from the primary database to archived redo log files in /arch1/boston/.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">LOG_ARCHIVE_DEST_2</code> is currently ignored because this destination is valid only for the primary role. If a switchover occurs and this instance becomes the primary database, then it transmits redo data to the remote Chicago destination.
                                             </p>
                                          </li>
                                       </ul>
                                       <p><span class="bold">Note: </span>If a fast recovery area was configured (with the <code class="codeph">DB_RECOVERY_FILE_DEST</code> initialization parameter) and you have not explicitly configured a local archiving destination with the <code class="codeph">LOCATION</code> attribute, then Oracle Data Guard automatically uses the <code class="codeph">LOG_ARCHIVE_DEST_1</code> initialization parameter (if it has not already been set) as the default destination for local archiving. Also, see <a href="LOG_ARCHIVE_DEST_n-parameter-attributes.html#GUID-B04FC22C-F0B0-440F-BAF4-182EE547FCC1" title="This is a list of the attributes for the LOG_ARCHIVE_DEST_n initialization parameter, (where n is an integer between 1 and 31)."> LOG_ARCHIVE_DEST_n Parameter Attributes</a> for complete information about <code class="codeph">LOG_ARCHIVE_DEST_</code><span class="italic"><code class="codeph">n</code></span>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="34%" id="d6976e1768" headers="d6976e1637 ">
                                       <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=REFRN10056"><code class="codeph">FAL_SERVER</code></a></p>
                                    </td>
                                    <td align="left" valign="top" width="66%" headers="d6976e1768 d6976e1640 ">
                                       <p>Specify the Oracle Net service name of the FAL server (typically this is the database running in the primary role). When the Boston database is running in the standby role, it uses the Chicago database as the FAL server from which to fetch (request) missing archived redo log files if Chicago is unable to automatically send the missing log files.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <div class="infoboxnote" id="GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA__GUID-99208921-F8CD-49ED-A89B-06CAC7F8004F">
                           <p class="notep1">Note:</p>
                           <p>Review the initialization parameter file for additional parameters that may need to be modified. For example, you may need to modify the dump destination parameters if the directory location on the standby database is different from those specified on the primary database.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4725"></a><div class="props_rev_3"><a id="GUID-4834C26E-6493-4C5A-91F7-680FD43FADF7" name="GUID-4834C26E-6493-4C5A-91F7-680FD43FADF7"></a><h4 id="SBYDB-GUID-4834C26E-6493-4C5A-91F7-680FD43FADF7" class="sect4"><span class="enumeration_section">3.2.4 </span>Creating a Physical Standby Task 4: Copy Files from the Primary System to the Standby System
                  </h4>
                  <div>
                     <p>Ensure that all required directories are created. Use an operating system copy utility to copy binary files from the primary system to their correct locations on the standby system.</p>
                     <div class="section">
                        <p>The binary files to copy are as follows:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Database backup created in <a href="creating-oracle-data-guard-physical-standby.html#GUID-C40DD1FB-1DB5-4674-839D-D17ECA99FB93" title="You can use any backup copy of the primary database to create the physical standby database, as long as you have the necessary archived redo log files to completely recover the database.">Create a Backup Copy of the Primary Database Data Files</a> 
                              </p>
                           </li>
                           <li>
                              <p>Stan<a id="d6976e1868" class="indexterm-anchor"></a><a id="d6976e1872" class="indexterm-anchor"></a>dby control file created in <a href="creating-oracle-data-guard-physical-standby.html#GUID-B471D788-AFD3-48B3-9709-D63C34DBC269" title="Create the control file for the standby database (the primary database does not have to be open, but it must at least be mounted).">Create a Control File for the Standby Database</a></p>
                           </li>
                           <li>
                              <p>Initialization parameter file created in <a href="creating-oracle-data-guard-physical-standby.html#GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA" title="Create a parameter file (PFILE) from the server parameter file (SPFILE) used by the primary database.">Create a Parameter File for the Standby Database</a></p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="SBYDB4726"></a><div class="props_rev_3"><a id="GUID-2FD8DBAB-C439-4F03-9A94-01C6FEF33392" name="GUID-2FD8DBAB-C439-4F03-9A94-01C6FEF33392"></a><h4 id="SBYDB-GUID-2FD8DBAB-C439-4F03-9A94-01C6FEF33392" class="sect4"><span class="enumeration_section">3.2.5 </span>Creating a Physical Standby Task 5: Set Up the Environment to Support the Standby Database
                  </h4>
                  <div>
                     <p>Set up the environment by creating a Windows-based service, a password file and an SPFILE, and setting up the Oracle Net environment.</p>
                     <div class="section">
                        <p>Perform the following steps:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>If the standby database is going to be hosted on a Windows system, then use the ORADIM utility to create a Windows service. For example: </span><div><pre class="oac_no_warn" dir="ltr">oradim &#x2013;NEW &#x2013;SID boston &#x2013;STARTMODE manual
</pre><p>The ORADIM utility automatically determines the username for which this service should be created and prompts for a password for that username (if that username needs a password). See <a href="../ntqrf/about-administering-an-oracle-database-instance-using-oradim.html#NTQRF05011"><span class="italic">Oracle Database Platform Guide for Microsoft Windows</span></a> for more information about using the ORADIM utility.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Copy the remote login password file from the primary database system to the standby database system. </span><div>
                              <p>This step is optional if operating system authentication is used for administrative users and if SSL is used for redo transport authentication. If not, then copy the remote login password file from the primary database to the appropriate directory on the physical standby database system. </p>
                              <p>Any subsequent changes to the password file on the primary are automatically propagated to the standby. Changes to a password file can include when administrative privileges (<code class="codeph">SYSDG</code>, <code class="codeph">SYSOPER</code>, <code class="codeph">SYSDBA</code>, and so on) are granted or revoked, and when passwords of any user with administrative privileges is changed. Updated password files must still be manually copied to far sync instances because far sync instances receive redo, but do not apply it. Once the password file is up-to-date at the far sync instance, the redo containing the password update at the primary is automatically propagated to any standby databases that are set up to receive redo from that far sync instance. The password file is updated on the standby when the redo is applied.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Configure and start a listener on the standby system if one is not already configured.</span><div>
                              <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=NETAG010"><span class="italic">Oracle Database Net Services Administrator's Guide.</span></a></p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Create Oracle Net service names. </span><div>
                              <p>On both the primary and standby systems, use Oracle Net Manager to create a network service name for the primary and standby databases that are to be used by redo transport services. The Net service names in this example are <code class="codeph">chicago</code> and <code class="codeph">boston</code>.
                              </p>
                              <p>The Oracle Net service name must resolve to a connect descriptor that uses the same protocol, host address, port, and service that you specified when you configured the listeners for the primary and standby databases. The connect descriptor must also specify that a dedicated server be used.</p>
                              <p>See the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=NETAG175"><span class="italic">Oracle Database Net Services Administrator's Guide</span></a> for more information about service names.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>On an idle standby database, use the SQL <code class="codeph">CREATE</code> statement to create a server parameter file for the standby database from the text initialization parameter file that was edited in Task 3. For example:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; CREATE SPFILE FROM PFILE='initboston.ora';
</pre></div>
                        </li>
                        <li class="stepexpand"><span>If the primary database has a database encryption wallet, then copy it to the standby database system and configure the standby database to use this wallet.</span><div>
                              <div class="infoboxnote" id="GUID-2FD8DBAB-C439-4F03-9A94-01C6FEF33392__GUID-F01449D9-4D5B-4578-8D7B-AF51FFD8DF1C">
                                 <p class="notep1">Note:</p>
                                 <p>The database encryption wallet must be copied from the primary database system to each standby database system whenever the master encryption key is updated.</p>
                                 <p>Encrypted data in a standby database cannot be accessed unless the standby database is configured to point to a database encryption wallet or hardware security module that contains the current master encryption key from the primary database.</p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="SBYDB4727"></a><div class="props_rev_3"><a id="GUID-3D65210D-9FE5-490E-938E-57FC2E07A569" name="GUID-3D65210D-9FE5-490E-938E-57FC2E07A569"></a><h4 id="SBYDB-GUID-3D65210D-9FE5-490E-938E-57FC2E07A569" class="sect4"><span class="enumeration_section">3.2.6 </span>Creating a Physical Standby Task 6: Start the Physical Standby Database
                  </h4>
                  <div>
                     <p>These are the steps to start the physical standby database and Redo Apply.</p>
                     <ol>
                        <li class="stepexpand"><span>On the standby database, issue the following SQL statement to start and mount the database:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; STARTUP MOUNT;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Restore the backup of the data files taken in <a href="creating-oracle-data-guard-physical-standby.html#GUID-C40DD1FB-1DB5-4674-839D-D17ECA99FB93" title="You can use any backup copy of the primary database to create the physical standby database, as long as you have the necessary archived redo log files to completely recover the database.">Create a Backup Copy of the Primary Database Data Files</a> and copied in <a href="creating-oracle-data-guard-physical-standby.html#GUID-4834C26E-6493-4C5A-91F7-680FD43FADF7" title="Ensure that all required directories are created. Use an operating system copy utility to copy binary files from the primary system to their correct locations on the standby system.">Copy Files from the Primary System to the Standby System</a> on the standby system.</span></li>
                        <li class="stepexpand"><span>On the standby database, issue the following command to start Redo Apply:</span><div><pre class="oac_no_warn" dir="ltr">SQL&gt; ALTER DATABASE RECOVER MANAGED STANDBY DATABASE - 
&gt; DISCONNECT FROM SESSION;
</pre><p>The statement includes the <code class="codeph">DISCONNECT FROM SESSION</code> option so that Redo Apply runs in a background session. 
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="SBYDB4728"></a><div class="props_rev_3"><a id="GUID-AAA6D97B-A345-4825-A320-B662BB16E2ED" name="GUID-AAA6D97B-A345-4825-A320-B662BB16E2ED"></a><h4 id="SBYDB-GUID-AAA6D97B-A345-4825-A320-B662BB16E2ED" class="sect4"><span class="enumeration_section">3.2.7 </span>Creating a Physical Standby Task 7: Verify the Physical Standby Database Is Performing Properly
                  </h4>
                  <div>
                     <p>After you create the physical standby database and set up redo transport services, you may want to verify database modifications are being successfully transmitted from the primary database to the standby database.</p>
                     <div class="section">
                        <p>On the standby database, query the <code class="codeph">V$MANAGED_STANDBY</code> view to verify that redo is being transmitted from the primary database and applied to the standby database.
                        </p>
                        <p>The following is an example of querying the <code class="codeph">V$MANAGED_STANDBY</code> view:
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT CLIENT_PROCESS, PROCESS, THREAD#, SEQUENCE#, STATUS FROM 
V$MANAGED_STANDBY WHERE CLIENT_PROCESS='LGWR' OR PROCESS='MRP0';
 
CLIENT_PROCESS PROCESS   THREAD#    SEQUENCE#  STATUS
-------------- --------- ---------- ---------- ------------
N/A            MRP0      1          80         APPLYING_LOG
LGWR           RFS       1          80         IDLE
</pre><p>The query output should show one line for the primary database with a <code class="codeph">CLIENT_PROCESS</code> of <code class="codeph">LGWR</code>. This indicates that redo transport is functioning correctly and the primary redo thread is being sent to the standby.
                        </p>
                        <div class="infoboxnote" id="GUID-AAA6D97B-A345-4825-A320-B662BB16E2ED__GUID-06BE2ED0-AC7E-44B3-9009-CEDDBB1D1F3F">
                           <p class="notep1">Note:</p>
                           <p>If the Primary database is an Oracle RAC database, then the output contains one line with a <code class="codeph">CLIENT_PROCESS</code> of <code class="codeph">LGWR</code> for each primary instance that is currently active.
                           </p>
                        </div>
                        <p>The query output should also show one line for the MRP. If the MRP status shows <code class="codeph">APPLYING_LOG</code> and the <code class="codeph">SEQUENCE#</code> is equal to the sequence number currently being sent by the primary database, then the standby has resolved all gaps and is currently in real-time apply mode.
                        </p>
                        <div class="infoboxnote" id="GUID-AAA6D97B-A345-4825-A320-B662BB16E2ED__GUID-D148796B-902F-4386-9595-D7160404AD54">
                           <p class="notep1">Note:</p>
                           <p>The MRP may show a <code class="codeph">SEQUENCE#</code> older than the sequence number currently being sent from the primary. This indicates that it is applying archive log files that were sent as a gap and it has not yet caught up. Once all gaps are resolved, the same query shows that the MRP is applying the current <code class="codeph">SEQUENCE#</code>.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="SBYDB4729"></a><div class="props_rev_3"><a id="GUID-3A0F8F9C-EF69-4BE4-9F7B-98AED4BEC4AC" name="GUID-3A0F8F9C-EF69-4BE4-9F7B-98AED4BEC4AC"></a><h3 id="SBYDB-GUID-3A0F8F9C-EF69-4BE4-9F7B-98AED4BEC4AC" class="sect3"><span class="enumeration_section">3.3 </span>Creating a Physical Standby: Post-Creation Steps
               </h3>
               <div>
                  <p>After the physical standby database is running, you can upgrade the data protection mode, and you can enable Flashback Database.</p>
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Upgrade the data protection mode</p>
                           <p><a href="oracle-data-guard-protection-modes.html#GUID-16298839-9B8A-4E58-8EC9-27912E57F1CE" title="Oracle Data Guard lets you set different data protection modes."> Oracle Data Guard Protection Modes </a> provides information about configuring the different data protection modes.
                           </p>
                        </li>
                        <li>
                           <p>Enable Flashback Database</p>
                           <p>Flashback Database removes the need to re-create the primary database after a failover. Flashback Database enables you to return a database to its state at a time in the recent past much faster than traditional point-in-time recovery, because it does not require restoring data files from backup nor the extensive application of redo data. You can enable Flashback Database on the primary database, the standby database, or both.</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-3A0F8F9C-EF69-4BE4-9F7B-98AED4BEC4AC__GUID-8F0493AE-E67B-4CEE-8C3F-3F33CCE172C6">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="examples-of-using-oracle-data-guard.html#GUID-1163448F-6B18-4A44-AA8D-7CDF0D1360FB" title="After a failover occurs, the original primary database can no longer participate in the Oracle Data Guard configuration until it is repaired and established as a standby database in the new configuration.">Converting a Failed Primary Into a Standby Database Using Flashback Database</a> and <a href="examples-of-using-oracle-data-guard.html#GUID-BAA5ED38-29A0-4E8D-8435-AA083D19C13E" title="If an error occurrs on the primary database in an Oracle Data Guard configuration in which the standby database is using real-time apply, then the same error is applied on the standby database. if Flashback Database is enabled, you can revert the primary and standby databases back to their pre-error condition.">Using Flashback Database After Issuing an Open Resetlogs Statement</a> for scenarios showing how to use Flashback Database in an Oracle Data Guard environment
                              </p>
                           </li>
                           <li>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=BRADV71000"><span class="italic">Oracle Database Backup and Recovery User's Guide</span></a> for more information about Flashback Database
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-7C55FE8A-50C3-4601-9ADA-98BE6D65F1DD" name="GUID-7C55FE8A-50C3-4601-9ADA-98BE6D65F1DD"></a><h3 id="SBYDB-GUID-7C55FE8A-50C3-4601-9ADA-98BE6D65F1DD" class="sect3"><span class="enumeration_section">3.4 </span>Using DBCA to Create a Data Guard Standby
               </h3>
               <div>
                  <p>The Database Configuration Assistant (DBCA) can also be used as a simple command-line method to create an Oracle Data Guard physical standby database.</p>
                  <div class="section">The DBCA command qualifier used to create the physical standby database is <code class="codeph">createDuplicateDB</code> . 
                     <p>DBCA can only be used to create standby databases for non-multitenant primary databases. In addition, this capability creates only single instance standby databases, not Oracle Real Application Clusters (Oracle RAC) databases. If required, the standby can then be converted to an Oracle RAC standby database, either manually or using Oracle Enterprise Manager Cloud Control. </p>
                     <p>The basic <code class="codeph">createDuplicateDB</code> command has the following syntax: 
                     </p><pre class="pre codeblock"><code>dbca -createDuplicateDB 
    -gdbName global_database_name 
    -primaryDBConnectionString easy_connect_string_to_primary
    -sid database_system_identifier
    [-createAsStandby 
        [-dbUniqueName db_unique_name_for_standby]]
    [-customScripts scripts_list]</code></pre><p>For more information about <code class="codeph">createDuplicateDB</code> options, including the use of custom scripts, see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=ADMIN-GUID-7F4B1A64-5B08-425A-A62E-854542B3FD4E"><span><cite>Oracle Database Administrators Guide</cite></span></a>.
                     </p>
                     <p>In the following two examples the primary database is <code class="codeph">chicago</code> and it resides on the primary system <code class="codeph">myprimary.domain</code>. Each example creates a physical standby on the system on which the command is executed, <code class="codeph">boston</code>. The <code class="codeph">initParams</code> parameter is used in the examples to show how other DBCA parameters can be used in the standby creation command. In these examples, <code class="codeph">initParams</code> is used to explicitly set the <code class="codeph">INSTANCE_NAME</code> of the standby to match the <code class="codeph">DB_UNIQUE_NAME</code>, <code class="codeph">boston</code>. 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>This first example creates the standby database without any custom scripts being executed afterward.</p><pre class="pre codeblock"><code>dbca &#x2013;silent -createDuplicateDB -primaryDBConnectionString  myprimary.domain:1523/chicago.domain 
-gdbName chicago.domain -sid boston -initParams instance_name=boston &#x2013;createAsStandby</code></pre><pre class="pre codeblock"><code>Enter SYS user password:
Listener config step
33% complete
Auxiliary instance creation
66% complete
RMAN duplicate
100% complete
Look at the log file " /u01/app/oracle/product/12.2.0/dbhome_1/cfgtoollogs/dbca/chicago/chicago.log" for further details.
</code></pre><p>The following example is exactly the same as the previous example, except that it runs a SQL script named <code class="codeph">/tmp/test.sql</code> which can be used to perform post-creation operations.
                     </p><pre class="pre codeblock"><code>dbca -silent -createDuplicateDB -primaryDBConnectionString  myprimary.domain:1523/chicago.domain
-gdbName chicago.domain -sid boston -initParams instance_name=boston -createAsStandby  -customScripts /tmp/test.sql</code></pre><pre class="pre codeblock"><code>Enter SYS user password:

Listener config step
25% complete
Auxiliary instance creation
50% complete
RMAN duplicate
75% complete
Running Custom Scripts
100% complete
Look at the log file " /u01/app/oracle/product/12.2.0/dbhome_1/cfgtoollogs/dbca/chicago/chicago.log" for further details.</code></pre><div class="infoboxnote" id="GUID-7C55FE8A-50C3-4601-9ADA-98BE6D65F1DD__GUID-63C5A9DB-F02C-4A57-B495-D843724CE629">
                        <p class="notep1">Note:</p>Even though it is required to have a listener running on the physical standby system, it is not necessary to configure the Oracle Net service names for the databases on either system to execute these commands. In these examples, the Easy Connect naming method was used to create a connection to the primary database, <code class="codeph">Chicago</code>, to complete creation of the standby, <code class="codeph">Boston</code> .  Before adding the new standby to the Data Guard configuration you would first configure Oracle Net service name descriptors on both systems, as described in Step 4 in <a href="creating-oracle-data-guard-physical-standby.html#GUID-2FD8DBAB-C439-4F03-9A94-01C6FEF33392" title="Set up the environment by creating a Windows-based service, a password file and an SPFILE, and setting up the Oracle Net environment.">Creating a Physical Standby Task 5: Set Up the Environment to Support the Standby Database</a>.
                     </div>
                     <p>When these commands complete without any errors, the physical standby <code class="codeph">Boston</code> is ready to be added to your Data Guard configuration. As part of adding it, you would need to define the Data Guard parameters in <code class="codeph">Chicago</code> and <code class="codeph">Boston</code> as shown in <a href="creating-oracle-data-guard-physical-standby.html#GUID-06FDC24C-6E90-420B-BB63-3B6BAC4D8AFA" title="Create a parameter file (PFILE) from the server parameter file (SPFILE) used by the primary database.">Creating a Physical Standby Task 3: Create a Parameter File for the Standby Database</a>. Optionally, if you have an Oracle Data Guard broker configuration, you could use the broker <code class="codeph">ADD DATABASE</code> command to add the new standby to your configuration (see <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=DGBKR-GUID-EA723918-2509-4BBC-871B-163885DE3C73"><span><cite>Oracle Data Guard Broker</cite></span></a>).
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="SBYDB5213"></a><div class="props_rev_3"><a id="GUID-D5F0EB8F-8534-462A-911C-216E6DC7CE69" name="GUID-D5F0EB8F-8534-462A-911C-216E6DC7CE69"></a><h3 id="SBYDB-GUID-D5F0EB8F-8534-462A-911C-216E6DC7CE69" class="sect3"><span class="enumeration_section">3.5 </span>Creating a Physical Standby of a CDB
               </h3>
               <div>
                  <p>You can create a physical standby of a multitenant container database (CDB) just as you can create a physical standby of a regular primary database.</p>
                  <p> The following are some of the behavioral differences to be aware of when you create and use a physical standby of a CDB:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If you execute a switchover or failover operation, the entire CDB undergoes the role change. If you used the <code class="codeph">ENABLED_PDBS_ON_STANDBY</code> intialization parameter, then be aware of the possibility that not every PDB is present in both the primary and the standby databases.
                        </p>
                     </li>
                     <li>
                        <p>The database role is defined at the CDB level, not at the individual container level.</p>
                     </li>
                     <li>
                        <p>Any DDL related to role changes must be executed in the root container because a role is associated with an entire CDB. Individual pluggable databases (PDBs) do not have their own roles.</p>
                     </li>
                     <li>
                        <p>In a physical standby of a CDB, the syntax of SQL statements is generally the same as for noncontainer databases. However, the effect of some statements, including the following, may be different:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">ALTER DATABASE RECOVER MANAGED STANDBY</code> functions only in the root container; it is not allowed in a PDB.
                              </p>
                           </li>
                           <li>
                              <p>A role is associated with an entire CDB; individual PDBs do not have their own roles. Therefore, the following role change DDL associated with physical standbys affect the entire CDB: </p>
                              <p><code class="codeph">ALTER DATABASE SWITCHOVER TO target_db_name</code></p>
                              <p><code class="codeph">ALTER DATABASE ACTIVATE PHYSICAL STANDBY</code> 
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>The <code class="codeph">ALTER PLUGGABLE DATABASE [OPEN|CLOSE]</code> SQL statement is supported on the standby, provided you have already opened the root container. 
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">ALTER PLUGGABLE DATABASE RECOVER</code> statement is not supported on the standby. (Standby recovery is always at the CDB level.)
                        </p>
                     </li>
                     <li>
                        <p>To administer a multitenant environment, you must have the <code class="codeph">CDB_DBA</code> role.
                        </p>
                     </li>
                     <li>
                        <p>Oracle recommends that the standby database have its own keystore.</p>
                     </li>
                     <li>
                        <p>In a multitenant environment, the redo must be shipped to the root container of the standby database. </p>
                        <p>The following is an example of how to determine whether redo is being shipped to the root container. Suppose your primary database has the following settings:</p><pre class="oac_no_warn" dir="ltr">LOG_ARCHIVE_DEST_2='SERVICE=boston ASYNC VALID_FOR=(ONLINE_LOGFILES,
PRIMARY_ROLE) DB_UNIQUE_NAME=boston'
</pre><p>Redo is being shipped to <code class="codeph">boston</code>. The container ID (<code class="codeph">CON_ID</code>) for the root container is always 1, so you must make sure that the <code class="codeph">CON_ID</code> is 1 for the service <code class="codeph">boston</code>. To do this, check the service name in the <code class="codeph">tnsnames.ora</code> file. For example:
                        </p><pre class="oac_no_warn" dir="ltr">boston = (DESCRIPTION=(ADDRESS=(PROTOCOL=tcp)(HOST=boston-server)(PORT=1521))
(CONNECT_DATA=(SERVICE_NAME=boston.us.example.com))
</pre><p>The service name for <code class="codeph">boston</code> is <code class="codeph">boston.us.example.com</code>.
                        </p>
                        <p>On the standby database, query the <code class="codeph">CDB_SERVICES</code> view to determine the <code class="codeph">CON_ID</code>. For example:
                        </p><pre class="oac_no_warn" dir="ltr">SQL&gt; SELECT NAME, CON_ID FROM CDB_SERVICES;

NAME                                 CON_ID
---------------------------------------------
boston.us.example.com                 1
</pre><p>The query result shows that the <code class="codeph">CON_ID</code> for <code class="codeph">boston</code> is 1.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-D5F0EB8F-8534-462A-911C-216E6DC7CE69__GUID-729D8B44-38CE-4544-8064-CB5B4464B758">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=CNCPT89249"><span class="italic">Oracle Database Concepts</span></a> for more information about CDBs
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=ASOAG10284"><span class="italic">Oracle Database Advanced Security Guide</span></a> for more information about creating keystores
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="SBYDB5260"></a><div class="props_rev_3"><a id="GUID-20D2DEAC-0355-4FBB-ADB8-37BF5F4328E2" name="GUID-20D2DEAC-0355-4FBB-ADB8-37BF5F4328E2"></a><h3 id="SBYDB-GUID-20D2DEAC-0355-4FBB-ADB8-37BF5F4328E2" class="sect3"><span class="enumeration_section">3.6 </span>Creating a PDB in a Primary Database
               </h3>
               <div>
                  <p>In an Oracle Data Guard configuration, a PDB on a primary database is created in the same way that a PDB on a regular database is created.</p>
                  <p></p>
                  <p>The steps to create a PDB on a regular database are documented in the <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=ADMIN13549"><span class="italic">Oracle Database Administrator's Guide</span></a>. Before following those steps, note the following:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>In Oracle Database 12<span class="italic">c</span> Release 1 (12.1), you could only specify whether a PDB was created and recovered in all (<code class="codeph">ALL</code>) standbys or in no (<code class="codeph">NONE</code>) standbys when adding a PDB to the primary database.&nbsp;As of Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1), you can specify a subset of PDBs to be replicated on a physical standby of a multitenant container database (CDB), instead of having to choose either all PDBs or none. To do so, use the <code class="codeph">ENABLED_PDBS_ON_STANDBY</code> initialization parameter to specify a list of PDBs or use the enhanced <code class="codeph">STANDBYS</code> qualifier on the <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement, or both. PDBs that are not enabled on a standby CDB can remain disabled (true SUBSET Standby) or they can be enabled at a later date when all the required files are available at the standby CDB.
                        </p>
                     </li>
                     <li>
                        <p>The <code class="codeph">ENABLED_PDBS_ON_STANDBY</code> parameter is valid only on a physical standby; it is ignored by primary databases. (It can be set on a primary database to be used if that database ever becomes a standby database.) It can be used to specify which PDBs should or should not be enabled on a physical standby database.&nbsp;If the parameter is not specified, then all PDBs in the CDB are created on the standby unless the <code class="codeph">STANDBYS</code> clause is used. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=REFRN-GUID-A2EC2381-D9C0-4612-87C9-A225C7BCE8C4">ENABLED_PDBS_ON_STANDBY</a> for more information about this parameter.
                        </p>
                     </li>
                     <li>
                        <p>To specify in which standby CDBs the new PDB being created is to be included, you can also use the <code class="codeph">STANDBYS</code> clause of the SQL <code class="codeph">CREATE PLUGGABLE DATABASE</code> statement. The syntax is as follows: 
                        </p><pre class="pre codeblock"><code>create pluggable database  STANDBYS={(<span class="variable">'cdb_name', 'cdb_name', ...</span>) | NONE | ALL [EXCEPT (<span class="variable">'cdb_name', 'cdb_name', ...</span>)]}</code></pre><ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">cdb_name</code> is the <code class="codeph">DB_UNIQUE_NAME</code> for the physical standbys in which the PDB is to be included
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">NONE</code> excludes the PDB being created from all standby CDBs. When a PDB is excluded from all standby CDBs, the PDB's data files are offline and marked as unnamed on all of the standby CDBs. Any new standby CDBs that are instantiated after the PDB has been created must disable the PDB for recovery explicitly to exclude it from the standby CDB. It is possible to enable a PDB on a standby CDB after it was excluded on that standby CDB.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ALL</code> (the default) includes the PDB being created in all standby CDBs.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">EXCEPT cdb_name</code> includes the PDB being created in all standby CDBs except for those CDBs listed in this clause by their <code class="codeph">DB_UNIQUE_NAME</code>.
                              </p>
                           </li>
                        </ul>
                        <p>Parentheses are required around the list of CDB names and each name must be enclosed within single quotation marks. The value of <code class="codeph">DB_UNIQUE_NAME</code> can be up to 30 characters and is case insensitive. The following characters are valid in a database name: alphanumeric characters, underscore (_), number sign (#), and dollar sign ($).
                        </p>
                        <div class="infoboxnote" id="GUID-20D2DEAC-0355-4FBB-ADB8-37BF5F4328E2__GUID-8AE71390-038D-462D-96F0-A6FA671C0A85">
                           <p class="notep1">Note:</p>
                           <p>The <code class="codeph">EXCEPT</code> clause is available starting with Oracle Database 12<span class="italic">c</span> Release 2 (12.2.0.1).
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>To create a PDB as a local clone from a different PDB or from the seed PDB within the same primary CDB, copy the data files that belong to the source PDB over to the standby  database. (This step is not necessary in an Oracle Active Data Guard environment because the data files are copied automatically at the standby when the PDB  is created on the standby database.)</p>
                        <p>To perform a remote clone of a PDB from another CDB into the primary CDB, you must use the <code class="codeph">STANDBY=NONE</code> clause and then copy the files and enable recovery by following the steps in the My Oracle Support note  2049127.1 at <a href="http://support.oracle.com"><code class="codeph">http://support.oracle.com</code></a>.
                        </p>
                     </li>
                     <li>
                        <p>To create a PDB from an XML file, copy the data files specified in the XML file to the standby database.</p>
                        <p>If your standby database has the Oracle Active Data Guard option enabled (open read-only), then copy to it the same set of PDB data files that are to be plugged into the primary database. To minimize disruptions to managed standby recovery or database sessions running on systems that have Oracle Active Data Guard enabled, you must copy these files to the standby database before plugging in the PDB at the primary database. Ensure that the files are copied to an appropriate location where they can be found by managed standby recovery:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>If data files reside in standard operating system file systems, then the location of the files at the standby database are based on the value of the <code class="codeph">DB_FILE_NAME_CONVERT</code> parameter. For more details about setting primary database initialization parameters, see <a href="creating-oracle-data-guard-physical-standby.html#GUID-0FD317D6-1A49-4DB3-A141-D00CB3089E84" title="On the primary database, you define initialization parameters that control redo transport services while the database is in the primary role.">Set Primary Database Initialization Parameters</a></p>
                           </li>
                           <li>
                              <p>If data files reside in ASM, then use the ASMCMD utility to copy the files to the following location at the standby database:</p><pre class="oac_no_warn" dir="ltr">&lt;db_create_file_dest&gt;/&lt;db_unique_name&gt;/&lt;GUID&gt;/datafile
</pre><p>The <code class="codeph">GUID</code> parameter is the global unique identifier assigned to the PDB; once assigned, it does not change. To find the value of the <code class="codeph">GUID</code> parameter, query the <code class="codeph">V$CONTAINERS</code> view before unplugging the PDB from its original source container. The following example shows how to find the value of the <code class="codeph">GUID</code> parameter for the PDB whose PDB container ID in the source container is <code class="codeph">3</code>:
                              </p><pre class="oac_no_warn" dir="ltr">SELECT guid
  FROM V$CONTAINERS
 WHERE con_id=3;
 
GUID
 
D98C12257A951FC4E043B623F00A7AF5
</pre><p>In this example, if the value of the <code class="codeph">DB_CREATE_FILE_DEST</code> parameter is <code class="codeph">+DATAFILE</code> and the value of the <code class="codeph">DB_UNIQUE_NAME</code> parameter is <code class="codeph">BOSTON</code>, then the data files are copied to:
                              </p><pre class="oac_no_warn" dir="ltr">+DATAFILE/BOSTON/D98C12257A951FC4E043B623F00A7AF5/datafile
</pre></li>
                        </ul>
                     </li>
                  </ul>
                  <p>The path name of the data files on the standby database must be the same as the resultant path name when you create the PDB on the primary, unless the <code class="codeph">DB_FILE_NAME_CONVERT</code> database initialization parameter has been configured on the standby. In that case, the path name of the data files on the standby database is the path name on the primary with <code class="codeph">DB_FILE_NAME_CONVERT</code> applied.
                  </p>
                  <div class="infoboxnotealso" id="GUID-20D2DEAC-0355-4FBB-ADB8-37BF5F4328E2__GUID-2E301C1C-F712-488E-90EB-68248F5D0901">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sbydb&amp;id=SQLRF55686"><span class="italic">Oracle Database SQL Language Reference</span></a> for more information about the SQL statement <code class="codeph">CREATE</code> <code class="codeph">PLUGGABLE</code> <code class="codeph">DATABASE</code></p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>