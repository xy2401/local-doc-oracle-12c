<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Extensible Optimizer Interface</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Data Cartridge Developer's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Data Cartridge Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 17.8.1">
      <link rel="alternate" href="data-cartridge-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2017-10-24T13:44:05-07:00">
      <meta name="dcterms.title" content="Data Cartridge Developer's Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2017">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E85964-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="extensible-indexing-interface.html" title="Previous" type="text/html">
      <link rel="next" href="user-defined-aggregate-functions-interface.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">
            {
                "primary":
                {
                    "category":{
                      "short_name":"database",
                      "element_name":"Database",
                      "display_in_url":true
                    },
                    "suite":{
                      "short_name":"oracle",
                      "element_name":"Oracle",
                      "display_in_url":true
                    },
                    "product_group":{
                      "short_name":"not-applicable",
                      "element_name":"Not applicable",
                      "display_in_url":false
                    },
                    "product":{
                      "short_name":"oracle-database",
                      "element_name":"Oracle Database",
                      "display_in_url":true
                    },
                    "release":{
                      "short_name":"12.2",
                      "element_name":"Release 12.2",
                      "display_in_url":true
                    },
                    "platform":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    },
                    "component":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    }
                }
            }
            </script>
      
    <meta name="dcterms.isVersionOf" content="ADDCI">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="extensible-indexing-interface.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="user-defined-aggregate-functions-interface.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Data Cartridge Developer's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="reference.html" property="item" typeof="WebPage"><span property="name">Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Extensible Optimizer Interface</li>
            </ol>
            <a id="GUID-2B314B88-73C1-49A0-9A74-1AB99B20FA94" name="GUID-2B314B88-73C1-49A0-9A74-1AB99B20FA94"></a><a id="ADDCI4210"></a>
            
            <h2 id="ADDCI-GUID-2B314B88-73C1-49A0-9A74-1AB99B20FA94" class="sect2"><span class="enumeration_chapter">21 </span>Extensible Optimizer Interface
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Consider the functions and procedures that comprise the interface to the extensible optimizer.</p>
            </div><a id="ADDCI5082"></a><div class="props_rev_3"><a id="GUID-EF80CBFF-6B23-41DB-9777-29E630F47350" name="GUID-EF80CBFF-6B23-41DB-9777-29E630F47350"></a><h3 id="ADDCI-GUID-EF80CBFF-6B23-41DB-9777-29E630F47350" class="sect3"><span class="enumeration_section">21.1 </span>Extensible Optimizer Interface
               </h3>
               <div>
                  <p>The extensible optimizer interfaces support working with partitioned tables and domain indexes. This is accomplished in two ways:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Additional attributes have been added to some system-defined object types that are parameters to the <code class="codeph">ODCIStats</code> interface methods. For example, the <code class="codeph">ODCIColInfo</code> type is enhanced to add information about the column's partition.
                        </p>
                     </li>
                     <li>
                        <p>Arguments or semantics of the arguments have changed for some <code class="codeph">ODCIStats</code> methods.
                        </p>
                     </li>
                  </ul>
                  <p>Note that you must update your code for <code class="codeph">ODCIStats2</code> version of the <code class="codeph">ODCIStats</code> interfaces to use your statistics type with an indextype that implements the <code class="codeph">ODCIIndex2</code> version of the extensible indexing interfaces.
                  </p>
               </div>
               <div class="props_rev_3"><a id="GUID-2E4DE8D5-5769-4DF4-9F87-B208EE9D1007" name="GUID-2E4DE8D5-5769-4DF4-9F87-B208EE9D1007"></a><h4 id="ADDCI-GUID-2E4DE8D5-5769-4DF4-9F87-B208EE9D1007" class="sect4"><span class="enumeration_section">21.1.1 </span>Using Statistics Functions in an Extensible Optimizer Interface
                  </h4>
                  <div>
                     <div class="section">
                        <p>Consider an example of how the statistics functions might be used. </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>In the schema <code class="codeph">HR</code>, we define the following operators:</span><div><pre class="oac_no_warn" dir="ltr">CREATE OPERATOR Contains binding (VARCHAR2(4000), VARCHAR2(30))
   RETURN NUMBER USING Contains_fn;

CREATE TYPE stat1 (
   ...,
   STATIC FUNCTION ODCIStatsSelectivity(pred ODCIPredInfo, sel OUT NUMBER,
      args ODCIArgDescList, start NUMBER, stop NUMBER, doc VARCHAR2(4000),
      key VARCHAR2(30)) return NUMBER,
   STACTIC FUNCTION ODCIStatsFunctionCost(func ODCIFuncInfo, cost OUT
      ODCICost, args ODCIArgDescList, doc VARCHAR2(4000), key VARCHAR2(30))
      return NUMBER,
   STATIC FUNCTION ODCIStatsIndexCost(ia ODCIIndexInfo, sel NUMBER,
      cost OUT ODCICost, qi ODCIQueryInfo, pred ODCIPredInfo,
      args ODCIArgDescList, start NUMBER, stop NUMBER,
      key VARCHAR2(30)) return NUMBER,
   ...
);

CREATE TABLE T (resume VARCHAR2(4000));

CREATE INDEX T_resume on T(resume) INDEXTYPE IS indtype;

ASSOCIATE STATISTICS WITH FUNCTIONS Contains_fn USING stat1;

ASSOCIATE STATISTICS WITH INDEXTYPE indtype USING stat1 
&nbsp;&nbsp;&nbsp;WITH SYSTEM MANAGED STORAGE TABLES;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>The optimizer encounters the query</span><div><pre class="oac_no_warn" dir="ltr">SELECT * FROM T WHERE Contains(resume, 'ORACLE') = 1,
</pre></div>
                        </li>
                        <li class="stepexpand"><span>It computes the selectivity of the predicate by invoking the user-defined selectivity function for the functional implementation of the <code class="codeph">Contains</code> operator. In this case, the selectivity function is <code class="codeph">stat1.ODCIStatsSelectivity</code>. It is called as follows:</span><div><pre class="oac_no_warn" dir="ltr"><code class="codeph">stat1.ODCIStatsSelectivity (</code>
<code class="codeph">   ODCIPredInfo('HR', 'Contains_fn', NULL, 29),</code>
<code class="codeph">   sel,</code>
<code class="codeph">   ODCIArgDescList(</code>
<code class="codeph">      ODCIArgDesc(ODCIConst.ArgLit,</code>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL, NULL, NULL, NULL, NULL, NULL),
<code class="codeph">      ODCIArgDesc(ODCIConst.ArgLit,</code>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL, NULL, NULL, NULL, NULL, NULL),
<code class="codeph">      ODCIArgDesc(ODCIConst.ArgCol, 'T', 'HR', '"RESUME"', NULL, NULL, NULL),</code>
<code class="codeph">      ODCIArgDesc(ODCIConst.ArgLit,</code>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL, NULL, NULL, NULL, NULL, NULL)),
<code class="codeph">      1,</code>
<code class="codeph">      1,</code>
<code class="codeph">      NULL,</code>
<code class="codeph">      'ORACLE')</code>
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Suppose the selectivity function returns a selectivity of 3 (percent). When the domain index is being evaluated, then the optimizer calls the user-defined index cost function as follows:</span><div><pre class="oac_no_warn" dir="ltr">stat1.ODCIStatsIndexCost (   ODCIIndexInfo('HR', 'T_RESUME',      ODCIColInfoList(ODCIColInfo('HR', 'T', '"RESUME"', NULL, NULL, NULL, 0, 0, 0, 0)), NULL, 0, 0, 0, 0),      3,      cost,      NULL,      ODCIPredInfo('HR', 'Contains', NULL, 13),      ODCIArgDescList( ODCIArgDesc(ODCIConst.ArgLit,                                   NULL, NULL, NULL, NULL, NULL, NULL),                       ODCIArgDesc(ODCIConst.ArgLit,                                   NULL, NULL, NULL, NULL, NULL, NULL),                       ODCIArgDesc(ODCIConst.ArgLit,                                   NULL, NULL, NULL, NULL, NULL, NULL)),      1,      1,      'ORACLE')
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Suppose that the optimizer decides not to use the domain index because it is too expensive. Then it calls the user-defined cost function for the functional implementation of the operator as follows:</span><div><pre class="oac_no_warn" dir="ltr">stat1.ODCIStatsFunctionCost (
   ODCIFuncInfo('HR', 'Contains_fn', NULL, 1),
   cost,
   ODCIArgDescList(&nbsp;&nbsp;ODCIArgDesc(ODCIConst.ArgCol, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'T', 'HR', '"RESUME"', NULL, NULL, NULL),
                     ODCIArgDesc(ODCIConst.ArgLit, 
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NULL, NULL, NULL, NULL, NULL, NULL)),
   NULL,
   'ORACLE')
</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="ADDCI5084"></a><div class="props_rev_3"><a id="GUID-4538C0C3-FFAF-4E25-B6D4-F136121950C0" name="GUID-4538C0C3-FFAF-4E25-B6D4-F136121950C0"></a><h4 id="ADDCI-GUID-4538C0C3-FFAF-4E25-B6D4-F136121950C0" class="sect4"><span class="enumeration_section">21.1.2 </span>EXPLAIN PLAN
                  </h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">EXPLAIN</code> <code class="codeph">PLAN</code> shows the user-defined CPU and I/O costs for domain indexes in the <code class="codeph">CPU_COST</code> and <code class="codeph">IO_COST</code> columns of <code class="codeph">PLAN_TABLE</code>. For example, suppose we have a table <code class="codeph">Emp_tab</code> and a user-defined operator <code class="codeph">Contains</code>. Further, suppose that there is a domain index <code class="codeph">EmpResume_indx</code> on the <code class="codeph">Resume_col</code> column of <code class="codeph">Emp_tab</code>, and that the indextype of <code class="codeph">EmpResume_indx</code> supports the operator <code class="codeph">Contains</code>. Then, the query
                        </p><pre class="oac_no_warn" dir="ltr">SELECT * FROM Emp_tab WHERE Contains(Resume_col, 'Oracle') = 1
</pre><p>might have the following plan:</p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-4538C0C3-FFAF-4E25-B6D4-F136121950C0__GUID-A0E58BE4-69F5-4E58-B966-E4996DFDF7CB">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="The following table provides an example of the EXPLAIN PLAN." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="23%" id="d74928e373">OPERATION</th>
                                 <th align="left" valign="bottom" width="15%" id="d74928e377">OPTIONS</th>
                                 <th align="left" valign="bottom" width="27%" id="d74928e380">OBJECT_NAME</th>
                                 <th align="left" valign="bottom" width="18%" id="d74928e383">CPU_COST</th>
                                 <th align="left" valign="bottom" width="17%" id="d74928e386">IO_COST</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d74928e391" headers="d74928e373 "><pre class="oac_no_warn" dir="ltr">SELECT STATEMENT</pre></td>
                                 <td align="left" valign="top" width="15%" headers="d74928e391 d74928e377 "><pre class="oac_no_warn" dir="ltr"></pre></td>
                                 <td align="left" valign="top" width="27%" headers="d74928e391 d74928e380 "><pre class="oac_no_warn" dir="ltr"></pre></td>
                                 <td align="left" valign="top" width="18%" headers="d74928e391 d74928e383 "><pre class="oac_no_warn" dir="ltr"></pre></td>
                                 <td align="left" valign="top" width="17%" headers="d74928e391 d74928e386 "><pre class="oac_no_warn" dir="ltr"></pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d74928e403" headers="d74928e373 "><pre class="oac_no_warn" dir="ltr">TABLE ACCESS</pre></td>
                                 <td align="left" valign="top" width="15%" headers="d74928e403 d74928e377 "><pre class="oac_no_warn" dir="ltr">BY ROWID</pre></td>
                                 <td align="left" valign="top" width="27%" headers="d74928e403 d74928e380 "><pre class="oac_no_warn" dir="ltr">EMP_TAB</pre></td>
                                 <td align="left" valign="top" width="18%" headers="d74928e403 d74928e383 "><pre class="oac_no_warn" dir="ltr"></pre></td>
                                 <td align="left" valign="top" width="17%" headers="d74928e403 d74928e386 "><pre class="oac_no_warn" dir="ltr"></pre></td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="23%" id="d74928e417" headers="d74928e373 "><pre class="oac_no_warn" dir="ltr">DOMAIN INDEX</pre></td>
                                 <td align="left" valign="top" width="15%" headers="d74928e417 d74928e377 "><pre class="oac_no_warn" dir="ltr"></pre></td>
                                 <td align="left" valign="top" width="27%" headers="d74928e417 d74928e380 "><pre class="oac_no_warn" dir="ltr">EMPRESUME_INDX</pre></td>
                                 <td align="left" valign="top" width="18%" headers="d74928e417 d74928e383 "><pre class="oac_no_warn" dir="ltr">300</pre></td>
                                 <td align="left" valign="top" width="17%" headers="d74928e417 d74928e386 "><pre class="oac_no_warn" dir="ltr">4</pre></td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div><a id="ADDCI5085"></a><div class="props_rev_3"><a id="GUID-28A4EDA6-19DD-4773-B3B8-1802C3B01E21" name="GUID-28A4EDA6-19DD-4773-B3B8-1802C3B01E21"></a><h4 id="ADDCI-GUID-28A4EDA6-19DD-4773-B3B8-1802C3B01E21" class="sect4"><span class="enumeration_section">21.1.3 </span>INDEX Hint
                  </h4>
                  <div>
                     <div class="section">
                        <p>The index hint applies to domain indexes. In other words, the index hint forces the optimizer to use the hinted index for a user-defined operator, if possible.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5086"></a><div class="props_rev_3"><a id="GUID-53F41476-C56D-42F9-9442-57612A993026" name="GUID-53F41476-C56D-42F9-9442-57612A993026"></a><h4 id="ADDCI-GUID-53F41476-C56D-42F9-9442-57612A993026" class="sect4"><span class="enumeration_section">21.1.4 </span>ORDERED_PREDICATES Hint
                  </h4>
                  <div>
                     <div class="section">
                        <p>The hint <code class="codeph">ORDERED_PREDICATES</code> forces the optimizer to preserve the order of predicate evaluation (except predicates used for index keys) as specified in the <code class="codeph">WHERE</code> clause of a SQL DML statement.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADDCI5088"></a><a id="ADDCI5087"></a><div class="props_rev_3"><a id="GUID-77BE64E1-1EF6-4649-847D-567A72DAB77D" name="GUID-77BE64E1-1EF6-4649-847D-567A72DAB77D"></a><h3 id="ADDCI-GUID-77BE64E1-1EF6-4649-847D-567A72DAB77D" class="sect3"><span class="enumeration_section">21.2 </span>User-Defined ODCIStats Functions
               </h3>
               <div>
                  <div class="section">
                     <p>User-defined <code class="codeph">ODCIStats</code> functions are used for table columns, functions, package, type, indextype or domain indexes.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="tblformal" id="GUID-77BE64E1-1EF6-4649-847D-567A72DAB77D__GUID-4DAE6E6B-0196-423F-9E3C-546072D77B50">
                     <p class="titleintable">Table 21-1 Summary of User-Defined ODCIStats Functions</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Summary of User-Defined ODCIStats Functions" summary="Column 1 gives the function name, Column two provides its description" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="42%" id="d74928e620">Function</th>
                              <th align="left" valign="bottom" width="58%" id="d74928e623">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d74928e628" headers="d74928e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-866750E9-7193-458B-B29C-6A494094DF6C">ODCIGetInterfaces()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d74928e628 d74928e623 ">
                                 <p>Discover which version of the <code class="codeph">ODCIStats</code> interface the user has implemented.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d74928e640" headers="d74928e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d74928e640 d74928e623 ">
                                 <p>Called by the <code class="codeph">DBMS_STATS</code> package to collect user-defined statistics on a table, a partition of a table, an index, or a partition of an index.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d74928e652" headers="d74928e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d74928e652 d74928e623 ">
                                 <p>Deletes user-defined statistics on a table, a partition of a table, an index, or a partition of an index.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d74928e661" headers="d74928e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1">ODCIStatsFunctionCost()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d74928e661 d74928e623 ">
                                 <p>Computes the cost of a function.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d74928e670" headers="d74928e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6">ODCIStatsExchangePartition()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d74928e670 d74928e623 ">
                                 <p>Exchanges domain index statistics when an <code class="codeph">ALTER TABLE EXCHANGE PARTITION ... INCLULDING INDEXES</code> command is issued.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d74928e682" headers="d74928e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777">ODCIStatsIndexCost()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d74928e682 d74928e623 ">
                                 <p>Calculates the cost of a domain index scan.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d74928e691" headers="d74928e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3">ODCIStatsSelectivity()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d74928e691 d74928e623 ">
                                 <p>Specifies the selectivity of a predicate.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d74928e700" headers="d74928e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-7256F85B-B97A-4258-9596-70D88FC9DE4C">ODCIStatsTableFunction()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d74928e700 d74928e623 ">
                                 <p>Provides cardinality statistics for table functions and input cursor expressions.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="42%" id="d74928e709" headers="d74928e620 ">
                                 <p><a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics()</a></p>
                              </td>
                              <td align="left" valign="top" width="58%" headers="d74928e709 d74928e623 ">
                                 <p>Updates statistics during partition maintenance operations. Patches the domain index statistics.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ADDCI5090"></a><a id="ADDCI5091"></a><a id="ADDCI5089"></a><div class="props_rev_3"><a id="GUID-866750E9-7193-458B-B29C-6A494094DF6C" name="GUID-866750E9-7193-458B-B29C-6A494094DF6C"></a><h4 id="ADDCI-GUID-866750E9-7193-458B-B29C-6A494094DF6C" class="sect4"><span class="enumeration_section">21.2.1 </span>ODCIGetInterfaces()
                  </h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">ODCIGetInterfaces</code> is invoked by the server to discover which version of the <code class="codeph">ODCIStats</code> interface the user has implemented in the methods of the user-defined statistics type. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIGetInterfaces(
&nbsp;&nbsp;&nbsp;ifclist OUT ODCIObjectList)
RETURN NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-866750E9-7193-458B-B29C-6A494094DF6C__GUID-819AE6D9-3271-4EED-AF67-2C3B59346622">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="17%" id="d74928e795">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d74928e798">IN/OUT</th>
                                 <th align="left" valign="bottom" width="72%" id="d74928e801">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="17%" id="d74928e806" headers="d74928e795 "><pre class="oac_no_warn" dir="ltr">ifclist</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e806 d74928e798 "><pre class="oac_no_warn" dir="ltr">OUT</pre></td>
                                 <td align="left" valign="top" width="72%" headers="d74928e806 d74928e801 ">
                                    <p>The version of the <code class="codeph">ODCIStats</code> interfaces implemented by the statistics type. This value should be <code class="codeph">SYS.ODCISTATS2</code>.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst.Success</code> on success, <code class="codeph">ODCIConst.Error</code> otherwise.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5094"></a><a id="ADDCI5095"></a><a id="ADDCI5093"></a><div class="props_rev_3"><a id="GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87" name="GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87"></a><h4 id="ADDCI-GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87" class="sect4"><span class="enumeration_section">21.2.2 </span>ODCIStatsCollect()
                  </h4>
                  <div>
                     <div class="section">
                        <p>Called by the <code class="codeph">DBMS_STATS</code> package to collect user-defined statistics.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87__GUID-56AAA2E0-2EFC-4EF9-9B79-FBAA4E23E511">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="Column 1 has lists the version of a function and column 2 gives its description." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="41%" id="d74928e901">Syntax</th>
                                 <th align="left" valign="bottom" width="59%" id="d74928e904">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d74928e909" headers="d74928e901 "><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIStatsCollect(
&nbsp;&nbsp;&nbsp;col ODCIColInfo, 
&nbsp;&nbsp;&nbsp;options ODCIStatsOptions, 
&nbsp;&nbsp;&nbsp;statistics OUT RAW,
&nbsp;&nbsp;&nbsp;env ODCIEnv) 
return NUMBER;</pre></td>
                                 <td align="left" valign="top" width="59%" headers="d74928e909 d74928e904 ">
                                    <p>Called by the <code class="codeph">DBMS_STATS</code> package to collect user-defined statistics on a table or a partition of a table.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="41%" id="d74928e919" headers="d74928e901 "><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIStatsCollect(
&nbsp;&nbsp;&nbsp;ia ODCIIndexInfo, 
&nbsp;&nbsp;&nbsp;options ODCIStatsOptions, 
&nbsp;&nbsp;&nbsp;statistics OUT RAW,
&nbsp;&nbsp;&nbsp;env ODCIEnv)
 return NUMBER;</pre></td>
                                 <td align="left" valign="top" width="59%" headers="d74928e919 d74928e904 ">
                                    <p>Called to collect user-defined statistics on an index or a partition of an index.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="tblformal" id="GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87__GUID-1C66368D-E893-40B3-897A-EA2EF13D0B10">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="19%" id="d74928e934">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d74928e937">IN/OUT</th>
                                 <th align="left" valign="bottom" width="70%" id="d74928e940">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d74928e945" headers="d74928e934 ">
                                    <p><code class="codeph">col</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e945 d74928e937 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="70%" headers="d74928e945 d74928e940 ">
                                    <p>Column for which statistics are being collected</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d74928e956" headers="d74928e934 ">
                                    <p><code class="codeph">options</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e956 d74928e937 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="70%" headers="d74928e956 d74928e940 ">
                                    <p>Options passed to <code class="codeph">DBMS_STATS</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d74928e969" headers="d74928e934 ">
                                    <p><code class="codeph">statistics</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e969 d74928e937 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="70%" headers="d74928e969 d74928e940 ">
                                    <p>User-defined statistics collected</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d74928e980" headers="d74928e934 ">
                                    <p>env</p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e980 d74928e937 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="70%" headers="d74928e980 d74928e940 ">
                                    <p>Contains general information about the environment in which the routine is executing</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d74928e990" headers="d74928e934 ">
                                    <p><code class="codeph">ia</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e990 d74928e937 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="70%" headers="d74928e990 d74928e940 ">
                                    <p>Domain index for which statistics are being collected</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The function returns <code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning.</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>This function should be implemented as a <code class="codeph">STATIC</code> type method.
                              </p>
                           </li>
                           <li>
                              <p>If statistics are being collected for only one partition, the <code class="codeph">TablePartition</code> field in the <code class="codeph">ODCIColInfo</code> type is filled in with the name of the partition. Otherwise (if statistics must be collected for all the partitions or for the entire table), the <code class="codeph">TablePartition</code> field is null. 
                              </p>
                           </li>
                           <li>
                              <p>If the <code class="codeph">DBMS_STATS</code> package methods are executed to collect user-defined statistics on a partitioned table, then <code class="codeph">n+1</code> <code class="codeph">ODCIStatsCollect</code> calls are made, where <code class="codeph">n</code> is the number of partitions in the table. The first <code class="codeph">n</code> calls are made with the <code class="codeph">TablePartition</code> attribute in <code class="codeph">ODCIColInfo</code> filled in with the partition name and the <code class="codeph">ODCIStatsOptions.CallProperty</code> set to <code class="codeph">IntermediateCall</code>. The last call is made with <code class="codeph">ODCIEnv.CallPropertyflag</code> set to <code class="codeph">FinalCall</code> to allow you to collect aggregate statistics for the entire table.
                              </p>
                           </li>
                           <li>
                              <p>If user-defined statistics are being collected for only one partition of the table, two <code class="codeph">ODCIStatsCollect</code> calls are made. In the first, you should collect statistics for the partition. For this call, the <code class="codeph">TablePartition</code> attribute of the <code class="codeph">ODCIColInfo</code> structure is filled in and the <code class="codeph">ODCIEnv.CallProperty</code> is set to <code class="codeph">FirstCall</code>. 
                              </p>
                           </li>
                           <li>
                              <p>In the second call you can update the aggregate statistics of the table based upon the new statistics collected for the partition. In this call, the <code class="codeph">ODCIEnv.CallPropertyflag</code> is set to <code class="codeph">FinalCall</code> to indicate that it is the second call. The <code class="codeph">ODCIColInfo.TablePartition</code> is filled in with the partition name in both the calls. 
                              </p>
                           </li>
                           <li>
                              <p>The <a href="extensible-optimizer-interface.html#GUID-227ABB3C-6218-4AA9-BC1C-D963EE800D87">ODCIStatsCollect()</a> method is invoked only one time for a non-partitioned domain index, a partitioned domain index and a partition in a domain index. If the statistics are being collected only for one partition in a domain index, the <code class="codeph">IndexPartitionNum</code> field in the <code class="codeph">ODCIIndexInfo</code> type is filled in with the partition number. Otherwise, the <code class="codeph">IndexPartitionNum</code> field is <code class="codeph">null</code>.
                              </p>
                           </li>
                           <li>
                              <p>Because the statistics <code class="codeph">OUT RAW</code> argument of statistics is not used in the new interface, the cartridge developer should store the user-defined statistics result in some user-defined tables.
                              </p>
                           </li>
                           <li>
                              <p>If a non-partitioned domain index is being <code class="codeph">ANALYZE</code>d, the user should collect statistics for the domain index.
                              </p>
                           </li>
                           <li>
                              <p>If a partitioned domain index is being <code class="codeph">ANALYZE</code>d,
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsGlobalAndPartition</code> means that the user should collect statistics for all partitions in the domain index and then aggregate statistics of the domain index based upon the statistics collected for all the partitions
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsGlobal</code> means that the user should aggregate domain index statistics from the statistics of all the domain index partitions.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsPartition</code> means that the user should collect statistics for all index partitions in the domain index.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>If only one partition of the domain index is being <code class="codeph">ANALYZE</code>d,
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsGlobalAndPartition</code> means that the user should collect statistics for the single index partition and then aggregate statistics of the domain index based upon the statistics of all the partitions.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsGlobal</code> means that the user should aggregate domain index statistics from the statistics of all the index partitions.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsPartition</code> means that the user should collect statistics for the single index partition.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>Note that when <code class="codeph">ODCIEnv.CallProperty = StatsGlobalAndPartition</code> or <code class="codeph">StatsGlobal</code>, the user should aggregate statistics for the domain index, depending on the availability of the statistics collected for the other index partitions. If the statistics for all the index partitions are available, aggregate these statistics. If any one statistics for an index partition is absent, do nothing.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5097"></a><a id="ADDCI5098"></a><a id="ADDCI5096"></a><div class="props_rev_3"><a id="GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2" name="GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2"></a><h4 id="ADDCI-GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2" class="sect4"><span class="enumeration_section">21.2.3 </span>ODCIStatsDelete()
                  </h4>
                  <div>
                     <div class="section">
                        <p><code class="codeph">ODCIStatsDelete</code> is called to delete user-defined statistics.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2__GUID-D553F464-5495-44C0-9B16-113EBBB45FAB">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="Column 1 has lists the version of a function and column 2 gives its description." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="39%" id="d74928e1257">Syntax</th>
                                 <th align="left" valign="bottom" width="61%" id="d74928e1260">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d74928e1265" headers="d74928e1257 "><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIStatsDelete(
&nbsp;&nbsp;&nbsp;col ODCIColInfo, 
&nbsp;&nbsp;&nbsp;statistics OUT RAW,
&nbsp;&nbsp;&nbsp;env ODCIEnv) 
return NUMBER;</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d74928e1265 d74928e1260 ">
                                    <p>Deletes user-defined statistics on a table or a partition of a table.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="39%" id="d74928e1272" headers="d74928e1257 "><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIStatsDelete(
&nbsp;&nbsp;&nbsp;ia ODCIIndexInfo, 
&nbsp;&nbsp;&nbsp;statistics OUT RAW, 
&nbsp;&nbsp;&nbsp;env ODCIEnv) 
return NUMBER;</pre></td>
                                 <td align="left" valign="top" width="61%" headers="d74928e1272 d74928e1260 ">
                                    <p>Deletes user-defined statistics on an index or a partition of an index.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="tblformal" id="GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2__GUID-7CF81EA1-350B-4618-B1D1-6576A1A38597">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d74928e1287">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d74928e1290">IN/OUT</th>
                                 <th align="left" valign="bottom" width="71%" id="d74928e1293">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1298" headers="d74928e1287 ">
                                    <p><code class="codeph">col</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1298 d74928e1290 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1298 d74928e1293 ">
                                    <p>Column for which statistics are being deleted</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1309" headers="d74928e1287 ">
                                    <p><code class="codeph">statistics</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1309 d74928e1290 "><pre class="oac_no_warn" dir="ltr">OUT</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1309 d74928e1293 ">
                                    <p>Contains table-level aggregate statistics for a partitioned table or index</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1320" headers="d74928e1287 ">
                                    <p><code class="codeph">env</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1320 d74928e1290 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1320 d74928e1293 ">
                                    <p>Contains general information about the environment in which the routine is executing</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1331" headers="d74928e1287 ">
                                    <p><code class="codeph">ia</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1331 d74928e1290 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1331 d74928e1293 ">
                                    <p>Domain index for which statistics are deleted</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning.</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>This function should be implemented as a <code class="codeph">STATIC</code> method.
                              </p>
                           </li>
                           <li>
                              <p>When the function is called for a non-partitioned table, the <code class="codeph">statistics</code> argument in the <code class="codeph">ODCIStatsDelete</code> interface is ignored. 
                              </p>
                           </li>
                           <li>
                              <p>If the statistics are being deleted for a partitioned table, the <code class="codeph">ODCIStatsDelete</code> is called <code class="codeph">n+1</code> times. The first <code class="codeph">n</code> calls are with the partition name filled in the <code class="codeph">ODCIColInfo</code> structure and the <code class="codeph">ODCIEnv.CallProperty</code> set to <code class="codeph">IntermediateCall</code>. The last call is made with the <code class="codeph">ODCIEnv.CallProperty</code> set to <code class="codeph">FinalCall</code>.
                              </p>
                           </li>
                           <li>
                              <p>In the first call, delete the statistics for the specific partitions; and in the last call drop or clean up any structures created for holding statistics for the deleted table. The <code class="codeph">ODCIColInfo.TablePartition</code> is set to null in the last call. In the first call, the <code class="codeph">TablePartition</code> field is filled in.
                              </p>
                           </li>
                           <li>
                              <p>If statistics are being deleted for only one partition and the <code class="codeph">_minimal_stats_aggregation</code> parameter is set to <code class="codeph">FALSE</code>, two <code class="codeph">ODCIStatsDelete</code> calls are made. In each call, <code class="codeph">ODCIColInfo.TablePartition</code> is filled in with the partition name. On the first call, delete any user-defined statistics collected for that partition. On the second call, update the aggregate statistics for the table. 
                              </p>
                           </li>
                           <li>
                              <p>If statistics are being deleted for one partition and <code class="codeph">_minimal_stats_aggregation</code> is set to <code class="codeph">TRUE</code>, <code class="codeph">ODCIStatsDelete</code> is only called one to delete any user-defined statistics collected for that partition.
                              </p>
                           </li>
                           <li>
                              <p>The initial value of <code class="codeph">_minimal_stats_aggregation</code> is <code class="codeph">TRUE</code>.
                              </p>
                           </li>
                           <li>
                              <p>The <a href="extensible-optimizer-interface.html#GUID-294738F4-65B1-4272-BBD6-686F2E38B9C2">ODCIStatsDelete()</a> method is invoked only one time for non-partitioned domain index, partitioned domain index, or an index partition.
                              </p>
                           </li>
                           <li>
                              <p>If the statistics is being deleted for a non-partitioned domain index, the user should delete user-defined statistics for the domain index.</p>
                           </li>
                           <li>
                              <p>If the statistics is being deleted for a partitioned domain index, the user should delete the aggregated statistics of the domain index and optionally delete user-defined statistics for all domain index partitions, depending on <code class="codeph">Options</code> in <code class="codeph">ODCIEnv.CallProperty</code>:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsGlobalAndPartition</code> means that the user should delete statistics for all the domain index partitions and aggregated statistics of the domain index.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsGlobal</code> means that the user should delete the aggregated statistics of the domain index.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">ODCIEnv.CallProperty = StatsPartition</code> is not valid option.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                           <li>
                              <p>If the statistics is being deleted for only one partition of the index, the user should delete user-defined statistics for the index partition.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5100"></a><a id="ADDCI5101"></a><a id="ADDCI5102"></a><a id="ADDCI5099"></a><div class="props_rev_3"><a id="GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1" name="GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1"></a><h4 id="ADDCI-GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1" class="sect4"><span class="enumeration_section">21.2.4 </span>ODCIStatsFunctionCost()
                  </h4>
                  <div>
                     <div class="section">
                        <p>Computes the cost of a function.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIStatsFunctionCost(
&nbsp;&nbsp;&nbsp;func ODCIFuncInfo, 
&nbsp;&nbsp;&nbsp;cost OUT ODCICost, 
&nbsp;&nbsp;&nbsp;args ODCIArgDescList, 
&nbsp;&nbsp;&nbsp;<span class="italic">list</span>,
&nbsp;&nbsp;&nbsp;env ODCIEnv) 
return NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-B13AA56D-ABAF-431A-BAED-006B8331DCE1__GUID-897555F1-7343-4C0C-AF2A-A96470C2EC61">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d74928e1563">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d74928e1566">IN/OUT</th>
                                 <th align="left" valign="bottom" width="71%" id="d74928e1569">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1574" headers="d74928e1563 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">func</code></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1574 d74928e1566 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1574 d74928e1569 ">
                                    <p>Function or type method for which the cost is being computed</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1585" headers="d74928e1563 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">cost</code></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1585 d74928e1566 "><pre class="oac_no_warn" dir="ltr">OUT</pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1585 d74928e1569 ">
                                    <p>Computed cost (must be positive whole numbers)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1596" headers="d74928e1563 "><pre class="oac_no_warn" dir="ltr">args</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1596 d74928e1566 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1596 d74928e1569 ">
                                    <p>Descriptor of actual arguments with which the function or type method was called. If the function has <span class="italic">n</span> arguments, the <code class="codeph">args</code> array contains <span class="italic">n </span>elements, each describing the actual arguments of the function or type method
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1615" headers="d74928e1563 "><pre class="oac_no_warn" dir="ltr"><span class="italic"><code class="codeph">list</code></span></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1615 d74928e1566 ">
                                    <p> </p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1615 d74928e1569 ">
                                    <p>List of actual parameters to the function or type method; the number, position, and type of each argument must be identical in the function or type method.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1627" headers="d74928e1563 "><pre class="oac_no_warn" dir="ltr">env</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1627 d74928e1566 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1627 d74928e1569 ">
                                    <p>Contains general information about the environment in which the routine is executing</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning.</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>This function should be implemented as a static type method.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5104"></a><a id="ADDCI5105"></a><a id="ADDCI5106"></a><a id="ADDCI5103"></a><div class="props_rev_3"><a id="GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6" name="GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6"></a><h4 id="ADDCI-GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6" class="sect4"><span class="enumeration_section">21.2.5 </span>ODCIStatsExchangePartition()
                  </h4>
                  <div>
                     <div class="section">
                        <p>Exchanges domain index statistics when an <code class="codeph">ALTER TABLE EXCHANGE PARTITION ... INCLULDING INDEXES</code> command is issued.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIStatsExchangePartition(
&nbsp;&nbsp;&nbsp;ia ODCIIndexInfo, 
&nbsp;&nbsp;&nbsp;ia1 ODCIIndexInfo,
&nbsp;&nbsp;&nbsp;env ODCIEnv) 
return NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-6FE88952-A3B9-40B3-8A49-BF0D548C7EE6__GUID-7A85A8AF-0C24-4B2A-9677-7DA9056BC1E9">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d74928e1733">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d74928e1736">IN/OUT</th>
                                 <th align="left" valign="bottom" width="71%" id="d74928e1739">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1744" headers="d74928e1733 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ia</code></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1744 d74928e1736 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1744 d74928e1739 ">
                                    <p>Information about the index partition that must be exchanged</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1755" headers="d74928e1733 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ia1</code></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1755 d74928e1736 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1755 d74928e1739 ">
                                    <p>Information about the index of the non-partitioned table with which the partition is exchanged</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1766" headers="d74928e1733 "><pre class="oac_no_warn" dir="ltr">env</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1766 d74928e1736 ">
                                    <p> </p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1766 d74928e1739 ">
                                    <p>Contains general information about the environment in which the routine is executing</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>This method should be implemented as a <code class="codeph">STATIC</code> type.
                              </p>
                           </li>
                           <li>
                              <p>This method should be capable of converting the statistics associated with a domain index partition into statistics associated with a non-partitioned domain index, and the reverse. If the statistics are missing for one of the indexes or index partitions, the user should be able to delete these statistics.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5108"></a><a id="ADDCI5109"></a><a id="ADDCI5110"></a><a id="ADDCI5107"></a><div class="props_rev_3"><a id="GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777" name="GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777"></a><h4 id="ADDCI-GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777" class="sect4"><span class="enumeration_section">21.2.6 </span>ODCIStatsIndexCost()
                  </h4>
                  <div>
                     <div class="section">
                        <p>Calculates the cost of a domain index scan, either a scan of the entire index or a scan of one or more index partitions if a local domain index has been built.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIStatsIndexCost(
&nbsp;&nbsp;&nbsp;ia ODCIIndexInfo, 
&nbsp;&nbsp;&nbsp;sel NUMBER, 
&nbsp;&nbsp;&nbsp;cost OUT ODCICost, 
&nbsp;&nbsp;&nbsp;qi ODCIQueryInfo, 
&nbsp;&nbsp;&nbsp;pred ODCIPredInfo, 
&nbsp;&nbsp;&nbsp;args ODCIArgDescList,
&nbsp;&nbsp;&nbsp;start <span class="italic">operator_return_type</span>,
&nbsp;&nbsp;&nbsp;stop <span class="italic">operator_return_type</span>,
&nbsp;&nbsp;&nbsp;<span class="italic">list</span>, 
&nbsp;&nbsp;&nbsp;env ODCIEnv) 
return NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777__GUID-31D25B12-8FBC-4C5E-B78D-85F4CF292936">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d74928e1887">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d74928e1890">IN/OUT</th>
                                 <th align="left" valign="bottom" width="71%" id="d74928e1893">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1898" headers="d74928e1887 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">ia</code></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1898 d74928e1890 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1898 d74928e1893 ">
                                    <p>domain index for which statistics are being collected</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1909" headers="d74928e1887 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">sel</code></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1909 d74928e1890 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1909 d74928e1893 ">
                                    <p>the user-computed selectivity of the predicate</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1920" headers="d74928e1887 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">cost</code></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1920 d74928e1890 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1920 d74928e1893 ">
                                    <p>computed cost (must be positive whole numbers)</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1931" headers="d74928e1887 "><pre class="oac_no_warn" dir="ltr"><code class="codeph">qi</code></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1931 d74928e1890 ">
                                    <p> </p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1931 d74928e1893 ">
                                    <p>Information about the query</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1942" headers="d74928e1887 "><pre class="oac_no_warn" dir="ltr">pred</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1942 d74928e1890 ">
                                    <p> </p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1942 d74928e1893 ">
                                    <p>Information about the predicate</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1952" headers="d74928e1887 "><pre class="oac_no_warn" dir="ltr">args</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1952 d74928e1890 ">
                                    <p> </p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1952 d74928e1893 ">
                                    <p>Descriptor of <code class="codeph">start</code>, <code class="codeph">stop</code>, and actual value arguments with which the operator was called. If the operator has <span class="italic">n</span> arguments, the <code class="codeph">args</code> array contains <span class="italic">n+1</span> elements, the first element describing the start value, the second element describing the stop value, and the remaining <span class="italic">n-1</span> elements describing the actual value arguments of the operator (that is, the arguments after the first)
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1981" headers="d74928e1887 "><pre class="oac_no_warn" dir="ltr">start</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1981 d74928e1890 ">
                                    <p> </p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1981 d74928e1893 ">
                                    <p>Lower bound of the operator (for example, 2 for a predicate<code class="codeph"> fn(...)</code> &gt; <code class="codeph">2)</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e1996" headers="d74928e1887 "><pre class="oac_no_warn" dir="ltr">stop</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e1996 d74928e1890 ">
                                    <p> </p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d74928e1996 d74928e1893 ">
                                    <p>Upper bound of the operator (for example, 5 for a predicate <code class="codeph">fn(...)</code> <code class="codeph">&lt;</code> <code class="codeph">5</code>)
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e2015" headers="d74928e1887 "><pre class="oac_no_warn" dir="ltr"><span class="italic"><code class="codeph">list</code></span></pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e2015 d74928e1890 ">
                                    <p> </p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d74928e2015 d74928e1893 ">
                                    <p>List of actual parameters to the operator (excluding the first); the number, position, and type of each argument must be identical to the one in the operator.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e2027" headers="d74928e1887 "><pre class="oac_no_warn" dir="ltr">env</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e2027 d74928e1890 ">
                                    <p> </p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d74928e2027 d74928e1893 ">
                                    <p>Contains general information about the environment in which the routine is executing</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>For each table in the query, the optimizer uses partition pruning to determine the range of partitions that may be accessed. These partitions are called <span class="bold">interesting partitions</span>. The set of interesting partitions for a table is also the set of interesting partitions for all domain indexes on that table. The cost of a domain index can depend on the set of interesting partitions, so the optimizer passes a list of interesting index partitions to <code class="codeph">ODCIStatsIndexCost</code> in the <code class="codeph">args</code> argument (the type of this argument, <code class="codeph">ODCIArgDescList</code>, is a list of <code class="codeph">ODCIArgDesc</code> argument descriptor types) for those arguments that are columns. For non-partitioned domain indexes or for cases where no partition pruning is possible, no partition list is passed to <code class="codeph">ODCIStatsIndexCost</code>, and you should assume that the entire index is accessed.
                              </p>
                           </li>
                           <li>
                              <p>The domain index key can contain multiple column arguments (for example, the indexed column and column arguments from other tables appearing earlier in a join order). For each column appearing in the index key, the <code class="codeph">args</code> argument contains the list of interesting partitions for the table. For example, for an index key
                              </p><pre class="oac_no_warn" dir="ltr">op(T1.c1, T2.c2) = 1
</pre><p>the optimizer passes a list of interesting partitions for tables <code class="codeph">T1</code> and <code class="codeph">T2</code> if they are partitioned and there is partition pruning for them.
                              </p>
                           </li>
                           <li>
                              <p>This function should be implemented as a static type method.</p>
                           </li>
                           <li>
                              <p>Only a single call is made to the <code class="codeph">ODCIStatsIndexCost()</code> function for queries on partitioned or non-partitioned tables. For queries on partitioned tables, additional information is passed in the <code class="codeph">ODCIStatsIndexCost()</code> function. Note that some partitions in the list passed to <code class="codeph">ODCIStatsIndexCost()</code> may not actually be accessed by the query. The list of interesting partitions chiefly serves to exclude partitions that are definitely not accessed.
                              </p>
                           </li>
                           <li>
                              <p>When the <code class="codeph">ODCIStatsIndexCost()</code> function is invoked, users can fill in a string in the <code class="codeph">IndexCostInfo</code> field of the cost attribute to supply any additional information that might be helpful. The string (255 characters maximum) is displayed in the <code class="codeph">OPTIONS</code> column in the <code class="codeph">EXPLAIN PLAN</code> output when an execution plan chooses a domain index scan.
                              </p>
                           </li>
                           <li>
                              <p>Users implementing this function must return <code class="codeph">'SYS.ODCISTATS2'</code> in the <code class="codeph">ODCIGetInterfaces()</code> call.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777__GUID-A25F65A1-01CB-4C20-8582-A26EAEEE1E7E">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="extensible-optimizer-interface.html#GUID-866750E9-7193-458B-B29C-6A494094DF6C">ODCIGetInterfaces()</a></p>
                              </li>
                              <li>
                                 <p><a href="extensible-optimizer-interface.html#GUID-158EC3A8-CB48-48B2-9405-198BA0FDD777">ODCIStatsIndexCost()</a></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5112"></a><a id="ADDCI5113"></a><a id="ADDCI5114"></a><a id="ADDCI5111"></a><div class="props_rev_3"><a id="GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3" name="GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3"></a><h4 id="ADDCI-GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3" class="sect4"><span class="enumeration_section">21.2.7 </span>ODCIStatsSelectivity()
                  </h4>
                  <div>
                     <div class="section">
                        <p>Specifies the selectivity of a predicate. The selectivity of a predicate involving columns from a single table is the fraction of rows of that table that satisfy the predicate. For predicates involving columns from multiple tables (for example, join predicates), the selectivity should be computed as a fraction of rows in the Cartesian product of those tables. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">FUNCTION ODCIStatsSelectivity(
&nbsp;&nbsp;&nbsp;pred ODCIPredInfo, 
&nbsp;&nbsp;&nbsp;sel OUT NUMBER, 
&nbsp;&nbsp;&nbsp;args ODCIArgDescList, 
&nbsp;&nbsp;&nbsp;start <span class="italic">function_return_type</span>, 
&nbsp;&nbsp;&nbsp;stop <span class="italic">function_return_type</span>, 
&nbsp;&nbsp;&nbsp;<span class="italic">list</span>, 
&nbsp;&nbsp;&nbsp;env ODCIEnv) 
return NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-4CEECA5F-099A-4558-A50C-FD856A814CF3__GUID-494B36B1-4C1B-4DB5-AEBC-4768A2410335">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d74928e2225">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d74928e2228">IN/OUT</th>
                                 <th align="left" valign="bottom" width="71%" id="d74928e2231">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e2236" headers="d74928e2225 ">
                                    <p><code class="codeph">pred</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e2236 d74928e2228 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e2236 d74928e2231 ">
                                    <p>Predicate for which the selectivity is being computed</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e2247" headers="d74928e2225 ">
                                    <p><code class="codeph">sel</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e2247 d74928e2228 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e2247 d74928e2231 ">
                                    <p>The computed selectivity, expressed as a number between (and including) 0 and 100, represents a percentage. </p>
                                    <p>The optimizer ignores numbers less than 0 or greater than 100 as invalid values. If the computed selectivity is less than 0.5%, a value of 0 may be returned in the output parameter <code class="codeph">sel</code>. A selectivity of 0 does not mean that the predicate will be removed
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e2263" headers="d74928e2225 ">
                                    <p><code class="codeph">args</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e2263 d74928e2228 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e2263 d74928e2231 ">
                                    <p>Descriptor of <code class="codeph">start</code>, <code class="codeph">stop</code>, and actual arguments with which the function, type method, or operator was called. If the function has <span class="italic">n</span> arguments, the <code class="codeph">args</code> array contains <span class="italic">n+2</span> elements, the first element describing the start value, the second element describing the stop value, and the remaining <span class="italic">n</span> elements describing the actual arguments of the function, method, or operator
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e2293" headers="d74928e2225 ">
                                    <p><code class="codeph">start</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e2293 d74928e2228 ">
                                    <p> </p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d74928e2293 d74928e2231 ">
                                    <p>Lower bound of the function (for example, 2 for a predicate<code class="codeph"> fn(...)</code> <code class="codeph">&gt;</code> <code class="codeph">2</code>)
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e2313" headers="d74928e2225 ">
                                    <p><code class="codeph">stop</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e2313 d74928e2228 ">
                                    <p> </p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d74928e2313 d74928e2231 ">
                                    <p>Upper bound of the function (for example, 5 for a predicate <code class="codeph">fn(...)</code> <code class="codeph">&lt;</code> <code class="codeph">5)</code></p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e2332" headers="d74928e2225 ">
                                    <p><span class="italic"><code class="codeph">list</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e2332 d74928e2228 ">
                                    <p> </p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d74928e2332 d74928e2231 ">
                                    <p>List of actual parameters to the function or type method; the number, position, and type of each argument must be identical to the one in the function, type method, or operator.</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e2344" headers="d74928e2225 ">
                                    <p><code class="codeph">env</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e2344 d74928e2228 ">
                                    <p> </p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d74928e2344 d74928e2231 ">
                                    <p>Contains general information about the environment in which the routine is executing</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning</code></p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>As in <code class="codeph">ODCIStatsIndexCost</code>, the args argument contains a list of <span class="italic">interesting</span> partitions for the tables whose columns are referenced in the predicate for which the selectivity has to be computed. These interesting partitions are partitions that cannot be eliminated by partition pruning as possible candidates to be accessed. The set of interesting partitions is passed to the function only if partition pruning has occurred (in other words, the interesting partitions are a strict subset of all the partitions). 
                              </p>
                           </li>
                           <li>
                              <p>For example, when <code class="codeph">ODCIStatsSelectivity</code> is called to compute the selectivity of the predicate:
                              </p><pre class="oac_no_warn" dir="ltr">f(T1.c1, T2.c2) &gt; 4
</pre><p>the optimizer passes the list of interesting partitions for the table <code class="codeph">T1</code> (in the argument descriptor for column <code class="codeph">T1.c1</code>) if partition pruning is possible; similarly for the table <code class="codeph">T2</code>.
                              </p>
                              <p>If a predicate contains columns from several tables, this information is indicated by the flag bit <code class="codeph">PredMultiTable</code>, set in the <code class="codeph">Flags</code> attribute of the <code class="codeph">pred</code> argument.
                              </p>
                           </li>
                           <li>
                              <p>This function should be implemented as a static type method.</p>
                           </li>
                           <li>
                              <p>Users implementing this interface must return <code class="codeph">'SYS.ODCISTATS2'</code> in the <code class="codeph">ODCIGetInterfaces</code> call.
                              </p>
                           </li>
                           <li>
                              <p>The selectivity of a predicate involving columns from a single table is the fraction of rows of that table that satisfy the predicate. For predicates involving columns from multiple tables (for example, join predicates), the selectivity should be computed as a fraction of rows in the Cartesian product of those tables. For tables with partition pruning, the selectivity should be expressed relative to the cardinalities of the interesting partitions of the tables involved.</p>
                              <p>The selectivity of predicates involving columns on partitioned tables is computed relative to the rows in the interesting partitions. Thus, the selectivity of the predicate</p><pre class="oac_no_warn" dir="ltr">g(T1.c1) &lt; 5
</pre><p>is the percentage of rows in the set of interesting partitions (or all partitions if no partition pruning is possible) that satisfies this predicate. For predicates with columns from multiple tables, the selectivity must be relative to the number of rows in the cartesian product of the tables. </p>
                           </li>
                           <li>
                              <p>For example, consider the predicate:</p><pre class="oac_no_warn" dir="ltr">f(T1.c1, T2.c2) &gt; 4
</pre><p>Suppose that the number of rows in the interesting partitions is 1000 for <code class="codeph">T1</code> and 5000 for <code class="codeph">T2</code>. The selectivity of this predicate must be expressed as the percentage of the 5,000,000 rows in the Cartesian product of <code class="codeph">T1</code> and <code class="codeph">T2</code> that satisfy the predicate.
                              </p>
                           </li>
                           <li>
                              <p>If a predicate contains columns from several tables, this information is indicated by the flag bit <code class="codeph">PredMultiTable</code> set in the <code class="codeph">Flags</code> attribute of the <code class="codeph">pred</code> argument.
                              </p>
                           </li>
                           <li>
                              <p>A selectivity expressed relative to the base cardinalities of the tables involved may be only an approximation of the true selectivity if cardinalities (and other statistics) of the tables have been reduced based on single-table predicates or other joins earlier in the join order. However, this approximation to the true selectivity should be acceptable to most applications.</p>
                           </li>
                           <li>
                              <p>Only one call is made to the <code class="codeph">ODCIStatsSelectivity</code> function for queries on partitioned or non-partitioned tables. In the case of queries on partitioned tables, additional information is passed while calling the <code class="codeph">ODCIStatsSelectivity</code> function. 
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5116"></a><a id="ADDCI5117"></a><a id="ADDCI5115"></a><div class="props_rev_3"><a id="GUID-7256F85B-B97A-4258-9596-70D88FC9DE4C" name="GUID-7256F85B-B97A-4258-9596-70D88FC9DE4C"></a><h4 id="ADDCI-GUID-7256F85B-B97A-4258-9596-70D88FC9DE4C" class="sect4"><span class="enumeration_section">21.2.8 </span>ODCIStatsTableFunction()
                  </h4>
                  <div>
                     <div class="section">
                        <p>This function provides cardinality statistics for table functions and input cursor expressions.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">STATIC FUNCTION ODCIStatsTableFunction(
&nbsp;&nbsp;&nbsp;func IN SYS.ODCIFuncInfo, 
&nbsp;&nbsp;&nbsp;outStats OUT SYS.ODCITabFuncStats, 
&nbsp;&nbsp;&nbsp;argDesc IN SYS.ODCIArgDescList, 
&nbsp;&nbsp;&nbsp;<span class="italic">list</span>)
RETURN NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-7256F85B-B97A-4258-9596-70D88FC9DE4C__GUID-4E1C7D11-3390-47AE-B19F-C583DE6370CE">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d74928e2551">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d74928e2554">IN/OUT</th>
                                 <th align="left" valign="bottom" width="71%" id="d74928e2557">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e2562" headers="d74928e2551 ">
                                    <p><code class="codeph">func</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e2562 d74928e2554 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e2562 d74928e2557 ">
                                    <p>Table function name</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e2573" headers="d74928e2551 ">
                                    <p><code class="codeph">outStats</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e2573 d74928e2554 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e2573 d74928e2557 ">
                                    <p>Number of rows expected to be returned</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e2584" headers="d74928e2551 ">
                                    <p><code class="codeph">argDesc</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e2584 d74928e2554 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e2584 d74928e2557 ">
                                    <p>Description of the arguments to the table function</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e2595" headers="d74928e2551 ">
                                    <p><span class="italic"><code class="codeph">list</code></span></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e2595 d74928e2554 ">
                                    <p> </p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d74928e2595 d74928e2557 ">
                                    <p>The arguments' compile-time values. Expressions that only have values at run time are represented by nulls.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning.</code></p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADDCI5119"></a><a id="ADDCI5120"></a><a id="ADDCI5118"></a><div class="props_rev_3"><a id="GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2" name="GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2"></a><h4 id="ADDCI-GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2" class="sect4"><span class="enumeration_section">21.2.9 </span>ODCIStatsUpdPartStatistics()
                  </h4>
                  <div>
                     <div class="section">
                        <p>Updates statistics during partition maintenance operations. This lets the statistics type patch up the domain index statistics to correctly reflect the partition maintenance operation.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section"><pre class="oac_no_warn" dir="ltr">STATIC FUNCTION ODCIStatsCollect(
&nbsp;&nbsp;&nbsp;ia ODCIIndexInfo,
&nbsp;&nbsp;&nbsp;palist ODCIPartInfoList,
&nbsp;&nbsp;&nbsp;env ODCIEnv) 
RETURN NUMBER</pre></div>
                     <!-- class="section" -->
                     <div class="tblformal" id="GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2__GUID-E73F4EEC-3724-4773-9D7D-38FC5E34B8C7">
                        <table cellpadding="4" cellspacing="0" class="Formal" title="" summary="First column lists a parameter; second column indicates the IN or OUT binding of the parameter, the third column describes the parameter." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="18%" id="d74928e2693">Parameter</th>
                                 <th align="left" valign="bottom" width="11%" id="d74928e2696">IN/OUT</th>
                                 <th align="left" valign="bottom" width="71%" id="d74928e2699">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e2704" headers="d74928e2693 ">
                                    <p><code class="codeph">ia</code></p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e2704 d74928e2696 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e2704 d74928e2699 ">
                                    <p>Contains information about the domain index. It does not contain any partition specific information</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e2715" headers="d74928e2693 ">
                                    <p>palist</p>
                                 </td>
                                 <td align="left" valign="top" width="11%" headers="d74928e2715 d74928e2696 "><pre class="oac_no_warn" dir="ltr"> </pre></td>
                                 <td align="left" valign="top" width="71%" headers="d74928e2715 d74928e2699 ">
                                    <p>Contains information about the partitions that are to be dropped or added</p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="18%" id="d74928e2725" headers="d74928e2693 "><pre class="oac_no_warn" dir="ltr">env</pre></td>
                                 <td align="left" valign="top" width="11%" headers="d74928e2725 d74928e2696 ">
                                    <p> </p>
                                 </td>
                                 <td align="left" valign="top" width="71%" headers="d74928e2725 d74928e2699 ">
                                    <p>Environment handle passed to the routine</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <div class="section">
                        <p class="subhead3">Returns</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><code class="codeph">ODCIConst.Success</code>, <code class="codeph">ODCIConst.Error</code>, or <code class="codeph">ODCIConst.Warning.</code></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>When the statistics type is specified by the <code class="codeph">SYSTEM MANAGED</code> approach, then the <a href="extensible-optimizer-interface.html#GUID-E3185A04-24BD-43C8-A2EC-76DDF78188A2">ODCIStatsUpdPartStatistics()</a> method is invoked only one time during PMO. Only DML and query are allowed in the method implementation. 
                              </p>
                           </li>
                           <li>
                              <p>If the user maintains the domain index statistics in a global non-partitioned table, then the user should delete the entry for the user-defined statistics for the dropped partition (and optionally add a <code class="codeph">NULL</code> entry for added partition). They can then check if <code class="codeph">ODCIEnv.CallProperty</code> is <code class="codeph">StatsGlobalAndPartition</code> or <code class="codeph">StatsPartition</code>. If <code class="codeph">ODCIEnv.CallProperty</code> is <code class="codeph">StatsGlobalAndPartition</code> then they should aggregate all the available index partition statistics. If <code class="codeph">ODCIEnv.CallProperty</code> is <code class="codeph">StatsPartition</code> they can simply delete the aggregate statistics, or leave the aggregate statistics as they are. <code class="codeph">ODCIEnv.CallProperty</code> cannot be <code class="codeph">StatsGlobal</code> for this call.
                              </p>
                           </li>
                           <li>
                              <p>The user should use the information passed in by the <code class="codeph">ODCIEnv.CallProperty</code> to determine the type of statistics to delete and adjust.
                              </p>
                           </li>
                           <li>
                              <p>If the method returns <code class="codeph">ODCIConst.Error</code>, the error is ignored and the partition management operation continues.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>