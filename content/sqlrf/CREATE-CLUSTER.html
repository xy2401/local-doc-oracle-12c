<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>CREATE CLUSTER</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 17.8.1">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2017-11-29T11:56:42-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2017">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E83703-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="CREATE-AUDIT-POLICY-Unified-Auditing.html" title="Previous" type="text/html">
      <link rel="next" href="CREATE-CONTEXT.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">
            {
                "primary":
                {
                    "category":{
                      "short_name":"database",
                      "element_name":"Database",
                      "display_in_url":true
                    },
                    "suite":{
                      "short_name":"oracle",
                      "element_name":"Oracle",
                      "display_in_url":true
                    },
                    "product_group":{
                      "short_name":"not-applicable",
                      "element_name":"Not applicable",
                      "display_in_url":false
                    },
                    "product":{
                      "short_name":"oracle-database",
                      "element_name":"Oracle Database",
                      "display_in_url":true
                    },
                    "release":{
                      "short_name":"12.2",
                      "element_name":"Release 12.2",
                      "display_in_url":true
                    },
                    "platform":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    },
                    "component":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    }
                }
            }
            </script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="CREATE-AUDIT-POLICY-Unified-Auditing.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="CREATE-CONTEXT.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="SQL-Statements-COMMIT-to-CREATE-JAVA.html" property="item" typeof="WebPage"><span property="name"> SQL Statements: COMMIT to CREATE JAVA</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">CREATE CLUSTER </li>
            </ol>
            <a id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7" name="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7"></a><a id="SQLRF53782"></a><a id="SQLRF53783"></a><a id="SQLRF53784"></a><a id="SQLRF56679"></a><a id="SQLRF53785"></a><a id="SQLRF53786"></a><a id="SQLRF53787"></a><a id="SQLRF53788"></a><a id="SQLRF53789"></a><a id="SQLRF53790"></a><a id="SQLRF55610"></a><a id="SQLRF53791"></a><a id="SQLRF53792"></a><a id="SQLRF53793"></a><a id="SQLRF53794"></a><a id="SQLRF53795"></a><a id="SQLRF53796"></a><a id="SQLRF53797"></a><a id="SQLRF53798"></a><a id="SQLRF53799"></a><a id="SQLRF53800"></a><a id="SQLRF53801"></a><a id="SQLRF53802"></a><a id="SQLRF53803"></a><a id="SQLRF56680"></a><a id="SQLRF56681"></a><a id="SQLRF53804"></a><a id="SQLRF53805"></a><a id="SQLRF53806"></a><a id="SQLRF53807"></a><a id="SQLRF53808"></a><a id="SQLRF56682"></a><a id="SQLRF01201"></a>
            
            <h2 id="SQLRF-GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7" class="sect2"><span class="enumeration_section">13.5 </span>CREATE CLUSTER 
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <p class="subhead1">Purpose </p>
                  <p><a id="d306090e91" class="indexterm-anchor"></a>Use the <code class="codeph">CREATE</code> <code class="codeph">CLUSTER</code> statement to create a cluster. A <span class="bold">cluster</span> is a schema object that contains data from one or more tables. 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>An <span class="bold">indexed cluster</span> must contain more than one table, and all of the tables in the cluster have one or more columns in common. Oracle Database stores together all the rows from all the tables that share the same cluster key.
                        </p>
                     </li>
                     <li>
                        <p>In a <span class="bold">hash cluster</span>, which can contain one or more tables, Oracle Database stores together rows that have the same hash key value.
                        </p>
                     </li>
                  </ul>
                  <p>For information on existing clusters, query the <code class="codeph">USER_CLUSTERS</code>, <code class="codeph">ALL_CLUSTERS</code>, and <code class="codeph">DBA_CLUSTERS</code> data dictionary views.
                  </p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-0FC72F17-C658-4C42-B392-5AB30E64C00D">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../cncpt/tables-and-table-clusters.html#CNCPT608"><span class="italic">Oracle Database Concepts</span></a> for general information on clusters
                           </p>
                        </li>
                        <li>
                           <p><a href="../tgsql/guidelines-for-indexes-and-table-clusters.html#TGSQL850"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for suggestions on when to use clusters
                           </p>
                        </li>
                        <li>
                           <p><a href="../refrn/static-data-dictionary-views.html#REFRN002"><span class="italic">Oracle Database Reference</span></a> for information on the data dictionary views
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Prerequisites </p>
                  <p>To create a cluster in your own schema, you must have <code class="codeph">CREATE</code> <code class="codeph">CLUSTER</code> system privilege. To create a cluster in another user's schema, you must have <code class="codeph">CREATE</code> <code class="codeph">ANY</code> <code class="codeph">CLUSTER</code> system privilege. Also, the owner of the schema to contain the cluster must have either space quota on the tablespace containing the cluster or the <code class="codeph">UNLIMITED</code> <code class="codeph">TABLESPACE</code> system privilege. 
                  </p>
                  <p>Oracle Database does not automatically create an index for a cluster when the cluster is initially created. Data manipulation language (DML) statements cannot be issued against cluster tables in an indexed cluster until you create a cluster index with a <code class="codeph">CREATE</code> <code class="codeph">INDEX</code> statement. 
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1"><span class="italic">create_cluster</span>::=
                  </p>
                  <div class="figure" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-1110AAD7-919D-4F56-8499-C3FFB8AF10A5"><img src="img/create_cluster.gif" alt="Description of create_cluster.eps follows" title="Description of create_cluster.eps follows" longdesc="img_text/create_cluster.html"><br><a href="img_text/create_cluster.html">Description of the illustration create_cluster.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2127411">physical_attributes_clause::=</a></span>, <span class="italic"><a href="size_clause.html#GUID-E97FADC2-A6E1-4D68-9F79-DCA271B86517__CHDEAIID">size_clause::=</a></span>, <span class="italic"><a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__CACHDBII">cluster_range_partitions::=</a></span>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2127411">
                  <p class="subhead1"><span class="italic">physical_attributes_clause</span>::=
                  </p><a id="d306090e217" class="indexterm-anchor"></a><div class="figure" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-B81E97AB-4AB0-4B30-931D-17C95912706A"><img src="img/physical_attributes_clause.gif" alt="Description of physical_attributes_clause.eps follows" title="Description of physical_attributes_clause.eps follows" longdesc="img_text/physical_attributes_clause.html"><br><a href="img_text/physical_attributes_clause.html">Description of the illustration physical_attributes_clause.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="storage_clause.html#GUID-C5A67610-3160-41E9-8D48-03206BD5ED15__CJACEJGB">storage_clause::=</a></span>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1"><span class="italic">parallel_clause</span>::=
                  </p>
                  <div class="figure" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-8460B8B5-F291-486D-8208-7F124B1799D5"><img src="img/parallel_clause.gif" alt="Description of parallel_clause.eps follows" title="Description of parallel_clause.eps follows" longdesc="img_text/parallel_clause.html"><br><a href="img_text/parallel_clause.html">Description of the illustration parallel_clause.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__CACHDBII">
                  <p class="subhead1"><span class="italic">cluster_range_partitions</span>::=
                  </p>
                  <div class="figure" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-3C150C55-579B-4217-A045-DDA8BC8BE232"><img src="img/cluster_range_partitions.gif" alt="Description of cluster_range_partitions.eps follows" title="Description of cluster_range_partitions.eps follows" longdesc="img_text/cluster_range_partitions.html"><br><a href="img_text/cluster_range_partitions.html">Description of the illustration cluster_range_partitions.eps</a></div>
                  <!-- class="figure" -->
                  <p>(<span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__I2125922">range_values_clause::=</a></span>, <span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__I2127282">table_partition_description::=</a></span>)
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Semantics</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1"><span class="italic">schema</span></p>
                  <p>Specify the schema to contain the cluster. If you omit <span class="italic"><code class="codeph">schema</code></span>, then Oracle Database creates the cluster in your current schema. 
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1"><span class="italic">cluster</span></p>
                  <p>Specify is the name of the cluster to be created. The name must satisfy the requirements listed in <span class="q">"<a href="Database-Object-Names-and-Qualifiers.html#GUID-75337742-67FD-4EC0-985F-741C93D918DA">Database Object Naming Rules</a>"</span>.
                  </p>
                  <p>After you create a cluster, you add tables to it. A cluster can contain a maximum of 32 tables. Object tables and tables containing LOB columns or columns of the <code class="codeph">Any*</code> Oracle-supplied types cannot be part of a cluster. After you create a cluster and add tables to it, the cluster is transparent. You can access clustered tables with SQL statements just as you can access nonclustered tables.
                  </p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-E5298ADE-07A3-4FD2-844A-57114D612490">
                     <p class="notep1">See Also:</p>
                     <p><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6">CREATE TABLE</a> for information on adding tables to a cluster, <span class="q">"<a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2105033">Creating a Cluster: Example</a>"</span>, and <span class="q">"<a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2129354">Adding Tables to a Cluster: Example</a>"</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1"><span class="italic">column</span></p>
                  <p>Specify one or more names of columns in the cluster key. You can specify up to 16 cluster key columns. These columns must correspond in both data type and size to columns in each of the clustered tables, although they need not correspond in name. </p>
                  <p>You cannot specify integrity constraints as part of the definition of a cluster key column. Instead, you can associate integrity constraints with the tables that belong to the cluster. </p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-CD338A8C-92E0-4B64-96B4-19DC546B0778">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2129341">Cluster Keys: Example</a>"</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1"><span class="italic">datatype</span></p>
                  <p>Specify the data type of each cluster key column. </p>
                  <p><span class="bold">Restrictions on Cluster Data Types</span></p>
                  <p>Cluster data types are subject to the following restrictions:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You cannot specify a cluster key column of data type <code class="codeph">LONG</code>, <code class="codeph">LONG</code> <code class="codeph">RAW</code>, <code class="codeph">REF</code>, nested table, varray, <code class="codeph">BLOB</code>, <code class="codeph">CLOB</code>, <code class="codeph">BFILE</code>, the <code class="codeph">Any*</code> Oracle-supplied types, or user-defined object type.
                        </p>
                     </li>
                     <li>
                        <p>You can specify a column of type <code class="codeph">ROWID</code>, but Oracle Database does not guarantee that the values in such columns are valid rowids.
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-15882F2E-7BD6-4C78-9393-39298E66D0A0">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="Data-Types.html#GUID-A3C0D836-BADB-44E5-A5D4-265BA5968483">Data Types</a>"</span> for information on data types
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">COLLATE</p>
                  <p>Use this clause to specify the data-bound collation for character data type columns in the cluster key.</p>
                  <p>For <span class="italic"><code class="codeph">column_collation_name</code></span>, specify the collation as follows:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>When creating an indexed cluster or a sorted hash cluster, you can specify one of the following collations: <code class="codeph">BINARY</code>, <code class="codeph">USING_NLS_COMP</code>, <code class="codeph">USING_NLS_SORT</code>, or <code class="codeph">USING_NLS_SORT_CS</code>.
                        </p>
                     </li>
                     <li>
                        <p>When creating a hash cluster that is not sorted, you can specify any valid named collation or pseudo-collation.</p>
                     </li>
                  </ul>
                  <p>If you omit this clause, then columns in the cluster key inherit the effective schema default collation of the schema containing the cluster. Refer to the <a href="ALTER-SESSION.html#GUID-27186B28-7EFC-4998-B1ED-2B905CC0211B__DEFAULT_COLLATION-39CF7241">DEFAULT_COLLATION</a> clause of <code class="codeph">ALTER</code> <code class="codeph">SESSION</code> for more information on the effective schema default collation.
                  </p>
                  <p>The collations of cluster key columns must match the collations of the corresponding columns in the tables created in the cluster.</p>
                  <p>You can specify the <code class="codeph">COLLATE</code> clause only if the <code class="codeph">COMPATIBLE</code> initialization parameter is set to <code class="codeph">12.2</code> or greater, and the <code class="codeph">MAX_STRING_SIZE</code> initialization parameter is set to <code class="codeph">EXTENDED</code>.
                  </p>
                  <p>To change the collation of a cluster key column, you must recreate the cluster.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">SORT</p>
                  <p><a id="d306090e428" class="indexterm-anchor"></a>The <code class="codeph">SORT</code> keyword is valid only if you are creating a hash cluster. This clause instructs Oracle Database to sort the rows of the cluster on this column after applying the hash function when performing a DML operation. Doing so may improve response time during subsequent queries on the clustered data. See <span class="q">"<a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2143441">HASHKEYS Clause</a>"</span> for information on creating a hash cluster.
                  </p>
                  <p><span class="bold">Restriction on Sorted Hash Clusters</span></p>
                  <p>Row dependency is not supported for sorted hash clusters.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1"><span class="italic">physical_attributes_clause</span></p>
                  <p>The <span class="italic"><code class="codeph">physical_attributes_clause</code></span> lets you specify the storage characteristics of the cluster. Each table in the cluster uses these storage characteristics as well. If you do not specify values for these parameters, then Oracle Database uses the following defaults:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><code class="codeph">PCTFREE</code>: 10
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">PCTUSED</code>: 40
                        </p>
                     </li>
                     <li>
                        <p><code class="codeph">INITRANS</code>: 2 or the default value of the tablespace to contain the cluster, whichever is greater
                        </p>
                        <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-61E79AEE-1D8B-42B5-B38B-485D5D38F35E">
                           <p class="notep1">See Also:</p>
                           <p><span class="italic"><a href="physical_attributes_clause.html#GUID-A15063A9-3237-43D3-B0AE-D01F6E80B393">physical_attributes_clause</a></span> and <span class="italic"><a href="physical_attributes_clause.html#GUID-A15063A9-3237-43D3-B0AE-D01F6E80B393__I1026834">storage_clause</a></span> for a complete description of these clauses
                           </p>
                        </div>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">SIZE</p>
                  <p><a id="d306090e487" class="indexterm-anchor"></a><a id="d306090e491" class="indexterm-anchor"></a>Specify the amount of space in bytes reserved to store all rows with the same cluster key value or the same hash value. This space determines the maximum number of cluster or hash values stored in a data block. If <code class="codeph">SIZE</code> is not a divisor of the data block size, then Oracle Database uses the next largest divisor. If <code class="codeph">SIZE</code> is larger than the data block size, then the database uses the operating system block size, reserving at least one data block for each cluster or hash value. 
                  </p>
                  <p>The database also considers the length of the cluster key when determining how much space to reserve for the rows having a cluster key value. Larger cluster keys require larger sizes. To see the actual size, query the <code class="codeph">KEY_SIZE</code> column of the <code class="codeph">USER_CLUSTERS</code> data dictionary view. (This value does not apply to hash clusters, because hash values are not actually stored in the cluster.)
                  </p>
                  <p>If you omit this parameter, then the database reserves one data block for each cluster key value or hash value.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">TABLESPACE</p>
                  <p><a id="d306090e518" class="indexterm-anchor"></a><a id="d306090e522" class="indexterm-anchor"></a>Specify the tablespace in which the cluster is to be created. 
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">INDEX Clause</p>
                  <p><a id="d306090e531" class="indexterm-anchor"></a><a id="d306090e535" class="indexterm-anchor"></a><a id="d306090e539" class="indexterm-anchor"></a>Specify <code class="codeph">INDEX</code> to create an<span class="bold"> indexed cluster</span>. In an indexed cluster, Oracle Database stores together rows having the same cluster key value. Each distinct cluster key value is stored only once in each data block, regardless of the number of tables and rows in which it occurs. If you specify neither <code class="codeph">INDEX</code> nor <code class="codeph">HASHKEYS</code>, then Oracle Database creates an indexed cluster by default.
                  </p>
                  <p>After you create an indexed cluster, you must create an index on the cluster key before you can issue any data manipulation language (DML) statements against a table in the cluster. This index is called the <span class="bold">cluster index</span>. 
                  </p>
                  <p>You cannot create a cluster index for a hash cluster, and you need not create an index on a hash cluster key. </p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-9E977F02-2559-40B4-8CE5-D6FB02631BA7">
                     <p class="notep1">See Also:</p>
                     <p><a href="CREATE-INDEX.html#GUID-1F89BBC0-825F-4215-AF71-7588E31D8BFE">CREATE INDEX</a> for information on creating a cluster index and <a href="../cncpt/tables-and-table-clusters.html#CNCPT608"><span class="italic">Oracle Database Concepts </span></a>for general information in indexed clusters
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2143441">
                  <p class="subhead1">HASHKEYS Clause</p>
                  <p><a id="d306090e577" class="indexterm-anchor"></a><a id="d306090e581" class="indexterm-anchor"></a><a id="d306090e585" class="indexterm-anchor"></a>Specify the <code class="codeph">HASHKEYS</code> clause to create a <span class="bold">hash cluster</span> and specify the number of hash values for the hash cluster. In a hash cluster, Oracle Database stores together rows that have the same hash key value. The hash value for a row is the value returned by the hash function of the cluster. 
                  </p>
                  <p>Oracle Database rounds up the <code class="codeph">HASHKEYS</code> value to the nearest prime number to obtain the actual number of hash values. The minimum value for this parameter is 2. If you omit both the <code class="codeph">INDEX</code> clause and the <code class="codeph">HASHKEYS</code> parameter, then the database creates an indexed cluster by default.
                  </p>
                  <p>When you create a hash cluster, the database immediately allocates space for the cluster based on the values of the <code class="codeph">SIZE</code> and <code class="codeph">HASHKEYS</code> parameters. 
                  </p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-06713289-8E68-459C-8D30-1920B3DC88E2">
                     <p class="notep1">See Also:</p>
                     <p><a href="../cncpt/tables-and-table-clusters.html#CNCPT609"><span class="italic">Oracle Database Concepts</span></a> for more information on how Oracle Database allocates space for clusters and <span class="q">"<a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2129365">Hash Clusters: Examples</a>"</span></p>
                  </div>
                  <p><span class="bold">SINGLE TABLE</span> <a id="d306090e629" class="indexterm-anchor"></a><a id="d306090e633" class="indexterm-anchor"></a><a id="d306090e637" class="indexterm-anchor"></a></p>
                  <p><code class="codeph">SINGLE</code> <code class="codeph">TABLE</code> indicates that the cluster is a type of hash cluster containing only one table. This clause can provide faster access to rows in the table.
                  </p>
                  <p><span class="bold">Restriction on Single-table Clusters</span></p>
                  <p>Only one table can be present in the cluster at a time. However, you can drop the table and create a different table in the same cluster.</p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-136537C2-6467-490E-844C-7BF80766CF03">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2129381">Single-Table Hash Clusters: Example</a>"</span></p>
                  </div>
                  <p><span class="bold">HASH IS</span> <span class="bold"><span class="italic">expr</span></span></p>
                  <p>Specify an expression to be used as the hash function for the hash cluster. The expression:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Must evaluate to a positive value</p>
                     </li>
                     <li>
                        <p>Must contain at least one column, with referenced columns of any data type as long as the entire expression evaluates to a number of scale 0. For example: <span class="italic"><code class="codeph">number_column</code></span> * <code class="codeph">LENGTH</code>(<span class="italic"><code class="codeph">varchar2_column</code></span>)
                        </p>
                     </li>
                     <li>
                        <p>Cannot reference user-defined PL/SQL functions</p>
                     </li>
                     <li>
                        <p>Cannot reference the pseudocolumns <code class="codeph">LEVEL</code> or <code class="codeph">ROWNUM</code></p>
                     </li>
                     <li>
                        <p>Cannot reference the user-related functions <code class="codeph">USERENV</code>, <code class="codeph">UID</code>, or <code class="codeph">USER</code> or the datetime functions <code class="codeph">CURRENT_DATE</code>, <code class="codeph">CURRENT_TIMESTAMP</code>, <code class="codeph">DBTIMEZONE</code>, <code class="codeph">EXTRACT</code> (datetime), <code class="codeph">FROM_TZ</code>, <code class="codeph">LOCALTIMESTAMP</code>, <code class="codeph">NUMTODSINTERVAL</code>, <code class="codeph">NUMTOYMINTERVAL</code>, <code class="codeph">SESSIONTIMEZONE</code>, <code class="codeph">SYSDATE</code>, <code class="codeph">SYSTIMESTAMP</code>, <code class="codeph">TO_DSINTERVAL</code>, <code class="codeph">TO_TIMESTAMP</code>, <code class="codeph">TO_DATE</code>, <code class="codeph">TO_TIMESTAMP_TZ</code>, <code class="codeph">TO_YMINTERVAL</code>, and <code class="codeph">TZ_OFFSET</code>.
                        </p>
                     </li>
                     <li>
                        <p>Cannot evaluate to a constant</p>
                     </li>
                     <li>
                        <p>Cannot be a scalar subquery expression</p>
                     </li>
                     <li>
                        <p>Cannot contain columns qualified with a schema or object name (other than the cluster name)</p>
                     </li>
                  </ul>
                  <p>If you omit the <code class="codeph">HASH</code> <code class="codeph">IS</code> clause, then Oracle Database uses an internal hash function for the hash cluster.
                  </p>
                  <p>For information on existing hash functions, query the <code class="codeph">USER_</code>, <code class="codeph">ALL_</code>, and <code class="codeph">DBA_CLUSTER_HASH_EXPRESSIONS</code> data dictionary tables.
                  </p>
                  <p>The cluster key of a hash column can have one or more columns of any data type. Hash clusters with composite cluster keys or cluster keys made up of noninteger columns must use the internal hash function. </p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-3185CD8C-2D78-488D-B30C-4AEF1764E250">
                     <p class="notep1">See Also:</p>
                     <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/sqlrf&amp;id=REFRN002"><span class="italic">Oracle Database Reference</span></a> for information on the data dictionary views
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1"><span class="italic">parallel_clause</span></p>
                  <p>The <span class="italic"><code class="codeph">parallel_clause</code></span> lets you parallelize the creation of the cluster. 
                  </p>
                  <p>For complete information on this clause, refer to <span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__I2159323">parallel_clause</a></span> in the documentation on <code class="codeph">CREATE</code> <code class="codeph">TABLE</code>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">NOROWDEPENDENCIES | ROWDEPENDENCIES</p>
                  <p><a id="d306090e828" class="indexterm-anchor"></a><a id="d306090e832" class="indexterm-anchor"></a><a id="d306090e836" class="indexterm-anchor"></a><a id="d306090e838" class="indexterm-anchor"></a>This clause has the same behavior for a cluster that it has for a table. Refer to <span class="q">"<a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__CJAEEGDA">NOROWDEPENDENCIES | ROWDEPENDENCIES</a>"</span> in <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> for information.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2177270">
                  <p class="subhead1">CACHE | NOCACHE</p>
                  <p><span class="bold">CACHE</span><a id="d306090e859" class="indexterm-anchor"></a><a id="d306090e863" class="indexterm-anchor"></a><a id="d306090e867" class="indexterm-anchor"></a></p>
                  <p>Specify <code class="codeph">CACHE</code> if you want the blocks retrieved for this cluster to be placed at the most recently used end of the least recently used (LRU) list in the buffer cache when a full table scan is performed. This clause is useful for small lookup tables. 
                  </p>
                  <p><span class="bold">NOCACHE</span></p>
                  <p>Specify <code class="codeph">NOCACHE</code> if you want the blocks retrieved for this cluster to be placed at the least recently used end of the LRU list in the buffer cache when a full table scan is performed. This is the default behavior.
                  </p>
                  <p><code class="codeph">NOCACHE</code> has no effect on clusters for which you specify <code class="codeph">KEEP</code> in the <span class="italic"><code class="codeph">storage_clause</code></span>.
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__CACGBDJH">
                  <p class="subhead1"><span class="italic">cluster_range_partitions</span></p>
                  <p><a id="d306090e901" class="indexterm-anchor"></a>Specify the <span class="italic"><code class="codeph">cluster_range_partitions</code></span> clause to create a range-partitioned hash cluster. If you specify this clause, then you must also specify the <code class="codeph">HASHKEYS</code> clause.
                  </p>
                  <p>Use the <span class="italic"><code class="codeph">cluster_range_partitions</code></span> clause to partition the cluster on ranges of values from the column list. When you add a table to a range-partitioned hash cluster, it is automatically partitioned on the same columns, with the same number of partitions, and on the same partition bounds as the cluster. Oracle Database assigns system-generated names to the table partitions.
                  </p>
                  <p>The <span class="italic"><code class="codeph">cluster_range_partitions</code></span> clause has the same semantics as the <span class="italic"><code class="codeph">range_partitions</code></span> clause of <code class="codeph">CREATE</code> <code class="codeph">TABLE</code>, except that here you cannot specify the <code class="codeph">INTERVAL</code> clause. For complete information, refer to <span class="italic"><a href="CREATE-TABLE.html#GUID-F9CE0CC3-13AE-4744-A43C-EAC7A71AAAB6__BABJDACD">range_partitions</a></span> in the documentation on <code class="codeph">CREATE</code> <code class="codeph">TABLE</code>.
                  </p>
                  <div class="infoboxnotealso" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__GUID-E399CE66-1490-494D-806A-204B0736EF1D">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="CREATE-CLUSTER.html#GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__CACCJEAG">Range-Partitioned Hash Clusters: Example</a>"</span></p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2105031">
                  <p class="subhead1">Examples</p>
                  <p id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2105033"><span class="bold">Creating a Cluster: Example</span></p>
                  <p>The following statement creates a cluster named <code class="codeph">personnel</code> with the cluster key column <code class="codeph">department</code>, a cluster size of 512 bytes, and storage parameter values:
                  </p><pre class="oac_no_warn" dir="ltr">CREATE CLUSTER personnel
   (department NUMBER(4))
SIZE 512 
STORAGE (initial 100K next 50K);</pre><p id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2129341"><span class="bold">Cluster Keys: Example</span></p>
                  <p>The following statement creates the cluster index on the cluster key of <code class="codeph">personnel</code>:
                  </p><pre class="oac_no_warn" dir="ltr">CREATE INDEX idx_personnel ON CLUSTER personnel;
</pre><p>After creating the cluster index, you can add tables to the index and perform DML operations on those tables. </p>
                  <p id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2129354"><span class="bold">Adding Tables to a Cluster: Example</span></p>
                  <p>The following statements create some departmental tables from the sample <code class="codeph">hr.employees</code> table and add them to the personnel cluster created in the earlier example:
                  </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE dept_10
   CLUSTER personnel (department_id)
   AS SELECT * FROM employees WHERE department_id = 10;

CREATE TABLE dept_20
   CLUSTER personnel (department_id)
   AS SELECT * FROM employees WHERE department_id = 20;</pre><p id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2129365"><span class="bold">Hash Clusters: Examples</span></p>
                  <p>The following statement creates a hash cluster named <code class="codeph">language</code> with the cluster key column <code class="codeph">cust_language</code>, a maximum of 10 hash key values, each of which is allocated 512 bytes, and storage parameter values:
                  </p><pre class="oac_no_warn" dir="ltr">CREATE CLUSTER language (cust_language VARCHAR2(3))
   SIZE 512 HASHKEYS 10
   STORAGE (INITIAL 100k next 50k);
</pre><p>Because the preceding statement omits the <code class="codeph">HASH</code> <code class="codeph">IS</code> clause, Oracle Database uses the internal hash function for the cluster. 
                  </p>
                  <p>The following statement creates a hash cluster named <code class="codeph">address</code> with the cluster key made up of the columns <code class="codeph">postal_code</code> and <code class="codeph">country_id</code>, and uses a SQL expression containing these columns for the hash function:
                  </p><pre class="oac_no_warn" dir="ltr">CREATE CLUSTER address
   (postal_code NUMBER, country_id CHAR(2))
   HASHKEYS 20
   HASH IS MOD(postal_code + country_id, 101);</pre><p id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__I2129381"><span class="bold">Single-Table Hash Clusters: Example</span></p>
                  <p>The following statement creates a single-table hash cluster named <code class="codeph">cust_orders</code> with the cluster key <code class="codeph">customer_id</code> and a maximum of 100 hash key values, each of which is allocated 512 bytes:
                  </p><pre class="oac_no_warn" dir="ltr">CREATE CLUSTER cust_orders (customer_id NUMBER(6))
   SIZE 512 SINGLE TABLE HASHKEYS 100;</pre><p id="GUID-4DBC701F-AFC3-486D-AA32-B5CB1D6946F7__CACCJEAG"><span class="bold">Range-Partitioned Hash Clusters: Example</span></p>
                  <p>The following statement creates a range-partitioned hash cluster named <code class="codeph">sales</code> with five range partitions based on the amount sold. The cluster key is made up of the columns <code class="codeph">amount_sold</code> and <code class="codeph">prod_id</code>. The cluster uses the hash function <code class="codeph">(amount_sold * 10 + prod_id)</code> and has a maximum of 100000 hash key values, each of which is allocated 300 bytes.
                  </p><pre class="oac_no_warn" dir="ltr">CREATE CLUSTER sales (amount_sold NUMBER, prod_id NUMBER)
  HASHKEYS 100000
  HASH IS (amount_sold * 10 + prod_id)
  SIZE 300
  TABLESPACE example
  PARTITION BY RANGE (amount_sold)
    (PARTITION p1 VALUES LESS THAN (2001),
     PARTITION p2 VALUES LESS THAN (4001),
     PARTITION p3 VALUES LESS THAN (6001),
     PARTITION p4 VALUES LESS THAN (8001),
     PARTITION p5 VALUES LESS THAN (MAXVALUE));</pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>