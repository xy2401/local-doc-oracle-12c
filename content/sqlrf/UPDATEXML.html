<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>UPDATEXML</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="SQL Language Reference ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="SQL Language Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 17.8.1">
      <link rel="alternate" href="sql-language-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2017-11-29T11:56:42-08:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2017">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E83703-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="UNISTR.html" title="Previous" type="text/html">
      <link rel="next" href="UPPER.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">
            {
                "primary":
                {
                    "category":{
                      "short_name":"database",
                      "element_name":"Database",
                      "display_in_url":true
                    },
                    "suite":{
                      "short_name":"oracle",
                      "element_name":"Oracle",
                      "display_in_url":true
                    },
                    "product_group":{
                      "short_name":"not-applicable",
                      "element_name":"Not applicable",
                      "display_in_url":false
                    },
                    "product":{
                      "short_name":"oracle-database",
                      "element_name":"Oracle Database",
                      "display_in_url":true
                    },
                    "release":{
                      "short_name":"12.2",
                      "element_name":"Release 12.2",
                      "display_in_url":true
                    },
                    "platform":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    },
                    "component":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    }
                }
            }
            </script>
      
    <meta name="dcterms.title" content="SQL Language Reference">
    <meta name="dcterms.isVersionOf" content="SQLRF">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="UNISTR.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="UPPER.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">SQL Language Reference </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="Functions.html" property="item" typeof="WebPage"><span property="name">Functions</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">UPDATEXML </li>
            </ol>
            <a id="GUID-55FE0EE5-6148-4934-947E-B9693AC32EF1" name="GUID-55FE0EE5-6148-4934-947E-B9693AC32EF1"></a><a id="SQLRF51960"></a><a id="SQLRF51961"></a><a id="SQLRF51962"></a><a id="SQLRF06172"></a>
            
            <h2 id="SQLRF-GUID-55FE0EE5-6148-4934-947E-B9693AC32EF1" class="sect2"><span class="enumeration_section">7.262 </span>UPDATEXML 
            </h2>
         </header>
         <div class="ind">
            <div>
               <div class="section">
                  <div class="infoboxnote" id="GUID-55FE0EE5-6148-4934-947E-B9693AC32EF1__GUID-C4D5EBE3-578A-4FAD-8558-1161CCE44D19">
                     <p class="notep1">Note:</p>
                     <p>The <code class="codeph">UPDATEXML</code> function is deprecated. It is still supported for backward compatibility. However, Oracle recommends that you use XQuery Update instead. See <a href="../adxdb/xquery-and-XML-DB.html#ADXDB1700"><span class="italic">Oracle XML DB Developer's Guide</span></a> for more information.
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Syntax</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <div class="figure" id="GUID-55FE0EE5-6148-4934-947E-B9693AC32EF1__GUID-81997733-3565-44C0-9AAF-A03A47E564E2"><img src="img/updatexml.gif" alt="Description of updatexml.eps follows" title="Description of updatexml.eps follows" longdesc="img_text/updatexml.html"><br><a href="img_text/updatexml.html">Description of the illustration updatexml.eps</a></div>
                  <!-- class="figure" -->
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Purpose</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p><code class="codeph">UPDATEXML</code> takes as arguments an <code class="codeph">XMLType</code> instance and an XPath-value pair and returns an <code class="codeph">XMLType</code> instance with the updated value. If <span class="italic"><code class="codeph">XPath_string</code></span> is an XML element, then the corresponding <span class="italic"><code class="codeph">value_expr</code></span> must be an <code class="codeph">XMLType</code> instance. If <span class="italic"><code class="codeph">XPath_string</code></span> is an attribute or text node, then the <span class="italic"><code class="codeph">value_expr</code></span> can be any scalar data type. You can specify an absolute <span class="italic"><code class="codeph">XPath_string</code></span> with an initial slash or a relative <span class="italic"><code class="codeph">XPath_string</code></span> by omitting the initial slash. If you omit the initial slash, then the context of the relative path defaults to the root node. 
                  </p>
                  <p>The data types of the target of each <span class="italic"><code class="codeph">XPath_string</code></span> and its corresponding <span class="italic"><code class="codeph">value_expr</code></span> must match. The optional <span class="italic"><code class="codeph">namespace_string</code></span> must resolve to a <code class="codeph">VARCHAR2</code> value that specifies a default mapping or namespace mapping for prefixes, which Oracle Database uses when evaluating the XPath expression(s).
                  </p>
                  <p>If you update an XML element to null, then Oracle removes the attributes and children of the element, and the element becomes empty. If you update the text node of an element to null, Oracle removes the text value of the element, and the element itself remains but is empty.</p>
                  <p>In most cases, this function materializes an XML document in memory and updates the value. However, <code class="codeph">UPDATEXML</code> is optimized for <code class="codeph">UPDATE</code> statements on object-relational columns so that the function updates the value directly in the column. This optimization requires the following conditions:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p> The <span class="italic"><code class="codeph">XMLType_instance</code></span> must be the same as the column in the <code class="codeph">UPDATE</code> ... <code class="codeph">SET</code> clause.
                        </p>
                     </li>
                     <li>
                        <p>The <span class="italic"><code class="codeph">XPath_string</code></span> must resolve to scalar content.
                        </p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Examples</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p>The following example updates to 4 the number of docks in the San Francisco warehouse in the sample schema <code class="codeph">OE</code>, which has a <code class="codeph">warehouse_spec</code> column of type <code class="codeph">XMLType</code>:
                  </p><pre class="oac_no_warn" dir="ltr">SELECT warehouse_name,
   EXTRACT(warehouse_spec, '/Warehouse/Docks')
   "Number of Docks"
   FROM warehouses 
   WHERE warehouse_name = 'San Francisco';

WAREHOUSE_NAME       Number of Docks
-------------------- --------------------
San Francisco        <span class="bold">&lt;Docks&gt;1&lt;/Docks&gt;</span>

UPDATE warehouses SET warehouse_spec =
   UPDATEXML(warehouse_spec,
   '/Warehouse/Docks/text()',4)
   WHERE warehouse_name = 'San Francisco';

1 row updated.

SELECT warehouse_name,
   EXTRACT(warehouse_spec, '/Warehouse/Docks')
   "Number of Docks"
   FROM warehouses 
   WHERE warehouse_name = 'San Francisco';

WAREHOUSE_NAME       Number of Docks
-------------------- --------------------
San Francisco        <span class="bold">&lt;Docks&gt;4&lt;/Docks&gt;</span></pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   </body>
</html>