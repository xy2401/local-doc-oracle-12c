<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Use the tfactl diagcollect command to request a collection.">
      <meta name="description" content="Use the tfactl diagcollect command to request a collection.">
      <title>Running On-Demand Default Collections</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="User’s Guide">
      <meta property="og:description" content="Use the tfactl diagcollect command to request a collection.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="User’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 17.8.1">
      <link rel="alternate" href="autonomous-health-framework-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2017-10-11T15:53:32-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2016, 2017">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E85790-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="tfa-manually-collecting-diag-data.html" title="Previous" type="text/html">
      <link rel="next" href="running-on-demand-srdc-collections.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">
            {
                "primary":
                {
                    "category":{
                      "short_name":"database",
                      "element_name":"Database",
                      "display_in_url":true
                    },
                    "suite":{
                      "short_name":"oracle",
                      "element_name":"Oracle",
                      "display_in_url":true
                    },
                    "product_group":{
                      "short_name":"not-applicable",
                      "element_name":"Not applicable",
                      "display_in_url":false
                    },
                    "product":{
                      "short_name":"oracle-database",
                      "element_name":"Oracle Database",
                      "display_in_url":true
                    },
                    "release":{
                      "short_name":"12.2",
                      "element_name":"Release 12.2",
                      "display_in_url":true
                    },
                    "platform":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    },
                    "component":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    }
                }
            }
            </script>
      
    <meta name="dcterms.title" content="Autonomous Health Framework User’s Guide">
    <meta name="dcterms.isVersionOf" content="ATNMS">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="tfa-manually-collecting-diag-data.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="running-on-demand-srdc-collections.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">User’s Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="purpose-of-oracle-trace-file-analyzer-collector.html" property="item" typeof="WebPage"><span property="name">Collecting Diagnostic Data and Triaging, Diagnosing, and Resolving Issues</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="tfa-manually-collecting-diag-data.html" property="item" typeof="WebPage"><span property="name">Manually Collecting Diagnostic Data</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Running On-Demand Default Collections</li>
            </ol>
            <a id="GUID-DDA8122A-289C-4F4E-92B0-24BD51765EB2" name="GUID-DDA8122A-289C-4F4E-92B0-24BD51765EB2"></a>
            
            <h2 id="ATNMS-GUID-DDA8122A-289C-4F4E-92B0-24BD51765EB2" class="sect2"><span class="enumeration_section">4.5.1 </span>Running On-Demand Default Collections
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Use the <code class="codeph">tfactl diagcollect</code> command to request a collection.
               </p>
               <div class="section">
                  <p>Oracle Trace File Analyzer stores all collections in the repository directory of the Oracle Trace File Analyzer installation.</p>
                  <p>The standard time period used for the default collections is the past 12 hours. However, you can adjust to any other time period.</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">To run on-demand default collections:</p>
               </div>
               <!-- class="section" -->
               <ol>
                  <li class="stepexpand"><span>To request default collection:</span><div>
                        <div class="p"><pre class="pre codeblock"><code>tfactl diagcollect</code></pre></div>
                        <div class="p">For example:<pre class="pre codeblock"><code>$ tfactl diagcollect

Collecting data for the last 12 hours for all components...
Collecting data for all nodes

Collection Id : 20160616115923myserver69

Detailed Logging at : 
/u01/app/tfa/repository/collection_Thu_Jun_16_11_59_23_PDT_2016_node_all/diagcollect_20160616115923_myserver69.log
2016/06/16 11:59:27 PDT : Collection Name : 
tfa_Thu_Jun_16_11_59_23_PDT_2016.zip
2016/06/16 11:59:28 PDT : Collecting diagnostics from hosts : 
[myserver70, myserver71, myserver69]
2016/06/16 11:59:28 PDT : Scanning of files for Collection in progress...
2016/06/16 11:59:28 PDT : Collecting additional diagnostic information...
2016/06/16 11:59:33 PDT : Getting list of files satisfying time range
[06/15/2016 23:59:27 PDT, 06/16/2016 11:59:33 PDT]
2016/06/16 11:59:37 PDT : Collecting ADR incident files...
2016/06/16 12:00:32 PDT : Completed collection of additional diagnostic information...
2016/06/16 12:00:39 PDT : Completed Local Collection
2016/06/16 12:00:40 PDT : Remote Collection in Progress...
.--------------------------------------.
|          Collection Summary          |
+------------+-----------+------+------+
| Host       | Status    | Size | Time |
+------------+-----------+------+------+
| myserver71 | Completed | 15MB |  64s |
| myserver70 | Completed | 14MB |  67s |
| myserver69 | Completed | 14MB |  71s |
'------------+-----------+------+------'

Logs are being collected to: 
/u01/app/tfa/repository/collection_Thu_Jun_16_11_59_23_PDT_2016_node_all
/u01/app/tfa/repository/collection_Thu_Jun_16_11_59_23_PDT_2016_node_all/myserver71.tfa_Thu_Jun_16_11_59_23_PDT_2016.zip
/u01/app/tfa/repository/collection_Thu_Jun_16_11_59_23_PDT_2016_node_all/myserver69.tfa_Thu_Jun_16_11_59_23_PDT_2016.zip
/u01/app/tfa/repository/collection_Thu_Jun_16_11_59_23_PDT_2016_node_all/myserver70.tfa_Thu_Jun_16_11_59_23_PDT_2016.zip
</code></pre></div>
                     </div>
                  </li>
               </ol>
            </div>
            <div>
               <p><strong>Topics:</strong></p>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="running-on-demand-default-collections.html#GUID-73688E21-7C31-4C5A-A2E5-2F4E1D9BF587">Adjusting the Time Period for a Collection</a><br>By default, <code class="codeph">diagcollect</code> trims and collects all important log files, from all nodes, for all components, where the file has been updated in the past 12 hours.
                  </li>
               </ul>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="running-diagnostic-collection-commands.html#GUID-4A06751C-9081-4158-88CB-EFBC77A797A0" title="Use the tfactl diagcollect command to perform on-demand diagnostic collection.">tfactl diagcollect</a></li>
                     <li><a href="tfa-on-demand-collections.html#GUID-5B793975-C8BE-4C96-907B-96AF073F1C76" title="Use Oracle Trace File Analyzer Collector to request an on-demand collection if you have determined a problem has occurred, and you are not able to resolve.">Oracle Trace File Analyzer Collector On-Demand Diagnostic Collections</a></li>
                  </ul>
               </div>
            </div>
            
            <div class="sect2"><a id="GUID-73688E21-7C31-4C5A-A2E5-2F4E1D9BF587" name="GUID-73688E21-7C31-4C5A-A2E5-2F4E1D9BF587"></a><h3 id="ATNMS-GUID-73688E21-7C31-4C5A-A2E5-2F4E1D9BF587" class="sect3"><span class="enumeration_section">4.5.1.1 </span>Adjusting the Time Period for a Collection
               </h3>
               <div>
                  <p>By default, <code class="codeph">diagcollect</code> trims and collects all important log files, from all nodes, for all components, where the file has been updated in the past 12 hours.
                  </p>
                  <div class="section">
                     <p>Narrow down the problem further and collect the minimal possible data.</p>
                     <p>There are four different ways of specifying a time period for the collection. </p>
                     <p>Use whichever is most appropriate in your situation based on what you know about when the symptoms of the problem occurred and any anything relevant that might have contributed to it.</p>
                     <div class="p">
                        <div class="tblformal" id="GUID-73688E21-7C31-4C5A-A2E5-2F4E1D9BF587__GUID-FAA6B9F7-6E1C-4D2E-87C9-6B6A368FB419">
                           <p class="titleintable">Table 4-2 Adjusting the Time Period for a Collection</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Adjusting the Time Period for a Collection" summary="This table lists and describes the command to adjust the time period for a collection." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d19453e107">Command</th>
                                    <th align="left" valign="bottom" width="20%" id="d19453e109">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d19453e113" headers="d19453e107 ">
                                       <p><code class="codeph">-since <span class="variable">n</span>h|d</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d19453e113 d19453e109 ">
                                       <p>Collect since the previous n hours or days.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d19453e124" headers="d19453e107 ">
                                       <p><code class="codeph">-from “yyyy-mm-dd”</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d19453e124 d19453e109 ">
                                       <p>Collect from the date and optionally time specified.</p>
                                       <div class="p">Valid date / time formats:
                                          <ul style="list-style-type: disc;">
                                             <li>
                                                <p><code class="codeph">"Mon/dd/yyyy hh:mm:ss"</code></p>
                                             </li>
                                             <li>
                                                <p><code class="codeph">"yyyy-mm-dd hh:mm:ss"</code></p>
                                             </li>
                                             <li>
                                                <p><code class="codeph">"yyyy-mm-ddThh:mm:ss"</code></p>
                                             </li>
                                             <li>
                                                <p><code class="codeph">"yyyy-mm-dd"</code></p>
                                             </li>
                                          </ul>
                                       </div>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d19453e151" headers="d19453e107 ">
                                       <p><code class="codeph">-to “yyyy-mm-dd”</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d19453e151 d19453e109 ">
                                       <p>Collect to the date and optionally time specified.</p>
                                       <div class="p">Valid date / time formats:
                                          <ul style="list-style-type: disc;">
                                             <li>
                                                <p><code class="codeph">"Mon/dd/yyyy hh:mm:ss"</code></p>
                                             </li>
                                             <li>
                                                <p><code class="codeph">"yyyy-mm-dd hh:mm:ss"</code></p>
                                             </li>
                                             <li>
                                                <p><code class="codeph">"yyyy-mm-ddThh:mm:ss"</code></p>
                                             </li>
                                             <li>
                                                <p><code class="codeph">"yyyy-mm-dd"</code></p>
                                             </li>
                                          </ul>
                                       </div>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d19453e178" headers="d19453e107 ">
                                       <p><code class="codeph">-for “yyyy-mm-dd”</code></p>
                                    </td>
                                    <td align="left" valign="top" width="20%" headers="d19453e178 d19453e109 ">
                                       <p>Collect for the specified date.</p>
                                       <div class="p">Valid date / time formats:
                                          <ul style="list-style-type: disc;">
                                             <li>
                                                <p><code class="codeph">"Mon/dd/yyyy"</code></p>
                                             </li>
                                             <li>
                                                <p><code class="codeph">"yyyy-mm-dd"</code></p>
                                             </li>
                                          </ul>
                                       </div>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2">To adjust the time period for a collection:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>To adjust the time period:</span><div>
                           <div class="p"><pre class="pre codeblock"><code>tfactl diagcollect &#x2013;since <span class="variable">n</span>h|d</code></pre></div>
                           <p>For example:</p>
                           <div class="p">To do a collection covering the past 2 hours:<pre class="pre codeblock"><code>$ tfactl diagcollect &#x2013;since 2h</code></pre></div>
                           <div class="p">To do a collection covering the past 3 days:<pre class="pre codeblock"><code>$ tfactl diagcollect &#x2013;since 3d</code></pre></div>
                           <div class="p">To do a collection for a specific date:<pre class="pre codeblock"><code>$ tfactl diagcollect -for "2016-08-15"</code></pre></div>
                           <div class="p">To do a collection from one particular date to another:<pre class="pre codeblock"><code>$ tfactl diagcollect -from "2016-08-15" -to "2016-08-17"</code></pre></div>
                        </div>
                     </li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="running-diagnostic-collection-commands.html#GUID-4A06751C-9081-4158-88CB-EFBC77A797A0" title="Use the tfactl diagcollect command to perform on-demand diagnostic collection.">tfactl diagcollect</a></li>
                     </ul>
                  </div>
               </div>
               
            </div>
         </div>
      </article>
   </body>
</html>