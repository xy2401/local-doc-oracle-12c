<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB).">
      <meta name="description" content="You can use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB).">
      <title>Using Oracle Resource Manager for PDBs with SQL*Plus</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Administrator’s Guide ">
      <meta property="og:description" content="You can use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB).">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Administrator’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-administrators-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-03-29T07:20:19-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E85760-06">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html" title="Previous" type="text/html">
      <link rel="next" href="using-oracle-resource-manager-for-pdbs-with-cloud-control.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"12.2","element_name":"Release 12.2","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Administrator's Guide">
    <meta name="dcterms.isVersionOf" content="ADMIN">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="viewing-information-about-cdbs-and-pdbs-with-sql-plus.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="using-oracle-resource-manager-for-pdbs-with-cloud-control.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Administrator’s Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="managing-a-multitenant-environment.html" property="item" typeof="WebPage"><span property="name">    Managing a Multitenant Environment</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Using Oracle Resource Manager for PDBs with SQL*Plus</li>
            </ol>
            <a id="GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" name="GUID-2708E76D-E18B-4586-920A-BD4B904AE14D"></a><a id="ADMIN13774"></a>
            
            <h2 id="ADMIN-GUID-2708E76D-E18B-4586-920A-BD4B904AE14D" class="sect2"><span class="enumeration_chapter">46 </span> Using Oracle Resource Manager for PDBs with SQL*Plus
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can use PL/SQL package procedures to administer Oracle Resource Manager (Resource Manager) to allocate resources to pluggable databases (PDBs) in a multitenant container database (CDB).</p>
               <p>Before using Resource Manager for PDBs, meet the following requirements:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p>You understand how to configure and manage a CDB. See <span class="q">"<a href="managing-a-multitenant-environment.html#GUID-93F1E584-D309-4301-82E0-AD0E60D4977C" title="You can manage a multitenant environment."> Managing a Multitenant Environment</a>"</span> for information.
                     </p>
                  </li>
                  <li>
                     <p>You understand how to use Oracle Resource Manager to allocate resources in a non-CDB. See <span class="q">"<a href="managing-resources-with-oracle-database-resource-manager.html#GUID-2BEF5482-CF97-4A85-BD90-9195E41E74EF" title="Oracle Database Resource Manager (Resource Manager) enables you to manage resource allocation for a database.">Managing Resources with Oracle Database Resource Manager</a>"</span> for information.
                     </p>
                  </li>
               </ul>
               <div class="infoboxnote" id="GUID-2708E76D-E18B-4586-920A-BD4B904AE14D__GUID-141F2F04-BAAB-4972-91E2-BD4940193274">
                  <p class="notep1">Note:</p>
                  <p></p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>You can complete the tasks in this chapter using SQL*Plus or Oracle SQL Developer.</p>
                     </li>
                     <li>
                        <p>You can also administer the Resource Manager with the graphical user interface of Oracle Enterprise Manager Cloud Control (Cloud Control). For instructions about administering Resource Manager in a CDB with Cloud Control, see <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-cloud-control.html#GUID-D9A5EBE6-6E45-463A-92E0-B9FEBAD50A54" title="You can use Oracle Resource Manage for a multitenant environment with Oracle Enterprise Manager Cloud Control."> Using Oracle Resource Manager for PDBs with Cloud Control</a>"</span> and the Cloud Control online help.
                        </p>
                     </li>
                     <li>
                        <p>For simplicity, this chapter refers to PDBs, application roots, and application PDBs as “PDBs.”</p> 
                     </li>
                  </ul>
               </div>
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657">About Using Oracle Resource Manager with CDBs and PDBs</a><br>You can create CDB resource plans and PDB resource plans to manage resources for CDBs and PDBs.
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B">Prerequisites for Using Resource Manager with a CDB</a><br>You must meet prerequisites before using Resource Manager with a CDB.
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F1DD75FE-18CC-46A9-B19B-68F7833A2594">Creating a CDB Resource Plan for Individual PDBs</a><br>You use the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package to create a CDB resource plan for individual PDBs and define the directives for the plan.
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-78438BD4-B3F3-41A0-AC56-6E326862EA80">Creating a CDB Resource Plan with PDB Performance Profiles</a><br>You use the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package to create a CDB resource plan for PDB performance profiles and define the directives for the plan. Each PDB that uses a profile adopts the CDB resource plan for that profile.
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-53C544B1-8767-4E7C-B57B-71CD63B98201">Enabling and Disabling a CDB Resource Plan</a><br>A CDB resource plan manages the workloads for multiple PDBs that are contending for system and CDB resources. You can enable or disable a CDB resource plan.
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-2A0C60A0-C558-4837-B97C-A8380FB19E3A">Creating a PDB Resource Plan</a><br>You create a PDB resource plan in the same way that you create a resource plan for a non-CDB. You use procedures in the <code class="codeph">DBMS_RESOURCE_MANAGER</code> PL/SQL package to create the plan.
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B03DAA59-E508-4714-9246-C9F707A5FB61">Enabling and Disabling a PDB Resource Plan</a><br>A PDB resource plan manages the workloads within a single PDB. You can enable or disable a PDB resource plan.
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822">Maintaining Plans and Directives in a CDB</a><br>This section provides instructions for maintaining CDB resource plans, the default directive for PDBs, the autotask directive, and PDB resource plans. You perform maintenance tasks using the <code class="codeph">DBMS_RESOURCE_MANAGER</code> PL/SQL package.
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172">Viewing Information About Plans and Directives in a CDB</a><br>You can view information about CDB resource plans, CDB resource plan directives, and predefined resource plans in a CDB.
                  </li>
                  <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A">Monitoring PDBs Managed by Oracle Database Resource Manager</a><br>A set of dynamic performance views enables you to monitor the results of your Oracle Database Resource Manager settings for PDBs.
                  </li>
               </ul>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="overview-of-managing-a-multitenant-environment.html#GUID-C1EEE559-3E2B-42A4-B0A0-94C82769ECCB" title="You can use various tools to configure and administer a multitenant environment.">Tools for a Multitenant Environment</a></li>
                     <li><a href="overview-of-managing-a-multitenant-environment.html#GUID-127F2E91-351D-49CE-8254-380C4E33813D" title="An application container is an optional component of a CDB that consists of an application root and all of the application PDBs associated with it. An application container stores data for one or more applications and shares application metadata and common data.">Application Containers</a></li>
                  </ul>
               </div>
            </div>
            <div class="sect2"><a id="GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" name="GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657"></a><h3 id="ADMIN-GUID-9D3899E5-4C1D-435C-A45D-C6C2C815E657" class="sect3"><span class="enumeration_section">46.1 </span>About Using Oracle Resource Manager with CDBs and PDBs
               </h3>
               <p>You can create CDB resource plans and PDB resource plans to manage resources for CDBs and PDBs.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6">About Managing Resources at the CDB Level and PDB Level</a><br>In a non-CDB, you can use Resource Manager to manage multiple workloads that are contending for system and database resources. However, in a CDB, you can have multiple workloads within multiple PDBs competing for system and CDB resources.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F8A64114-9440-43DD-8788-79B3B9E68BE1">What Solutions Does Resource Manager Provide for a CDB?</a><br>Resource Manager can provide more efficient use of resources for a CDB.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D">CDB Resource Plans</a><br>In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17">PDB Resource Plans</a><br>A CDB resource plan determines the amount of resources allocated to each PDB. A PDB resource plan determines how the resources allocated to a specific PDB are allocated to consumer groups within that PDB. 
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-4D6AC64F-5871-4D1F-815B-1035D90A8BD2">Background and Administrative Tasks and Consumer Groups</a><br>In a CDB, background and administrative tasks are mapped to the Resource Manager consumer groups that run them optimally.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252">Initialization Parameters That Control Memory for PDBs</a><br>Several initialization parameters can control the memory usage of a PDB.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2">Initialization Parameters That Limit I/O for PDBs</a><br>You can set the <code class="codeph">MAX_IOPS</code> initialization parameter and the <code class="codeph">MAX_MBPS</code> initialization parameter to limit the disk I/O generated by a PDB.
                     </li>
                  </ul>
               </div>
               <a id="ADMIN13775"></a><div class="props_rev_3"><a id="GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6" name="GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6"></a><h4 id="ADMIN-GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6" class="sect4"><span class="enumeration_section">46.1.1 </span>About Managing Resources at the CDB Level and PDB Level
                  </h4>
                  <div>
                     <p>In a non-CDB, you can use Resource Manager to manage multiple workloads that are contending for system and database resources. However, in a CDB, you can have multiple workloads within multiple PDBs competing for system and CDB resources.</p>
                     <p>In a CDB, Resource Manager can manage resources on two basic levels:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">CDB level -</span> Resource Manager can manage the workloads for multiple PDBs that are contending for system and CDB resources. You can specify how resources are allocated to PDBs, and you can limit the resource utilization of specific PDBs.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">PDB level -</span> Resource Manager can manage the workloads within each PDB.
                           </p>
                        </li>
                     </ul>
                     <p>Resource Manager allocates the resources in two steps:</p>
                     <ol>
                        <li id="GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6__CACEABFF">
                           <p>It allocates a portion of the system's resources to each PDB.</p>
                        </li>
                        <li>
                           <p>In a specific PDB, it allocates a portion of system resources obtained in Step <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6__CACEABFF">1</a> to each session connected to the PDB.
                           </p>
                        </li>
                     </ol>
                     <div class="infoboxnote" id="GUID-B9B8468F-F0CC-40EF-9407-A43E36A0D1E6__GUID-FA5AA2CE-D6E7-4215-A904-637065B50156">
                        <p class="notep1">Note:</p>
                        <p>All activity in the root is automatically managed by Resource Manager.</p>
                     </div>
                  </div>
               </div><a id="ADMIN13776"></a><div class="props_rev_3"><a id="GUID-F8A64114-9440-43DD-8788-79B3B9E68BE1" name="GUID-F8A64114-9440-43DD-8788-79B3B9E68BE1"></a><h4 id="ADMIN-GUID-F8A64114-9440-43DD-8788-79B3B9E68BE1" class="sect4"><span class="enumeration_section">46.1.2 </span>What Solutions Does Resource Manager Provide for a CDB?
                  </h4>
                  <div>
                     <p>Resource Manager can provide more efficient use of resources for a CDB.</p>
                     <p>When resource allocation decisions for a CDB are left to the operating system, you may encounter the following problems with workload management:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Inappropriate allocation of resources among PDBs</p>
                           <p>The operating system distributes resources equally among all active processes and cannot prioritize one task over another. Therefore, one or more PDBs might use an inordinate amount of the system resources, leaving the other PDBs starved for resources.</p>
                        </li>
                        <li>
                           <p>Inappropriate allocation of resources within a single PDB</p>
                           <p>One or more sessions connected to a single PDB might use an inordinate amount of the system resources, leaving other sessions connected to the same PDB starved for resources. </p>
                        </li>
                        <li>
                           <p>Inconsistent performance of PDBs</p>
                           <p>A single PDB might perform inconsistently when other PDBs are competing for more system resources or less system resources at various times.</p>
                        </li>
                        <li>
                           <p>Lack of resource usage data for PDBs</p>
                           <p>Resource usage data is critical for monitoring and tuning PDBs. It might be possible to use operating system monitoring tools to gather the resource usage data for a non-CDB if it is the only database running on the system. However, in a CDB, operating system monitoring tools are no longer as useful because there are multiple PDBs running on the system.</p>
                        </li>
                     </ul>
                     <p>Resource Manager helps to overcome these problems by allowing the CDB more control over how hardware resources are allocated among the PDBs and within PDBs.</p>
                     <p>In a CDB with multiple PDBs, some PDBs typically are more important than others. The Resource Manager enables you to prioritize and limit the resource usage of specific PDBs.</p>
                     <p>With the Resource Manager, you can:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Specify that different PDBs should receive different shares of the system resources so that more resources are allocated to the more important PDBs</p>
                        </li>
                        <li>
                           <p>Limit the CPU usage of a particular PDB</p>
                        </li>
                        <li>
                           <p>Limit the number of parallel execution servers that a particular PDB can use</p>
                        </li>
                        <li>
                           <p>Limit the memory usage of a particular PDB</p>
                        </li>
                        <li>
                           <p>Specify the amount of memory guaranteed for a particular PDB</p>
                        </li>
                        <li>
                           <p>Specify the maximum amount of memory a particular PDB can use</p>
                        </li>
                        <li>
                           <p>Use PDB performance profiles for different sets of PDB</p>
                           <p>A performance profile for a set of PDBs can specify shares of system resources, CPU usage, and number of parallel execution servers. PDB performance profiles enable you to manage resources for large numbers of PDBs by specifying Resource Manager directives for profiles instead of individual PDBs.</p>
                        </li>
                        <li>
                           <p>Limit the resource usage of different sessions connected to a single PDB</p>
                        </li>
                        <li>
                           <p>Limit the I/O generated by specific PDBs</p>
                        </li>
                        <li>
                           <p>Monitor the resource usage of PDBs</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="ADMIN13777"></a><div class="props_rev_3"><a id="GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" name="GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D"></a><h4 id="ADMIN-GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" class="sect4"><span class="enumeration_section">46.1.3 </span>CDB Resource Plans
                  </h4>
                  <p>In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-19400E80-882F-424F-A19A-9FEB54F83577">About CDB Resource Plans</a><br>A CDB resource plan allocates resources to its PDBs according to its set of resource plan directives (directives).
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2">Shares for Allocating Resources to PDBs</a><br>To allocate resources among PDBs, you assign a share value to each PDB or to each PDB performance profile. A higher share value results in more guaranteed resources for a PDB or the PDBs that use the PDB performance profile.
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569">Utilization Limits for PDBs</a><br>A utilization limit restrains the system resource usage of a specific PDB or a specific PDB performance profile. You can specify utilization limits for CPU, parallel execution servers, and memory. 
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA">The Default Directive for PDBs</a><br>When you do not explicitly define directives for a PDB, the PDB uses the default directive for PDBs.
                        </li>
                     </ul>
                  </div>
                  <a id="ADMIN13778"></a><div class="props_rev_3"><a id="GUID-19400E80-882F-424F-A19A-9FEB54F83577" name="GUID-19400E80-882F-424F-A19A-9FEB54F83577"></a><h5 id="ADMIN-GUID-19400E80-882F-424F-A19A-9FEB54F83577" class="sect5"><span class="enumeration_section">46.1.3.1 </span>About CDB Resource Plans
                     </h5>
                     <div>
                        <p>A CDB resource plan allocates resources to its PDBs according to its set of resource plan directives (directives).</p>
                        <p> There is a parent-child relationship between a CDB resource plan and its directives. Each directive references one of the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>A single PDB</p>
                           </li>
                           <li>
                              <p>A set of PDBs in a PDB performance profile</p>
                           </li>
                        </ul>
                        <p>PDB performance profiles are a good way to configure CDB resource plan directives for a group of PDBs. For example, you might create a performance profile for "gold" PDBs, "silver" PDBs, and "bronze" PDBs. A PDB specifies its performance profile with the <code class="codeph">DB_PERFORMANCE_PROFILE</code> initialization parameter. You can specify PDB initialization parameters that control resources, such as <code class="codeph">SGA_TARGET</code> and <code class="codeph">PGA_AGGREGATE_LIMIT</code>, for a group of PDBs using PDB lockdown profiles. It is best practice to use matching names for PDB performance profiles and PDB lockdown profiles. In addition, it is best practice to put the PDB's performance profile in the PDB’s lockdown profile to prevent PDB owners from switching profiles.
                        </p>
                        <p>You can specify directives for both individual PDBs and for PDB performance profiles in the same CDB. No two directives for the currently active plan can reference the same PDB or the same PDB performance profile.</p>
                        <p>The directives control allocation of the following resources to the PDBs:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>CPU</p>
                           </li>
                           <li>
                              <p>Parallel execution servers</p>
                           </li>
                        </ul>
                        <p>A directive can control the allocation of resources to PDBs based on the share value that you specify for each PDB or PDB performance profile. A higher share value results in more resources. For example, you can specify that one PDB is allocated double the resources allocated to a second PDB by setting the share value for the first PDB twice as high as the share value for the second PDB. Similarly, you can specify that one PDB performance profile is allocated double the resources allocated to a second PDB performance profile by setting the share value for the first PDB performance profile twice as high as the share value for the second PDB performance profile. The settings apply to the set of PDBs that use each profile.</p>
                        <p>You can also specify utilization limits for PDBs and PDB performance profiles. The utilization limit limits resource allocation to the PDB or PDB performance profile. For example, it can control how much CPU a PDB gets as a percentage of the total CPU available to the CDB.</p>
                        <p>You can use both shares and utilization limits together for precise control over the resources allocated to each PDB and PDB performance profile in a CDB.</p>
                        <div class="infoboxnotealso" id="GUID-19400E80-882F-424F-A19A-9FEB54F83577__GUID-8C2F418B-3CF1-4FD9-8567-632EB58F1C79">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-3B2EF996-3BE8-413D-968C-14339FACFC12" title="There are several ways to restrict PDB users for enhanced security. A PDB lockdown profile restricts the features and options available to users in a particular PDB. The PDB_OS_CREDENTIAL initialization parameter can specify a unique operating system user for a PDB to limit operating system access. Also, when the PATH_PREFIX and CREATE_FILE_DEST clauses are specified during PDB creation, they limit file system access.">About Restricting PDB Users for Enhanced Security</a>"</span> for more information about PDB lockdown profiles
                           </p>
                        </div>
                     </div>
                  </div><a id="ADMIN13943"></a><a id="ADMIN13781"></a><a id="ADMIN13779"></a><div class="props_rev_3"><a id="GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2" name="GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2"></a><h5 id="ADMIN-GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2" class="sect5"><span class="enumeration_section">46.1.3.2 </span>Shares for Allocating Resources to PDBs
                     </h5>
                     <div>
                        <p>To allocate resources among PDBs, you assign a share value to each PDB or to each PDB performance profile. A higher share value results in more guaranteed resources for a PDB or the PDBs that use the PDB performance profile.</p>
                        <p>You specify a share value for a PDB using the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure in the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package. The <code class="codeph">shares</code> parameter in this procedure specifies the share value for the PDB.
                        </p>
                        <p>You specify a share value for a PDB performance profile using the <code class="codeph">CREATE_CDB_PROFILE_DIRECTIVE</code> procedure in the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package. The <code class="codeph">shares</code> parameter in this procedure specifies the share value for the PDB performance profile. Multiple PDBs can use the same PDB performance profile.
                        </p>
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2__CACCDGEE">Figure 46-1</a> shows an example of three PDBs with share values specified for them in a CDB resource plan.
                        </p>
                        <div class="figure" id="GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2__CACCDGEE">
                           <p class="titleinfigure">Figure 46-1 Shares in a CDB Resource Plan</p><img src="img/admin_vm_101.png" alt="Description of Figure 46-1 follows" title="Description of Figure 46-1 follows" longdesc="img_text/admin_vm_101.html"><br><a href="img_text/admin_vm_101.html">Description of "Figure 46-1 Shares in a CDB Resource Plan"</a></div>
                        <!-- class="figure" -->
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2__CACCDGEE">Figure 46-1</a> shows that the total number of shares is seven (3 plus 3 plus 1). The <code class="codeph">salespdb</code> and the <code class="codeph">servicespdb</code> PDB are each guaranteed 3/7th of the resources, while the <code class="codeph">hrpdb</code> PDB is guaranteed 1/7th of the resources. However, any PDB can use more than the guaranteed amount of a resource if there is no resource contention.
                        </p>
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2__CACDBDCG" title="This table lists system resources and describes how the resources are allocated to the sample pluggable databases.">Table 46-1</a> shows the resources allocation to the PDBs in <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2__CACCDGEE">Figure 46-1</a> based on the share values, assuming that loads of the PDBs consume all of the system resources allocated.
                        </p>
                        <div class="tblformal" id="GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2__CACDBDCG">
                           <p class="titleintable">Table 46-1 Resource Allocation for Sample PDBs</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Resource Allocation for Sample PDBs" summary="This table lists system resources and describes how the resources are allocated to the sample pluggable databases." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="26%" id="d360121e671">Resource</th>
                                    <th align="left" valign="bottom" width="74%" id="d360121e674">Resource Allocation</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d360121e679" headers="d360121e671 ">
                                       <p>CPU</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d360121e679 d360121e674 ">
                                       <p>The <code class="codeph">salespdb</code> and <code class="codeph">servicespdb</code> PDBs can consume the same amount of CPU resources. The <code class="codeph">salespdb</code> and <code class="codeph">servicespdb</code> PDBs are each guaranteed three times more CPU resource than the <code class="codeph">hrpdb</code> PDB.
                                       </p>
                                       <p>See <span class="q">"<a href="managing-resources-with-oracle-database-resource-manager.html#GUID-514BDECF-BE80-4CCA-A00D-EF37C2CFC435" title="To manage CPU resources, Resource Manager allocates resources among consumer groups and redistributes CPU resources that were allocated but were not used. You can also set a limit on the amount of CPU resources that can be allocated to a particular consumer group.">CPU</a>"</span> for more information about this resource.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="26%" id="d360121e711" headers="d360121e671 ">
                                       <p>Parallel execution servers</p>
                                    </td>
                                    <td align="left" valign="top" width="74%" headers="d360121e711 d360121e674 ">
                                       <p>Queued parallel queries from the <code class="codeph">salespdb</code> and <code class="codeph">servicespdb</code> PDBs are selected equally. Queued parallel queries from the <code class="codeph">salespdb</code> and <code class="codeph">servicespdb</code> PDBs are selected three times as often as queued parallel queries from the <code class="codeph">hrpdb</code> PDB.
                                       </p>
                                       <p>See <span class="q">"<a href="managing-resources-with-oracle-database-resource-manager.html#GUID-15685C9E-AD79-4342-BFA9-18D478915267" title="You can limit the maximum degree of parallelism for any operation within a consumer group. Use the PARALLEL_DEGREE_LIMIT_P1 directive attribute to specify the degree of parallelism for a consumer group.">Degree of Parallelism Limit</a>"</span> for more information about this resource.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                  </div><a id="ADMIN13783"></a><a id="ADMIN13944"></a><a id="ADMIN13782"></a><div class="props_rev_3"><a id="GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" name="GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569"></a><h5 id="ADMIN-GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" class="sect5"><span class="enumeration_section">46.1.3.3 </span>Utilization Limits for PDBs
                     </h5>
                     <div>
                        <p>A utilization limit restrains the system resource usage of a specific PDB or a specific PDB performance profile. You can specify utilization limits for CPU, parallel execution servers, and memory. </p>
                        <p>Utilization limits for a PDB are set either by the CDB resource plan or by PDB initialization parameters. <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569__CACECBGJ" title="This table lists each resource, the resource usage limit for each resource, and the Resource Manager action when a limit is reached.">Table 46-2</a> describes utilization limits for PDBs and the Resource Manager action taken when a PDB reaches a utilization limit. For limits specified with a PDB performance profile, each limit applies to each PDB that uses the PDB performance profile.
                        </p>
                        <div class="tblformalwide" id="GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569__CACECBGJ">
                           <p class="titleintable">Table 46-2 Utilization Limits for PDBs</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="Utilization Limits for PDBs" summary="This table lists each resource, the resource usage limit for each resource, and the Resource Manager action when a limit is reached." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d360121e797">Resource</th>
                                    <th align="left" valign="bottom" width="38%" id="d360121e800">Resource Utilization Limit</th>
                                    <th align="left" valign="bottom" width="37%" id="d360121e803">Resource Manager Action</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d360121e808" headers="d360121e797 ">
                                       <p>CPU</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d360121e808 d360121e800 ">
                                       <p>The sessions connected to a PDB reach the CPU utilization limit for the PDB.</p>
                                       <p>This utilization limit for CPU is set by the <code class="codeph">utilization_limit</code> parameter in subprograms of the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package. The <code class="codeph">utilization_limit</code> parameter specifies the percentage of the system resources that a PDB can use. The value ranges from 0 to 100.
                                       </p>
                                       <p>You can also limit CPU for a PDB by setting the initialization parameter <code class="codeph">CPU_COUNT</code>. For example, if you set the <code class="codeph">CPU_COUNT</code> to <code class="codeph">8</code>, then the PDB cannot use more than 8 CPUs at any time. If both <code class="codeph">utilization_limit</code> and <code class="codeph">CPU_COUNT</code> are specified, then the more restrictive (lower) value is enforced.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="37%" headers="d360121e808 d360121e803 ">
                                       <p>Resource Manager throttles the PDB sessions so that the CPU utilization for the PDB does not exceed the utilization limit.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d360121e846" headers="d360121e797 ">
                                       <p>Parallel execution servers</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d360121e846 d360121e800 ">
                                       <p>A PDB uses more than the value of the <code class="codeph">PARALLEL_SERVERS_TARGET</code> initialization parameter multiplied by the value of the <code class="codeph">parallel_server_limit</code> parameter in subprograms of the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package.
                                       </p>
                                       <p>For example, if the <code class="codeph">PARALLEL_SERVERS_TARGET</code> initialization parameter is set to 200 and the  <code class="codeph">parallel_server_limit</code> parameter for a PDB is set to 10%, then utilization limit for the PDB is 20 parallel execution servers (200 X .10).
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="37%" headers="d360121e846 d360121e803 ">
                                       <p>Resource Manager queues parallel queries if the number of parallel execution servers used by the PDB would exceed the limit specified by the <code class="codeph">PARALLEL_SERVERS_TARGET</code> initialization parameter value multiplied by the value of the <code class="codeph">parallel_server_limit</code> parameter.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d360121e879" headers="d360121e797 ">
                                       <p>Memory</p>
                                    </td>
                                    <td align="left" valign="top" width="38%" headers="d360121e879 d360121e800 ">
                                       <p>Several initialization parameters can control the memory usage of a PDB. For example, the <code class="codeph">SGA_TARGET</code> initialization parameter limits the PDB's SGA usage, and the <code class="codeph">PGA_AGGREGATE_LIMIT</code> initialization parameter limits the PDB's PGA usage.
                                       </p>
                                       <p>See <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252" title="Several initialization parameters can control the memory usage of a PDB.">Initialization Parameters That Control Memory for PDBs</a>"</span> for more information about this resource.
                                       </p>
                                    </td>
                                    <td align="left" valign="top" width="37%" headers="d360121e879 d360121e803 ">
                                       <p>Oracle Database prevents the PDB from using more memory than the amount specified in a limiting initialization parameter.</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569__CACJBEJH">Figure 46-2</a> shows an example of three PDBs with shares and utilization limits specified for them in a CDB resource plan.
                        </p>
                        <div class="figure" id="GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569__CACJBEJH">
                           <p class="titleinfigure">Figure 46-2 Shares and Utilization Limits in a CDB Resource Plan</p><img src="img/admin_vm_104.png" alt="Description of Figure 46-2 follows" title="Description of Figure 46-2 follows" longdesc="img_text/admin_vm_104.html"><br><a href="img_text/admin_vm_104.html">Description of "Figure 46-2 Shares and Utilization Limits in a CDB Resource Plan"</a></div>
                        <!-- class="figure" -->
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569__CACJBEJH">Figure 46-2</a> shows that there are no utilization limits on the <code class="codeph">salespdb</code> and <code class="codeph">servicespdb</code> PDBs because <code class="codeph">utilization_limit</code> and <code class="codeph">parallel_server_limit</code> are both set to 100% for them. However, the <code class="codeph">hrpdb</code> PDB is limited to 70% of the applicable system resources because <code class="codeph">utilization_limit</code> and <code class="codeph">parallel_server_limit</code> are both set to 70%.
                        </p>
                     </div>
                  </div><a id="ADMIN13785"></a><a id="ADMIN13945"></a><a id="ADMIN13784"></a><div class="props_rev_3"><a id="GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" name="GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA"></a><h5 id="ADMIN-GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" class="sect5"><span class="enumeration_section">46.1.3.4 </span>The Default Directive for PDBs
                     </h5>
                     <div>
                        <p>When you do not explicitly define directives for a PDB, the PDB uses the default directive for PDBs.</p>
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__CACGHHJA" title="This table shows each default directive and its value.">Table 46-3</a> shows the attributes of the initial default directive for PDBs.
                        </p>
                        <div class="tblformal" id="GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__CACGHHJA">
                           <p class="titleintable">Table 46-3 Initial Default Directive Attributes for PDBs</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Initial Default Directive Attributes for PDBs" summary="This table shows each default directive and its value." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="50%" id="d360121e986">Directive Attribute</th>
                                    <th align="left" valign="bottom" width="50%" id="d360121e989">Value</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d360121e994" headers="d360121e986 ">
                                       <p><code class="codeph">shares</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d360121e994 d360121e989 ">
                                       <p>1</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d360121e1002" headers="d360121e986 ">
                                       <p><code class="codeph">utilization_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d360121e1002 d360121e989 ">
                                       <p>100</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="50%" id="d360121e1010" headers="d360121e986 ">
                                       <p><code class="codeph">parallel_server_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="50%" headers="d360121e1010 d360121e989 ">
                                       <p>100</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>When a PDB is plugged into a CDB and no directive is defined for it, the PDB uses the default directive for PDBs.</p>
                        <p>You can create new directives for the new PDB. You can also change the default directive attribute values for PDBs by using the <code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code> procedure in the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package.
                        </p>
                        <p>When a PDB is unplugged from a CDB, the directive for the PDB is retained. If the same PDB is plugged back into the CDB, then it uses the directive defined for it if the directive was not deleted manually.</p>
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__CACFGAEJ">Figure 46-3</a> shows an example of the default directive in a CDB resource plan.
                        </p>
                        <div class="figure" id="GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__CACFGAEJ">
                           <p class="titleinfigure">Figure 46-3 Default Directive in a CDB Resource Plan</p><img src="img/admin_vm_103.png" alt="Description of Figure 46-3 follows" title="Description of Figure 46-3 follows" longdesc="img_text/admin_vm_103.html"><br><a href="img_text/admin_vm_103.html">Description of "Figure 46-3 Default Directive in a CDB Resource Plan"</a></div>
                        <!-- class="figure" -->
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__CACFGAEJ">Figure 46-3</a> shows that the default PDB directive specifies that the <code class="codeph">share</code> is 1, the <code class="codeph">utilization_limit</code> is 50%, and the <code class="codeph">parallel_server_limit</code> is 50%. Any PDB that is part of the CDB and does not have directives defined for it uses the default PDB directive. <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__CACFGAEJ">Figure 46-3</a> shows the PDBs <code class="codeph">marketingpdb</code> and <code class="codeph">testingpdb</code> using the default PDB directive. Therefore, <code class="codeph">marketingpdb</code> and <code class="codeph">testingpdb</code> each get 1 share and utilization limits of 50.
                        </p>
                        <div class="infoboxnotealso" id="GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA__GUID-4D81CAFE-2132-4F3D-BF23-916FDBE5FA4A">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D" title="When you create a PDB in a CDB, you can create a CDB resource plan directive for the PDB using the CREATE_CDB_PLAN_DIRECTIVE procedure. The directive specifies how resources are allocated to the new PDB.">Creating New CDB Resource Plan Directives for a PDB</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD" title="You can update the default directive for PDBs in a CDB resource plan using the UPDATE_CDB_DEFAULT_DIRECTIVE procedure. The default directive applies to PDBs for which specific directives have not been defined.">Updating the Default Directive for PDBs in a CDB Resource Plan</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="creating-and-removing-pdbs-with-sql-plus.html#GUID-9A250D93-5B3B-4643-BE85-F32CC7B0E413" title="You can create PDBs in several different ways, including using the seed, cloning an existing PDB or non-CDB, and plugging in an unplugged PDB. You can also remove PDBs from a CDB.">Creating and Removing PDBs with SQL*Plus</a></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="creating-and-removing-pdbs-with-sql-plus.html#GUID-893E1D67-BD95-4757-B862-03AD13AFF722" title="You can unplug a PDB from a CDB.">Unplugging a PDB from a CDB</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="managing-resources-with-oracle-database-resource-manager.html#GUID-CDF30CA7-5A14-4C17-8C32-746F0763A7C9" title="Use the PARALLEL_SERVER_LIMIT directive attribute to specify the maximum percentage of the parallel execution server pool that a particular consumer group can use. The number of parallel execution servers used by a particular consumer group is counted as the sum of the parallel execution servers used by all sessions in that consumer group.">Parallel Server Limit</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="ADMIN13787"></a><a id="ADMIN13946"></a><a id="ADMIN13786"></a><div class="props_rev_3"><a id="GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" name="GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17"></a><h4 id="ADMIN-GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" class="sect4"><span class="enumeration_section">46.1.4 </span>PDB Resource Plans
                  </h4>
                  <div>
                     <p>A CDB resource plan determines the amount of resources allocated to each PDB. A PDB resource plan determines how the resources allocated to a specific PDB are allocated to consumer groups within that PDB. </p>
                     <p>A PDB resource plan is similar to a resource plan for a non-CDB. Specifically, a PDB resource plan allocates resource among the consumer groups within a PDB. You can use a PDB resource plan to allocate the resources described in <span class="q">"<a href="managing-resources-with-oracle-database-resource-manager.html#GUID-4BBE0B17-3B05-49FA-979A-C649A9EE6DD9" title="Resource plan directives specify how resources are allocated to resource consumer groups or subplans. Each directive can specify several different methods for allocating resources to its consumer group or subplan.">The Types of Resources Managed by the Resource Manager</a>"</span>.
                     </p>
                     <p>When you create one or more PDB resource plans, the CDB resource plan for the PDB's CDB should meet certain requirements. <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17__CACDAFEA" title="This table lists each resource, the consolidation plan requirements for the resource, and the results if the requirements are not met.">Table 46-4</a> describes the requirements for the CDB resource plan and the results when the requirements are not met.
                     </p>
                     <p>You create directives for a CDB resource plan by using the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure in the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package. You create directives for a PDB resource plan using the <code class="codeph">CREATE_PLAN_DIRECTIVE</code> procedure in the same package. When you create one or more PDB resource plans and there is no CDB resource plan, the CDB uses the <code class="codeph">DEFAULT_CDB_PLAN</code> that is supplied with Oracle Database.
                     </p>
                     <div class="infoboxnote" id="GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17__GUID-065A02C6-A247-40C8-A6EA-AF1993FCCD70">
                        <p class="notep1">Note:</p>
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17__CACDAFEA" title="This table lists each resource, the consolidation plan requirements for the resource, and the results if the requirements are not met.">Table 46-4</a> describes parameter values for PL/SQL procedures. The parameter values described in the "CDB Resource Plan Requirements" column are for the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure. The parameter values described in the "Results When Requirements Are Not Met" column are for the <code class="codeph">CREATE_PLAN_DIRECTIVE</code> procedure.
                        </p>
                     </div>
                     <div class="tblformalwide" id="GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17__CACDAFEA">
                        <p class="titleintable">Table 46-4 CDB Resource Plan Requirements for PDB Resource Plans</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="CDB Resource Plan Requirements for PDB Resource Plans" summary="This table lists each resource, the consolidation plan requirements for the resource, and the results if the requirements are not met." width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="19%" id="d360121e1217">Resource</th>
                                 <th align="left" valign="bottom" width="44%" id="d360121e1220">CDB Resource Plan Requirements</th>
                                 <th align="left" valign="bottom" width="37%" id="d360121e1223">Results When Requirements Are Not Met</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d360121e1228" headers="d360121e1217 ">
                                    <p>CPU</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d360121e1228 d360121e1220 ">
                                    <p>One of the following requirements must be met:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>A share value must be specified for the PDB using the <code class="codeph">shares</code> parameter.
                                          </p>
                                       </li>
                                       <li>
                                          <p>A utilization limit for CPU below 100 must be specified for the PDB using the <code class="codeph">utilization_limit</code> parameter.
                                          </p>
                                       </li>
                                    </ul>
                                    <p>These values can be set in a directive for the specific PDB or in a default directive.</p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d360121e1228 d360121e1223 ">
                                    <p>The CPU allocation policy of the PDB resource plan is not enforced.</p>
                                    <p>The CPU limit specified by the <code class="codeph">utilization_limit</code> parameter in the PDB resource plan is not enforced.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d360121e1258" headers="d360121e1217 ">
                                    <p>Parallel execution servers</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d360121e1258 d360121e1220 ">
                                    <p>One of the following requirements must be met:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>A share value must be specified for the PDB using the <code class="codeph">shares</code> parameter.
                                          </p>
                                       </li>
                                       <li>
                                          <p>A utilization limit for CPU below 100 must be specified for the PDB using the <code class="codeph">utilization_limit</code> parameter.
                                          </p>
                                       </li>
                                       <li>
                                          <p>A parallel server limit below 100 must be specified for the PDB using the <code class="codeph">parallel_server_limit</code> parameter.
                                          </p>
                                       </li>
                                    </ul>
                                    <p>These values can be set in a directive for the specific PDB or in a default directive.</p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d360121e1258 d360121e1223 ">
                                    <p>The parallel execution server allocation policy of the PDB resource plan is not enforced.</p>
                                    <p>The parallel server limit specified by the <code class="codeph">parallel_server_limit</code> parameter in the PDB resource plan is not enforced.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="19%" id="d360121e1294" headers="d360121e1217 ">
                                    <p>Memory</p>
                                 </td>
                                 <td align="left" valign="top" width="44%" headers="d360121e1294 d360121e1220 ">
                                    <p>A share value must be specified for the PDB using the <code class="codeph">shares</code> parameter.
                                    </p>
                                    <p>This value can be set in a directive for the specific PDB or in a default directive.</p>
                                 </td>
                                 <td align="left" valign="top" width="37%" headers="d360121e1294 d360121e1223 ">
                                    <p>The memory allocation policy of the PDB resource plan is not enforced.</p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17__CACGGGJG">Figure 46-4</a> shows an example of a CDB resource plan and a PDB resource plan.
                     </p>
                     <div class="figure" id="GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17__CACGGGJG">
                        <p class="titleinfigure">Figure 46-4 A CDB Resource Plan and a PDB Resource Plan</p><img src="img/admin_vm_102.png" alt="Description of Figure 46-4 follows" title="Description of Figure 46-4 follows" longdesc="img_text/admin_vm_102.html"><br><a href="img_text/admin_vm_102.html">Description of "Figure 46-4 A CDB Resource Plan and a PDB Resource Plan"</a></div>
                     <!-- class="figure" -->
                     <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17__CACGGGJG">Figure 46-4</a> shows some of the directives in a PDB resource plan for the <code class="codeph">servicespdb</code> PDB. Other PDBs in the CDB can also have PDB resource plans.
                     </p>
                     <p>In a CDB, the following restrictions apply to PDB resource plans:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A PDB resource plan cannot have subplans.</p>
                        </li>
                        <li>
                           <p>A PDB resource plan can have a maximum of eight consumer groups.</p>
                        </li>
                        <li>
                           <p>A PDB resource plan cannot have a multiple-level scheduling policy.</p>
                        </li>
                     </ul>
                     <p>If you create a PDB using a non-CDB, and the non-CDB contains resource plans, then these resource plans might not conform to these restrictions. In this case, Oracle Database automatically transforms these resource plans into equivalent PDB resource plans that meet these requirements. The original resource plans and directives are recorded in the <code class="codeph">DBA_RSRC_PLANS</code> and <code class="codeph">DBA_RSRC_PLAN_DIRECTIVES</code> views with the <code class="codeph">LEGACY</code> status.
                     </p>
                     <div class="infoboxnotealso" id="GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17__GUID-8538DA05-AF23-44A3-9F6E-5BB3E8E7249B">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">CDB Resource Plans</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="creating-and-removing-pdbs-with-sql-plus.html#GUID-F68E6FE9-919B-4665-95F7-785E69E07264" title="You can move a non-CDB into a PDB.">Creating a PDB Using a Non-CDB</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADMIN13788"></a><div class="props_rev_3"><a id="GUID-4D6AC64F-5871-4D1F-815B-1035D90A8BD2" name="GUID-4D6AC64F-5871-4D1F-815B-1035D90A8BD2"></a><h4 id="ADMIN-GUID-4D6AC64F-5871-4D1F-815B-1035D90A8BD2" class="sect4"><span class="enumeration_section">46.1.5 </span>Background and Administrative Tasks and Consumer Groups
                  </h4>
                  <div>
                     <p>In a CDB, background and administrative tasks are mapped to the Resource Manager consumer groups that run them optimally.</p>
                     <p>Resource Manager uses the following rules to map a task to a consumer group:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A task is mapped to a consumer group in the container that starts the task. If a task starts in the root, then the task is mapped to a consumer group in the root. If the task starts in a PDB, then the task is mapped to a consumer group in the PDB.</p>
                        </li>
                     </ul>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>When a task is started by an internal client using an internal API, the internal API determines the consumer group to which the task is mapped. </p>
                           <p>For example, a backup task uses an internal Oracle function. When <code class="codeph">SYS</code> starts a backup task in the root, the backup task is mapped based on the Oracle function to the <code class="codeph">SYS_GROUP</code> consumer group in the root.
                           </p>
                        </li>
                        <li>
                           <p>When a task is started without using an internal API, the task is mapped to a consumer group based on the user-defined mapping rules.</p>
                           <p>For example, when <code class="codeph">SYS</code> is mapped to the <code class="codeph">SYS_GROUP</code> consumer group, a task started by <code class="codeph">SYS</code> is mapped to the <code class="codeph">SYS_GROUP</code> consumer group.
                           </p>
                        </li>
                     </ul>
                     <p>The following background and administrative tasks follow these rules:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Backup and recovery</p>
                        </li>
                        <li>
                           <p>Auditing</p>
                        </li>
                        <li>
                           <p>Replication and Advanced Queuing</p>
                        </li>
                        <li>
                           <p>Unplugging a PDB</p>
                        </li>
                        <li>
                           <p>Maintenance windows</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252" name="GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252"></a><h4 id="ADMIN-GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252" class="sect4"><span class="enumeration_section">46.1.6 </span>Initialization Parameters That Control Memory for PDBs
                  </h4>
                  <div>
                     <p>Several initialization parameters can control the memory usage of a PDB.</p>
                     <p>When you set the following initialization parameters with the PDB as the current container, the parameters control the memory usage of the current PDB. When one or more of these parameters is set for a PDB, ensure that the CDB and the other PDBs have sufficient memory for their operations.</p>
                     <div class="tblformal" id="GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252__GUID-73A434E4-F48C-4440-BA3C-56844D263C76">
                        <p class="titleintable">Table 46-5 Initialization Parameters That Control the Memory Usage of PDBs</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Initialization Parameters That Control the Memory Usage of PDBs" summary="This table describes the initialization parameters that control the memory usage of PDBs." frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" id="d360121e1510">Initialization Parameter</th>
                                 <th align="left" valign="bottom" id="d360121e1512">Description</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d360121e1516" headers="d360121e1510 ">
                                    <p><code class="codeph">DB_CACHE_SIZE</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d360121e1516 d360121e1512 ">
                                    <p>Sets the minimum, guaranteed buffer cache space for the PDB.</p>
                                    <p>The following requirements must be met:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>It must be less than or equal to 50% of the setting for the <code class="codeph">DB_CACHE_SIZE</code> in the CDB root.
                                          </p>
                                       </li>
                                       <li>
                                          <p>The sum of the <code class="codeph">DB_CACHE_SIZE</code> settings for all PDBs must be less than or equal to 50% of the setting for the <code class="codeph">DB_CACHE_SIZE</code> in the CDB root.
                                          </p>
                                       </li>
                                    </ul>
                                    <p>These requirements do not apply if the <code class="codeph">SGA_TARGET</code> initialization parameter is set to a non-zero value in the CDB root.
                                    </p>
                                    <p>When the <code class="codeph">SGA_TARGET</code> initialization parameter is set to a non-zero, the following requirements must be met:
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>The values of <code class="codeph">DB_CACHE_SIZE</code> plus <code class="codeph">SHARED_POOL_SIZE</code> in a PDB must be less than or equal to 50% of the PDB’s <code class="codeph">SGA_TARGET</code> value.
                                          </p>
                                       </li>
                                       <li>
                                          <p>The values of <code class="codeph">DB_CACHE_SIZE</code> plus <code class="codeph">SHARED_POOL_SIZE</code> in a PDB must be less than or equal to 50% of the <code class="codeph">SGA_TARGET</code> value at the CDB level.
                                          </p>
                                       </li>
                                       <li>
                                          <p>The sum of <code class="codeph">DB_CACHE_SIZE</code> plus <code class="codeph">SHARED_POOL_SIZE</code> across all the PDBs in a CDB must be less than or equal to 50% of the <code class="codeph">SGA_TARGET</code> value at the CDB level.
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d360121e1589" headers="d360121e1510 ">
                                    <p><code class="codeph">SHARED_POOL_SIZE</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d360121e1589 d360121e1512 ">
                                    <p>Sets the minimum, guaranteed shared pool space for the PDB.</p>
                                    <p>The following requirements must be met:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>It must be less than or equal to 50% of the setting for the <code class="codeph">SHARED_POOL_SIZE</code> in the CDB root.
                                          </p>
                                       </li>
                                       <li>
                                          <p>The sum of the <code class="codeph">SHARED_POOL_SIZE</code> settings for all PDBs must be less than or equal to 50% of the setting for the <code class="codeph">SHARED_POOL_SIZE</code> in the CDB root.
                                          </p>
                                       </li>
                                    </ul>
                                    <p>These requirements do not apply if the <code class="codeph">SGA_TARGET</code> initialization parameter is set to a non-zero value in the CDB root.
                                    </p>
                                    <p>When the <code class="codeph">SGA_TARGET</code> initialization parameter is set to a non-zero, the following requirements must be met:
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>The values of <code class="codeph">DB_CACHE_SIZE</code> plus <code class="codeph">SHARED_POOL_SIZE</code> in a PDB must be less than or equal to 50% of the PDB’s <code class="codeph">SGA_TARGET</code> value.
                                          </p>
                                       </li>
                                       <li>
                                          <p>The values of <code class="codeph">DB_CACHE_SIZE</code> plus <code class="codeph">SHARED_POOL_SIZE</code> in a PDB must be less than or equal to 50% of the <code class="codeph">SGA_TARGET</code> value at the CDB level.
                                          </p>
                                       </li>
                                       <li>
                                          <p>The sum of <code class="codeph">DB_CACHE_SIZE</code> plus <code class="codeph">SHARED_POOL_SIZE</code> across all the PDBs in a CDB must be less than or equal to 50% of the <code class="codeph">SGA_TARGET</code> value at the CDB level.
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d360121e1662" headers="d360121e1510 ">
                                    <p><code class="codeph">PGA_AGGREGATE_LIMIT</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d360121e1662 d360121e1512 ">
                                    <p>Sets the maximum PGA size for the PDB.</p>
                                    <p>The following requirements must be met:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>It must be less than or equal to the setting for the <code class="codeph">PGA_AGGREGATE_LIMIT</code> in the CDB root.
                                          </p>
                                       </li>
                                       <li>
                                          <p>It must be greater than or equal to two times the setting for the <code class="codeph">PGA_AGGREGATE_TARGET</code> in the PDB.
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d360121e1685" headers="d360121e1510 ">
                                    <p><code class="codeph">PGA_AGGREGATE_TARGET</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d360121e1685 d360121e1512 ">
                                    <p>Sets the target aggregate PGA size for the PDB.</p>
                                    <p>The following requirements must be met:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>It must be less than or equal to the <code class="codeph">PGA_AGGREGATE_TARGET</code> value set at the CDB level.
                                          </p>
                                       </li>
                                       <li>
                                          <p>It must be less than or equal to 50% of the <code class="codeph">PGA_AGGREGATE_LIMIT</code> initialization parameter value set at the CDB level.
                                          </p>
                                       </li>
                                       <li>
                                          <p>It must be less than or equal to 50% of the <code class="codeph">PGA_AGGREGATE_LIMIT</code> value set in the PDB.
                                          </p>
                                       </li>
                                    </ul>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d360121e1714" headers="d360121e1510 ">
                                    <p><code class="codeph">SGA_MIN_SIZE</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d360121e1714 d360121e1512 ">
                                    <p>Sets the minimum SGA size for the PDB.</p>
                                    <p>The following requirements must be met:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>It must be less than or equal to 50% of the setting for the <code class="codeph">SGA_TARGET</code> in the CDB root.
                                          </p>
                                       </li>
                                       <li>
                                          <p>It must be less than or equal to 50% of the setting for the <code class="codeph">SGA_TARGET</code> in the PDB.
                                          </p>
                                       </li>
                                       <li>
                                          <p>The sum of the <code class="codeph">SGA_MIN_SIZE</code> settings for all PDBs must be less than or equal to 50% of the setting for the <code class="codeph">SGA_TARGET</code> in the CDB root.
                                          </p>
                                       </li>
                                    </ul>
                                    <p>These requirements do not apply if the <code class="codeph">SGA_TARGET</code> initialization parameter is not set or is set to <code class="codeph">0</code> (zero) in the CDB root.
                                    </p>
                                    <p>The best practice is to limit the sum of the <code class="codeph">SGA_MIN_SIZE</code> values for all PDBs to 50% or less of the SGA size of the CDB.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" id="d360121e1759" headers="d360121e1510 ">
                                    <p><code class="codeph">SGA_TARGET</code></p>
                                 </td>
                                 <td align="left" valign="top" headers="d360121e1759 d360121e1512 ">
                                    <p>Sets the maximum SGA size for the PDB.</p>
                                    <p>The <code class="codeph">SGA_TARGET</code> setting in the PDB is enforced only if the <code class="codeph">SGA_TARGET</code> initialization parameter is set to a non-zero value in the CDB root. The <code class="codeph">SGA_TARGET</code> setting in the PDB must be less than or equal to the <code class="codeph">SGA_TARGET</code> setting in the CDB root.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                     <p>These initialization parameters control the memory usage of PDBs only if the following conditions are met:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <code class="codeph">NONCDB_COMPATIBLE</code> initialization parameter is set to <code class="codeph">false</code> in the CDB root.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">MEMORY_TARGET</code> initialization parameter is not set or is set to <code class="codeph">0</code> (zero) in the CDB root.
                           </p>
                        </li>
                     </ul>
                     <div class="example" id="GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252__GUID-FAAD3AE2-BABF-4FE6-8924-CEF021181327">
                        <p class="titleinexample">Example 46-1 Setting the Maximum Aggregate PGA Memory Available for a PDB</p>
                        <p>With the PDB as the current container, run the following SQL statement to set he <code class="codeph">PGA_AGGREGATE_LIMIT</code> initialization parameter both in memory and in the spfile to 90 megabytes:
                        </p><code class="codeph">ALTER SYSTEM SET PGA_AGGREGATE_LIMIT = 90M SCOPE = BOTH;</code></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-A3459A8B-A36A-44D4-9FCD-75CA0E3D3252__GUID-9B8491D6-9BD8-42D8-AECE-D9AC39D969DA">
                        <p class="titleinexample">Example 46-2 Setting the Minimum SGA Size for a PDB</p>
                        <p>With the PDB as the current container, run the following SQL statement to set the <code class="codeph">SGA_MIN_SIZE</code> initialization parameter both in memory and in the spfile to 500 megabytes:
                        </p><code class="codeph">ALTER SYSTEM SET SGA_MIN_SIZE = 500M SCOPE = BOTH;</code></div>
                     <!-- class="example" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="administering-pdbs-with-sql-plus.html#GUID-3AAA613B-C52C-4080-B0C3-7212859E3A2F" title="You can use the ALTER SYSTEM statement to modify a PDB.">Using the ALTER SYSTEM Statement to Modify a PDB</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2" name="GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2"></a><h4 id="ADMIN-GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2" class="sect4"><span class="enumeration_section">46.1.7 </span>Initialization Parameters That Limit I/O for PDBs
                  </h4>
                  <div>
                     <p>You can set the <code class="codeph">MAX_IOPS</code> initialization parameter and the <code class="codeph">MAX_MBPS</code> initialization parameter to limit the disk I/O generated by a PDB.
                     </p>
                     <p>A large amount of disk I/O can cause poor performance. Several factors can result in excess disk I/O, such as poorly designed SQL or index and table scans in high-volume transactions. If one PDB is generating a large amount of disk I/O, then it can degrade the performance of other PDBs in the same CDB.</p>
                     <p>Use one or both of the following initialization parameters to limit the I/O generated by a particular PDB:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The <code class="codeph">MAX_IOPS</code> initialization parameter limits the number of I/O operations for each second.
                           </p>
                        </li>
                        <li>
                           <p>The <code class="codeph">MAX_MBPS</code> initialization parameter limits the megabytes for I/O operations for each second.
                           </p>
                        </li>
                     </ul>
                     <p>Both limits are enforced if you set both initialization parameters for a single PDB. </p>
                     <p>If these initialization parameters are set with the CDB root as the current container, then the values become the default values for all of the containers in the CDB. If they are set with an application root as the current container, then the values become the default values for all of the application PDBs in the application container. When they are set with a PDB or application PDB as the current container, then the settings take precedence over the default settings in the CDB root or the application root. These parameters cannot be set in a non-CDB.</p>
                     <p>The default for both of these initialization parameters is 0 (zero). If these initialization parameters are set to 0 (zero) in a PDB, and the CDB root is set to 0, then there is no I/O limit for the PDB.  If these initialization parameters are set to 0 (zero) in an application PDB, and its application root is set to 0, then there is no I/O limit for the application PDB.</p>
                     <p>Critical I/O operations, such as ones for the control file and password file are exempted from the limit and continue to run even if the limit is reached. However, all I/O operations, including critical I/O operations, are counted when the number of I/O operations and the megabytes for I/O operations are calculated.</p>
                     <p>You can use the <code class="codeph">DBA_HIST_RSRC_PDB_METRIC</code> view to calculate a reasonable I/O limit for a PDB. Consider the values in the following columns when calculating a limit: <code class="codeph">IOPS</code>, <code class="codeph">IOMBPS</code>, <code class="codeph">IOPS_THROTTLE_EXEMPT</code>, and <code class="codeph">IOMBPS_THROTTLE_EXEMPT</code>. The "rsmgr:io rate limit" wait event indicates that a limit was reached.
                     </p>
                     <div class="example" id="GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2__GUID-FC7E23FC-00D2-419B-9EE9-8D27A0CA9296">
                        <p class="titleinexample">Example 46-3 Limiting the I/O Generated by a PDB</p>
                        <p>With the PDB as the current container, run the following SQL statement to set the <code class="codeph">MAX_IOPS</code> initialization parameter both in memory and in the spfile to a limit of 1,000 I/O operations for each second:
                        </p><code class="codeph">ALTER SYSTEM SET MAX_IOPS = 1000 SCOPE = BOTH;</code></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2__GUID-775B5C73-BD07-47A1-BB2D-8882BAD3FC3E">
                        <p class="titleinexample">Example 46-4 Limiting the Megabytes of I/O Generated by a PDB</p>
                        <p>With the PDB as the current container, run the following SQL statement to set the <code class="codeph">MAX_MBPS</code> initialization parameter both in memory and in the spfile to a limit of 5 megabytes of I/O for each second:
                        </p><code class="codeph">ALTER SYSTEM SET MAX_MBPS = 5 SCOPE = BOTH;</code></div>
                     <!-- class="example" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-88FDD6C9-0722-4DAE-9CFF-CE6CD3520CC2__GUID-2B73E8F6-BE81-4ECA-B46D-CCE58CB4B339">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><a href="administering-pdbs-with-sql-plus.html#GUID-3AAA613B-C52C-4080-B0C3-7212859E3A2F" title="You can use the ALTER SYSTEM statement to modify a PDB.">Using the ALTER SYSTEM Statement to Modify a PDB</a></p>
                              </li>
                              <li>
                                 <p><a href="../refrn/MAX_IOPS.html#REFRN-GUID-7D89F457-0CE6-4152-98EA-7F1BE4E0ADC7"><span><cite>Oracle Database Reference</cite></span></a> for more information about the <code class="codeph">MAX_IOPS</code> initialization parameter
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../refrn/MAX_MBPS.html#REFRN-GUID-9F7E0143-76FB-488A-9A04-2D85F1417CB6"><span><cite>Oracle Database Reference</cite></span></a> for more information about the <code class="codeph">MAX_MBPS</code> initialization parameter
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADMIN13789"></a><div class="props_rev_3"><a id="GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" name="GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B"></a><h3 id="ADMIN-GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" class="sect3"><span class="enumeration_section">46.2 </span>Prerequisites for Using Resource Manager with a CDB
               </h3>
               <div>
                  <p>You must meet prerequisites before using Resource Manager with a CDB.</p>
                  <p>Before you can use Resource Manager with a CDB, the following prerequisites must be met:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>The CDB must exist and must contain PDBs.</p>
                        <p>See <a href="creating-and-configuring-a-cdb.html#GUID-77D4BBA7-2A64-46D9-A2B8-C56060772215" title="Creating and configuring a &nbsp;multitenant container database (CDB) includes tasks such as planning for CDB creation, creating the CDB, and optionally configuring EM Express for the CDB."> Creating and Configuring a CDB</a> and <a href="creating-and-removing-pdbs-with-sql-plus.html#GUID-9A250D93-5B3B-4643-BE85-F32CC7B0E413" title="You can create PDBs in several different ways, including using the seed, cloning an existing PDB or non-CDB, and plugging in an unplugged PDB. You can also remove PDBs from a CDB.">Creating and Removing PDBs with SQL*Plus</a>.
                        </p>
                     </li>
                     <li>
                        <p>To complete a task that uses the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package, a user must have <code class="codeph">ADMINISTER_RESOURCE_MANAGER</code> system privilege.
                        </p>
                        <p>See <span class="q">"<a href="managing-resources-with-oracle-database-resource-manager.html#GUID-1A627E9A-0138-4DA8-B2E3-E98D3C4AA65D" title="You must have the required privileges to administer the Resource Manager.">About Resource Manager Administration Privileges</a>"</span>.
                        </p>
                     </li>
                  </ul>
               </div>
            </div><a id="ADMIN13790"></a><div class="props_rev_3"><a id="GUID-F1DD75FE-18CC-46A9-B19B-68F7833A2594" name="GUID-F1DD75FE-18CC-46A9-B19B-68F7833A2594"></a><h3 id="ADMIN-GUID-F1DD75FE-18CC-46A9-B19B-68F7833A2594" class="sect3"><span class="enumeration_section">46.3 </span>Creating a CDB Resource Plan for Individual PDBs
               </h3>
               <div>
                  <p>You use the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package to create a CDB resource plan for individual PDBs and define the directives for the plan.
                  </p>
                  <div class="section">
                     <p>The general steps for creating a CDB resource plan for individual PDBs are the following:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>Create the pending area using the <code class="codeph">CREATE_PENDING_AREA</code> procedure.</span></li>
                     <li><span>Create the CDB resource plan using the <code class="codeph">CREATE_CDB_PLAN</code> procedure.</span></li>
                     <li><span>Create directives for the PDBs using the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure.</span></li>
                     <li><span>(Optional) Update the default PDB directive using the <code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code> procedure.</span></li>
                     <li><span>(Optional) Update the default autotask directive using the <code class="codeph">UPDATE_CDB_AUTOTASK_DIRECTIVE</code> procedure.</span></li>
                     <li><span>Validate the pending area using the <code class="codeph">VALIDATE_PENDING_AREA</code> procedure.</span></li>
                     <li><span>Submit the pending area using the <code class="codeph">SUBMIT_PENDING_AREA</code> procedure.</span></li>
                  </ol>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E">Creating a CDB Resource Plan for Individual PDBs: A Scenario</a><br>A scenario illustrates each of the steps involved in creating a CDB resource plan for individual PDBs.
                     </li>
                  </ul>
               </div>
               <a id="ADMIN13792"></a><a id="ADMIN13793"></a><a id="ADMIN13795"></a><a id="ADMIN13796"></a><a id="ADMIN13797"></a><a id="ADMIN13798"></a><a id="ADMIN13799"></a><a id="ADMIN13800"></a><a id="ADMIN13801"></a><a id="ADMIN13791"></a><div class="props_rev_3"><a id="GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E" name="GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E"></a><h4 id="ADMIN-GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E" class="sect4"><span class="enumeration_section">46.3.1 </span>Creating a CDB Resource Plan for Individual PDBs: A Scenario
                  </h4>
                  <div>
                     <p>A scenario illustrates each of the steps involved in creating a CDB resource plan for individual PDBs.</p>
                     <div class="section"> 
                        <p>The scenario assumes that you want to create a CDB resource plan for a CDB named <code class="codeph">newcdb</code>. The plan includes a directive for each PDB. In this scenario, you also update the default directive and the autotask directive.
                        </p>
                        <p>The directives are defined using various procedures in the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package. The attributes of each directive are defined using parameters in these procedures. <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACJAEDB" title="This table lists each directive parameter and provides a description of each directive parameter.">Table 46-6</a> describes the types of directives in the plan.
                        </p>
                        <div class="tblformal" id="GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACJAEDB">
                           <p class="titleintable">Table 46-6 Attributes for PDB Directives in a CDB Resource Plan</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Attributes for PDB Directives in a CDB Resource Plan" summary="This table lists each directive parameter and provides a description of each directive parameter." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d360121e2190">Directive Attribute</th>
                                    <th align="left" valign="bottom" width="69%" id="d360121e2193">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d360121e2198" headers="d360121e2190 ">
                                       <p><code class="codeph">shares</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d360121e2198 d360121e2193 ">
                                       <p>Resource allocation share for CPU and parallel execution server resources. See <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2" title="To allocate resources among PDBs, you assign a share value to each PDB or to each PDB performance profile. A higher share value results in more guaranteed resources for a PDB or the PDBs that use the PDB performance profile.">Shares for Allocating Resources to PDBs</a>"</span>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d360121e2214" headers="d360121e2190 ">
                                       <p><code class="codeph">utilization_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d360121e2214 d360121e2193 ">
                                       <p>Resource utilization limit for CPU. See <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" title="A utilization limit restrains the system resource usage of a specific PDB or a specific PDB performance profile. You can specify utilization limits for CPU, parallel execution servers, and memory.">Utilization Limits for PDBs</a>"</span>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d360121e2230" headers="d360121e2190 ">
                                       <p><code class="codeph">parallel_server_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d360121e2230 d360121e2193 ">
                                       <p>Maximum percentage of parallel execution servers that a PDB can use.</p>
                                       <p>When the <code class="codeph">parallel_server_limit</code> directive is specified for a PDB, the limit is the value of the <code class="codeph">PARALLEL_SERVERS_TARGET</code> initialization parameter multiplied by the value of the <code class="codeph">parallel_server_limit</code> parameter in the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure. See <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" title="A utilization limit restrains the system resource usage of a specific PDB or a specific PDB performance profile. You can specify utilization limits for CPU, parallel execution servers, and memory.">Utilization Limits for PDBs</a>"</span>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit.">Table 46-7</a> describes how the CDB resource plan allocates resources to its PDBs using the directive attributes described in <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACJAEDB" title="This table lists each directive parameter and provides a description of each directive parameter.">Table 46-6</a>.
                        </p>
                        <div class="tblformalwide" id="GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF">
                           <p class="titleintable">Table 46-7 Sample Directives for PDBs in a CDB Resource Plan</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="Sample Directives for PDBs in a CDB Resource Plan" summary="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="22%" id="d360121e2282">PDB</th>
                                    <th align="left" valign="bottom" width="26%" id="d360121e2285">shares Directive</th>
                                    <th align="left" valign="bottom" width="26%" id="d360121e2288">utilization_limit Directive</th>
                                    <th align="left" valign="bottom" width="26%" id="d360121e2291">parallel_server_limit Directive</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d360121e2296" headers="d360121e2282 ">
                                       <p><code class="codeph">salespdb</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2296 d360121e2285 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2296 d360121e2288 ">
                                       <p>Unlimited</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2296 d360121e2291 ">
                                       <p>Unlimited</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d360121e2310" headers="d360121e2282 ">
                                       <p><code class="codeph">servicespdb</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2310 d360121e2285 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2310 d360121e2288 ">
                                       <p>Unlimited</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2310 d360121e2291 ">
                                       <p>Unlimited</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d360121e2324" headers="d360121e2282 ">
                                       <p><code class="codeph">hrpdb</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2324 d360121e2285 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2324 d360121e2288 ">
                                       <p>70</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2324 d360121e2291 ">
                                       <p>70</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d360121e2338" headers="d360121e2282 ">
                                       <p>Default</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2338 d360121e2285 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2338 d360121e2288 ">
                                       <p>50</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2338 d360121e2291 ">
                                       <p>50</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d360121e2351" headers="d360121e2282 ">
                                       <p>Autotask</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2351 d360121e2285 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2351 d360121e2288 ">
                                       <p>75</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2351 d360121e2291 ">
                                       <p>75</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>The <code class="codeph">salespdb</code> and <code class="codeph">servicespdb</code> PDBs are more important than the other PDBs in the CDB. Therefore, they get a higher share (3), unlimited CPU utilization resource, unlimited parallel execution server resource, and unlimited memory resource.
                        </p>
                        <p>The default directive applies to PDBs for which specific directives have not been defined. For this scenario, assume that the CDB has several PDBs that use the default directive. This scenario updates the default directive.</p>
                        <p>In addition, this scenario updates the autotask directive. The autotask directive applies to automatic maintenance tasks that are run in the root maintenance window.</p>
                        <p>The following tasks use the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package to create the CDB resource plan and update the default and autotask directives for this scenario:
                        </p>
                        <ol>
                           <li>
                              <p>Create a pending area using the <code class="codeph">CREATE_PENDING_AREA</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();</pre></li>
                           <li>
                              <p>Create a CDB resource plan named <code class="codeph">newcdb_plan</code> using the <code class="codeph">CREATE_CDB_PLAN</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN(
    plan    =&gt; 'newcdb_plan',
    comment =&gt; 'CDB resource plan for newcdb');
END;
/</pre></li>
                           <li>
                              <p>Create the CDB resource plan directives for the PDBs using the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure. Each directive specifies how resources are allocated to a specific PDB.
                              </p>
                              <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit.">Table 46-7</a> describes the directives for the <code class="codeph">salespdb</code>, <code class="codeph">servicespdb</code>, and <code class="codeph">hrpdb</code> PDBs in this scenario. Run the following procedures to create these directives:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    pluggable_database    =&gt; 'salespdb', 
    shares                =&gt; 3, 
    utilization_limit     =&gt; 100,
    parallel_server_limit =&gt; 100);
END;
/

BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    pluggable_database    =&gt; 'servicespdb', 
    shares                =&gt; 3, 
    utilization_limit     =&gt; 100,
    parallel_server_limit =&gt; 100);
END;
/

BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    pluggable_database    =&gt; 'hrpdb', 
    shares                =&gt; 1, 
    utilization_limit     =&gt; 70,
    parallel_server_limit =&gt; 70);
END;
/
</pre><p>All other PDBs in this CDB use the default PDB directive.</p>
                           </li>
                           <li>
                              <p>If the current default CDB resource plan directive for PDBs does not meet your requirements, then update the directive using the <code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code> procedure.
                              </p>
                              <p>The default directive applies to PDBs for which specific directives have not been defined. See <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" title="When you do not explicitly define directives for a PDB, the PDB uses the default directive for PDBs.">The Default Directive for PDBs</a>"</span> for more information.
                              </p>
                              <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit.">Table 46-7</a> describes the default directive that PDBs use in this scenario. Run the following procedure to update the default directive:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.UPDATE_CDB_DEFAULT_DIRECTIVE(
    plan                      =&gt; 'newcdb_plan', 
    new_shares                =&gt; 1, 
    new_utilization_limit     =&gt; 50,
    new_parallel_server_limit =&gt; 50);
END;
/</pre></li>
                           <li>
                              <p>If the current autotask CDB resource plan directive does not meet your requirements, then update the directive using the <code class="codeph">UPDATE_CDB_AUTOTASK_DIRECTIVE</code> procedure.
                              </p>
                              <p>The autotask directive applies to automatic maintenance tasks that are run in the root maintenance window.</p>
                              <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit.">Table 46-7</a> describes the autotask directive in this scenario. Run the following procedure to update the autotask directive:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.UPDATE_CDB_AUTOTASK_DIRECTIVE(
    plan                      =&gt; 'newcdb_plan', 
    new_shares                =&gt; 1, 
    new_utilization_limit     =&gt; 75,
    new_parallel_server_limit =&gt; 75);
END;
/</pre></li>
                           <li>
                              <p>Validate the pending area using the <code class="codeph">VALIDATE_PENDING_AREA</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();</pre></li>
                           <li>
                              <p>Submit the pending area using the <code class="codeph">SUBMIT_PENDING_AREA</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-78438BD4-B3F3-41A0-AC56-6E326862EA80" name="GUID-78438BD4-B3F3-41A0-AC56-6E326862EA80"></a><h3 id="ADMIN-GUID-78438BD4-B3F3-41A0-AC56-6E326862EA80" class="sect3"><span class="enumeration_section">46.4 </span>Creating a CDB Resource Plan with PDB Performance Profiles
               </h3>
               <div>
                  <p>You use the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package to create a CDB resource plan for PDB performance profiles and define the directives for the plan. Each PDB that uses a profile adopts the CDB resource plan for that profile.
                  </p>
                  <div class="section">
                     <p>The general steps for creating a CDB resource plan with PDB performance profiles are the following:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>For each PDB that will use a profile, set the <code class="codeph">DB_PERFORMANCE_PROFILE</code> initialization parameter and specify the profile name. </span></li>
                     <li><span>Create the pending area using the <code class="codeph">CREATE_PENDING_AREA</code> procedure.</span></li>
                     <li><span>Create the CDB resource plan using the <code class="codeph">CREATE_CDB_PLAN</code> procedure.</span></li>
                     <li><span>Create directives for the PDB performance profiles using the <code class="codeph">CREATE_CDB_PROFILE_DIRECTIVE</code> procedure.</span></li>
                     <li><span>(Optional) Update the default PDB directive using the <code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code> procedure.</span></li>
                     <li><span>(Optional) Update the default autotask directive using the <code class="codeph">UPDATE_CDB_AUTOTASK_DIRECTIVE</code> procedure.</span></li>
                     <li><span>Validate the pending area using the <code class="codeph">VALIDATE_PENDING_AREA</code> procedure.</span></li>
                     <li><span>Submit the pending area using the <code class="codeph">SUBMIT_PENDING_AREA</code> procedure.</span></li>
                  </ol>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371">Creating a CDB Resource Plan for PDB Performance Profiles: A Scenario</a><br>A scenario illustrates each of the steps involved in creating a CDB resource plan for PDB performance profiles. 
                     </li>
                  </ul>
               </div>
               
               <div class="props_rev_3"><a id="GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371" name="GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371"></a><h4 id="ADMIN-GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371" class="sect4"><span class="enumeration_section">46.4.1 </span>Creating a CDB Resource Plan for PDB Performance Profiles: A Scenario
                  </h4>
                  <div>
                     <p>A scenario illustrates each of the steps involved in creating a CDB resource plan for PDB performance profiles. </p>
                     <div class="section">
                        <p> The scenario assumes that you want to create a CDB resource plan for a CDB named <code class="codeph">newcdb</code>. The plan includes a directive for each PDB performance profile. In this scenario, you also update the default directive and the autotask directive.
                        </p>
                        <p>In the CDB resource plan, you give each profile a name. In each PDB, you set the <code class="codeph">DB_PERFORMANCE_PROFILE</code> initialization parameter to specify which PDB performance profile the PDB uses.
                        </p>
                        <p>The directives are defined using various procedures in the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package. The attributes of each directive are defined using parameters in these procedures. <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371__CACJAEDB" title="This table lists each directive parameter and provides a description of each directive parameter.">Table 46-8</a> describes the types of directives in the plan.
                        </p>
                        <div class="tblformal" id="GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371__CACJAEDB">
                           <p class="titleintable">Table 46-8 Attributes for PDB Performance Profile Directives in a CDB Resource Plan</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Attributes for PDB Performance Profile Directives in a CDB Resource Plan" summary="This table lists each directive parameter and provides a description of each directive parameter." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="31%" id="d360121e2643">Directive Attribute</th>
                                    <th align="left" valign="bottom" width="69%" id="d360121e2646">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d360121e2651" headers="d360121e2643 ">
                                       <p><code class="codeph">shares</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d360121e2651 d360121e2646 ">
                                       <p>Resource allocation share for CPU and parallel execution server resources. See <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-8FFC859A-A8CD-44C9-AE37-19F6F2E623A2" title="To allocate resources among PDBs, you assign a share value to each PDB or to each PDB performance profile. A higher share value results in more guaranteed resources for a PDB or the PDBs that use the PDB performance profile.">Shares for Allocating Resources to PDBs</a>"</span>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d360121e2667" headers="d360121e2643 ">
                                       <p><code class="codeph">utilization_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d360121e2667 d360121e2646 ">
                                       <p>Resource utilization limit for CPU. See <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" title="A utilization limit restrains the system resource usage of a specific PDB or a specific PDB performance profile. You can specify utilization limits for CPU, parallel execution servers, and memory.">Utilization Limits for PDBs</a>"</span>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="31%" id="d360121e2683" headers="d360121e2643 ">
                                       <p><code class="codeph">parallel_server_limit</code></p>
                                    </td>
                                    <td align="left" valign="top" width="69%" headers="d360121e2683 d360121e2646 ">
                                       <p>Maximum percentage of parallel execution servers that a PDB can use.</p>
                                       <p>When the <code class="codeph">parallel_server_limit</code> directive is specified for a PDB performance profile, the limit is the value of the <code class="codeph">PARALLEL_SERVERS_TARGET</code> initialization parameter multiplied by the value of the <code class="codeph">parallel_server_limit</code> parameter in the <code class="codeph">CREATE_CDB_PLOFILE_DIRECTIVE</code> procedure. See <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1BE505F7-5D27-442D-9A9C-ACA56A7EE569" title="A utilization limit restrains the system resource usage of a specific PDB or a specific PDB performance profile. You can specify utilization limits for CPU, parallel execution servers, and memory.">Utilization Limits for PDBs</a>"</span>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371__CACBBBCF" title="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit.">Table 46-9</a> describes how the CDB resource plan allocates resources to its PDB performance profiles using the directive attributes described in <a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371__CACJAEDB" title="This table lists each directive parameter and provides a description of each directive parameter.">Table 46-8</a>.
                        </p>
                        <div class="tblformalwide" id="GUID-97CD98D3-BB18-4190-8B21-5437FF0E5371__CACBBBCF">
                           <p class="titleintable">Table 46-9 Sample Directives for PDB Performance Profiles in a CDB Resource Plan</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="Sample Directives for PDB Performance Profiles in a CDB Resource Plan" summary="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="22%" id="d360121e2735">PDB</th>
                                    <th align="left" valign="bottom" width="26%" id="d360121e2738">shares Directive</th>
                                    <th align="left" valign="bottom" width="26%" id="d360121e2741">utilization_limit Directive</th>
                                    <th align="left" valign="bottom" width="26%" id="d360121e2744">parallel_server_limit Directive</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d360121e2749" headers="d360121e2735 ">
                                       <p><code class="codeph">gold</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2749 d360121e2738 ">
                                       <p>3</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2749 d360121e2741 ">
                                       <p>Unlimited</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2749 d360121e2744 ">
                                       <p>Unlimited</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d360121e2763" headers="d360121e2735 ">
                                       <p><code class="codeph">silver</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2763 d360121e2738 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2763 d360121e2741 ">
                                       <p>40</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2763 d360121e2744 ">
                                       <p>40</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d360121e2777" headers="d360121e2735 ">
                                       <p><code class="codeph">bronze</code></p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2777 d360121e2738 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2777 d360121e2741 ">
                                       <p>20</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2777 d360121e2744 ">
                                       <p>20</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d360121e2791" headers="d360121e2735 ">
                                       <p>Default</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2791 d360121e2738 ">
                                       <p>1</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2791 d360121e2741 ">
                                       <p>10</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2791 d360121e2744 ">
                                       <p>10</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="22%" id="d360121e2804" headers="d360121e2735 ">
                                       <p>Autotask</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2804 d360121e2738 ">
                                       <p>2</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2804 d360121e2741 ">
                                       <p>60</p>
                                    </td>
                                    <td align="left" valign="top" width="26%" headers="d360121e2804 d360121e2744 ">
                                       <p>60</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>The PDBs that use the <code class="codeph">gold</code> PDB performance profile are more important than the other PDBs in the CDB. Therefore, they get a higher share (3), unlimited CPU utilization resource, and unlimited parallel execution server resource.
                        </p>
                        <p>The PDBs that use the <code class="codeph">silver</code> PDB performance profile are of moderate importance. Therefore, they get a share of 2. They are guaranteed a minimum of 40 percent of the CPU utilization resource and parallel execution server resource.
                        </p>
                        <p>The PDBs that use the <code class="codeph">bronze</code> PDB performance profile are the least important PDBs in the CDB. Therefore, they get the lowest share (1). They are guaranteed a minimum of 20 percent of the CPU utilization resource and parallel execution server resource.
                        </p>
                        <p>The default directive applies to PDBs for which specific directives have not been defined. For this scenario, assume that the CDB has several PDBs that use the default directive. This scenario updates the default directive.</p>
                        <p>In addition, this scenario updates the autotask directive. The autotask directive applies to automatic maintenance tasks that are run in the root maintenance window.</p>
                        <p>Complete the following steps to create the CDB resource plan for PDB performance profiles and update the default and autotask directives for this scenario: </p>
                        <ol>
                           <li>
                              <p>For each PDB that will use a profile, set the <code class="codeph">DB_PERFORMANCE_PROFILE</code> initialization parameter to the name of the profile that the PDB will use.
                              </p>
                              <ol type="a">
                                 <li>
                                    <p>Run an <code class="codeph">ALTER SYSTEM</code> statement to set the parameter.
                                    </p>
                                    <p>For example, with the PDB as the current container, run the following SQL statement:</p><pre class="pre codeblock"><code>ALTER SYSTEM SET DB_PERFORMANCE_PROFILE=gold SCOPE=spfile;</code></pre></li>
                                 <li>
                                    <p>Close the PDB:</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE CLOSE IMMEDIATE;</code></pre></li>
                                 <li>
                                    <p>Open the PDB:</p><pre class="pre codeblock"><code>ALTER PLUGGABLE DATABASE OPEN;</code></pre></li>
                              </ol>
                           </li>
                           <li>
                              <p>Create a pending area using the <code class="codeph">CREATE_PENDING_AREA</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();</pre></li>
                           <li>
                              <p>Create a CDB resource plan named <code class="codeph">newcdb_plan</code> using the <code class="codeph">CREATE_CDB_PLAN</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN(
    plan    =&gt; 'newcdb_plan',
    comment =&gt; 'CDB resource plan for newcdb');
END;
/</pre></li>
                           <li>
                              <p>Create the CDB resource plan directives for the PDBs using the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure. Each directive specifies how resources are allocated to a specific PDB.
                              </p>
                              <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit.">Table 46-7</a> describes the directives for the <code class="codeph">gold</code>, <code class="codeph">silver</code>, and <code class="codeph">bronze</code> profiles in this scenario. Run the following procedures to create these directives:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PROFILE_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    profile               =&gt; 'gold', 
    shares                =&gt; 3, 
    utilization_limit     =&gt; 100,
    parallel_server_limit =&gt; 100);
END;
/

BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PROFILE_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    profile               =&gt; 'silver', 
    shares                =&gt; 2, 
    utilization_limit     =&gt; 40,
    parallel_server_limit =&gt; 40);
END;
/

BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PROFILE_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    profile               =&gt; 'bronze', 
    shares                =&gt; 1, 
    utilization_limit     =&gt; 20,
    parallel_server_limit =&gt; 20);
END;
/
</pre><p>All other PDBs in this CDB use the default PDB directive.</p>
                           </li>
                           <li>
                              <p>If the current default CDB resource plan directive for PDBs does not meet your requirements, then update the directive using the <code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code> procedure.
                              </p>
                              <p>The default directive applies to PDBs for which specific directives have not been defined. See <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" title="When you do not explicitly define directives for a PDB, the PDB uses the default directive for PDBs.">The Default Directive for PDBs</a>"</span> for more information.
                              </p>
                              <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit.">Table 46-7</a> describes the default directive that PDBs use in this scenario. Run the following procedure to update the default directive:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.UPDATE_CDB_DEFAULT_DIRECTIVE(
    plan                      =&gt; 'newcdb_plan', 
    new_shares                =&gt; 1, 
    new_utilization_limit     =&gt; 10,
    new_parallel_server_limit =&gt; 10);
END;
/</pre></li>
                           <li>
                              <p>If the current autotask CDB resource plan directive does not meet your requirements, then update the directive using the <code class="codeph">UPDATE_CDB_AUTOTASK_DIRECTIVE</code> procedure.
                              </p>
                              <p>The autotask directive applies to automatic maintenance tasks that are run in the root maintenance window.</p>
                              <p><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E__CACBBBCF" title="This table lists each pluggable database and shows the value of the following directives for each pluggable database: mgmt_p1, utilization_limit, and parallel_server_limit.">Table 46-7</a> describes the autotask directive in this scenario. Run the following procedure to update the autotask directive:
                              </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.UPDATE_CDB_AUTOTASK_DIRECTIVE(
    plan                      =&gt; 'newcdb_plan', 
    new_shares                =&gt; 1, 
    new_utilization_limit     =&gt; 60,
    new_parallel_server_limit =&gt; 60);
END;
/</pre></li>
                           <li>
                              <p>Validate the pending area using the <code class="codeph">VALIDATE_PENDING_AREA</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();</pre></li>
                           <li>
                              <p>Submit the pending area using the <code class="codeph">SUBMIT_PENDING_AREA</code> procedure:
                              </p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADMIN13802"></a><div class="props_rev_3"><a id="GUID-53C544B1-8767-4E7C-B57B-71CD63B98201" name="GUID-53C544B1-8767-4E7C-B57B-71CD63B98201"></a><h3 id="ADMIN-GUID-53C544B1-8767-4E7C-B57B-71CD63B98201" class="sect3"><span class="enumeration_section">46.5 </span>Enabling and Disabling a CDB Resource Plan
               </h3>
               <p>A CDB resource plan manages the workloads for multiple PDBs that are contending for system and CDB resources. You can enable or disable a CDB resource plan.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E05500C-C8C0-4E99-B753-133515175437">Enabling a CDB Resource Plan</a><br>You enable the Resource Manager for a CDB by setting the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter in the root.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386">Disabling a CDB Resource Plan</a><br>You disable the Resource Manager for a CDB by unsetting the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter in the root.
                     </li>
                  </ul>
               </div>
               <a id="ADMIN13803"></a><div class="props_rev_3"><a id="GUID-3E05500C-C8C0-4E99-B753-133515175437" name="GUID-3E05500C-C8C0-4E99-B753-133515175437"></a><h4 id="ADMIN-GUID-3E05500C-C8C0-4E99-B753-133515175437" class="sect4"><span class="enumeration_section">46.5.1 </span>Enabling a CDB Resource Plan
                  </h4>
                  <div>
                     <p>You enable the Resource Manager for a CDB by setting the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter in the root.
                     </p>
                     <div class="section">
                        <p>This parameter specifies the top plan, which is the plan to be used for the current CDB instance. If no plan is specified with this parameter, then the Resource Manager is not enabled.</p>
                        <p>Before enabling a CDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" title="You must meet prerequisites before using Resource Manager with a CDB.">Prerequisites for Using Resource Manager with a CDB</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To enable a CDB resource plan:</p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, ensure that the current container is the root.</p>
                              <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Perform one of the following actions:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Use an <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> statement to set the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter to the CDB resource plan.
                                    </p>
                                    <p>The following example sets the CDB resource plan to <code class="codeph">newcdb_plan</code> using an <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> statement:
                                    </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET RESOURCE_MANAGER_PLAN = 'newcdb_plan';
</pre></li>
                                 <li>
                                    <p>In a text initialization parameter file, set the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter to the CDB resource plan, and restart the CDB.
                                    </p>
                                    <p>The following example sets the CDB resource plan to <code class="codeph">newcdb_plan</code> in an initialization parameter file:
                                    </p><pre class="oac_no_warn" dir="ltr">RESOURCE_MANAGER_PLAN = 'newcdb_plan'
</pre></li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>You can also schedule a CDB resource plan change with Oracle Scheduler.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-resources-with-oracle-database-resource-manager.html#GUID-E8FABE8D-A781-49BB-B623-98F096DED239" title="You enable Oracle Database Resource Manager (the Resource Manager) by setting the RESOURCE_MANAGER_PLAN initialization parameter. This parameter specifies the top plan, identifying the plan to be used for the current instance. If no plan is specified with this parameter, the Resource Manager is not enabled.">Enabling Oracle Database Resource Manager and Switching Plans</a></li>
                           <li><a href="oracle-scheduler-concepts.html#GUID-6B8C0335-D36B-44D3-95BC-82FA2141D967" title="You can schedule tasks with Oracle Scheduler.">Oracle Scheduler Concepts</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ADMIN13805"></a><div class="props_rev_3"><a id="GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386" name="GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386"></a><h4 id="ADMIN-GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386" class="sect4"><span class="enumeration_section">46.5.2 </span>Disabling a CDB Resource Plan
                  </h4>
                  <div>
                     <p>You disable the Resource Manager for a CDB by unsetting the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter in the root.
                     </p>
                     <div class="section">
                        <p>If you disable a CDB resource plan, then some directives in PDB resource plans become disabled. See <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" title="A CDB resource plan determines the amount of resources allocated to each PDB. A PDB resource plan determines how the resources allocated to a specific PDB are allocated to consumer groups within that PDB.">PDB Resource Plans</a>"</span> for information about the CDB resource plan requirements for PDB resource plans.
                        </p>
                        <p>Before disabling a CDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" title="You must meet prerequisites before using Resource Manager with a CDB.">Prerequisites for Using Resource Manager with a CDB</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To disable a CDB resource plan:</p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, ensure that the current container is the root.</p>
                              <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Perform one of the following actions:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Use an <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> statement to unset the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter for the CDB.
                                    </p>
                                    <p>The following example unsets the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter using an <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> statement:
                                    </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET RESOURCE_MANAGER_PLAN = '';
</pre></li>
                                 <li>
                                    <p>In an initialization parameter file, unset the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter, and restart the CDB.
                                    </p>
                                    <p>The following example unsets the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter in an initialization parameter file:
                                    </p><pre class="oac_no_warn" dir="ltr">RESOURCE_MANAGER_PLAN = 
</pre><p>To shut down and restart a CDB, see <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-B2AC2F0B-F55E-40CD-AF37-A09E31BAA732" title="You can shut down a CDB instance in the same way that you shut down a non-CDB instance.">Shutting Down a CDB Instance</a>"</span> and <span class="q">"<a href="starting-up-and-shutting-down.html#GUID-203404B5-5157-4F29-A241-B8ABC4753819" title="When you start up a database, you create an instance of that database and you determine the state of the database. Normally, you start up an instance by mounting and opening the database. Doing so makes the database available for any valid user to connect to and perform typical data access operations.">Starting Up a Database</a>"</span>.
                                    </p>
                                 </li>
                              </ul>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADMIN13807"></a><div class="props_rev_3"><a id="GUID-2A0C60A0-C558-4837-B97C-A8380FB19E3A" name="GUID-2A0C60A0-C558-4837-B97C-A8380FB19E3A"></a><h3 id="ADMIN-GUID-2A0C60A0-C558-4837-B97C-A8380FB19E3A" class="sect3"><span class="enumeration_section">46.6 </span>Creating a PDB Resource Plan
               </h3>
               <div>
                  <p>You create a PDB resource plan in the same way that you create a resource plan for a non-CDB. You use procedures in the <code class="codeph">DBMS_RESOURCE_MANAGER</code> PL/SQL package to create the plan.
                  </p>
                  <div class="section">
                     <p>A CDB resource plan allocates a portion of the system's resources to a PDB. A PDB resource plan determines how this portion is allocated within the PDB. </p>
                     <p>The following is a summary of the steps required to create a PDB resource plan:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li><span>In SQL*Plus, ensure that the current container is a PDB.</span></li>
                     <li><span>Create a pending area using the <code class="codeph">CREATE_PENDING_AREA</code> procedure.</span></li>
                     <li><span>Create, modify, or delete consumer groups using the <code class="codeph">CREATE_CONSUMER_GROUP</code> procedure.</span></li>
                     <li><span>Map sessions to consumer groups using the <code class="codeph">SET_CONSUMER_GROUP_MAPPING</code> procedure.</span></li>
                     <li><span>Create the PDB resource plan using the <code class="codeph">CREATE_PLAN</code> procedure.</span></li>
                     <li><span>Create PDB resource plan directives using the <code class="codeph">CREATE_PLAN_DIRECTIVE</code> procedure.</span></li>
                     <li><span>Validate the pending area using the <code class="codeph">VALIDATE_PENDING_AREA</code> procedure.</span></li>
                     <li><span>Submit the pending area using the <code class="codeph">SUBMIT_PENDING_AREA</code> procedure.</span></li>
                  </ol>
                  <div class="section">
                     <p>Ensure that the current container is a PDB and that the user has the required privileges when you complete these steps. See <span class="q">"<a href="managing-resources-with-oracle-database-resource-manager.html#GUID-4816CA07-1376-45FD-82D4-F9E332936683" title="When your situation calls for a more complex resource plan, you must create the plan, with its directives and consumer groups, in a staging area called the pending area, and then validate the plan before storing it in the data dictionary.">Creating a Complex Resource Plan</a>"</span> for detailed information about completing these steps.
                     </p>
                     <p>You also have the option of creating a simple resource plan that is adequate for many situations using the <code class="codeph">CREATE_SIMPLE_PLAN</code> procedure. See <span class="q">"<a href="managing-resources-with-oracle-database-resource-manager.html#GUID-EFC4517C-6C4D-44F8-A652-2266D6FB49EB" title="You can quickly create a simple resource plan that is adequate for many situations using the CREATE_SIMPLE_PLAN procedure.">Creating a Simple Resource Plan </a>"</span>.
                     </p>
                     <div class="infoboxnote" id="GUID-2A0C60A0-C558-4837-B97C-A8380FB19E3A__GUID-A68BB797-4DE8-4A29-A2C0-90E55C170A25">
                        <p class="notep1">Note:</p>
                        <p>Some restrictions apply to PDB resource plans. See <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" title="A CDB resource plan determines the amount of resources allocated to each PDB. A PDB resource plan determines how the resources allocated to a specific PDB are allocated to consumer groups within that PDB.">PDB Resource Plans</a>"</span> for information.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ADMIN13808"></a><div class="props_rev_3"><a id="GUID-B03DAA59-E508-4714-9246-C9F707A5FB61" name="GUID-B03DAA59-E508-4714-9246-C9F707A5FB61"></a><h3 id="ADMIN-GUID-B03DAA59-E508-4714-9246-C9F707A5FB61" class="sect3"><span class="enumeration_section">46.7 </span>Enabling and Disabling a PDB Resource Plan
               </h3>
               <p>A PDB resource plan manages the workloads within a single PDB. You can enable or disable a PDB resource plan.</p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1">Enabling a PDB Resource Plan</a><br>You enable a PDB resource plan by setting the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter to the plan with an <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> statement when the current container is the PDB.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E">Disabling a PDB Resource Plan</a><br>You disable a PDB resource plan by unsetting the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter in the PDB.
                     </li>
                  </ul>
               </div>
               <a id="ADMIN13811"></a><a id="ADMIN13809"></a><div class="props_rev_3"><a id="GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1" name="GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1"></a><h4 id="ADMIN-GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1" class="sect4"><span class="enumeration_section">46.7.1 </span>Enabling a PDB Resource Plan
                  </h4>
                  <div>
                     <p>You enable a PDB resource plan by setting the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter to the plan with an <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> statement when the current container is the PDB.
                     </p>
                     <div class="section">
                        <p>If no plan is specified with this parameter, then no PDB resource plan is enabled for the PDB.</p>
                        <p>Before enabling a PDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" title="You must meet prerequisites before using Resource Manager with a CDB.">Prerequisites for Using Resource Manager with a CDB</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To enable a PDB resource plan:</p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, ensure that the current container is a PDB.</p>
                              <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Use an <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> statement to set the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter to the PDB resource plan.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>You can also schedule a PDB resource plan change with Oracle Scheduler.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1__GUID-71001B10-3B10-405F-89A3-A77BF885FD0F">
                        <p class="titleinexample">Example 46-5 Enabling a PDB Resource Plan</p>
                        <p>The following example sets the PDB resource plan to <code class="codeph">salespdb_plan</code>.
                        </p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET RESOURCE_MANAGER_PLAN = 'salespdb_plan';
</pre><div class="infoboxnotealso" id="GUID-57DC99C7-1C35-4AC9-A688-05F7B984D8F1__GUID-A0783E44-4F15-48BF-9F55-ED1CAA4A7D6F">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="managing-resources-with-oracle-database-resource-manager.html#GUID-E8FABE8D-A781-49BB-B623-98F096DED239" title="You enable Oracle Database Resource Manager (the Resource Manager) by setting the RESOURCE_MANAGER_PLAN initialization parameter. This parameter specifies the top plan, identifying the plan to be used for the current instance. If no plan is specified with this parameter, the Resource Manager is not enabled.">Enabling Oracle Database Resource Manager and Switching Plans</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="oracle-scheduler-concepts.html#GUID-6B8C0335-D36B-44D3-95BC-82FA2141D967" title="You can schedule tasks with Oracle Scheduler."> Oracle Scheduler Concepts</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="administering-pdbs-with-sql-plus.html#GUID-3AAA613B-C52C-4080-B0C3-7212859E3A2F" title="You can use the ALTER SYSTEM statement to modify a PDB.">Using the ALTER SYSTEM Statement to Modify a PDB</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div><a id="ADMIN13814"></a><a id="ADMIN13812"></a><div class="props_rev_3"><a id="GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E" name="GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E"></a><h4 id="ADMIN-GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E" class="sect4"><span class="enumeration_section">46.7.2 </span>Disabling a PDB Resource Plan
                  </h4>
                  <div>
                     <p>You disable a PDB resource plan by unsetting the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter in the PDB.
                     </p>
                     <div class="section">
                        <p>Before disabling a PDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" title="You must meet prerequisites before using Resource Manager with a CDB.">Prerequisites for Using Resource Manager with a CDB</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To disable a PDB resource plan:</p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, ensure that the current container is a PDB.</p>
                              <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Use an <code class="codeph">ALTER</code> <code class="codeph">SYSTEM</code> statement to unset the <code class="codeph">RESOURCE_MANAGER_PLAN</code> initialization parameter for the PDB.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section"></div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E__GUID-352DCF99-414B-45A3-862C-CFB3BC3E1AAA">
                        <p class="titleinexample">Example 46-6 Disabling a PDB Resource Plan</p>
                        <p>The following example disables the PDB resource plan.</p><pre class="oac_no_warn" dir="ltr">ALTER SYSTEM SET RESOURCE_MANAGER_PLAN = '';</pre><div class="infoboxnotealso" id="GUID-8E0172B0-D9F3-4CA4-92FA-73EC39EE0D1E__GUID-7E83A43E-BB6B-4C3D-911D-E38C59C5B5CB">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="administering-pdbs-with-sql-plus.html#GUID-3AAA613B-C52C-4080-B0C3-7212859E3A2F" title="You can use the ALTER SYSTEM statement to modify a PDB.">Using the ALTER SYSTEM Statement to Modify a PDB</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="ADMIN13815"></a><div class="props_rev_3"><a id="GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822" name="GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822"></a><h3 id="ADMIN-GUID-B3FED12D-DA2A-4A19-9C45-93FC32690822" class="sect3"><span class="enumeration_section">46.8 </span>Maintaining Plans and Directives in a CDB
               </h3>
               <p>This section provides instructions for maintaining CDB resource plans, the default directive for PDBs, the autotask directive, and PDB resource plans. You perform maintenance tasks using the <code class="codeph">DBMS_RESOURCE_MANAGER</code> PL/SQL package.
               </p>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697">Managing a CDB Resource Plan</a><br>Managing a CDB resource plan includes tasks such as updating the plan, creating, updating, or deleting plan directives for PDBs, and updating default directives.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-ACF0635C-2642-48C3-8484-245826F16F31">Modifying a PDB Resource Plan</a><br>You can use the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package to modify a PDB resource plan in the same way you would modify the resource plan for a non-CDB.
                     </li>
                  </ul>
               </div>
               <a id="ADMIN13816"></a><div class="props_rev_3"><a id="GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" name="GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697"></a><h4 id="ADMIN-GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" class="sect4"><span class="enumeration_section">46.8.1 </span>Managing a CDB Resource Plan
                  </h4>
                  <p>Managing a CDB resource plan includes tasks such as updating the plan, creating, updating, or deleting plan directives for PDBs, and updating default directives.</p>
                  <div>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-548307C2-72BE-436E-B843-4419CD77540D">Updating a CDB Resource Plan</a><br>You can update a CDB resource plan to change its comment using the <code class="codeph">UPDATE_CDB_PLAN</code> procedure.
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3">Managing CDB Resource Plan Directives for a PDB</a><br>You can create, update, and delete CDB resource plan directives for a PDB.
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71">Managing CDB Resource Plan Directives for a PDB Performance Profile</a><br>You can create, update, and delete CDB resource plan directives for a PDB performance profile. 
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD">Updating the Default Directive for PDBs in a CDB Resource Plan</a><br>You can update the default directive for PDBs in a CDB resource plan using the <code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code> procedure. The default directive applies to PDBs for which specific directives have not been defined.
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0">Updating the Default Directive for Maintenance Tasks in a CDB Resource Plan</a><br>You can update the autotask directive in a CDB resource plan using the <code class="codeph">UPDATE_CDB_AUTOTASK_DIRECTIVE</code> procedure. The autotask directive applies to automatic maintenance tasks that are run in the root maintenance window.
                        </li>
                        <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB">Deleting a CDB Resource Plan</a><br>You can delete a CDB resource plan using the <code class="codeph">DELETE_CDB_PLAN</code> procedure.
                        </li>
                     </ul>
                  </div>
                  <a id="ADMIN13817"></a><div class="props_rev_3"><a id="GUID-548307C2-72BE-436E-B843-4419CD77540D" name="GUID-548307C2-72BE-436E-B843-4419CD77540D"></a><h5 id="ADMIN-GUID-548307C2-72BE-436E-B843-4419CD77540D" class="sect5"><span class="enumeration_section">46.8.1.1 </span>Updating a CDB Resource Plan
                     </h5>
                     <div>
                        <p>You can update a CDB resource plan to change its comment using the <code class="codeph">UPDATE_CDB_PLAN</code> procedure.
                        </p>
                        <div class="section">
                           <p>Before updating a CDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" title="You must meet prerequisites before using Resource Manager with a CDB.">Prerequisites for Using Resource Manager with a CDB</a>"</span>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>To update a CDB resource plan:</p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus, ensure that the current container is the root.</p>
                                 <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Create a pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</pre></li>
                              <li>
                                 <p>Run the <code class="codeph">UPDATE_CDB_PLAN</code> procedure, and enter a new comment in the <code class="codeph">new_comment</code> parameter.
                                 </p>
                                 <p>For example, the following procedure changes the comment for the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                 </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.UPDATE_CDB_PLAN(
    plan        =&gt; 'newcdb_plan',
    new_comment =&gt; 'CDB plan for PDBs in newcdb');
END;
/
</pre></li>
                              <li>
                                 <p>Validate the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</pre></li>
                              <li>
                                 <p>Submit the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-548307C2-72BE-436E-B843-4419CD77540D__GUID-D9FFF20D-39F2-489C-8529-5912B530D2DF">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">CDB Resource Plans</a>"</span></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3" name="GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3"></a><h5 id="ADMIN-GUID-94805B9F-BB2A-490E-ADAE-42EBB6DE8EC3" class="sect5"><span class="enumeration_section">46.8.1.2 </span>Managing CDB Resource Plan Directives for a PDB
                     </h5>
                     <p>You can create, update, and delete CDB resource plan directives for a PDB.</p>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D">Creating New CDB Resource Plan Directives for a PDB</a><br>When you create a PDB in a CDB, you can create a CDB resource plan directive for the PDB using the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure. The directive specifies how resources are allocated to the new PDB.
                           </li>
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-FF00B9A0-293F-4544-9121-104E53F898B9">Updating CDB Resource Plan Directives for a PDB</a><br>You can update the CDB resource plan directive for a PDB using the <code class="codeph">UPDATE_CDB_PLAN_DIRECTIVE</code> procedure. The directive specifies how resources are allocated to the PDB.
                           </li>
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119">Deleting CDB Resource Plan Directives for a PDB</a><br>You can delete the CDB resource plan directive for a PDB using the <code class="codeph">DELETE_CDB_PLAN_DIRECTIVE</code> procedure.
                           </li>
                        </ul>
                     </div>
                     <a id="ADMIN13819"></a><div class="props_rev_3"><a id="GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D" name="GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D"></a><h6 id="ADMIN-GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D" class="sect6"><span class="enumeration_section">46.8.1.2.1 </span>Creating New CDB Resource Plan Directives for a PDB
                        </h6>
                        <div>
                           <p>When you create a PDB in a CDB, you can create a CDB resource plan directive for the PDB using the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure. The directive specifies how resources are allocated to the new PDB.
                           </p>
                           <div class="section">
                              <p>Before creating a new CDB resource plan directive for a PDB, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" title="You must meet prerequisites before using Resource Manager with a CDB.">Prerequisites for Using Resource Manager with a CDB</a>"</span>.
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p>To create a new CDB resource plan directive for a PDB:</p>
                              <ol>
                                 <li>
                                    <p>In SQL*Plus, ensure that the current container is the root.</p>
                                    <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Create a pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</pre></li>
                                 <li>
                                    <p>Run the <code class="codeph">CREATE_CDB_PLAN_DIRECTIVE</code> procedure, and specify the appropriate values for the new PDB.
                                    </p>
                                    <p>For example, the following procedure allocates resources to a PDB named <code class="codeph">operpdb</code> in the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                    </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PLAN_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    pluggable_database    =&gt; 'operpdb', 
    shares                =&gt; 1, 
    utilization_limit     =&gt; 20,
    parallel_server_limit =&gt; 30);
END;
/
</pre></li>
                                 <li>
                                    <p>Validate the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</pre></li>
                                 <li>
                                    <p>Submit the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <div class="infoboxnotealso" id="GUID-07A4546E-A0D1-46AE-BFA2-D28C3915906D__GUID-99D4A9C7-DEAF-4FEE-A287-7D0E7B7E8454">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">CDB Resource Plans</a>"</span></p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADMIN13821"></a><div class="props_rev_3"><a id="GUID-FF00B9A0-293F-4544-9121-104E53F898B9" name="GUID-FF00B9A0-293F-4544-9121-104E53F898B9"></a><h6 id="ADMIN-GUID-FF00B9A0-293F-4544-9121-104E53F898B9" class="sect6"><span class="enumeration_section">46.8.1.2.2 </span>Updating CDB Resource Plan Directives for a PDB
                        </h6>
                        <div>
                           <p>You can update the CDB resource plan directive for a PDB using the <code class="codeph">UPDATE_CDB_PLAN_DIRECTIVE</code> procedure. The directive specifies how resources are allocated to the PDB.
                           </p>
                           <div class="section">
                              <p>Before updating a CDB resource plan directive for a PDB, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" title="You must meet prerequisites before using Resource Manager with a CDB.">Prerequisites for Using Resource Manager with a CDB</a>"</span>.
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p>To update a CDB resource plan directive for a PDB:</p>
                              <ol>
                                 <li>
                                    <p>In SQL*Plus, ensure that the current container is the root.</p>
                                    <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Create a pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</pre></li>
                                 <li>
                                    <p>Run the <code class="codeph">UPDATE_CDB_PLAN_DIRECTIVE</code> procedure, and specify the new resource allocation values for the PDB.
                                    </p>
                                    <p>For example, the following procedure updates the resource allocation to a PDB named <code class="codeph">operpdb</code> in the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                    </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.UPDATE_CDB_PLAN_DIRECTIVE(
    plan                      =&gt; 'newcdb_plan', 
    pluggable_database        =&gt; 'operpdb', 
    new_shares                =&gt; 1, 
    new_utilization_limit     =&gt; 10,
    new_parallel_server_limit =&gt; 20);
END;
/
</pre></li>
                                 <li>
                                    <p>Validate the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</pre></li>
                                 <li>
                                    <p>Submit the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <div class="infoboxnotealso" id="GUID-FF00B9A0-293F-4544-9121-104E53F898B9__GUID-01B9F722-B565-4FE4-93DC-6C9BDFDAB931">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">CDB Resource Plans</a>"</span></p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div><a id="ADMIN13823"></a><div class="props_rev_3"><a id="GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119" name="GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119"></a><h6 id="ADMIN-GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119" class="sect6"><span class="enumeration_section">46.8.1.2.3 </span>Deleting CDB Resource Plan Directives for a PDB
                        </h6>
                        <div>
                           <p>You can delete the CDB resource plan directive for a PDB using the <code class="codeph">DELETE_CDB_PLAN_DIRECTIVE</code> procedure.
                           </p>
                           <div class="section">
                              <p>You might delete the directive for a PDB if you unplug or drop the PDB. However, you can retain the directive, and if the PDB is plugged into the CDB in the future, the existing directive applies to the PDB.</p>
                              <p>Before deleting a CDB resource plan directive for a PDB, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" title="You must meet prerequisites before using Resource Manager with a CDB.">Prerequisites for Using Resource Manager with a CDB</a>"</span>.
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3">To delete a CDB resource plan directive for a PDB:</p>
                              <ol>
                                 <li>
                                    <p>In SQL*Plus, ensure that the current container is the root.</p>
                                    <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Create a pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</pre></li>
                                 <li>
                                    <p>Run the <code class="codeph">DELETE_CDB_PLAN_DIRECTIVE</code> procedure, and specify the CDB resource plan and the PDB.
                                    </p>
                                    <p>For example, the following procedure deletes the directive for a PDB named <code class="codeph">operpdb</code> in the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                    </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.DELETE_CDB_PLAN_DIRECTIVE(
    plan               =&gt; 'newcdb_plan', 
    pluggable_database =&gt; 'operpdb');
END;
/
</pre></li>
                                 <li>
                                    <p>Validate the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</pre></li>
                                 <li>
                                    <p>Submit the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <div class="infoboxnotealso" id="GUID-F88B5D61-87AC-4662-B5B6-A6A616F90119__GUID-2DAC6ADA-8ECC-4B7E-9800-3CC6A3823AF5">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">CDB Resource Plans</a>"</span></p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71" name="GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71"></a><h5 id="ADMIN-GUID-6FE5FE9E-2C8F-4F83-9F86-57AE74920A71" class="sect5"><span class="enumeration_section">46.8.1.3 </span>Managing CDB Resource Plan Directives for a PDB Performance Profile
                     </h5>
                     <div>
                        <p>You can create, update, and delete CDB resource plan directives for a PDB performance profile. </p>
                     </div>
                     <div>
                        <ul class="ullinks">
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D">Creating New CDB Resource Plan Directives for a PDB Performance Profile</a><br>You can create a CDB resource plan directive for the a new PDB performance profile using the <code class="codeph">CREATE_CDB_PROFILE_DIRECTIVE</code> procedure. The directive specifies how resources are allocated to the all PDBs that use the new profile.
                           </li>
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91">Updating CDB Resource Plan Directives for a PDB Performance Profile</a><br>You can update the CDB resource plan directive for a PDB performance profile using the <code class="codeph">UPDATE_CDB_PROFILE_DIRECTIVE</code> procedure. The directive specifies how resources are allocated to the PDBs that use the PDB performance profile.
                           </li>
                           <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740">Deleting CDB Resource Plan Directives for a PDB Performance Profile</a><br>You can delete the CDB resource plan directive for a PDB performance profile using the <code class="codeph">DELETE_CDB_PROFILE_DIRECTIVE</code> procedure.
                           </li>
                        </ul>
                     </div>
                     
                     <div class="props_rev_3"><a id="GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D" name="GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D"></a><h6 id="ADMIN-GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D" class="sect6"><span class="enumeration_section">46.8.1.3.1 </span>Creating New CDB Resource Plan Directives for a PDB Performance Profile
                        </h6>
                        <div>
                           <p>You can create a CDB resource plan directive for the a new PDB performance profile using the <code class="codeph">CREATE_CDB_PROFILE_DIRECTIVE</code> procedure. The directive specifies how resources are allocated to the all PDBs that use the new profile.
                           </p>
                           <div class="section">
                              <p>Before creating a new CDB resource plan directive for a PDB performance profile, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" title="You must meet prerequisites before using Resource Manager with a CDB.">Prerequisites for Using Resource Manager with a CDB</a>"</span>.
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p>To create a new CDB resource plan directive for a PDB performance profile:</p>
                              <ol>
                                 <li>
                                    <p>In SQL*Plus, ensure that the current container is the root.</p>
                                    <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Create a pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</pre></li>
                                 <li>
                                    <p>Run the <code class="codeph">CREATE_CDB_PROFILE_DIRECTIVE</code> procedure, and specify the appropriate values for the new PDB performance profile.
                                    </p>
                                    <p>For example, the following procedure allocates resources to a PDB performance profile named <code class="codeph">copper</code> in the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                    </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.CREATE_CDB_PROFILE_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    profile               =&gt; 'copper', 
    shares                =&gt; 1, 
    utilization_limit     =&gt; 20,
    parallel_server_limit =&gt; 30);
END;
/
</pre></li>
                                 <li>
                                    <p>Validate the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</pre></li>
                                 <li>
                                    <p>Submit the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</pre></li>
                              </ol>
                              <div class="infoboxnote" id="GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D__GUID-F8FC639F-008F-4319-9202-C74B38EA1AC3">
                                 <p class="notep1">Note:</p>For a PDB to use the new profile, the PDB must have the <code class="codeph">DB_PERFORMANCE_PROFILE</code> initialization parameter set to the profile name. 
                              </div>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <div class="infoboxnotealso" id="GUID-4ED728D1-E342-4791-A5EC-6A21FFCCA91D__GUID-99D4A9C7-DEAF-4FEE-A287-7D0E7B7E8454">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">CDB Resource Plans</a>"</span></p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91" name="GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91"></a><h6 id="ADMIN-GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91" class="sect6"><span class="enumeration_section">46.8.1.3.2 </span>Updating CDB Resource Plan Directives for a PDB Performance Profile
                        </h6>
                        <div>
                           <p>You can update the CDB resource plan directive for a PDB performance profile using the <code class="codeph">UPDATE_CDB_PROFILE_DIRECTIVE</code> procedure. The directive specifies how resources are allocated to the PDBs that use the PDB performance profile.
                           </p>
                           <div class="section">
                              <p>Before updating a CDB resource plan directive for a PDB performance profile, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" title="You must meet prerequisites before using Resource Manager with a CDB.">Prerequisites for Using Resource Manager with a CDB</a>"</span>.
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p>To update a CDB resource plan directive for a PDB performance profile:</p>
                              <ol>
                                 <li>
                                    <p>In SQL*Plus, ensure that the current container is the root.</p>
                                    <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Create a pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</pre></li>
                                 <li>
                                    <p>Run the <code class="codeph">UPDATE_CDB_PROFILE_DIRECTIVE</code> procedure, and specify the new resource allocation values for the PDB performance profile.
                                    </p>
                                    <p>For example, the following procedure updates the resource allocation for a PDB performance profile named <code class="codeph">copper</code> in the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                    </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.UPDATE_CDB_PROFILE_DIRECTIVE(
    plan                      =&gt; 'newcdb_plan', 
    profile                   =&gt; 'copper', 
    new_shares                =&gt; 1, 
    new_utilization_limit     =&gt; 10,
    new_parallel_server_limit =&gt; 20);
END;
/
</pre></li>
                                 <li>
                                    <p>Validate the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</pre></li>
                                 <li>
                                    <p>Submit the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <div class="infoboxnotealso" id="GUID-9363AB6A-247B-4635-A914-5E8F6E84CD91__GUID-01B9F722-B565-4FE4-93DC-6C9BDFDAB931">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">CDB Resource Plans</a>"</span></p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740" name="GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740"></a><h6 id="ADMIN-GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740" class="sect6"><span class="enumeration_section">46.8.1.3.3 </span>Deleting CDB Resource Plan Directives for a PDB Performance Profile
                        </h6>
                        <div>
                           <p>You can delete the CDB resource plan directive for a PDB performance profile using the <code class="codeph">DELETE_CDB_PROFILE_DIRECTIVE</code> procedure.
                           </p>
                           <div class="section">
                              <p>You might delete the directive for a PDB performance profile if no PDBs use the profile.</p>
                              <p>Before deleting a CDB resource plan directive for a PDB performance profile, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" title="You must meet prerequisites before using Resource Manager with a CDB.">Prerequisites for Using Resource Manager with a CDB</a>"</span>.
                              </p>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <p class="subhead3">To delete a CDB resource plan directive for a PDB performance profile:</p>
                              <ol>
                                 <li>
                                    <p>In SQL*Plus, ensure that the current container is the root.</p>
                                    <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>"</span>.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Create a pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</pre></li>
                                 <li>
                                    <p>Run the <code class="codeph">DELETE_CDB_PROFILE_DIRECTIVE</code> procedure, and specify the CDB resource plan and the PDB performance profile.
                                    </p>
                                    <p>For example, the following procedure deletes the directive for a PDB named <code class="codeph">operpdb</code> in the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                    </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.DELETE_CDB_PLAN_DIRECTIVE(
    plan    =&gt; 'newcdb_plan', 
    profile =&gt; 'operpdb');
END;
/
</pre></li>
                                 <li>
                                    <p>Validate the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</pre></li>
                                 <li>
                                    <p>Submit the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</pre></li>
                              </ol>
                           </div>
                           <!-- class="section" -->
                           <div class="section">
                              <div class="infoboxnotealso" id="GUID-BEBAEDB2-C5E7-4B91-A68C-1A27AC770740__GUID-2DAC6ADA-8ECC-4B7E-9800-3CC6A3823AF5">
                                 <p class="notep1">See Also:</p>
                                 <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">CDB Resource Plans</a>"</span></p>
                              </div>
                           </div>
                           <!-- class="section" -->
                        </div>
                     </div>
                  </div><a id="ADMIN13827"></a><div class="props_rev_3"><a id="GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD" name="GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD"></a><h5 id="ADMIN-GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD" class="sect5"><span class="enumeration_section">46.8.1.4 </span>Updating the Default Directive for PDBs in a CDB Resource Plan
                     </h5>
                     <div>
                        <p>You can update the default directive for PDBs in a CDB resource plan using the <code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code> procedure. The default directive applies to PDBs for which specific directives have not been defined.
                        </p>
                        <div class="section">
                           <p>See <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" title="When you do not explicitly define directives for a PDB, the PDB uses the default directive for PDBs.">The Default Directive for PDBs</a>"</span> for more information.
                           </p>
                           <p>Before updating the default directive for PDBs in a CDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" title="You must meet prerequisites before using Resource Manager with a CDB.">Prerequisites for Using Resource Manager with a CDB</a>"</span>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3">To update the default directive for PDBs in a CDB resource plan:</p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus, ensure that the current container is the root.</p>
                                 <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Create a pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</pre></li>
                              <li>
                                 <p>Run the <code class="codeph">UPDATE_CDB_DEFAULT_DIRECTIVE</code> procedure, and specify the appropriate default resource allocation values.
                                 </p>
                                 <p>For example, the following procedure updates the default directive for PDBs in the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                 </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.UPDATE_CDB_DEFAULT_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    new_shares            =&gt; 2, 
    new_utilization_limit =&gt; 40);
END;
/
</pre></li>
                              <li>
                                 <p>Validate the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</pre></li>
                              <li>
                                 <p>Submit the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-98B4BC74-D86C-4084-9436-BE4440ED15DD__GUID-89D30DBF-2D08-4785-AAA6-6C834A6C071B">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">CDB Resource Plans</a>"</span></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMIN13829"></a><div class="props_rev_3"><a id="GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0" name="GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0"></a><h5 id="ADMIN-GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0" class="sect5"><span class="enumeration_section">46.8.1.5 </span>Updating the Default Directive for Maintenance Tasks in a CDB Resource Plan
                     </h5>
                     <div>
                        <p>You can update the autotask directive in a CDB resource plan using the <code class="codeph">UPDATE_CDB_AUTOTASK_DIRECTIVE</code> procedure. The autotask directive applies to automatic maintenance tasks that are run in the root maintenance window.
                        </p>
                        <div class="section">
                           <p>Before updating the default directive for maintenance tasks in a CDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" title="You must meet prerequisites before using Resource Manager with a CDB.">Prerequisites for Using Resource Manager with a CDB</a>"</span>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3">To update the autotask directive for maintenance tasks in a CDB resource plan:</p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus, ensure that the current container is the root.</p>
                                 <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Create a pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</pre></li>
                              <li>
                                 <p>Run the <code class="codeph">UPDATE_CDB_AUTOTASK_DIRECTIVE</code> procedure, and specify the appropriate autotask resource allocation values.
                                 </p>
                                 <p>For example, the following procedure updates the autotask directive for maintenance tasks in the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                 </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.UPDATE_CDB_AUTOTASK_DIRECTIVE(
    plan                  =&gt; 'newcdb_plan', 
    new_shares            =&gt; 2, 
    new_utilization_limit =&gt; 60);
END;
/
</pre></li>
                              <li>
                                 <p>Validate the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</pre></li>
                              <li>
                                 <p>Submit the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-F848B54D-46BE-4F39-8C30-0B47EC34C4B0__GUID-97E3869B-F4C9-41C6-9652-13FACF286525">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">CDB Resource Plans</a>"</span></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="ADMIN13825"></a><div class="props_rev_3"><a id="GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB" name="GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB"></a><h5 id="ADMIN-GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB" class="sect5"><span class="enumeration_section">46.8.1.6 </span>Deleting a CDB Resource Plan
                     </h5>
                     <div>
                        <p>You can delete a CDB resource plan using the <code class="codeph">DELETE_CDB_PLAN</code> procedure.
                        </p>
                        <div class="section">
                           <p>The resource plan must be disabled. You might delete a CDB resource plan if the plan is no longer needed. You can enable a different CDB resource plan, or you can disable Resource Manager for the CDB.</p>
                           <p>Before deleting a CDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" title="You must meet prerequisites before using Resource Manager with a CDB.">Prerequisites for Using Resource Manager with a CDB</a>"</span>.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3">To delete a CDB resource plan:</p>
                           <ol>
                              <li>
                                 <p>In SQL*Plus, ensure that the current container is the root.</p>
                                 <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">Accessing a Container in a CDB with SQL*Plus</a>"</span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Create a pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</pre></li>
                              <li>
                                 <p>Run the <code class="codeph">DELETE_CDB_PLAN</code> procedure, and specify the CDB resource plan.
                                 </p>
                                 <p>For example, the following procedure deletes the <code class="codeph">newcdb_plan</code> CDB resource plan:
                                 </p><pre class="oac_no_warn" dir="ltr">BEGIN
  DBMS_RESOURCE_MANAGER.DELETE_CDB_PLAN(
    plan =&gt; 'newcdb_plan');
END;
/
</pre></li>
                              <li>
                                 <p>Validate the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</pre></li>
                              <li>
                                 <p>Submit the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</pre></li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-5BBA5044-5BD8-4C79-9D3E-1168F90E68CB__GUID-784F2FE3-7890-472F-AF92-C51B9C9DDDA7">
                              <p class="notep1">See Also:</p>
                              <p></p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">CDB Resource Plans</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E05500C-C8C0-4E99-B753-133515175437" title="You enable the Resource Manager for a CDB by setting the RESOURCE_MANAGER_PLAN initialization parameter in the root.">Enabling a CDB Resource Plan</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-F15E72CD-97A0-4AA8-B5B3-BDDE3F92F386" title="You disable the Resource Manager for a CDB by unsetting the RESOURCE_MANAGER_PLAN initialization parameter in the root.">Disabling a CDB Resource Plan</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="ADMIN13831"></a><div class="props_rev_3"><a id="GUID-ACF0635C-2642-48C3-8484-245826F16F31" name="GUID-ACF0635C-2642-48C3-8484-245826F16F31"></a><h4 id="ADMIN-GUID-ACF0635C-2642-48C3-8484-245826F16F31" class="sect4"><span class="enumeration_section">46.8.2 </span>Modifying a PDB Resource Plan
                  </h4>
                  <div>
                     <p>You can use the <code class="codeph">DBMS_RESOURCE_MANAGER</code> package to modify a PDB resource plan in the same way you would modify the resource plan for a non-CDB.
                     </p>
                     <div class="section">
                        <p>Before modifying a PDB resource plan, complete the prerequisites described in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-5BBC8793-8180-4EA4-8AA3-E213D070FB5B" title="You must meet prerequisites before using Resource Manager with a CDB.">Prerequisites for Using Resource Manager with a CDB</a>"</span>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To modify a PDB resource plan:</p>
                        <ol>
                           <li>
                              <p>In SQL*Plus, ensure that the current container is a PDB.</p>
                              <p>See <span class="q">"<a href="administering-a-cdb-with-sql-plus.html#GUID-D75CAF12-1073-40DB-B096-51B63E4C01E3" title="You can use SQL*Plus to access the root or a PDB in a CDB. You can connect to a container by using the SQL*Plus CONNECT command, or you can switch into a container with an ALTER SESSION SET CONTAINER SQL statement.">About Accessing a Container in a CDB with SQL*Plus</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>Create a pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.CREATE_PENDING_AREA();
</pre></li>
                           <li>
                              <p>Modify the PDB resource plan by completing one or more of the following tasks:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>Update a consumer group using the <code class="codeph">UPDATE_CONSUMER_GROUP</code> procedure.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Delete a consumer group using the <code class="codeph">DELETE_CONSUMER_GROUP</code> procedure.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Update a resource plan using the <code class="codeph">UPDATE_PLAN</code> procedure.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Delete a resource plan using the <code class="codeph">DELETE_PLAN</code> procedure.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Update a resource plan directive using the <code class="codeph">UPDATE_PLAN_DIRECTIVE</code> procedure.
                                    </p>
                                 </li>
                                 <li>
                                    <p>Delete a resource plan directive using the <code class="codeph">DELETE_PLAN_DIRECTIVE</code> procedure.
                                    </p>
                                 </li>
                              </ul>
                              <p>See <span class="q">"<a href="managing-resources-with-oracle-database-resource-manager.html#GUID-86F4CE3C-3B5C-41D6-A50D-E965E13C1408" title="You can maintain consumer groups, resource plans, and resource plan directives for Oracle Database Resource Manager (the Resource Manager). You perform maintenance tasks using the DBMS_RESOURCE_MANAGER PL/SQL package.">Maintaining Consumer Groups, Plans, and Directives</a>"</span> for instructions about completing these tasks.
                              </p>
                           </li>
                           <li>
                              <p>Validate the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.VALIDATE_PENDING_AREA();
</pre></li>
                           <li>
                              <p>Submit the pending area:</p><pre class="oac_no_warn" dir="ltr">exec DBMS_RESOURCE_MANAGER.SUBMIT_PENDING_AREA();
</pre></li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-ACF0635C-2642-48C3-8484-245826F16F31__GUID-2FD844FB-F79F-428E-B02D-BCA15329DBCC">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-A6BA104E-5B27-4957-AF8B-11FDCEC5DB17" title="A CDB resource plan determines the amount of resources allocated to each PDB. A PDB resource plan determines how the resources allocated to a specific PDB are allocated to consumer groups within that PDB.">PDB Resource Plans</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="ADMIN13833"></a><div class="props_rev_3"><a id="GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172" name="GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172"></a><h3 id="ADMIN-GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172" class="sect3"><span class="enumeration_section">46.9 </span>Viewing Information About Plans and Directives in a CDB
               </h3>
               <div>
                  <p>You can view information about CDB resource plans, CDB resource plan directives, and predefined resource plans in a CDB.</p>
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-D9CBC576-4C49-4C47-9328-937E81409C0D">Viewing CDB Resource Plans</a><br>An example illustrates using the <code class="codeph">DBA_CDB_RSRC_PLANS</code> view to display all of the CDB resource plans defined in the CDB.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-E89C4503-9DAB-4600-B406-01AAC01F4734">Viewing CDB Resource Plan Directives</a><br>An example illustrates using the <code class="codeph">DBA_CDB_RSRC_PLAN_DIRECTIVES</code> view to display all of the directives defined in all of the CDB resource plans in the CDB.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-56FC5591-F114-40CC-ADE9-D4562F4B1172__GUID-E5A9CF45-8772-45D3-B46A-3DFE5DC35800">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="managing-resources-with-oracle-database-resource-manager.html#GUID-9CF57A7E-CCE3-4F80-9E21-29AF9B2283F0" title="A set of dynamic performance views enable you to monitor the results of your Oracle Database Resource Manager settings.">Monitoring Oracle Database Resource Manager</a>"</span></p>
                  </div>
               </div>
               <a id="ADMIN13834"></a><div class="props_rev_3"><a id="GUID-D9CBC576-4C49-4C47-9328-937E81409C0D" name="GUID-D9CBC576-4C49-4C47-9328-937E81409C0D"></a><h4 id="ADMIN-GUID-D9CBC576-4C49-4C47-9328-937E81409C0D" class="sect4"><span class="enumeration_section">46.9.1 </span>Viewing CDB Resource Plans
                  </h4>
                  <div>
                     <p>An example illustrates using the <code class="codeph">DBA_CDB_RSRC_PLANS</code> view to display all of the CDB resource plans defined in the CDB.
                     </p>
                     <div class="section">
                        <p>Run the following query in the root:</p><pre class="oac_no_warn" dir="ltr">COLUMN PLAN FORMAT A30
COLUMN STATUS FORMAT A10
COLUMN COMMENTS FORMAT A35
 
SELECT PLAN, STATUS, COMMENTS FROM DBA_CDB_RSRC_PLANS ORDER BY PLAN;
</pre><p>Your output looks similar to the following:</p><pre class="oac_no_warn" dir="ltr">PLAN                           STATUS     COMMENTS
------------------------------ ---------- -----------------------------------
DEFAULT_CDB_PLAN                          Default CDB plan
DEFAULT_MAINTENANCE_PLAN                  Default CDB maintenance plan
NEWCDB_PLAN                               CDB plan for PDBs in newcdb
ORA$INTERNAL_CDB_PLAN                     Internal CDB plan
</pre><p>The <code class="codeph">DEFAULT_CDB_PLAN</code> is a default CDB plan that is supplied with Oracle Database. You can use this default plan if it meets your requirements.
                        </p>
                        <div class="infoboxnote" id="GUID-D9CBC576-4C49-4C47-9328-937E81409C0D__GUID-9EC6EFBA-B90B-42B9-8376-0D38D88BD4F2">
                           <p class="notep1">Note:</p>
                           <p>Plans in the pending area have a status of <code class="codeph">PENDING</code>. Plans in the pending area are being edited. Any plan that is not in the pending area has a <code class="codeph">NULL</code> status.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-D9CBC576-4C49-4C47-9328-937E81409C0D__GUID-81E80ABD-1851-4811-8538-830AB6439030">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">CDB Resource Plans</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ADMIN13835"></a><div class="props_rev_3"><a id="GUID-E89C4503-9DAB-4600-B406-01AAC01F4734" name="GUID-E89C4503-9DAB-4600-B406-01AAC01F4734"></a><h4 id="ADMIN-GUID-E89C4503-9DAB-4600-B406-01AAC01F4734" class="sect4"><span class="enumeration_section">46.9.2 </span>Viewing CDB Resource Plan Directives
                  </h4>
                  <div>
                     <p>An example illustrates using the <code class="codeph">DBA_CDB_RSRC_PLAN_DIRECTIVES</code> view to display all of the directives defined in all of the CDB resource plans in the CDB.
                     </p>
                     <div class="section">
                        <p>Run the following query in the root:</p><pre class="oac_no_warn" dir="ltr">COLUMN PLAN HEADING 'Plan' FORMAT A11
COLUMN PLUGGABLE_DATABASE HEADING 'Pluggable|Database' FORMAT A13
COLUMN SHARES HEADING 'Shares' FORMAT 999
COLUMN UTILIZATION_LIMIT HEADING 'Utilization|Limit' FORMAT 999
COLUMN PARALLEL_SERVER_LIMIT HEADING 'Parallel|Server|Limit' FORMAT 999
 
SELECT PLAN, 
       PLUGGABLE_DATABASE, 
       SHARES, 
       UTILIZATION_LIMIT,
       PARALLEL_SERVER_LIMIT
  FROM DBA_CDB_RSRC_PLAN_DIRECTIVES
  ORDER BY PLAN;
</pre><p>Your output looks similar to the following: </p><pre class="oac_no_warn" dir="ltr">                                             Parallel  
            Pluggable            Utilization   Server 
Plan        Database      Shares       Limit    Limit  
----------- ------------- ------ ----------- -------- 
DEFAULT_CDB ORA$DEFAULT_P      1         100      100
_PLAN       DB_DIRECTIVE
DEFAULT_CDB ORA$AUTOTASK                  90      100
_PLAN
DEFAULT_MAI ORA$AUTOTASK                  90      100
NTENANCE_PL
AN
DEFAULT_MAI ORA$DEFAULT_P      1         100      100
NTENANCE_PL DB_DIRECTIVE
AN
NEWCDB_PLAN HRPDB              1          70       70 
NEWCDB_PLAN SALESPDB           3         100      100  
NEWCDB_PLAN ORA$DEFAULT_P      1          50       50   
            DB_DIRECTIVE
NEWCDB_PLAN ORA$AUTOTASK       1          75       75    
NEWCDB_PLAN SERVICESPDB        3         100      100   
</pre><p>The <code class="codeph">DEFAULT_CDB_PLAN</code> is a default CDB plan that is supplied with Oracle Database. You can use this default plan if it meets your requirements.
                        </p>
                        <p>This output shows the directives for the <code class="codeph">newcdb_plan</code> created in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-36E58D2B-2873-4ED1-B042-624DB42A5C8E" title="A scenario illustrates each of the steps involved in creating a CDB resource plan for individual PDBs.">Creating a CDB Resource Plan: A Scenario</a>"</span> and modified in <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-DDEA2C3E-DE9E-4EAA-9C3B-998B1E440697" title="Managing a CDB resource plan includes tasks such as updating the plan, creating, updating, or deleting plan directives for PDBs, and updating default directives.">Managing a CDB Resource Plan</a>"</span>.
                        </p>
                        <div class="infoboxnote" id="GUID-E89C4503-9DAB-4600-B406-01AAC01F4734__GUID-FCC91CFC-47DA-4618-862B-6F748C840CB2">
                           <p class="notep1">Note:</p>
                           <p>The <code class="codeph">ORA$DEFAULT_PDB_DIRECTIVE</code> is the default directive for PDBs. See <span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-3E84009E-5CD6-46B8-84D3-BE775D58D9AA" title="When you do not explicitly define directives for a PDB, the PDB uses the default directive for PDBs.">The Default Directive for PDBs</a>"</span>.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-E89C4503-9DAB-4600-B406-01AAC01F4734__GUID-6B8D4EEE-5B1E-408F-BD76-089A6C113F90">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-075BDB11-8B9D-4061-98F6-8D4F07E3AB6D" title="In a CDB, PDBs might have different levels of priority. You can create CDB resource plans to distribute resources to different PDBs based on these priorities.">CDB Resource Plans</a>"</span></p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A" name="GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A"></a><h3 id="ADMIN-GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A" class="sect3"><span class="enumeration_section">46.10 </span>Monitoring PDBs Managed by Oracle Database Resource Manager
               </h3>
               <div>
                  <p>A set of dynamic performance views enables you to monitor the results of your Oracle Database Resource Manager settings for PDBs.</p>
                  <div class="section">
                     <p>Use the following dynamic performance views to help you monitor the results of your Oracle Database Resource Manager settings for PDBs:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">V$RSRCPDBMETRIC</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">V$RSRCPDBMETRIC_HISTORY</code></p>
                        </li>
                     </ul>
                     <p>The <code class="codeph">V$RSRCPDBMETRIC</code> view provides current statistics on resource consumption for PDBs, including CPU usage, parallel execution, I/O generated, and memory usage.
                     </p>
                     <p>In addition, historical statistics are available through the <code class="codeph">DBA_HIST_RSRC_PDB_METRIC</code> view, which contains Automatic Workload Repository (AWR) snapshots.
                     </p>
                     <p>The columns in the <code class="codeph">V$RSRCPDBMETRIC_HISTORY</code> view are the same as the columns in the <code class="codeph">V$RSRCPDBMETRIC</code> view. The only difference between these views is that the <code class="codeph">V$RSRCPDBMETRIC</code> view contains metrics for the past one minute only, whereas the <code class="codeph">V$RSRCPDBMETRIC_HISTORY</code> view contains metrics for the last 60 minutes.
                     </p>
                     <div class="infoboxnote" id="GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A__GUID-430AABFE-858C-4042-B198-3245E0321BA6">
                        <p class="notep1">Note:</p>
                        <p>The <code class="codeph">V$RSRCPDBMETRIC</code> and <code class="codeph">V$RSRCPDBMETRIC_HISTORY</code> views record statistics for resources that are not currently being managed by Resource Manager when the <code class="codeph">STATISTICS_LEVEL</code> initialization parameter is set to <code class="codeph">ALL</code> or <code class="codeph">TYPICAL</code>.
                        </p>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B">Monitoring CPU Usage for PDBs</a><br>The <code class="codeph">V$RSRCPDBMETRIC</code> view enables you to track CPU metrics in milliseconds, in terms of number of sessions, or in terms of utilization for the past one minute. It provides real-time metrics for each PDB and is very useful in scenarios where you are running workloads and want to continuously monitor CPU resource utilization.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-2F8A8221-3B56-47D2-81C1-1D7A10CDF962">Monitoring Parallel Execution for PDBs</a><br>The <code class="codeph">V$RSRCPDBMETRIC</code> view enables you to track parallel statements and parallel server use for PDBs.
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-1739C9AC-7466-4810-A15A-9E59EE0EFB97">Monitoring the I/O Generated by PDBs</a><br>The <code class="codeph">V$RSRCPDBMETRIC</code> view enables you to track the amount of I/O generated by PDBs. 
                     </li>
                     <li class="ulchildlink"><a href="using-oracle-resource-manager-for-pdbs-with-sql-plus.html#GUID-93699AC3-9601-484E-A72A-11D1A716F853">Monitoring Memory Usage for PDBs</a><br>The <code class="codeph">V$RSRCPDBMETRIC</code> view enables you to track the amount memory used by PDBs.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-42E193E5-50D8-4B86-B489-AEA94FEC805A__GUID-C9ACD060-F7BA-4DB0-AD9C-54D4F9F4EBC3">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="../refrn/V-RSRCMGRMETRIC.html#REFRN-GUID-35F9BE03-3DCB-46FC-8D00-4BC5BCBBC443"><span><cite>Oracle Database Reference</cite></span></a></p>
                        </li>
                        <li>
                           <p><a href="../tgsql/monitoring-database-operations.html#TGSQL789"><span class="italic">Oracle Database SQL Tuning Guide</span></a> for more information about real-time SQL monitoring
                           </p>
                        </li>
                     </ul>
                     <p></p>
                  </div>
               </div>
               
               <div class="sect3"><a id="GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B" name="GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B"></a><h4 id="ADMIN-GUID-BFBB962E-D5CF-4CD7-B5A5-D6CA74DAA88B" class="sect4"><span class="enumeration_section">46.10.1 </span>Monitoring CPU Usage for PDBs
                  </h4>
                  <div>
                     <p>The <code class="codeph">V$RSRCPDBMETRIC</code> view enables you to track CPU metrics in milliseconds, in terms of number of sessions, or in terms of utilization for the past one minute. It provides real-time metrics for each PDB and is very useful in scenarios where you are running workloads and want to continuously monitor CPU resource utilization.
                     </p>
                     <div class="section">
                        <p>CPU usage for a PDB is managed with the active CDB resource plan of the PDB's CDB. You can use this view to compare the maximum possible CPU utilization and average CPU utilization percentage for PDBs with other PDB settings such as CPU time used, time waiting for CPU, average number of sessions that are consuming CPU, and number of sessions that are waiting for CPU allocation. For example, you can view the amount of CPU resources a PDB used and how long it waited for resource allocation. Or, you can view how many sessions from each PDB are executed against the total number of active sessions.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3"> Tracking CPU Consumption in Terms of CPU Utilization for PDBs</p>
                        <p>To track CPU consumption in terms of CPU utilization, use the <code class="codeph">CPU_UTILIZATION_LIMIT</code> and <code class="codeph">AVG_CPU_UTILIZATION</code> columns. <code class="codeph">AVG_CPU_UTILIZATION</code> lists the average percentage of the server's CPU that is consumed by a PDB. <code class="codeph">CPU_UTILIZATION_LIMIT</code> represents the maximum percentage of the server's CPU that a PDB can use. This limit is set using the <code class="codeph">UTILIZATION_LIMIT</code> directive attribute.
                        </p>
                        <p>The following query displays this information by showing the container ID (<code class="codeph">CON_ID</code>) and name of each PDB:
                        </p><pre class="oac_no_warn" dir="ltr">COLUMN PDB_NAME FORMAT A10

SELECT r.CON_ID, p.PDB_NAME, r.CPU_UTILIZATION_LIMIT, r.AVG_CPU_UTILIZATION 
   FROM V$RSRCPDBMETRIC r, CDB_PDBS p
   WHERE r.CON_ID = p.CON_ID;
</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Tracking CPU Consumption and Throttling for PDBs</p>
                        <p>Use the <code class="codeph">CPU_CONSUMED_TIME</code> and <code class="codeph">CPU_TIME_WAIT</code> columns to track CPU consumption and throttling in milliseconds for each PDB. The column <code class="codeph">NUM_CPUS</code> represents the number of CPUs that Resource Manager is managing.
                        </p>
                        <p>The following query displays this information by showing the container ID (<code class="codeph">CON_ID</code>) and name of each PDB:
                        </p><pre class="oac_no_warn" dir="ltr">COLUMN PDB_NAME FORMAT A10

SELECT r.CON_ID, p.PDB_NAME, r.CPU_CONSUMED_TIME, r.CPU_WAIT_TIME, r.NUM_CPUS 
   FROM V$RSRCPDBMETRIC r, CDB_PDBS p
   WHERE r.CON_ID = p.CON_ID;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Tracking CPU Consumption and Throttling in Terms of Number of Sessions for PDBs</p>
                        <p>To track the CPU consumption and throttling in terms of number of sessions, use the <code class="codeph">RUNNING_SESSIONS_LIMIT</code>, <code class="codeph">AVG_RUNNING_SESSIONS</code>, and <code class="codeph">AVG_WAITING_SESSIONS</code> columns. <code class="codeph">RUNNING_SESSIONS_LIMIT</code> lists the maximum number of sessions from a particular PDB that can be running at any time. This limit is defined by the <code class="codeph">UTILIZATION_LIMIT</code> directive attribute that you set for the PDB. <code class="codeph">AVG_RUNNING_SESSIONS</code> lists the average number of sessions that are consuming CPU, and <code class="codeph">AVG_WAITING_SESSIONS</code> lists the average number of sessions that are waiting for CPU.
                        </p>
                        <p>The following query displays this information by showing the container ID (<code class="codeph">CON_ID</code>) and name of each PDB:
                        </p><pre class="oac_no_warn" dir="ltr">COLUMN PDB_NAME FORMAT A10

SELECT r.CON_ID, p.PDB_NAME, r.RUNNING_SESSIONS_LIMIT, r.AVG_RUNNING_SESSIONS, r.AVG_WAITING_SESSIONS 
   FROM V$RSRCPDBMETRIC r, CDB_PDBS p
   WHERE r.CON_ID = p.CON_ID;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-2F8A8221-3B56-47D2-81C1-1D7A10CDF962" name="GUID-2F8A8221-3B56-47D2-81C1-1D7A10CDF962"></a><h4 id="ADMIN-GUID-2F8A8221-3B56-47D2-81C1-1D7A10CDF962" class="sect4"><span class="enumeration_section">46.10.2 </span>Monitoring Parallel Execution for PDBs
                  </h4>
                  <div>
                     <p>The <code class="codeph">V$RSRCPDBMETRIC</code> view enables you to track parallel statements and parallel server use for PDBs.
                     </p>
                     <div class="section">
                        <p>Parallel execution servers for a PDB are managed with the active CDB resource plan of the PDB's CDB. To track parallel statements and parallel server use for PDBs, use the <code class="codeph">AVG_ACTIVE_PARALLEL_STMTS</code>, <code class="codeph">AVG_QUEUED_PARALLEL_STMTS</code>, <code class="codeph">AVG_ACTIVE_PARALLEL_SERVERS</code>, <code class="codeph">AVG_QUEUED_PARALLEL_SERVERS</code>, and <code class="codeph">PARALLEL_SERVERS_LIMIT</code> columns.
                        </p>
                        <p><code class="codeph">AVG_ACTIVE_PARALLEL_STMTS</code> and <code class="codeph">AVG_ACTIVE_PARALLEL_SERVERS</code> list the average number of parallel statements running and the average number of parallel servers used by the parallel statements. <code class="codeph">AVG_QUEUED_PARALLEL_STMTS</code> and <code class="codeph">AVG_QUEUED_PARALLEL_SERVERS</code> list the average number of parallel statements queued and average number of parallel servers that were requested by queued parallel statements. <code class="codeph">PARALLEL_SERVERS_LIMIT</code> lists the number of parallel servers allowed to be used by the PDB.
                        </p>
                        <p>The following query displays this information by showing the container ID (<code class="codeph">CON_ID</code>) and name of each PDB:
                        </p><pre class="oac_no_warn" dir="ltr">COLUMN PDB_NAME FORMAT A10

SELECT r.CON_ID, p.PDB_NAME, r.AVG_ACTIVE_PARALLEL_STMTS, r.AVG_QUEUED_PARALLEL_STMTS, 
   r.AVG_ACTIVE_PARALLEL_SERVERS, r.AVG_QUEUED_PARALLEL_SERVERS, r.PARALLEL_SERVERS_LIMIT
   FROM V$RSRCPDBMETRIC r, CDB_PDBS p
   WHERE r.CON_ID = p.CON_ID;
</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-1739C9AC-7466-4810-A15A-9E59EE0EFB97" name="GUID-1739C9AC-7466-4810-A15A-9E59EE0EFB97"></a><h4 id="ADMIN-GUID-1739C9AC-7466-4810-A15A-9E59EE0EFB97" class="sect4"><span class="enumeration_section">46.10.3 </span>Monitoring the I/O Generated by PDBs
                  </h4>
                  <div>
                     <p>The <code class="codeph">V$RSRCPDBMETRIC</code> view enables you to track the amount of I/O generated by PDBs. 
                     </p>
                     <div class="section">
                        <p>I/O is limited for a PDB by setting the <code class="codeph">MAX_IOPS</code> initialization parameter or the <code class="codeph">MAX_MBPS</code> initialization parameter in the PDB. Use this view to compare the I/O generated by PDBs in terms of the number of operations each second and the number of megabytes each second.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Tracking the Number of I/O Operations Generated Each Second by PDBs</p>
                        <p>To track the I/O operations generated each second by PDBs during the previous minute, use the <code class="codeph">IOPS</code> column.
                        </p>
                        <p>The following query displays this information by showing the container ID (<code class="codeph">CON_ID</code>) and name of each PDB:
                        </p><pre class="oac_no_warn" dir="ltr">COLUMN PDB_NAME FORMAT A10

SELECT r.CON_ID, p.PDB_NAME, r.IOPS 
   FROM V$RSRCPDBMETRIC r, CDB_PDBS p
   WHERE r.CON_ID = p.CON_ID;
</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Tracking the Number Megabytes Generated for I/O Operations Each Second by PDBs</p>
                        <p>To track number of megabytes generated for I/O operations each second by PDBs during the previous minute, use the <code class="codeph">IOMBPS</code> column.
                        </p>
                        <p>The following query displays this information by showing the container ID (<code class="codeph">CON_ID</code>) and name of each PDB:
                        </p><pre class="oac_no_warn" dir="ltr">COLUMN PDB_NAME FORMAT A10

SELECT r.CON_ID, p.PDB_NAME, r.IOMBPS 
   FROM V$RSRCPDBMETRIC r, CDB_PDBS p
   WHERE r.CON_ID = p.CON_ID;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-93699AC3-9601-484E-A72A-11D1A716F853" name="GUID-93699AC3-9601-484E-A72A-11D1A716F853"></a><h4 id="ADMIN-GUID-93699AC3-9601-484E-A72A-11D1A716F853" class="sect4"><span class="enumeration_section">46.10.4 </span>Monitoring Memory Usage for PDBs
                  </h4>
                  <div>
                     <p>The <code class="codeph">V$RSRCPDBMETRIC</code> view enables you to track the amount memory used by PDBs.
                     </p>
                     <div class="section">
                        <p>Use this view to track the amount of SGA, PGA, buffer cache, and shared pool memory currently used by PDBs.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>To track the current memory usage, in bytes, for specific PDBs, use the <code class="codeph">SGA_BYTES</code>, <code class="codeph">PGA_BYTES</code>, <code class="codeph">BUFFER_CACHE_BYTES</code>, and <code class="codeph">SHARED_POOL_BYTES</code> columns.
                        </p>
                        <p>The following query displays this information by showing the container ID (<code class="codeph">CON_ID</code>) and name of each PDB:
                        </p><pre class="oac_no_warn" dir="ltr">COLUMN PDB_NAME FORMAT A10

SELECT r.CON_ID, p.PDB_NAME, r.SGA_BYTES, r.PGA_BYTES, r.BUFFER_CACHE_BYTES, r.SHARED_POOL_BYTES
   FROM V$RSRCPDBMETRIC r, CDB_PDBS p
   WHERE r.CON_ID = p.CON_ID;</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>