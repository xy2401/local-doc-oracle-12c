<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Follow these steps to clone an Oracle home.">
      <meta name="description" content="Follow these steps to clone an Oracle home.">
      <title>Cloning an Oracle Home</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Installation Guide ">
      <meta property="og:description" content="Follow these steps to clone an Oracle home.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Installation Guide for Microsoft Windows">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-installation-guide-microsoft-windows.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-03-14T05:43:33-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1996, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E85707-02">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="install-oracle-database.html" title="Previous" type="text/html">
      <link rel="next" href="oracle-database-postinstallation-tasks.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"12.2","element_name":"Release 12.2","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Database Installation Guide for Microsoft Windows">
    <meta name="dcterms.isVersionOf" content="NTDBI">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="install-oracle-database.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="oracle-database-postinstallation-tasks.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Installation Guide </span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="installing-oracle-database.html" property="item" typeof="WebPage"><span property="name"> Installing Oracle Database</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Cloning an Oracle Home</li>
            </ol>
            <a id="GUID-CBCE1594-C6C2-42A0-8FED-5D859B80E348" name="GUID-CBCE1594-C6C2-42A0-8FED-5D859B80E348"></a><a id="NTDBI2795"></a>
            
            <h2 id="NTDBI-GUID-CBCE1594-C6C2-42A0-8FED-5D859B80E348" class="sect2">Cloning an Oracle Home</h2>
         </header>
         <div class="ind">
            <div>
               <p>Follow these steps to clone an Oracle home.</p>
               <div class="section">
                  <div class="infoboxnote" id="GUID-CBCE1594-C6C2-42A0-8FED-5D859B80E348__GUID-D3C9E015-C829-42D7-B67C-B7CC6EB61DB1">
                     <p class="notep1">Note:</p>
                     <p>During cloning, Oracle Universal Installer (OUI) prompts you to run scripts that require root privileges.</p>
                  </div>
                  <ol>
                     <li>
                        <p>Verify that the installation of Oracle Database to clone is successful. </p>
                        <p>You can do this by reviewing the <code class="codeph">installActions</code><span class="italic"><code class="codeph">date_time</code></span><code class="codeph">.log</code> file for the installation session, which is typically located in the following directory: 
                        </p>
                        <p><code>C:\Program Files\Oracle\Inventory\logs</code></p>
                        <p>If you have installed patches, you can check their status by running the following commands at a command prompt:</p><pre class="oac_no_warn" dir="ltr">C:\<span class="italic"><code class="codeph">ORACLE_HOME</code></span>\OPatch&gt; set ORACLE_HOME=<span class="italic">ORACLE_HOME_using_patch</span>
C:\<span class="italic"><code class="codeph">ORACLE_HOME</code></span>\OPatch&gt; opatch lsinventory
</pre></li>
                     <li id="GUID-CBCE1594-C6C2-42A0-8FED-5D859B80E348__BABJEDHG">
                        <p>Stop all processes related to the Oracle home. </p>
                        <p>You can stop Oracle services by using one of the following methods: </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Oracle Administration Assistant for Windows</span>: From the <span class="bold">Start</span> menu, select <span class="bold">All Programs</span>, then <span class="bold">Oracle -</span> <span class="italic"><span class="bold">HOMENAME</span></span>, then <span class="bold">Configuration and Migration Tools</span>, then <span class="bold">Administrative Assistant for Windows</span>, then <span class="bold">Oracle Managed Objects</span>, then <span class="bold">Computers</span>, and then <span class="italic"><span class="bold"><code class="codeph">machine-name</code></span></span>. Select Databases, then right-click <span class="italic"><span class="bold"><code class="codeph">global database name</code></span></span>, select <span class="bold">Stop Service</span>.
                              </p>
                              <div class="infoboxnote" id="GUID-CBCE1594-C6C2-42A0-8FED-5D859B80E348__GUID-B5D3A27E-F5BA-4AA6-8A9D-3C2D2F87DE4E">
                                 <p class="notep1">Note:</p>
                                 <p>Choose Startup/Shutdown Options to control whether a database instance must be stopped along with the service.</p>
                              </div>
                           </li>
                           <li>
                              <p><span class="bold">Microsoft Windows Services utility</span>: From the <span class="bold">Start</span> menu, select <span class="bold">Control Panel</span>, then <span class="bold">Administrative Tools</span>, then <span class="bold">Services</span>. Right-click any service that begins with <span class="bold">Oracle</span>, and then from the menu, select <span class="bold">Stop</span>. 
                              </p>
                           </li>
                        </ul>
                     </li>
                     <li>
                        <p>Create a ZIP file with the Oracle home (but not Oracle base) directory. </p>
                        <p>For example, if the source Oracle installation is in <code>C:\app</code>\<span class="variable">username</span><code>\product\12.2.0\dbhome_1</code> you zip the <code class="codeph">dbhome_1</code> directory, leaving out the <code class="codeph">admin</code>, <code class="codeph">flash_recovery_area</code>, and <code class="codeph">oradata</code> directories that are under <code class="codeph">12.2.0</code>. These directories are created in the target installation later on when you create a new database there. 
                        </p>
                     </li>
                     <li id="GUID-CBCE1594-C6C2-42A0-8FED-5D859B80E348__BBAGCBIE">
                        <p>Copy the ZIP file to the root directory of the target computer. If you use File Transfer Protocol (FTP), then transfer the ZIP file in binary mode only.</p>
                     </li>
                     <li id="GUID-CBCE1594-C6C2-42A0-8FED-5D859B80E348__BBACDADJ">
                        <p>Extract the ZIP file contents, selecting the <span class="bold">Use folder names</span> option.
                        </p>
                     </li>
                     <li>
                        <p>Repeat steps 4 and 5 for each computer where you want to clone the Oracle home, unless the Oracle home is on a shared storage device.</p>
                     </li>
                     <li>
                        <p>In the source Oracle home, restart the services that you stopped in step 2. </p>
                     </li>
                     <li>
                        <p>On the target computer, <code class="codeph">cd</code> to the unzipped Oracle home directory, and perform the following steps: 
                        </p>
                        <ol type="a">
                           <li>
                              <p>Remove the <code class="codeph">*.ora</code> files that are present in unzipped <span class="italic"><code class="codeph">ORACLE_HOME</code></span><code class="codeph">\network\admin</code> directory, such as <code class="codeph">listener.ora</code>, <code class="codeph">sqlnet.ora</code>, and <code class="codeph">tnsnames.ora</code>.
                              </p>
                           </li>
                           <li>
                              <p>Delete unnecessary files from the unzipped Oracle home directory.</p>
                              <p>The unzipped Oracle home directory contains files that are relevant only to the source Oracle home. Remove the unnecessary files from the unzipped Oracle home in the <code class="codeph">log, crs/init, crf,</code> and <code class="codeph">cdata</code> directories. The following example shows how to remove these unnecessary files from the unzipped Oracle home directory: 
                              </p><pre class="oac_no_warn" dir="ltr">[grid_home]# cd copy_path
    [grid_home]# rm -rf host_name
    [grid_home]# rm -rf log/host_name
    [grid_home]# rm -rf gpnp/host_name
    [grid_home]# rm -rf find gpnp -type f -exec rm -f {} \;
       c:\&lt;Gridhome&gt; c:\mksnt\find gpnp -type f and delete these files.
       gpnp/init/host_name
       gpnp/init/host_name.pid
	       gpnp/profiles/peer/profile.xml
       gpnp/profiles/peer/profile_orig.xml
       gpnp/host_name/profiles/peer/profile.old
       gpnp/host_name/profiles/peer/profile.xml
					       gpnp/host_name/profiles/peer/profile_orig.xml
       gpnp/host_name/wallets/pa/cwallet.sso
       gpnp/host_name/wallets/peer/cwallet.sso
       gpnp/host_name/wallets/prdr/cwallet.sso
       gpnp/host_name/wallets/root/ewallet.p12
       gpnp/wallets/pa/cwallet.sso
       gpnp/wallets/peer/cwallet.sso
       gpnp/wallets/prdr/cwallet.sso
       gpnp/wallets/roor/ewallet.p12

    [grid_home]# find cfgtoollogs -type f -exec rm -f {} \;
    [grid_home]# rm -rf crs/init/*
[grid_home]# rm -rf cdata/*
[grid_home]# rm -rf crf/*
[grid_home]# rm -rf network/admin/*.ora
</pre></li>
                        </ol>
                     </li>
                     <li>
                        <p>From the <code>ORACLE_HOME\clone\bin</code> directory, run <code class="codeph">clone.pl</code> for the unzipped Oracle home. 
                        </p>
                        <p>Use the following syntax:</p><pre class="oac_no_warn" dir="ltr">C:\ORACLE_HOME\clone\bin&gt;<span class="italic"><code class="codeph">target_home</code></span>\perl\bin\perl.exe clone.pl
ORACLE_HOME="<span class="italic">target location</span>" <span class="italic">ORACLE_BASE</span>="<span class="italic">target Base location</span>" <span class="italic"><code class="codeph">ORACLE_HOME_USER</code></span>="Windows User Account" OSDBA_GROUP=OSDBA_privileged_group
OSOPER_GROUP=OSOPER_privileged_group OSBACKUPDBA_GROUP=OSBACKUPDBA_privileged_group OSRACDBA_GROUP=OSRACDBA_privileged_group -defaultHomeName 
</pre><p>where <span class="italic"><code class="codeph">ORACLE_HOME_USER="Windows User Account"</code></span> is the Oracle Home User for the cloned home.
                        </p>
                        <p>Windows Built-in Account is used as the Oracle Home User if the parameter for  <span class="italic"><code class="codeph">ORACLE_HOME_USER</code></span> is not specified. 
                        </p>
                        <p>For example:</p><pre class="oac_no_warn" dir="ltr">C:\ORACLE_HOME\clone\bin&gt;<span class="italic"><code class="codeph">target_home</code></span>\perl\bin\perl.exe clone.pl 
 
ORACLE_HOME="C:\app\username\product\12.2.0\dbhome_1" 
ORACLE_BASE="C:\app\username"
ORACLE_HOME_USER="mydomain\username" -defaultHomeName
OSDBA_GROUP=dba OSOPER_GROUP=oper OSBACKUPDBA_GROUP=backupdba OSRACDBAGROUP=racdba -defaultHomeName
</pre><p>Oracle Universal Installer starts, and then records the cloning actions in the <code class="codeph">cloneActions</code><span class="italic"><code class="codeph">timestamp</code></span><code class="codeph">.log</code> file. This log file is normally located in <code class="codeph">C:\Program Files\Oracle\Inventory\logs</code>.
                        </p>
                        <div class="infoboxnote" id="GUID-CBCE1594-C6C2-42A0-8FED-5D859B80E348__GUID-AB6DE116-AE16-4716-A8C4-A4FC651DAD1C">
                           <p class="notep1">Note:</p>
                           <p>Run <code class="codeph">\ORACLE_HOME\clone\bin&gt;</code><span class="italic"><code class="codeph">target_home</code></span><code class="codeph">\perl\bin\perl.exe clone.pl -help</code> command for more information about the command option flags.
                           </p>
                        </div>
                     </li>
                     <li>
                        <p>To configure connection information for the new database, run Net Configuration Assistant.</p>
                        <p>To start Net Configuration Assistant, select <span class="bold">Start</span>, then <span class="bold">All Programs</span>, then <span class="bold">Oracle -</span> <span class="italic"><span class="bold">HOMENAME</span></span>, then <span class="bold">Configuration and Migration Tools</span>, and then <span class="bold">Net Configuration Assistant</span>. 
                        </p>
                     </li>
                     <li>
                        <p>To create a new database for the newly cloned Oracle home, run Oracle Database Configuration Assistant.</p>
                        <p>To start Oracle Database Configuration Assistant, select <span class="bold">Start</span>, then <span class="bold">All Programs</span>, then <span class="bold">Oracle -</span> <span class="italic"><span class="bold">HOMENAME</span></span>, then <span class="bold">Configuration and Migration Tools</span>, and then <span class="bold">Database Configuration Assistant</span>. 
                        </p>
                     </li>
                  </ol>
                  <div class="infoboxnotealso" id="GUID-CBCE1594-C6C2-42A0-8FED-5D859B80E348__GUID-A1192132-1CFD-453C-AD65-80ED37B9EDC2">
                     <p class="notep1">See Also:</p>
                     <p> </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/ntdbi&amp;id=ADMIN14023"><span class="italic">Oracle Database Administrator's Guide</span></a> 
                           </p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/ntdbi&amp;id=OUICG238"><span class="italic">Oracle Universal Installer and OPatch User's Guide for Windows and UNIX</span></a> 
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <!-- class="section" -->
            </div>
            <div>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="cloning-an-oracle-home.html#GUID-34181CDA-BCE6-41C5-8786-85F20AB65330">Configuring Oracle Configuration Manager in a Cloned Oracle Home</a><br>Configuring Oracle Configuration Manager for a cloned Oracle home depends on its configuration in the original Oracle home.
                  </li>
               </ul>
            </div>
            <a id="NTDBI7536"></a><div class="props_rev_3"><a id="GUID-34181CDA-BCE6-41C5-8786-85F20AB65330" name="GUID-34181CDA-BCE6-41C5-8786-85F20AB65330"></a><h3 id="NTDBI-GUID-34181CDA-BCE6-41C5-8786-85F20AB65330" class="sect3">Configuring Oracle Configuration Manager in a Cloned Oracle Home</h3>
               <div>
                  <p>Configuring Oracle Configuration Manager for a cloned Oracle home depends on its configuration in the original Oracle home.</p>
                  <div class="section">
                     <p>If you have already installed but not configured Oracle Configuration Manager in the original Oracle home, then follow these steps:</p>
                     <ol>
                        <li>
                           <p>Run the following commands from the cloned Oracle home:</p><pre class="oac_no_warn" dir="ltr"><span class="italic">DRIVE_LETTER:</span>\&gt; cd %<span class="italic">ORACLE_HOME</span>%\ccr\bin
<span class="italic">DRIVE_LETTER:</span>\&gt; setupCCR
</pre></li>
                        <li>
                           <p>Provide your My Oracle Support credentials to proceed.</p>
                        </li>
                     </ol>
                     <p>If you have already configured Oracle Configuration Manager in the original Oracle home, then follow these steps:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Run the following commands from the cloned Oracle home:</span><div><pre class="oac_no_warn" dir="ltr"><span class="italic">DRIVE_LETTER:</span>\&gt; cd %<span class="italic">ORACLE_HOME</span>%\ccr\bin
<span class="italic">DRIVE_LETTER:</span>\&gt; deriveCCR
</pre></div>
                     </li>
                     <li class="stepexpand"><span><code class="codeph">deriveCCR</code> prompts for your My Oracle Support (MOS) credentials to proceed only if it cannot find the original configuration; otherwise it does not prompt.</span></li>
                  </ol>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>