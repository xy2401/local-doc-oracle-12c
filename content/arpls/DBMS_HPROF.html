<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The DBMS_HPROF package provides an interface for profiling the execution of PL/SQL applications. It provides services for collecting the hierarchical profiler data, analyzing the raw profiler output and profiling information generation.">
      <meta name="description" content="The DBMS_HPROF package provides an interface for profiling the execution of PL/SQL applications. It provides services for collecting the hierarchical profiler data, analyzing the raw profiler output and profiling information generation.">
      <title>DBMS_HPROF</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database PL/SQL Packages and Types Reference">
      <meta property="og:description" content="The DBMS_HPROF package provides an interface for profiling the execution of PL/SQL applications. It provides services for collecting the hierarchical profiler data, analyzing the raw profiler output and profiling information generation.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-03-15T02:42:46-07:00">
      <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
      <meta name="dcterms.dateCopyrighted" content="1996, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E85717-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="DBMS_HM.html" title="Previous" type="text/html">
      <link rel="next" href="DBMS_HS_PARALLEL.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"12.2","element_name":"Release 12.2","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ARPLS">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_HM.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="DBMS_HS_PARALLEL.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> DBMS_HPROF </li>
            </ol>
            <a id="GUID-D4E1F35B-25D9-45A2-8CB8-4E174931380A" name="GUID-D4E1F35B-25D9-45A2-8CB8-4E174931380A"></a><a id="ARPLS146"></a><a id="ARPLS146"></a>
            
            <h2 id="ARPLS-GUID-D4E1F35B-25D9-45A2-8CB8-4E174931380A" class="sect2"><span class="enumeration_chapter">79 </span> DBMS_HPROF 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The <code class="codeph">DBMS_HPROF</code> package provides an interface for profiling the execution of PL/SQL applications. It provides services for collecting the hierarchical profiler data, analyzing the raw profiler output and profiling information generation.
               </p>
               <p>This chapter contains the following topic:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="DBMS_HPROF.html#GUID-AD1233C0-E6DC-49B1-BC3B-3D933EBFD5BF" title="This table lists and briefly describes the DBMS_HPROF package subprograms.">Summary of DBMS_HPROF Subprograms</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-D4E1F35B-25D9-45A2-8CB8-4E174931380A__GUID-7AD8159F-DD58-4195-A62B-67B4774E0ED9">
                  <p class="notep1">See Also:</p>
                  <p><span class="italic">Oracle Database Development Guide</span> for more information about the <a href="../adfns/hierarchical-profiler.html#ADFNS023">"PL/SQL Hierarchical Profiler"</a></p>
               </div>
            </div><a id="ARPLS66425"></a><a id="ARPLS66426"></a><a id="ARPLS66426"></a><a id="ARPLS66425"></a><div class="props_rev_3"><a id="GUID-AD1233C0-E6DC-49B1-BC3B-3D933EBFD5BF" name="GUID-AD1233C0-E6DC-49B1-BC3B-3D933EBFD5BF"></a><h3 id="ARPLS-GUID-AD1233C0-E6DC-49B1-BC3B-3D933EBFD5BF" class="sect3"><span class="enumeration_section">79.1 </span>Summary of DBMS_HPROF Subprograms
               </h3>
               <div>
                  <p>This table lists and briefly describes the <code class="codeph">DBMS_HPROF</code> package subprograms.
                  </p>
                  <div class="tblformal" id="GUID-AD1233C0-E6DC-49B1-BC3B-3D933EBFD5BF__GUID-AE7E745D-8E11-4B77-8B1B-01667BC69888">
                     <p class="titleintable">Table 79-1 DBMS_HPROF Package Subprograms</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_HPROF Package Subprograms" summary="This table lists the DBMS_HPROF subprograms in alphabetical order and briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d451363e210">Subprogram</th>
                              <th align="left" valign="bottom" width="70%" id="d451363e213">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d451363e218" headers="d451363e210 ">
                                 <p><a href="DBMS_HPROF.html#GUID-AC3576CD-DDFB-4423-93F9-4720FB7A7947" title="This function analyzes the raw profiler output and produces hierarchical profiler information in database tables.">ANALYZE Function</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d451363e218 d451363e213 ">
                                 <p>Analyzes the raw profiler output and produces hierarchical profiler information in database tables</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d451363e230" headers="d451363e210 ">
                                 <p><a href="DBMS_HPROF.html#GUID-AFCC5B32-B933-4B4F-A20F-B5A844A85EDD" title="This procedure starts hierarchical profiler data collection in the user's session.">START_PROFILING Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d451363e230 d451363e213 ">
                                 <p>Starts hierarchical profiler data collection in the user's session</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d451363e242" headers="d451363e210 ">
                                 <p><a href="DBMS_HPROF.html#GUID-540678A1-7AB2-428B-9023-45E9FDDE6362" title="This procedure stops profiler data collection in the user's session. This subprogram also has the side effect of flushing data collected so far in the session, and it signals the end of a run.">STOP_PROFILING Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d451363e242 d451363e213 ">
                                 <p>Stops profiler data collection in the user's session.s</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS66427"></a><a id="ARPLS66428"></a><a id="ARPLS66428"></a><a id="ARPLS66427"></a><div class="props_rev_3"><a id="GUID-AC3576CD-DDFB-4423-93F9-4720FB7A7947" name="GUID-AC3576CD-DDFB-4423-93F9-4720FB7A7947"></a><h4 id="ARPLS-GUID-AC3576CD-DDFB-4423-93F9-4720FB7A7947" class="sect4"><span class="enumeration_section">79.1.1 </span>ANALYZE Function
                  </h4>
                  <div>
                     <p>This function analyzes the raw profiler output and produces hierarchical profiler information in database tables.</p>
                     <div class="section">
                        <p class="subhead3">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_HPROF.ANALYZE (
   location         VARCHAR2,
   filename         VARCHAR2,
   summary_mode     BOOLEAN     DEFAULT FALSE,
   trace            VARCHAR2    DEFAULT NULL,
   skip             PLS_INTEGER DEFAULT 0,
   collect          PLS_INTEGER DEFAULT NULL,
   run_comment      VARCHAR2    DEFAULT NULL)
  RETURN NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Parameters</p>
                        <div class="tblformal" id="GUID-AC3576CD-DDFB-4423-93F9-4720FB7A7947__GUID-43CADC1C-6BAD-4185-926D-8021278526C8">
                           <p class="titleintable">Table 79-2 ANALYZE Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ANALYZE Function Parameters" summary="This table describes the parameters of DBMS_HPROF.ANALYZE." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d451363e361">Parameter</th>
                                    <th align="left" valign="bottom" width="67%" id="d451363e364">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d451363e369" headers="d451363e361 ">
                                       <p><code class="codeph">location</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d451363e369 d451363e364 ">
                                       <p>Name of a directory object. The raw profiler data file is read from the file system directory mapped to this directory object. Output files are also written to this directory.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d451363e377" headers="d451363e361 ">
                                       <p><code class="codeph">filename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d451363e377 d451363e364 ">
                                       <p>Name of the raw profiler data file to be analyzed. The file must exist in the directory specified by the <code class="codeph">location</code> parameter.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d451363e388" headers="d451363e361 ">
                                       <p><code class="codeph">summary_mode</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d451363e388 d451363e364 ">
                                       <p>By default (that is, when <code class="codeph">summary_mode</code> is <code class="codeph">FALSE</code>), the detailed analysis is done.When <code class="codeph">summary_mode</code> is <code class="codeph">TRUE</code>, only top-level summary information is generated into the database table.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d451363e408" headers="d451363e361 ">
                                       <p><code class="codeph">trace</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d451363e408 d451363e364 ">
                                       <p>Analyze only the subtrees rooted at the specified trace entry. By default (when trace is <code class="codeph">NULL</code>), the analysis/reporting is generated for the entire run.
                                       </p>
                                       <p>The trace entry must be specified in a special quoted qualified format (including the schema name, module name &amp; function name) as in for example, '"<code class="codeph">SCOTT</code>"."<code class="codeph">PKG</code>"."<code class="codeph">FOO</code>"' or '"".""."<code class="codeph">__plsql_vm</code>"'. If multiple overloads exist for the specified name, all of them will be analyzed.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d451363e433" headers="d451363e361 ">
                                       <p><code class="codeph">skip</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d451363e433 d451363e364 ">
                                       <p>Used only when <code class="codeph">trace</code> is specified.Analyze only the subtrees rooted at the specified trace, but ignore the first <code class="codeph">skip</code> invocations to trace. The default value for skip is 0.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d451363e447" headers="d451363e361 ">
                                       <p><code class="codeph">collect</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d451363e447 d451363e364 ">
                                       <p>Used only when <code class="codeph">trace</code> is specified.
                                       </p>
                                       <p>Analyze <code class="codeph">collect</code> number of invocations of traces (starting from <code class="codeph">skip</code>+1'th invocation). By default only 1 invocation is collected.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d451363e466" headers="d451363e361 ">
                                       <p><code class="codeph">run_comment</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d451363e466 d451363e364 ">
                                       <p>User-provided comment for this run</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Return Values</p>
                        <p>A unique run identifier for this run of the analyzer. This can then be used to look up the results corresponding to this run from the hierarchical profiler tables.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Use the <code class="codeph">dbmshptab</code>.<code class="codeph">sql</code> script located in the <code class="codeph">rdbms</code>/<code class="codeph">admin</code> directory to create the hierarchical profiler database tables and other data structures required for persistently storing the results of analyzing the raw profiler data.
                              </p>
                           </li>
                           <li>
                              <p>Running <code class="codeph">dbmshptab</code>.<code class="codeph">sql</code> drops the any previously created hierarchical profiler tables.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Examples</p>
                        <p>The following snippet installs the hierarchical profiler tables in HR schema.</p><pre class="oac_no_warn" dir="ltr">connect HR/HR;
@?/rdbms/admin/dbmshptab.sql</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66429"></a><a id="ARPLS66430"></a><a id="ARPLS66430"></a><a id="ARPLS66429"></a><div class="props_rev_3"><a id="GUID-AFCC5B32-B933-4B4F-A20F-B5A844A85EDD" name="GUID-AFCC5B32-B933-4B4F-A20F-B5A844A85EDD"></a><h4 id="ARPLS-GUID-AFCC5B32-B933-4B4F-A20F-B5A844A85EDD" class="sect4"><span class="enumeration_section">79.1.2 </span>START_PROFILING Procedure
                  </h4>
                  <div>
                     <p>This procedure starts hierarchical profiler data collection in the user's session.</p>
                     <div class="section">
                        <p class="subhead3">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_HPROF.START_PROFILING (
   location    VARCHAR2 DEFAULT NULL,
   filename    VARCHAR2 DEFAULT NULL,
   max_depth   PLS_INTEGER DEFAULT NULL);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Parameters</p>
                        <div class="tblformal" id="GUID-AFCC5B32-B933-4B4F-A20F-B5A844A85EDD__GUID-7260A451-253B-4DDD-B5D4-8E8B9671FDC2">
                           <p class="titleintable">Table 79-3 START_PROFILING Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="START_PROFILING Procedure Parameters" summary="This table describes the parameters of DBMS_HPROF.START_PROFILING." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d451363e622">Parameter</th>
                                    <th align="left" valign="bottom" width="67%" id="d451363e625">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d451363e630" headers="d451363e622 ">
                                       <p><code class="codeph">location</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d451363e630 d451363e625 ">
                                       <p>Name of a directory object. The file system directory mapped to this directory object is where the raw profiler output is generated.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d451363e638" headers="d451363e622 ">
                                       <p><code class="codeph">filename</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d451363e638 d451363e625 ">
                                       <p>Output filename for the raw profiler data. The file is created in the directory specified by the <code class="codeph">location</code> parameter.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d451363e649" headers="d451363e622 ">
                                       <p><code class="codeph">max_depth</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d451363e649 d451363e625 ">
                                       <p>By default (that is, when <code class="codeph">max_depth</code> value is <code class="codeph">NULL</code>) profile information is gathered for all functions irrespective of their call depth. When a non-<code class="codeph">NULL</code> value is specified for <code class="codeph">max_depth</code>, the profiler collects data only for functions up to a call depth level of <code class="codeph">max_depth</code>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                        <p>Even though the profiler does not individually track functions at depth greater than max_depth, the time spent in such functions is charged to the ancestor function at depth max_depth.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS66431"></a><a id="ARPLS66431"></a><div class="props_rev_3"><a id="GUID-540678A1-7AB2-428B-9023-45E9FDDE6362" name="GUID-540678A1-7AB2-428B-9023-45E9FDDE6362"></a><h4 id="ARPLS-GUID-540678A1-7AB2-428B-9023-45E9FDDE6362" class="sect4"><span class="enumeration_section">79.1.3 </span>STOP_PROFILING Procedure
                  </h4>
                  <div>
                     <p>This procedure stops profiler data collection in the user's session. This subprogram also has the side effect of flushing data collected so far in the session, and it signals the end of a run.</p>
                     <div class="section">
                        <p class="subhead3">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_HPROF.STOP_PROFILING;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Examples</p>
                        <p>Profiling with raw profiler data table</p><pre class="oac_no_warn" dir="ltr">DECLARE
    analyze_runid number;
    trace_id number;
BEGIN
    -- create raw profiler data and analysis tables
    -- call create_tables with force_it =&gt;FALSE (default) when
    -- raw profiler data and analysis tables do not exist already
    DBMS_HPROF.CREATE_TABLES;
    -- Start profiling
    -- Write raw profiler data in raw profiler data table
    trace_id := DBMS_HPROF.START_PROFILING;
    -- Run the procedure to be profiled
    test;
    -- Stop profiling
    DBMS_HPROF.STOP_PROFILING;
    -- analyzes trace_id entry in raw profiler data table and writes
    -- hierarchical profiler information in hprof’s analysis tables
    analyze_runid := DBMS_HPROF.ANALYZE(trace_id);
END;
/</pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>