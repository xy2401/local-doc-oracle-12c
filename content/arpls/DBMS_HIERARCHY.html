<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="DBMS_HIERARCHY contains subprograms for validating the data in tables used by hierarchies and analytic views.">
      <meta name="description" content="DBMS_HIERARCHY contains subprograms for validating the data in tables used by hierarchies and analytic views.">
      <title>DBMS_HIERARCHY</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database PL/SQL Packages and Types Reference">
      <meta property="og:description" content="DBMS_HIERARCHY contains subprograms for validating the data in tables used by hierarchies and analytic views.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-03-15T02:42:46-07:00">
      <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
      <meta name="dcterms.dateCopyrighted" content="1996, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E85717-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="DBMS_HEAT_MAP.html" title="Previous" type="text/html">
      <link rel="next" href="DBMS_HM.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"12.2","element_name":"Release 12.2","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ARPLS">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_HEAT_MAP.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="DBMS_HM.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">DBMS_HIERARCHY</li>
            </ol>
            <a id="GUID-BA9CF136-9144-4880-BFF7-67B369E81D62" name="GUID-BA9CF136-9144-4880-BFF7-67B369E81D62"></a>
            
            <h2 id="ARPLS-GUID-BA9CF136-9144-4880-BFF7-67B369E81D62" class="sect2"><span class="enumeration_chapter">77 </span>DBMS_HIERARCHY
            </h2>
         </header>
         <div class="ind">
            <div>
               <p><code class="codeph">DBMS_HIERARCHY</code> contains subprograms for validating the data in tables used by hierarchies and analytic views.
               </p>
               <div class="section">
                  <p>This chapter contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="DBMS_HIERARCHY.html#GUID-2F0E6688-A9BD-492D-9529-062A178A7740" title="The DBMS_HIERARCHY package contains functions for validating that the contents of a database table are suitable for use by an analytic view or a hierarchy, a function for verifying the success of the validation, and a procedure for creating a table for logging validation operations.">DBMS_HIERARCHY Overview</a></p>
                     </li>
                     <li>
                        <p><a href="DBMS_HIERARCHY.html#GUID-50B11E08-6302-4B48-AC48-C9A16B306A63" title="Summarizes security considerations for the validation of analytic view and hierarchy objects.">DBMS_HIERARCHY Security Model</a></p>
                     </li>
                     <li>
                        <p><a href="DBMS_HIERARCHY.html#GUID-62616CF1-0FE9-43E6-B244-E68DF0AB6DCB" title="This table lists the DBMS_HIERARCHY subprograms and briefly describes them.">Summary of DBMS_HIERARCHY Subprograms</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
            <div class="sect2"><a id="GUID-2F0E6688-A9BD-492D-9529-062A178A7740" name="GUID-2F0E6688-A9BD-492D-9529-062A178A7740"></a><h3 id="ARPLS-GUID-2F0E6688-A9BD-492D-9529-062A178A7740" class="sect3"><span class="enumeration_section">77.1 </span>DBMS_HIERARCHY Overview
               </h3>
               <div>
                  <p>The <code class="codeph">DBMS_HIERARCHY</code> package contains functions for validating that the contents of a database table are suitable for use by an analytic view or a hierarchy, a function for verifying the success of the validation, and a procedure for creating a table for logging validation operations.
                  </p>
                  <div class="infoboxnote" id="GUID-2F0E6688-A9BD-492D-9529-062A178A7740__GUID-1D0E1D3F-E6FC-4514-BB0E-64412551737F">
                     <p class="notep1">Note:</p>
                     <p>Names specified by parameters of the <code class="codeph">DBMS_HIERARCHY</code> subprograms are case-sensitive.
                     </p>
                  </div>
                  <p>For information about using analytic views, see <cite><span><cite>Oracle Database Data Warehousing Guide</cite></span></cite>.
                  </p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-50B11E08-6302-4B48-AC48-C9A16B306A63" name="GUID-50B11E08-6302-4B48-AC48-C9A16B306A63"></a><h3 id="ARPLS-GUID-50B11E08-6302-4B48-AC48-C9A16B306A63" class="sect3"><span class="enumeration_section">77.2 </span>DBMS_HIERARCHY Security Model
               </h3>
               <div>
                  <p>Summarizes security considerations for the validation of analytic view and hierarchy objects.</p>
                  <div class="p">All procedures in this package validate that the current user has the necessary privileges on the specified objects and return an error if those privileges are not found.
                     <div class="infoboxnote" id="GUID-50B11E08-6302-4B48-AC48-C9A16B306A63__GUID-59880AF0-FF50-412E-A2D5-00E818201D68">
                        <p class="notep1">Note:</p>To ensure that the user has enough tablespace to log validation operations, do one of the following:
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">GRANT</code> <code class="codeph">UNLIMITED</code> <code class="codeph">TABLESPACE</code> <code class="codeph">TO</code> <span class="italic">username</span><code class="codeph">;</code></p>
                           </li>
                           <li>
                              <p><code class="codeph">ALTER</code> <code class="codeph">USERNAME</code> <span class="italic">username</span> <code class="codeph">QUOTA</code> <span class="italic">size</span> <code class="codeph">ON</code> <span class="italic">tablespace_name</span><code class="codeph">;</code></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <p>The following system privileges are required to use this package:</p>
                  <div class="section">
                     <p class="subhead2">To validate objects in the user’s own schema:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">CREATE TABLE</code> privilege for <code class="codeph">CREATE_VALIDATE_LOG_TABLE</code> or to have <code class="codeph">VALIDATE_ANALTYIC_VIEW</code> or <code class="codeph">VALIDATE_HIERARCHY</code> automatically create a table
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">SELECT</code> privilege on the tables or views used by the analytic view or hierarchy
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">INSERT</code> privilege on the tables used by the attribute dimensions of the hierarchy or the fact table used by the analytic view
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2">To validate objects in different schemas:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">CREATE ANY TABLE</code> privilege for <code class="codeph">CREATE_VALIDATE_LOG_TABLE</code> or to have the <code class="codeph">VALIDATE_ANALTYIC_VIEW</code> or <code class="codeph">VALIDATE_HIERARCHY</code> automatically create a table
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">INSERT ANY TABLE</code> privilege on the tables used by the attribute dimensions of the hierarchy or the fact table used by the analytic view
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-62616CF1-0FE9-43E6-B244-E68DF0AB6DCB" name="GUID-62616CF1-0FE9-43E6-B244-E68DF0AB6DCB"></a><h3 id="ARPLS-GUID-62616CF1-0FE9-43E6-B244-E68DF0AB6DCB" class="sect3"><span class="enumeration_section">77.3 </span>Summary of DBMS_HIERARCHY Subprograms
               </h3>
               <div>
                  <p>This table lists the <code class="codeph">DBMS_HIERARCHY</code> subprograms and briefly describes them.
                  </p>
                  <div class="tblformal" id="GUID-62616CF1-0FE9-43E6-B244-E68DF0AB6DCB__GUID-C1C3720F-D6B0-4731-B82D-30518CCDE138">
                     <table cellpadding="4" cellspacing="0" class="Formal" title summary="This table lists the DBMS_HIERARCHY subprograms and briefly describes them." frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" id="d448924e510">Subprogram</th>
                              <th align="left" valign="bottom" id="d448924e513">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d448924e518" headers="d448924e510 ">
                                 <p><a href="DBMS_HIERARCHY.html#GUID-F389484F-4870-43E2-B52E-BA7DF9F01CB6" title="This procedure creates a table that you can use for logging messages generated by the VALIDATE_ANALYTIC_VIEW or VALIDATE_HIERARCHY function, which validate data used by an analytic view or hierarchy.">CREATE_VALIDATE_LOG_TABLE Procedure</a></p>
                              </td>
                              <td align="left" valign="top" headers="d448924e518 d448924e513 ">
                                 <p>Creates a table that you can use for logging messages generated by the <code class="codeph">VALIDATE_HIERARCHY</code> and <code class="codeph">VALIDATE_ANALYTIC_VIEW</code> functions.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d448924e541" headers="d448924e510 "><a href="DBMS_HIERARCHY.html#GUID-7BE9DCD3-2577-47BC-B8A3-710ECEB23D05" title="This function validates that the data in a table or view conforms to the logical constraints inherent in the definition of an analytic view.">VALIDATE_ANALYTIC_VIEW Function</a></td>
                              <td align="left" valign="top" headers="d448924e541 d448924e513 ">
                                 <p>Validates that the data in a table is suitable for use by an analytic view.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d448924e551" headers="d448924e510 "><a href="DBMS_HIERARCHY.html#GUID-4A926EAC-6167-4C9E-8FD0-92C29A7A8507" title="This function indicates whether a prior call to VALIDATE_HIERARCHY or VALIDATE_ANALYTIC_VIEW was successful or produced validation errors.">VALIDATE_CHECK_SUCCESS Function</a></td>
                              <td align="left" valign="top" headers="d448924e551 d448924e513 ">
                                 <p>Indicates whether a prior call to <code class="codeph">VALIDATE_HIERARCHY</code> or <code class="codeph">VALIDATE_ANALYTIC_VIEW</code> was successful or produced validation errors.
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d448924e573" headers="d448924e510 ">
                                 <p><a href="DBMS_HIERARCHY.html#GUID-5D37C07A-F108-4734-9811-A57C82329EDA" title="This function validates that the data in a table or view conforms to the logical constraints inherent in the definitions of an attribute dimension that uses the table or view and a hierarchy that uses the attribute dimension.">VALIDATE_HIERARCHY Function</a></p>
                              </td>
                              <td align="left" valign="top" headers="d448924e573 d448924e513 ">
                                 <p>Validates that the data in a table is suitable for use by a hierarchy.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
               <div class="sect3"><a id="GUID-F389484F-4870-43E2-B52E-BA7DF9F01CB6" name="GUID-F389484F-4870-43E2-B52E-BA7DF9F01CB6"></a><h4 id="ARPLS-GUID-F389484F-4870-43E2-B52E-BA7DF9F01CB6" class="sect4"><span class="enumeration_section">77.3.1 </span>CREATE_VALIDATE_LOG_TABLE Procedure
                  </h4>
                  <div>
                     <p>This procedure creates a table that you can use for logging messages generated by the <code class="codeph">VALIDATE_ANALYTIC_VIEW</code> or <code class="codeph">VALIDATE_HIERARCHY</code> function, which validate data used by an analytic view or hierarchy.
                     </p>
                     <div class="section">
                        <p>The table that this procedure creates has the following structure.</p><pre class="pre codeblock"><code>NAME               NULL?    DATATYPE
------------------ -------- --------
LOG_NUMBER         NOT NULL NUMBER
ACTION_ORDER       NOT NULL NUMBER
OBJECT_OWNER       NOT NULL VARCHAR2(128 BYTE)
OBJECT_NAME        NOT NULL VARCHAR2(128 BYTE)
ACTION             NOT NULL VARCHAR2(10 BYTE)
TIME               NOT NULL TIMESTAMP(6)
ERROR_NUMBER                NUMBER
ERROR_MESSAGE               VARCHAR2(4000)</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p><pre class="pre codeblock"><code>DBMS_HIERARCHY.CREATE_VALIDATE_LOG_TABLE (
    table_name        IN  VARCHAR2,
    owner_name        IN  VARCHAR2         DEFAULT NULL
    IGNORE_IF_EXISTS  IN  PL/SQL BOOLEAN   DEFAULT FALSE);</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Parameters</p>
                        <div class="tblformal" id="GUID-F389484F-4870-43E2-B52E-BA7DF9F01CB6__GUID-9FE8F368-2E0E-41C4-A00D-9BF0324230A1">
                           <table cellpadding="4" cellspacing="0" class="Formal" title summary="This table lists the parameters of the CREATE_VALIDATE_LOG_TABLE procedure and provides brief descriptions of them." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d448924e705">Parameter</th>
                                    <th align="left" valign="bottom" width="20%" id="d448924e707">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d448924e711" headers="d448924e705 "><code class="codeph">table_name</code></td>
                                    <td align="left" valign="top" width="20%" headers="d448924e711 d448924e707 ">The name of the table to create.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d448924e717" headers="d448924e705 "><code class="codeph">owner_name</code></td>
                                    <td align="left" valign="top" width="20%" headers="d448924e717 d448924e707 ">The name of the schema in which to create the table. If <code class="codeph">owner_name</code> is <code class="codeph">NULL</code>, then the table is created in the current user’s schema.
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d448924e729" headers="d448924e705 "><code class="codeph">IGNORE_IF_EXISTS</code></td>
                                    <td align="left" valign="top" width="20%" headers="d448924e729 d448924e707 ">A Boolean that indicates whether to create the table if a table by the same name exists. If you specify a table, it must have the same structure as the table that this procedure creates.</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Examples</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-F389484F-4870-43E2-B52E-BA7DF9F01CB6__GUID-55CD4CEE-6068-4F9B-BCEF-75C0264A0A61">
                        <p class="titleinexample">Example 77-1 Creating a Validation Log Table</p><pre class="pre codeblock"><code>BEGIN
  DBMS_HIERARCHY.CREATE_VALIDATE_LOG_TABLE (
    'VAL_AV_HIERARCHY_LOG',
    'AV_USER',
    FALSE
  );
END;
/ 
</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-7BE9DCD3-2577-47BC-B8A3-710ECEB23D05" name="GUID-7BE9DCD3-2577-47BC-B8A3-710ECEB23D05"></a><h4 id="ARPLS-GUID-7BE9DCD3-2577-47BC-B8A3-710ECEB23D05" class="sect4"><span class="enumeration_section">77.3.2 </span>VALIDATE_ANALYTIC_VIEW Function
                  </h4>
                  <div>
                     <p>This function validates that the data in a table or view conforms to the logical constraints inherent in the definition of an analytic view.</p>
                     <div class="section">
                        <p class="subhead3">Syntax</p><pre class="pre codeblock"><code>DBMS_HIERARCHY.VALIDATE_ANALYTIC_VIEW (
      analytic_view_name         IN VARCHAR2   DEFAULT NULL,
      analytic_view_owner_name   IN VARCHAR2   DEFAULT NULL,
      log_table_name             IN VARCHAR2   DEFAULT NULL,
      log_table_owner_name       IN VARCHAR2   DEFAULT NULL)
      RETURN NUMBER;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Parameters</p>
                        <div class="tblformal" id="GUID-7BE9DCD3-2577-47BC-B8A3-710ECEB23D05__GUID-C52E2F01-3036-4CDA-B509-2EE66B34BB13">
                           <table cellpadding="4" cellspacing="0" class="Formal" title summary="This table lists the parameters of the VALIDATE_ANALYTIC_VIEW function and provides brief descriptions of them." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d448924e850">Parameter</th>
                                    <th align="left" valign="bottom" id="d448924e852">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d448924e856" headers="d448924e850 "><code class="codeph">analytic_view_name</code></td>
                                    <td align="left" valign="top" headers="d448924e856 d448924e852 ">The name of the analytic view to validate.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d448924e862" headers="d448924e850 "><code class="codeph">analytic_view_owner_name</code></td>
                                    <td align="left" valign="top" headers="d448924e862 d448924e852 ">The name of the owner of the schema that contains the analytic view.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d448924e868" headers="d448924e850 "><code class="codeph">log_table_name</code></td>
                                    <td align="left" valign="top" headers="d448924e868 d448924e852 ">The name of the validation log table in which to put the results of the validation operation.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d448924e874" headers="d448924e850 "><code class="codeph">log_table_owner_name</code></td>
                                    <td align="left" valign="top" headers="d448924e874 d448924e852 ">The name of the owner of the schema in which the validation log table exists or in which to create the table.</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Returns</p>
                        <p>The number of the entry in the validation log table for the validation results.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                        <p> If the <code class="codeph">log_table_name</code> parameter is <code class="codeph">NULL</code>, then the <code class="codeph">VALIDATE_ANALYTIC_VIEW</code> function creates a validation log table. The name of the table it creates is DBMS_HIERARCHY_LOG.
                        </p>
                        <p>When the validation operation begins, a row is inserted into the log table with the action of <code class="codeph">START</code>.  When the operation completes, a row is inserted into the log table with the action of <code class="codeph">END</code>.  When an error is detected, a row is inserted into the log table with the action of <code class="codeph">ERROR</code>, and the associated <code class="codeph">error_number</code> and <code class="codeph">error_message</code> columns are populated. All rows inserted into the validation log table include a log number and the time of the insert.
                        </p>
                        <p>The <code class="codeph">VALIDATE_ANALYTIC_VIEW</code> function verifies that the following conditions are true for each attribute dimension the analytic view is dimensioned by:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The key values found in the fact table for the attribute dimension must exist in the star schema dimension table for that attribute dimension.</p>
                           </li>
                           <li>
                              <p>The referenced attribute values for the attribute dimension must be unique across all rows of the star schema dimension table for that dimension.</p>
                           </li>
                        </ul>
                        <p>Also, for every hierarchy in the analytic view, the function verifies that the following conditions are true:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The primary key of a level determines a unique value for each attribute of the level.</p>
                           </li>
                           <li>
                              <p>For each row of the table or view used by the attribute dimension of the hierarchy, the value for every level key column (including alternate keys) of a <code class="codeph">NOT</code> <code class="codeph">NULL</code> level is non-<code class="codeph">NULL</code>.
                              </p>
                           </li>
                           <li>
                              <p>For each row of the table or view, either all level key columns and alternate key columns of a <code class="codeph">SKIP</code> <code class="codeph">WHEN</code> <code class="codeph">NULL</code> level must be <code class="codeph">NULL</code> or they must all be non-<code class="codeph">NULL</code>. This verifies that the alternate level key is determined by the level key.
                              </p>
                           </li>
                           <li>
                              <p>For each group of rows that have the same alternate key column values for a level, the key column values must have the same column values. This verifies that the level key is determined by the alternate level key, which is required for an alternate key.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Examples</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-7BE9DCD3-2577-47BC-B8A3-710ECEB23D05__GUID-92311EC3-595D-4A02-AF1E-B90951333577">
                        <p class="titleinexample">Example 77-2 Validating an Analytic View</p><pre class="pre codeblock"><code>DECLARE
  log_num NUMBER;
  obj_name VARCHAR2(8) := 'SALES_AV';
BEGIN
   log_num := DBMS_HIERARCHY.VALIDATE_ANALYTIC_VIEW(obj_name);
END;
/</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-4A926EAC-6167-4C9E-8FD0-92C29A7A8507" name="GUID-4A926EAC-6167-4C9E-8FD0-92C29A7A8507"></a><h4 id="ARPLS-GUID-4A926EAC-6167-4C9E-8FD0-92C29A7A8507" class="sect4"><span class="enumeration_section">77.3.3 </span>VALIDATE_CHECK_SUCCESS Function
                  </h4>
                  <div>
                     <p>This function indicates whether a prior call to <code class="codeph">VALIDATE_HIERARCHY</code> or <code class="codeph">VALIDATE_ANALYTIC_VIEW</code> was successful or produced validation errors.
                     </p>
                     <div class="section">
                        <p class="subhead3">Syntax</p><pre class="pre codeblock"><code>DBMS_HIERARCHY.VALIDATE_CHECK_SUCCESS (
    TOPOBJ_NAME           IN  VARCHAR2,
    TOPOBJ_OWNER          IN  VARCHAR2,
    LOG_NUMBER            IN  VARCHAR2
    LOG_TABLE_NAME        IN  VARCHAR2
    LOG_TABLE_OWNER_NAME  IN  VARCHAR2 )
    RETURN VARCHAR2;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Parameters</p>
                        <div class="tblformal" id="GUID-4A926EAC-6167-4C9E-8FD0-92C29A7A8507__GUID-AA5D8056-C1E7-4DD6-84F1-755782D462A7">
                           <table cellpadding="4" cellspacing="0" class="Formal" title summary="This table describes the parameters of this function." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d448924e1091">Parameter</th>
                                    <th align="left" valign="bottom" id="d448924e1093">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d448924e1097" headers="d448924e1091 "><code class="codeph">TOPOBJ_NAME</code></td>
                                    <td align="left" valign="top" headers="d448924e1097 d448924e1093 ">The name of the hierarchy or analytic view.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d448924e1103" headers="d448924e1091 "><code class="codeph">TOPOBJ_OWNDER</code></td>
                                    <td align="left" valign="top" headers="d448924e1103 d448924e1093 ">The owner of the hierarchy or analytic view.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d448924e1109" headers="d448924e1091 "><code class="codeph">LOG_NUMBER</code></td>
                                    <td align="left" valign="top" headers="d448924e1109 d448924e1093 ">The number of the log entry.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d448924e1115" headers="d448924e1091 "><code class="codeph">LOG_TABLE_NAME</code></td>
                                    <td align="left" valign="top" headers="d448924e1115 d448924e1093 ">The name of the log table.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d448924e1121" headers="d448924e1091 "><code class="codeph">LOG_TABLE_OWNER_NAME</code></td>
                                    <td align="left" valign="top" headers="d448924e1121 d448924e1093 ">The name of the schema in which the table exits. </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Returns</p>
                        <p>A <code class="codeph">VARCHAR2</code> that is SUCCESS if no errors occurred or ERROR if errors did occur.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Examples</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-4A926EAC-6167-4C9E-8FD0-92C29A7A8507__GUID-0ECBA806-07A2-4391-AC39-EB8A1922EEDB">
                        <p class="titleinexample">Example 77-3 Using VALIDATE_CHECK_SUCCESS</p>
                        <p>This example finds out whether the prior call to <code class="codeph">VALIDATE_ANALTYIC_VIEW</code> encountered errors.
                        </p><pre class="pre codeblock"><code>DECLARE
  log_num NUMBER;
  succ VARCHAR2(7);
  obj_name VARCHAR2(8) := 'SALES_AV';
BEGIN
   log_num := dbms_hierarchy.validate_analytic_view(obj_name);
   succ := dbms_hierarchy.validate_check_success(
      topobj_name =&gt; obj_name, log_number =&gt; log_num);
  IF (succ != 'SUCCESS') THEN
     RAISE_APPLICATION_ERROR(
       num =&gt; -20000,
       msg =&gt; 'Validate failed!');
  END IF;
END;
/</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-5D37C07A-F108-4734-9811-A57C82329EDA" name="GUID-5D37C07A-F108-4734-9811-A57C82329EDA"></a><h4 id="ARPLS-GUID-5D37C07A-F108-4734-9811-A57C82329EDA" class="sect4"><span class="enumeration_section">77.3.4 </span>VALIDATE_HIERARCHY Function
                  </h4>
                  <div>
                     <p>This function validates that the data in a table or view conforms to the logical constraints inherent in the definitions of an attribute dimension that uses the table or view and a hierarchy that uses the attribute dimension.</p>
                     <div class="section">
                        <p class="subhead3">Syntax</p><pre class="pre codeblock"><code>DBMS_HIERARCHY.VALIDATE_HIERARCHY (
      hier_name                IN VARCHAR2,
      hier_owner_name          IN VARCHAR2    DEFAULT NULL,
      log_table_name           IN VARCHAR2    DEFAULT NULL,
      log_table_owner_name     IN VARCHAR2    DEFAULT NULL)
      RETURN NUMBER;</code></pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Parameters</p>
                        <div class="tblformal" id="GUID-5D37C07A-F108-4734-9811-A57C82329EDA__GUID-059A6A6F-AD86-4B91-BFC7-AA1EA7E31B0C">
                           <table cellpadding="4" cellspacing="0" class="Formal" title summary="This table lists the parameters of the VALIDATE_HIERARCHY function and provides brief descriptions of them." frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="20%" id="d448924e1254">Parameter</th>
                                    <th align="left" valign="bottom" width="20%" id="d448924e1256">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d448924e1260" headers="d448924e1254 "><code class="codeph">hier_name</code></td>
                                    <td align="left" valign="top" width="20%" headers="d448924e1260 d448924e1256 ">The name of the hierarchy to validate.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d448924e1266" headers="d448924e1254 "><code class="codeph">hier_owner_name</code></td>
                                    <td align="left" valign="top" width="20%" headers="d448924e1266 d448924e1256 ">The name of the owner of the schema that contains the hierarchy.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d448924e1272" headers="d448924e1254 "><code class="codeph">log_table_name</code></td>
                                    <td align="left" valign="top" width="20%" headers="d448924e1272 d448924e1256 ">The name of the validation log table in which to put the results of the validation operation.</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="20%" id="d448924e1278" headers="d448924e1254 "><code class="codeph">log_table_owner_name</code></td>
                                    <td align="left" valign="top" width="20%" headers="d448924e1278 d448924e1256 ">The name of the owner of the schema in which the validation log table exists or in which to create the table.</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Returns</p>
                        <p>The number of the entry in the validation log table for the validation results.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                        <p> If the <code class="codeph">log_table_name</code> parameter is <code class="codeph">NULL</code>, then the <code class="codeph">VALIDATE_HIERARCHY</code> function creates a validation log table. The name of the table it creates is DBMS_HIERARCHY_LOG.
                        </p>
                        <p>When the validation operation begins, a row is inserted into the log table with the action of <code class="codeph">START</code>.  When the operation completes, a row is inserted into the log table with the action of <code class="codeph">END</code>.  When an error is detected, a row is inserted into the log table with the action of <code class="codeph">ERROR</code>, and the associated <code class="codeph">error_number</code> and <code class="codeph">error_message</code> columns are populated. All rows inserted into the validation log table include a log number and the time of the insert.
                        </p>
                        <p>The <code class="codeph">VALIDATE_HIERARCHY</code> function verifies that the following conditions are true for the hierarchy:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The primary key of a level determines a unique value for each attribute of the level.</p>
                           </li>
                           <li>
                              <p>For each row of the table or view used by the attribute dimension of the hierarchy, the value for every level key column (including alternate keys) of a <code class="codeph">NOT</code> <code class="codeph">NULL</code> level is non-<code class="codeph">NULL</code>.
                              </p>
                           </li>
                           <li>
                              <p>For each row of the table or view, either all level key columns and alternate key columns of a <code class="codeph">SKIP</code> <code class="codeph">WHEN</code> <code class="codeph">NULL</code> level must be <code class="codeph">NULL</code> or they must all be non-<code class="codeph">NULL</code>. This verifies that the alternate level key is determined by the level key.
                              </p>
                           </li>
                           <li>
                              <p>For each group of rows that have the same alternate key column values for a level, the key column values must have the same column values. This verifies that the level key is determined by the alternate level key, which is required for an alternate key.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Examples</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-5D37C07A-F108-4734-9811-A57C82329EDA__GUID-F8DA18EE-6B2C-4387-B612-24AE05873FD1">
                        <p class="titleinexample">Example 77-4 Validating a Hierarchy and Specifying a Table Name</p>
                        <p>This example validates the <code class="codeph">PRODUCT_HIER</code> hierarchy and specifies that the results be inserted in the table named <code class="codeph">VAL_AV_HIERARCHY_LOG</code>. The owner of the hierarchy and of the schema that contains the table is AV_USER.
                        </p><pre class="pre codeblock"><code>-- Create a log table.
BEGIN
  DBMS_HIERARCHY.CREATE_VALIDATE_LOG_TABLE (
    'VAL_AV_HIERARCHY_LOG',
    'AV_USER',
    FALSE
  );
END;
/   
-- Validate the hierarchy.
DECLARE
  log_num NUMBER;
  obj_name VARCHAR2(12) := 'PRODUCT_HIER';
  table_name  VARCHAR2(28) := 'VAL_AV_HIERARCHY_LOG';
BEGIN
   log_num := DBMS_HIERARCHY.VALIDATE_HIERARCHY(obj_name, 'AV_USER', table_name);
END;
/
</code></pre><p>Query the log table.</p><pre class="pre codeblock"><code>SELECT LOG_NUMBER, ACTION, OBJECT_NAME, ERROR_NUMBER, ERROR_MESSAGE
  FROM AV_USER.VAL_AV_HIERARCHY_LOG;
  WHERE OBJECT_NAME = 'PRODUCT_HIER';

LOG_NUMBER ACTION     OBJECT_NAME         ERROR_NUMBER ERROR_MESSAGE
---------- ---------- ------------------- ------------ -------------
         1 START      PRODUCT_HIER 
         1 END        PRODUCT_HIER
</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-5D37C07A-F108-4734-9811-A57C82329EDA__GUID-B8273684-51D1-4535-8308-7E61461580C9">
                        <p class="titleinexample">Example 77-5 Validating a Hierarchy Without Specifying a Table Name</p>
                        <p>This example shows that if you do not specify a validation log table, then the <code class="codeph">VALIDATE_HIERARCHY</code> function creates one named DBMS_HIERARCHY_LOG.
                        </p><pre class="pre codeblock"><code>DECLARE
  log_num NUMBER;
  obj_name VARCHAR2(12) := 'PRODUCT_HIER';
BEGIN
   log_num := DBMS_HIERARCHY.VALIDATE_HIERARCHY(obj_name);
END;</code></pre><p>Query the log table.</p><pre class="pre codeblock"><code>SELECT LOG_NUMBER, ACTION, OBJECT_NAME, ERROR_NUMBER, ERROR_MESSAGE
  FROM DBMS_HIERARCHY_LOG
  WHERE OBJECT_NAME = 'PRODUCT_HIER';

LOG_NUMBER ACTION     OBJECT_NAME         ERROR_NUMBER ERROR_MESSAGE
---------- ---------- ------------------- ------------ -------------
         1 START      PRODUCT_HIER 
         1 END        PRODUCT_HIER
</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>