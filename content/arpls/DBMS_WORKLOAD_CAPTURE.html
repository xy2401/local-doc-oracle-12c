<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The DBMS_WORKLOAD_CAPTURE package configures the Workload Capture system and produce the workload capture data.">
      <meta name="description" content="The DBMS_WORKLOAD_CAPTURE package configures the Workload Capture system and produce the workload capture data.">
      <title>DBMS_WORKLOAD_CAPTURE</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database PL/SQL Packages and Types Reference">
      <meta property="og:description" content="The DBMS_WORKLOAD_CAPTURE package configures the Workload Capture system and produce the workload capture data.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database PL/SQL Packages and Types Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-pl-sql-packages-and-types-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-03-15T02:42:46-07:00">
      <meta name="dcterms.title" content="Database PL/SQL Packages and Types Reference">
      <meta name="dcterms.dateCopyrighted" content="1996, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E85717-03">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="DBMS_WM.html" title="Previous" type="text/html">
      <link rel="next" href="DBMS_WORKLOAD_REPLAY.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"12.2","element_name":"Release 12.2","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="ARPLS">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="DBMS_WM.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="DBMS_WORKLOAD_REPLAY.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database PL/SQL Packages and Types Reference</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> DBMS_WORKLOAD_CAPTURE</li>
            </ol>
            <a id="GUID-77C6507C-3DE6-4FB4-B180-530BEB840BE8" name="GUID-77C6507C-3DE6-4FB4-B180-530BEB840BE8"></a><a id="ARPLS207"></a><a id="ARPLS207"></a>
            
            <h2 id="ARPLS-GUID-77C6507C-3DE6-4FB4-B180-530BEB840BE8" class="sect2"><span class="enumeration_chapter">182 </span> DBMS_WORKLOAD_CAPTURE
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The <code class="codeph">DBMS_WORKLOAD_CAPTURE</code> package configures the Workload Capture system and produce the workload capture data.
               </p>
               <p>Replay of this capture is implemented by way of the <a href="DBMS_WORKLOAD_REPLAY.html#GUID-FE03A123-2257-41FF-BA90-AD0114DC1A4F" title="The DBMS_WORKLOAD_REPLAY package provides a interface to replay a workload capture."> DBMS_WORKLOAD_REPLAY </a> package.
               </p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="DBMS_WORKLOAD_CAPTURE.html#GUID-6B74444C-4C8B-4EA2-B0AC-2CCBD859BD40" title="Since the capture infrastructure is instance wide (and also within an Oracle Real Application Clusters (Oracle RAC)), only one workload capture is being produced at any point in time. Thus capture interfaces do not need a state object passed in as a parameter since there is one single state at any point in time. This means that all subprograms cannot be methods of an object but are package wide PL/SQL subprograms.">Overview</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_WORKLOAD_CAPTURE.html#GUID-78A40A84-D5A5-47FA-92DC-B2AAD6A3AA06" title="The security model describes the privileges needed for using DBMS_WORKLOAD_CAPTURE.">Security Model</a></p>
                  </li>
                  <li>
                     <p><a href="DBMS_WORKLOAD_CAPTURE.html#GUID-3BD7600B-BF41-48F5-AA71-1F0E288991B6" title="This table lists the DBMS_WORKLOAD_CAPTURE package subprograms in alphabetical order.">Summary of DBMS_WORKLOAD_CAPTURE Subprograms</a></p>
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-77C6507C-3DE6-4FB4-B180-530BEB840BE8__GUID-4399A1E4-5442-40F3-83F0-A6372081C49D">
                  <p class="notep1">See Also:</p>
                  <p><a href="../ratug/database-replay.html#RATUG-GUID-C5CAF3E6-0F1C-4BD6-BC03-F71744AD600E"><span><cite>Oracle Database Testing Guide</cite></span></a> for more information about database replay
                  </p>
               </div>
            </div><a id="ARPLS69042"></a><a id="ARPLS69042"></a><div class="props_rev_3"><a id="GUID-6B74444C-4C8B-4EA2-B0AC-2CCBD859BD40" name="GUID-6B74444C-4C8B-4EA2-B0AC-2CCBD859BD40"></a><h3 id="ARPLS-GUID-6B74444C-4C8B-4EA2-B0AC-2CCBD859BD40" class="sect3"><span class="enumeration_section">182.1 </span>DBMS_WORKLOAD_CAPTURE Overview
               </h3>
               <div>
                  <p>Since the capture infrastructure is instance wide (and also within an Oracle Real Application Clusters (Oracle RAC)), only one workload capture is being produced at any point in time. Thus capture interfaces do not need a state object passed in as a parameter since there is one single state at any point in time. This means that all subprograms cannot be methods of an object but are package wide PL/SQL subprograms.</p>
               </div>
            </div><a id="ARPLS69043"></a><a id="ARPLS69043"></a><div class="props_rev_3"><a id="GUID-78A40A84-D5A5-47FA-92DC-B2AAD6A3AA06" name="GUID-78A40A84-D5A5-47FA-92DC-B2AAD6A3AA06"></a><h3 id="ARPLS-GUID-78A40A84-D5A5-47FA-92DC-B2AAD6A3AA06" class="sect3"><span class="enumeration_section">182.2 </span>DBMS_WORKLOAD_CAPTURE Security Model
               </h3>
               <div>
                  <p>The security model describes the privileges needed for using <code class="codeph">DBMS_WORKLOAD_CAPTURE</code>.
                  </p>
                  <div class="section">
                     <p>The following code describes the minimal set of privileges required to: </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Create directory objects</p>
                        </li>
                        <li>
                           <p>Operate the interface provided by the <code class="codeph">DBMS_WORKLOAD_CAPTURE</code> and <code class="codeph">DBMS_WORKLOAD_REPLAY</code> packages
                           </p>
                        </li>
                        <li>
                           <p>Act as a replay client user (wrc <code class="codeph">someuser</code>/<code class="codeph">somepassword</code> or wrc <code class="codeph">USER=someuser</code> <code class="codeph">PASSWORD=somepassword</code>)
                           </p>
                        </li>
                     </ul><pre class="oac_no_warn" dir="ltr">DROP USER rom1 CASCADE;
CREATE USER rom1 IDENTIFIED BY rom1;
 
GRANT EXECUTE ON DBMS_WORKLOAD_CAPTURE TO rom1;
GRANT EXECUTE ON DBMS_WORKLOAD_REPLAY TO rom1;
 
GRANT CREATE SESSION TO rom1;
GRANT CREATE ANY DIRECTORY TO rom1;
GRANT SELECT_CATALOG_ROLE TO rom1;
GRANT BECOME USER TO rom1;
</pre><p>Appropriate OS permissions are required to access and manipulate files and directories on both the capture and replay system. This means that the Oracle process(es) and the OS user performing the capture or replay must be able to access and manipulate at least one common directory accessible from the host where the instance is running. Additionally, the OS user performing the replay should be able to execute wrc on hosts that are used for the replay clients and be able to access the file system appropriately to copy the capture to the replay clients' hosts if required.</p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="ARPLS69044"></a><a id="ARPLS69045"></a><a id="ARPLS69045"></a><a id="ARPLS69044"></a><div class="props_rev_3"><a id="GUID-3BD7600B-BF41-48F5-AA71-1F0E288991B6" name="GUID-3BD7600B-BF41-48F5-AA71-1F0E288991B6"></a><h3 id="ARPLS-GUID-3BD7600B-BF41-48F5-AA71-1F0E288991B6" class="sect3"><span class="enumeration_section">182.3 </span>Summary of DBMS_WORKLOAD_CAPTURE Subprograms
               </h3>
               <div>
                  <p>This table lists the <code class="codeph">DBMS_WORKLOAD_CAPTURE</code> package subprograms in alphabetical order.
                  </p>
                  <div class="tblformal" id="GUID-3BD7600B-BF41-48F5-AA71-1F0E288991B6__GUID-3E05187F-BDA5-41FE-A61E-88910327B8F3">
                     <p class="titleintable">Table 182-1 DBMS_WORKLOAD_CAPTURE Package Subprograms</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="DBMS_WORKLOAD_CAPTURE Package Subprograms" summary="This table lists the DBMS_WORKLOAD_CAPTURE subprograms in alphabetical order and briefly describes them." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="30%" id="d1109915e448">Subprogram</th>
                              <th align="left" valign="bottom" width="70%" id="d1109915e451">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d1109915e456" headers="d1109915e448 ">
                                 <p><a href="DBMS_WORKLOAD_CAPTURE.html#GUID-C688CCA4-C471-4D2E-8E95-C3BD7A0A6A35" title="This procedure adds a filter to capture a subset of the workload.">ADD_FILTER Procedures</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d1109915e456 d1109915e451 ">
                                 <p>Adds a specified filter</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d1109915e468" headers="d1109915e448 ">
                                 <p><a href="DBMS_WORKLOAD_CAPTURE.html#GUID-E61B5E13-0602-4124-B941-5696BA640EE9" title="This procedure deletes the rows in the DBA_WORKLOAD_CAPTURES and DBA_WORKLOAD_FILTERS views that corresponds to the given workload capture ID.">DELETE_CAPTURE_INFO Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d1109915e468 d1109915e451 ">
                                 <p>Deletes the rows in the <code class="codeph">DBA_WORKLOAD_CAPTURES</code> and <code class="codeph">DBA_WORKLOAD_FILTERS</code> views that corresponds to the given workload capture ID
                                 </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d1109915e492" headers="d1109915e448 ">
                                 <p><a href="DBMS_WORKLOAD_CAPTURE.html#GUID-44B2949A-9BE4-4380-8EA9-6F9B31B406E0" title="This procedure deletes a specified filter.">DELETE_FILTER Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d1109915e492 d1109915e451 ">
                                 <p>Deletes a specified filter</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d1109915e504" headers="d1109915e448 ">
                                 <p><a href="DBMS_WORKLOAD_CAPTURE.html#GUID-56386444-D26C-4A44-8907-DC994913A55E" title="This procedure exports the AWR snapshots associated with a given capture ID.">EXPORT_AWR Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d1109915e504 d1109915e451 ">
                                 <p>Exports the AWR snapshots associated with a given capture ID</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d1109915e516" headers="d1109915e448 ">
                                 <p><a href="DBMS_WORKLOAD_CAPTURE.html#GUID-A062BC7C-1077-4DCB-94EE-900CFE7C837C" title="This procedure signals all connected sessions to stop the workload capture and stops future requests to the database from being captured.">FINISH_CAPTURE Procedure</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d1109915e516 d1109915e451 ">
                                 <p>Finalizes the workload capture by signaling all connected sessions to stop capture, and stops future requests to the database from being captured</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d1109915e528" headers="d1109915e448 ">
                                 <p><a href="DBMS_WORKLOAD_CAPTURE.html#GUID-528AB56B-D07E-4A40-AAE5-FBDFFF517395" title="This procedure retrieves all information regarding a workload capture present in the stipulated directory, imports the information into the DBA_WORKLOAD_CAPTURES and DBA_WORKLOAD_FILTERS views, and returns the appropriate DBA_WORKLOAD_CAPTURES.ID">GET_CAPTURE_INFO Function</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d1109915e528 d1109915e451 ">
                                 <p>Retrieves all the information regarding a workload capture present in the stipulated directory, imports the information into the <code class="codeph">DBA_WORKLOAD_CAPTURES</code> and <code class="codeph">DBA_WORKLOAD_FILTERS</code> views, and returns the appropriate <code class="codeph">DBA_WORKLOAD_CAPTURES</code>.<code class="codeph">ID</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d1109915e563" headers="d1109915e448 ">
                                 <p><a href="DBMS_WORKLOAD_CAPTURE.html#GUID-0081475D-A909-4466-A247-C83633DC0213" title="This procedure imports the AWR snapshots associated with a given capture ID provided those AWR snapshots were exported earlier from the original capture system using the EXPORT_AWR procedure.">IMPORT_AWR Function</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d1109915e563 d1109915e451 ">
                                 <p>Imports the AWR snapshots associated with a given capture ID</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d1109915e578" headers="d1109915e448 ">
                                 <p><a href="DBMS_WORKLOAD_CAPTURE.html#GUID-16048E89-39F6-4ADC-823F-6F0CF108FC98" title="This function generates a report on the stipulated workload capture.">REPORT Function</a></p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d1109915e578 d1109915e451 ">
                                 <p>Returns a report on the workload capture under consideration using one or more different sources </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="30%" id="d1109915e590" headers="d1109915e448 ">
                                 <p><a href="DBMS_WORKLOAD_CAPTURE.html#GUID-DE768343-F206-445B-A6BF-3126F85367DE">START_CAPTURE Procedure</a> 
                                 </p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d1109915e590 d1109915e451 ">
                                 <p>Initiates workload capture on all instances</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div><a id="ARPLS69046"></a><a id="ARPLS69047"></a><a id="ARPLS69047"></a><a id="ARPLS69046"></a><div class="props_rev_3"><a id="GUID-C688CCA4-C471-4D2E-8E95-C3BD7A0A6A35" name="GUID-C688CCA4-C471-4D2E-8E95-C3BD7A0A6A35"></a><h4 id="ARPLS-GUID-C688CCA4-C471-4D2E-8E95-C3BD7A0A6A35" class="sect4"><span class="enumeration_section">182.3.1 </span>ADD_FILTER Procedures
                  </h4>
                  <div>
                     <p>This procedure adds a filter to capture a subset of the workload.</p>
                     <div class="section">
                        <p class="subhead3">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_CAPTURE.ADD_FILTER (
   fname           IN   VARCHAR2 NOT NULL, 
   fattribute      IN   VARCHAR2 NOT NULL, 
   fvalue          IN   VARCHAR2 NOT NULL);
</pre><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_CAPTURE.ADD_FILTER (
   fname           IN   VARCHAR2 NOT NULL, 
   fattribute      IN   VARCHAR2 NOT NULL, 
   fvalue          IN   NUMBER NOT NULL);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Parameters</p>
                        <div class="tblformal" id="GUID-C688CCA4-C471-4D2E-8E95-C3BD7A0A6A35__GUID-700AD448-30E5-496D-BD6E-09E7643F19CE">
                           <p class="titleintable">Table 182-2 ADD_FILTER Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="ADD_FILTER Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_CAPTURE.ADD_FILTER." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d1109915e709">Parameter</th>
                                    <th align="left" valign="bottom" width="67%" id="d1109915e712">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e717" headers="d1109915e709 ">
                                       <p><code class="codeph">fname</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e717 d1109915e712 ">
                                       <p>Name for the filter to be added. Can be used to delete the filter later if it is not required. (Mandatory)</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e725" headers="d1109915e709 ">
                                       <p><code class="codeph">fattribute</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e725 d1109915e712 ">
                                       <p>Specifies the attribute on which the filter needs to be applied (Mandatory). The possible values are:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">INSTANCE_NUMBER</code> - type <code class="codeph">NUMBER</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">USER</code> - type <code class="codeph">STRING</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">MODULE</code> - type <code class="codeph">STRING</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">ACTION</code> - type <code class="codeph">STRING</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PROGRAM</code> - type <code class="codeph">STRING</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">SERVICE</code> - type <code class="codeph">STRING</code></p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">PDB_NAME</code> - type <code class="codeph">STRING</code></p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e783" headers="d1109915e709 ">
                                       <p><code class="codeph">fvalue</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e783 d1109915e712 ">
                                       <p>Specifies the value to which the given attribute should be equal to for the filter to be considered active. Wildcards like '%' are acceptable for all attributes that are of type <code class="codeph">STRING</code>. This means that the filter for a <code class="codeph">NUMBER</code> attribute is parsed as "attribute = value", with the filter for a <code class="codeph">STRING</code> attribute parsed as "attribute like value" (Mandatory).
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The workload capture filters work in either the <code class="codeph">DEFAULT</code> <code class="codeph">INCLUSION</code> or the <code class="codeph">DEFAULT</code> <code class="codeph">EXCLUSION</code> mode as determined by the <code class="codeph">default_action</code> input to the <a href="DBMS_WORKLOAD_CAPTURE.html#GUID-DE768343-F206-445B-A6BF-3126F85367DE">START_CAPTURE Procedure</a>.
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">ADD_FILTER</code> adds a new filter that affects the next workload capture, and whether the filters are considered as <code class="codeph">INCLUSION</code> filters or <code class="codeph">EXCLUSION</code> filters depends on the value of the default_action input to <a href="DBMS_WORKLOAD_CAPTURE.html#GUID-DE768343-F206-445B-A6BF-3126F85367DE">START_CAPTURE Procedure</a>.
                              </p>
                           </li>
                           <li>
                              <p>Filters once specified are valid only for the next workload capture. If the same set of filters need to be used for subsequent capture, they need to be specified each time before the <a href="DBMS_WORKLOAD_CAPTURE.html#GUID-DE768343-F206-445B-A6BF-3126F85367DE">START_CAPTURE Procedure</a> is executed.
                              </p>
                           </li>
                           <li>
                              <p>All the filters are listed in the <code class="codeph">DBA_WORKLOAD_FILTERS</code> view.
                              </p>
                           </li>
                           <li>
                              <p>You can capture the workload for a particular PDB by specifying a filter of PDB type.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Examples</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>By default, a capture works in an <code class="codeph">INCLUSION</code> mode, which records everything except for those requests that satisfy conditions of specified filters. For example, if you want to exclude all requests from <code class="codeph">SCOTT</code>, you can add the following filter before starting a capture. 
                              </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_CAPTURE.ADD_FILTER ('filter user1', 'USER', 'SCOTT');
</pre></li>
                           <li>
                              <p>Multiple filters are evaluated according to the logical disjunction operator <code class="codeph">OR</code>. Therefore, if you want to record workload for both <code class="codeph">SCOTT</code> and <code class="codeph">JOHN</code>, you add an additional filter:
                              </p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_CAPTURE.ADD_FILTER ('filter user2', 'USER', 'JOHN');
</pre></li>
                           <li>
                              <p>In a CDB, you exclude the workload of a particular PDB by the filter:</p><pre class="oac_no_warn" dir="ltr">EXEC DBMS_WORKLOAD_CAPTURE.ADD_FILTER ('filter pdb workload', 'PDB_NAME', 'CDB1_PDB1');
</pre></li>
                           <li>
                              <p>To use <a href="DBMS_APPLICATION_INFO.html#GUID-14484F86-44F2-4B34-B34E-0C873D323EAD" title="Application developers can use the DBMS_APPLICATION_INFO package with Oracle Trace and the SQL trace facility to record names of executing modules or transactions in the database for later use when tracking the performance of various modules and debugging."> DBMS_APPLICATION_INFO</a> to identify workload that is issued to the database:
                              </p><pre class="oac_no_warn" dir="ltr">DBMS_APPLICATION_INFO.SET_MODULE('ORDER_ENTRY', NULL);
-- run some SQL here
DBMS_APPLICATION_INFO.SET_ACTION('ORDER_ENTRY_LOG');
-- run logging SQL
</pre></li>
                           <li>
                              <p>If having captured workload, you want to exclude the logging SQL from the captured, specify a filter for capture:</p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_CAPTURE.ADD_FILTER('filter logging operations', 'ACTION', 'ORDER_ENTRY_LOG');
</pre></li>
                           <li>
                              <p> To filter out the full order entry transaction, define a filter:</p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_CAPTURE.ADD_FILTER('filter order entry', 'MODULE', 'ORDER_ENTRY');</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69048"></a><a id="ARPLS69049"></a><a id="ARPLS69049"></a><a id="ARPLS69048"></a><div class="props_rev_3"><a id="GUID-E61B5E13-0602-4124-B941-5696BA640EE9" name="GUID-E61B5E13-0602-4124-B941-5696BA640EE9"></a><h4 id="ARPLS-GUID-E61B5E13-0602-4124-B941-5696BA640EE9" class="sect4"><span class="enumeration_section">182.3.2 </span>DELETE_CAPTURE_INFO Procedure
                  </h4>
                  <div>
                     <p>This procedure deletes the rows in the <code class="codeph">DBA_WORKLOAD_CAPTURES</code> and <code class="codeph">DBA_WORKLOAD_FILTERS</code> views that corresponds to the given workload capture ID. 
                     </p>
                     <div class="section">
                        <p class="subhead3">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_CAPTURE.DELETE_CAPTURE_INFO
   capture_id     IN   NUMBER);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Parameters</p>
                        <div class="tblformal" id="GUID-E61B5E13-0602-4124-B941-5696BA640EE9__GUID-B5B85B5C-C785-4327-9C08-1D3A345BA583">
                           <p class="titleintable">Table 182-3 DELETE_CAPTURE_INFO Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DELETE_CAPTURE_INFO Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_CAPTURE.DELETE_CAPTURE_INFO." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="100%" id="d1109915e1031">Parameter</th>
                                    <th align="left" valign="bottom" id="d1109915e1034">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="100%" id="d1109915e1039" headers="d1109915e1031 ">
                                       <p><code class="codeph">capture_id</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d1109915e1039 d1109915e1034 ">
                                       <p>ID of the workload capture that needs to be deleted. Corresponds to <code class="codeph">DBA_WORKLOAD_CAPTURES</code>.<code class="codeph">ID</code>. (Mandatory)
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                        <p>Passing the ID of a capture that is in progress will first automatically stop that capture.</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69050"></a><a id="ARPLS69051"></a><a id="ARPLS69051"></a><a id="ARPLS69050"></a><div class="props_rev_3"><a id="GUID-44B2949A-9BE4-4380-8EA9-6F9B31B406E0" name="GUID-44B2949A-9BE4-4380-8EA9-6F9B31B406E0"></a><h4 id="ARPLS-GUID-44B2949A-9BE4-4380-8EA9-6F9B31B406E0" class="sect4"><span class="enumeration_section">182.3.3 </span>DELETE_FILTER Procedure
                  </h4>
                  <div>
                     <p>This procedure deletes a specified filter.</p>
                     <div class="section">
                        <p class="subhead3">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_CAPTURE.DELETE_FILTER (
   filter_name           IN   VARCHAR2(40) NOT NULL);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Parameters</p>
                        <div class="tblformal" id="GUID-44B2949A-9BE4-4380-8EA9-6F9B31B406E0__GUID-20CE30E4-F2AA-4DB1-99F2-9D0000A19520">
                           <p class="titleintable">Table 182-4 DELETE_FILTER Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="DELETE_FILTER Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_CAPTURE.DELETE_FILTER." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d1109915e1165">Parameter</th>
                                    <th align="left" valign="bottom" width="67%" id="d1109915e1168">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e1173" headers="d1109915e1165 ">
                                       <p><code class="codeph">filter_name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e1173 d1109915e1168 ">
                                       <p>Filter to be deleted</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                        <p>The <code class="codeph">DELETE_FILTER</code> Procedure only affects filters that have not been used by any previous capture. Consequently, filters can be deleted only if they have been added using the <a href="DBMS_WORKLOAD_CAPTURE.html#GUID-C688CCA4-C471-4D2E-8E95-C3BD7A0A6A35" title="This procedure adds a filter to capture a subset of the workload.">ADD_FILTER Procedures</a> after any capture has been completed. Filters that have been added using <code class="codeph">ADD_FILTER</code> before a <code class="codeph">START_CAPTURE</code> and <code class="codeph">FINISH_CAPTURE</code> cannot be deleted <code class="codeph">anymore</code> using this subprogram.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69052"></a><a id="ARPLS69053"></a><a id="ARPLS69053"></a><a id="ARPLS69052"></a><div class="props_rev_3"><a id="GUID-56386444-D26C-4A44-8907-DC994913A55E" name="GUID-56386444-D26C-4A44-8907-DC994913A55E"></a><h4 id="ARPLS-GUID-56386444-D26C-4A44-8907-DC994913A55E" class="sect4"><span class="enumeration_section">182.3.4 </span>EXPORT_AWR Procedure
                  </h4>
                  <div>
                     <p>This procedure exports the AWR snapshots associated with a given capture ID.</p>
                     <div class="section">
                        <p class="subhead3">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_CAPTURE.EXPORT_AWR (
   capture_id     IN NUMBER);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Parameters</p>
                        <div class="tblformal" id="GUID-56386444-D26C-4A44-8907-DC994913A55E__GUID-BB0DE462-93C4-4753-87D6-8258D65D007E">
                           <p class="titleintable">Table 182-5 EXPORT_AWR Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="EXPORT_AWR Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_CAPTURE.EXPORT_AWR." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d1109915e1316">Parameter</th>
                                    <th align="left" valign="bottom" width="67%" id="d1109915e1319">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e1324" headers="d1109915e1316 ">
                                       <p><code class="codeph">capture_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e1324 d1109915e1319 ">
                                       <p>ID of the capture whose AWR snapshots are to be exported. (Mandatory)</p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                        <p>This procedure works only if the corresponding workload capture was performed in the current database (meaning that the corresponding row in <code class="codeph">DBA_WORKLOAD_CAPTURES</code> was not created by calling the <a href="DBMS_WORKLOAD_CAPTURE.html#GUID-528AB56B-D07E-4A40-AAE5-FBDFFF517395" title="This procedure retrieves all information regarding a workload capture present in the stipulated directory, imports the information into the DBA_WORKLOAD_CAPTURES and DBA_WORKLOAD_FILTERS views, and returns the appropriate DBA_WORKLOAD_CAPTURES.ID">GET_CAPTURE_INFO Function</a>) and the AWR snapshots that correspond to the original capture time period are still available.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69054"></a><a id="ARPLS69055"></a><a id="ARPLS69055"></a><a id="ARPLS69054"></a><div class="props_rev_3"><a id="GUID-A062BC7C-1077-4DCB-94EE-900CFE7C837C" name="GUID-A062BC7C-1077-4DCB-94EE-900CFE7C837C"></a><h4 id="ARPLS-GUID-A062BC7C-1077-4DCB-94EE-900CFE7C837C" class="sect4"><span class="enumeration_section">182.3.5 </span>FINISH_CAPTURE Procedure
                  </h4>
                  <div>
                     <p>This procedure signals all connected sessions to stop the workload capture and stops future requests to the database from being captured.</p>
                     <div class="section">
                        <p class="subhead3">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_CAPTURE.FINISH_CAPTURE
   timeout     IN   NUMBER  DEFAULT 30
   reason       IN   VARCHAR2 DEFAULT NULL);</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Parameters</p>
                        <div class="tblformal" id="GUID-A062BC7C-1077-4DCB-94EE-900CFE7C837C__GUID-8AB74E12-B239-40A1-A6CE-AA04B623C180">
                           <p class="titleintable">Table 182-6 FINISH_CAPTURE Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="FINISH_CAPTURE Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_CAPTURE.FINISH_CAPTURE." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d1109915e1467">Parameter</th>
                                    <th align="left" valign="bottom" width="67%" id="d1109915e1470">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e1475" headers="d1109915e1467 ">
                                       <p><code class="codeph">timeout</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e1475 d1109915e1470 ">
                                       <p>Specifies in seconds for how long the procedure should wait before it times out. Pass 0 if you want to cancel the current workload capture and not wait for any sessions to flush it's capture buffers. Default value: 30 seconds</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e1483" headers="d1109915e1467 ">
                                       <p><code class="codeph">reason</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e1483 d1109915e1470 ">
                                       <p>Specifies a reason for calling the procedure. The reason appears in the column <code class="codeph">ERROR_MESSAGE</code> of the view <code class="codeph">DBA_WORKLOAD_CAPTURES</code>.
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>By default, <code class="codeph">FINISH_CAPTURE</code> waits for 30 seconds to receive a successful acknowledgement from all sessions in the database cluster before timing out.
                              </p>
                           </li>
                           <li>
                              <p>All sessions that either were in the middle of executing a user request or received a new user request, while <code class="codeph">FINISH_CAPTURE</code> was waiting for acknowledgements, flush their buffers and send back their acknowledgement to <code class="codeph">FINISH_CAPTURE</code>.
                              </p>
                           </li>
                           <li>
                              <p>If a database session remains idle (waiting for the next user request) throughout the duration of <code class="codeph">FINISH_CAPTURE</code>, the session might have unflushed capture buffers and does not send it's acknowledgement to <code class="codeph">FINISH_CAPTURE</code>. 
                              </p>
                              <p>To avoid this, do not have sessions that remain idle (waiting for the next user request) while invoking <code class="codeph">FINISH_CAPTURE</code>. Either close the database session(s) before running <code class="codeph">FINISH_CAPTURE</code> or send new database requests to those sessions during <code class="codeph">FINISH_CAPTURE</code>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69056"></a><a id="ARPLS69057"></a><a id="ARPLS69057"></a><a id="ARPLS69056"></a><div class="props_rev_3"><a id="GUID-528AB56B-D07E-4A40-AAE5-FBDFFF517395" name="GUID-528AB56B-D07E-4A40-AAE5-FBDFFF517395"></a><h4 id="ARPLS-GUID-528AB56B-D07E-4A40-AAE5-FBDFFF517395" class="sect4"><span class="enumeration_section">182.3.6 </span>GET_CAPTURE_INFO Function
                  </h4>
                  <div>
                     <p>This procedure retrieves all information regarding a workload capture present in the stipulated directory, imports the information into the <code class="codeph">DBA_WORKLOAD_CAPTURES</code> and <code class="codeph">DBA_WORKLOAD_FILTERS</code> views, and returns the appropriate <code class="codeph">DBA_WORKLOAD_CAPTURES</code>.<code class="codeph">ID</code> 
                     </p>
                     <div class="section">
                        <p class="subhead3">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_CAPTURE.GET_CAPTURE_INFO
   dir     IN   VARCHAR2)
  RETURN NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Parameters</p>
                        <div class="tblformal" id="GUID-528AB56B-D07E-4A40-AAE5-FBDFFF517395__GUID-F2395DB0-231C-4E36-AB0D-6A6B4C2EF1B6">
                           <p class="titleintable">Table 182-7 GET_CAPTURE_INFO Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="GET_CAPTURE_INFO Function Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_CAPTURE.GET_CAPTURE_INFO." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d1109915e1655">Parameter</th>
                                    <th align="left" valign="bottom" width="67%" id="d1109915e1658">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e1663" headers="d1109915e1655 ">
                                       <p><code class="codeph">dir</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e1663 d1109915e1658 ">
                                       <p>Name of the <code class="codeph">DIRECTORY</code> object (case sensitive) where all the workload capture files are located (Mandatory)
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                        <p>If an appropriate row describing the capture in the stipulated directory already exists in <code class="codeph">DBA_WORKLOAD_CAPTURES</code>, the <a href="DBMS_WORKLOAD_CAPTURE.html#GUID-528AB56B-D07E-4A40-AAE5-FBDFFF517395" title="This procedure retrieves all information regarding a workload capture present in the stipulated directory, imports the information into the DBA_WORKLOAD_CAPTURES and DBA_WORKLOAD_FILTERS views, and returns the appropriate DBA_WORKLOAD_CAPTURES.ID">GET_CAPTURE_INFO Function</a> simply returns that row's <code class="codeph">DBA_WORKLOAD_CAPTURES</code>.<code class="codeph">ID</code>. If no existing row matches the capture present in the stipulated directory a new row is inserted to <code class="codeph">DBA_WORKLOAD_CAPTURES</code> and that row's <code class="codeph">ID</code> is returned.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69058"></a><a id="ARPLS69059"></a><a id="ARPLS69059"></a><a id="ARPLS69058"></a><div class="props_rev_3"><a id="GUID-0081475D-A909-4466-A247-C83633DC0213" name="GUID-0081475D-A909-4466-A247-C83633DC0213"></a><h4 id="ARPLS-GUID-0081475D-A909-4466-A247-C83633DC0213" class="sect4"><span class="enumeration_section">182.3.7 </span>IMPORT_AWR Function
                  </h4>
                  <div>
                     <p>This procedure imports the AWR snapshots associated with a given capture ID provided those AWR snapshots were exported earlier from the original capture system using the <code class="codeph">EXPORT_AWR</code> procedure.
                     </p>
                     <div class="section">
                        <p class="subhead3">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_CAPTURE.IMPORT_AWR (
   capture_id       IN   NUMBER,
   staging_schema   IN   VARCHAR2,
   force_cleanup    IN   BOOLEAN DEFAULT FALSE)
 RETURN NUMBER;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Parameters</p>
                        <div class="tblformal" id="GUID-0081475D-A909-4466-A247-C83633DC0213__GUID-F3DD1AA3-43AE-48C0-8A25-4E14F48CC623">
                           <p class="titleintable">Table 182-8 IMPORT_AWR Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="IMPORT_AWR Function Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_CAPTURE.IMPORT_AWR." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d1109915e1824">Parameter</th>
                                    <th align="left" valign="bottom" width="67%" id="d1109915e1827">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e1832" headers="d1109915e1824 ">
                                       <p><code class="codeph">capture_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e1832 d1109915e1827 ">
                                       <p>ID of the capture whose AWR snapshots should be imported. (Mandatory)</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e1840" headers="d1109915e1824 ">
                                       <p><code class="codeph">staging_schema</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e1840 d1109915e1827 ">
                                       <p>Name of a valid schema in the current database which can be used as a staging area while importing the AWR snapshots from the capture directory to the <code class="codeph">SYS</code> <code class="codeph">AWR</code> schema.The <code class="codeph">SYS</code> schema is not a valid input. (Mandatory, Case sensitive).
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e1857" headers="d1109915e1824 ">
                                       <p><code class="codeph">force_cleanup</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e1857 d1109915e1827 ">
                                       <p>Values:</p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">TRUE</code> - any AWR data present in the given <code class="codeph">staging_schema</code> are removed before the actual import operation. All tables with names that match any of the tables in AWR are dropped before the actual import. This typically is equivalent to dropping all tables returned by the following SQL:
                                             </p><pre class="oac_no_warn" dir="ltr">SELECT table_name FROM dba_tables
WHERE owner = staging_schema
AND table_name like 'WR_$%';</pre><p>Use this option only if you are sure that there are no important data in any such tables in the <code class="codeph">staging_schema</code>.
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">FALSE</code> - (default) no tables dropped from the <code class="codeph">staging_schema</code> prior to the import operation
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Return Values</p>
                        <p>Returns the new randomly generated database ID that was used to import the AWR snapshots. The same value can be found in the <code class="codeph">AWR_DBID</code> column in the <code class="codeph">DBA_WORKLOAD_CAPTURES</code> view.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                        <p><code class="codeph">IMPORT_AWR</code> fails if the <code class="codeph">staging_schema</code> provided as input contains any tables with the same name as any of the AWR tables, such as <code class="codeph">WRM$_SNAPSHOT</code> or <code class="codeph">WRH$_PARAMETER</code>. Please drop any such tables in the <code class="codeph">staging_schema</code> before invoking <code class="codeph">IMPORT_AWR</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="DBMS_WORKLOAD_CAPTURE.html#GUID-56386444-D26C-4A44-8907-DC994913A55E" title="This procedure exports the AWR snapshots associated with a given capture ID.">EXPORT_AWR Procedure</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="ARPLS69062"></a><a id="ARPLS69063"></a><a id="ARPLS69064"></a><a id="ARPLS69063"></a><a id="ARPLS69064"></a><a id="ARPLS69062"></a><div class="props_rev_3"><a id="GUID-16048E89-39F6-4ADC-823F-6F0CF108FC98" name="GUID-16048E89-39F6-4ADC-823F-6F0CF108FC98"></a><h4 id="ARPLS-GUID-16048E89-39F6-4ADC-823F-6F0CF108FC98" class="sect4"><span class="enumeration_section">182.3.8 </span>REPORT Function
                  </h4>
                  <div>
                     <p>This function generates a report on the stipulated workload capture.</p>
                     <div class="section">
                        <p class="subhead3">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_CAPTURE.REPORT (
   capture_id      IN   NUMBER,
   format          IN   VARCHAR2)
 RETURN CLOB;</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Parameters</p>
                        <div class="tblformal" id="GUID-16048E89-39F6-4ADC-823F-6F0CF108FC98__GUID-DEE69D71-0D24-43A2-AA45-72D54ABACFC8">
                           <p class="titleintable">Table 182-9 REPORT Function Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="REPORT Function Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_CAPTURE.REPORT." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d1109915e2040">Parameter</th>
                                    <th align="left" valign="bottom" width="67%" id="d1109915e2043">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e2048" headers="d1109915e2040 ">
                                       <p><code class="codeph">capture_id</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e2048 d1109915e2043 ">
                                       <p>ID of the workload capture whose capture report is required. (Mandatory)</p>
                                       <p>This relates to the directory that contains the workload capture on which the Report needs to be generated. Should be a valid <code class="codeph">DIRECTORY</code> object that points to a valid directory in the host system that contains a workload capture. 
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e2061" headers="d1109915e2040 ">
                                       <p><code class="codeph">format</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e2061 d1109915e2043 ">
                                       <p>Specifies the report format. Valid values are <code class="codeph">DBMS_WORKLOAD_CAPTURE</code>.<code class="codeph">TYPE_TEXT</code> and <code class="codeph">DBMS_WORKLOAD_CAPTURE</code>.<code class="codeph">TYPE_HTML</code>.(Mandatory)
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Return Values</p>
                        <p>The report body in the desired format returned as a <code class="codeph">CLOB</code>.
                        </p>
                        <div class="tblformal" id="GUID-16048E89-39F6-4ADC-823F-6F0CF108FC98__GUID-427B89F3-1BF8-4380-977C-8E2475932A34">
                           <p class="titleintable">Table 182-10 Constants Used by Report Function</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="Constants Used by Report Function" summary="Constants used by Report Function" width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="25%" id="d1109915e2100">Constant</th>
                                    <th align="left" valign="bottom" width="25%" id="d1109915e2103">Type</th>
                                    <th align="left" valign="bottom" width="16%" id="d1109915e2106">Value</th>
                                    <th align="left" valign="bottom" width="34%" id="d1109915e2109">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1109915e2114" headers="d1109915e2100 ">
                                       <p><code class="codeph">TYPE_HTML</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d1109915e2114 d1109915e2103 ">
                                       <p><code class="codeph">VARCHAR2(4)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d1109915e2114 d1109915e2106 ">
                                       <p>'HTML'</p>
                                    </td>
                                    <td align="left" valign="top" width="34%" headers="d1109915e2114 d1109915e2109 ">
                                       <p>Generates the HTML version of the report</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="25%" id="d1109915e2129" headers="d1109915e2100 ">
                                       <p><code class="codeph">TYPE_TEXT</code></p>
                                    </td>
                                    <td align="left" valign="top" width="25%" headers="d1109915e2129 d1109915e2103 ">
                                       <p><code class="codeph">VARCHAR2(4)</code></p>
                                    </td>
                                    <td align="left" valign="top" width="16%" headers="d1109915e2129 d1109915e2106 ">
                                       <p>'TEXT'</p>
                                    </td>
                                    <td align="left" valign="top" width="34%" headers="d1109915e2129 d1109915e2109 ">
                                       <p>Used as input to the <code class="codeph">format</code> argument to generate the text version of the report
                                       </p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="ARPLS69065"></a><a id="ARPLS69066"></a><a id="ARPLS69066"></a><a id="ARPLS69065"></a><div class="props_rev_3"><a id="GUID-DE768343-F206-445B-A6BF-3126F85367DE" name="GUID-DE768343-F206-445B-A6BF-3126F85367DE"></a><h4 id="ARPLS-GUID-DE768343-F206-445B-A6BF-3126F85367DE" class="sect4"><span class="enumeration_section">182.3.9 </span>START_CAPTURE Procedure
                  </h4>
                  <div>
                     <div class="section">
                        <p>This procedure initiates workload capture on all instances. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Syntax</p><pre class="oac_no_warn" dir="ltr">DBMS_WORKLOAD_CAPTURE.START_CAPTURE (
   name              IN  VARCHAR2,
   dir               IN  VARCHAR2,
   duration          IN  NUMBER   DEFAULT NULL,
   default_action    IN  VARCHAR2 DEFAULT 'INCLUDE',
   auto_unrestrict   IN  BOOLEAN  DEFAULT TRUE,
   capture_sts       IN  BOOLEAN  DEFAULT FALSE,
   sts_cap_interval  IN  NUMBER   DEFAULT 300,
   plsql_mode        IN  VARCHAR2 DEFAULT 'TOP_LEVEL');</pre></div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Parameters</p>
                        <div class="tblformal" id="GUID-DE768343-F206-445B-A6BF-3126F85367DE__GUID-3C7A92EA-7D0F-4889-98ED-C98050694E83">
                           <p class="titleintable">Table 182-11 START_CAPTURE Procedure Parameters</p>
                           <table cellpadding="4" cellspacing="0" class="Formal" title="START_CAPTURE Procedure Parameters" summary="This table describes the parameters of DBMS_WORKLOAD_CAPTURE.START." width="100%" frame="hsides" border="1" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" width="33%" id="d1109915e2255">Parameter</th>
                                    <th align="left" valign="bottom" width="67%" id="d1109915e2258">Description</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e2263" headers="d1109915e2255 ">
                                       <p><code class="codeph">name</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e2263 d1109915e2258 ">
                                       <p>Name of the workload capture. Allows the workload capture to be given a label, such as "Thanksgiving weekend" or "Christmas peak workload" for future reference. The workload capture's name is preserved along with the captured workload actions. (Mandatory)</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e2271" headers="d1109915e2255 ">
                                       <p><code class="codeph">dir</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e2271 d1109915e2258 ">
                                       <p>Name of the <code class="codeph">DIRECTORY</code> object (case sensitive) where all the workload capture files are stored. Should contain enough space to hold all the workload capture files. (Mandatory)
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e2282" headers="d1109915e2255 ">
                                       <p><code class="codeph">duration</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e2282 d1109915e2258 ">
                                       <p>Optional input to specify the duration (in seconds) for which the workload needs to be captured. <code class="codeph">DEFAULT</code> is <code class="codeph">NULL</code> which means that workload capture continues until the user executes <code class="codeph">DBMS_WORKLOAD_CAPTURE</code>.<code class="codeph">FINISH_CAPTURE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e2302" headers="d1109915e2255 ">
                                       <p><code class="codeph">default_action</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e2302 d1109915e2258 ">
                                       <p>Can be either <code class="codeph">INCLUDE</code> or <code class="codeph">EXCLUDE</code>. Determines whether, by default, every user request should be captured or not. Also determines whether the workload filters specified should be considered as <code class="codeph">INCLUSION</code> filters or <code class="codeph">EXCLUSION</code> filters.
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>If <code class="codeph">INCLUDE</code>, by default all user requests to the database are captured, except for the part of the workload defined by the filters. In this case, all the filters specified using the <a href="DBMS_WORKLOAD_CAPTURE.html#GUID-C688CCA4-C471-4D2E-8E95-C3BD7A0A6A35" title="This procedure adds a filter to capture a subset of the workload.">ADD_FILTER Procedures</a> are treated as <code class="codeph">EXCLUSION</code> filters, determining the workload that is not captured. (<code class="codeph">DEFAULT</code>, and so all the filters specified are assumed to be <code class="codeph">EXCLUSION</code> filters.)
                                             </p>
                                          </li>
                                          <li>
                                             <p>If <code class="codeph">EXCLUDE</code>, by default no user request to the database is captured, except for the part of the workload defined by the filters. In this case, all the filters specified using the <a href="DBMS_WORKLOAD_CAPTURE.html#GUID-C688CCA4-C471-4D2E-8E95-C3BD7A0A6A35" title="This procedure adds a filter to capture a subset of the workload.">ADD_FILTER Procedures</a> are treated as <code class="codeph">INCLUSION</code> filters, determining the workload that is captured. 
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e2361" headers="d1109915e2255 ">
                                       <p><code class="codeph">auto_unrestrict</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e2361 d1109915e2258 ">
                                       <p>Can be either <code class="codeph">TRUE</code> or <code class="codeph">FALSE</code>. 
                                       </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p>If <code class="codeph">TRUE</code>, all instances started up in <code class="codeph">RESTRICTED</code> mode using <code class="codeph">STARTUP</code> <code class="codeph">RESTRICT</code> are automatically unrestricted upon a successful <code class="codeph">START_CAPTURE</code>. (<code class="codeph">DEFAULT</code>)
                                             </p>
                                          </li>
                                          <li>
                                             <p>If <code class="codeph">FALSE</code>, no database instance is automatically unrestricted.
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e2404" headers="d1109915e2255 ">
                                       <p><code class="codeph">capture_sts</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e2404 d1109915e2258 ">
                                       <p>If this parameter is <code class="codeph">TRUE</code>, a SQL tuning set capture is also started in parallel with workload capture. The resulting SQL tuning set can be exported using the <a href="DBMS_WORKLOAD_CAPTURE.html#GUID-56386444-D26C-4A44-8907-DC994913A55E" title="This procedure exports the AWR snapshots associated with a given capture ID.">EXPORT_AWR Procedure</a> along with the AWR data. Currently, parallel STS capture is not supported in an Oracle RAC environment, so this parameter has no effect if used in that context. Capture filters defined using the <code class="codeph">DBMS_WORKLOAD_REPLAY</code> interface do not apply to the SQL tuning set capture. The calling user must have the appropriate privileges ('<code class="codeph">ADMINISTER SQL TUNING SET</code>').
                                       </p>
                                       <p>If starting SQL set capture fails, workload capture is stopped. The reason is stored in <code class="codeph">DBA_WORKLOAD_CAPTURES</code>.<code class="codeph">ERROR_MESSAGE</code>. The default value is <code class="codeph">FALSE</code>.
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e2439" headers="d1109915e2255 ">
                                       <p><code class="codeph">sts_cap_interval</code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e2439 d1109915e2258 ">
                                       <p>Specifies the capture interval of the SQL set capture from the cursor cache in seconds. The default value is 300.</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" width="33%" id="d1109915e2447" headers="d1109915e2255 ">
                                       <p><code class="codeph">plsql_mode       </code></p>
                                    </td>
                                    <td align="left" valign="top" width="67%" headers="d1109915e2447 d1109915e2258 ">
                                       <p>Specifies the PL/SQL capture mode: </p>
                                       <ul style="list-style-type: disc;">
                                          <li>
                                             <p><code class="codeph">TOP_LEVEL</code> — only top-level PL/SQL calls are captured
                                             </p>
                                          </li>
                                          <li>
                                             <p><code class="codeph">EXTENDED</code> —both top-level PL/SQL calls and SQL called from PL/SQL are captured
                                             </p>
                                          </li>
                                       </ul>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Usage Notes</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>All user requests sent to database after a successful invocation of <code class="codeph">START_CAPTURE</code> are recorded in the given <code class="codeph">dir</code> directory for the given duration provided that one was specified. If no duration was specified, the capture lasts indefinitely until the <a href="DBMS_WORKLOAD_CAPTURE.html#GUID-A062BC7C-1077-4DCB-94EE-900CFE7C837C" title="This procedure signals all connected sessions to stop the workload capture and stops future requests to the database from being captured.">FINISH_CAPTURE Procedure</a> is executed.
                              </p>
                           </li>
                           <li>
                              <p>A workload capture once started continues to record user requests across database instance shutdowns and startups for the specified duration, or until <code class="codeph">FINISH_CAPTURE</code> is executed, whichever occurs first.
                              </p>
                           </li>
                           <li>
                              <p>One can use workload filters (as described with regard to the <a href="DBMS_WORKLOAD_CAPTURE.html#GUID-C688CCA4-C471-4D2E-8E95-C3BD7A0A6A35" title="This procedure adds a filter to capture a subset of the workload.">ADD_FILTER Procedures</a>) to capture only a subset of the user requests sent to the database. By default, when no workload filters are defined, all user requests are captured.
                              </p>
                           </li>
                           <li>
                              <p>Workload that is initiated from Oracle Database background processes (such as <code class="codeph">SMON</code>, <code class="codeph">PMON</code>, <code class="codeph">MMON</code>) and Oracle Database Scheduler Jobs (as detailed in the <a href="DBMS_SCHEDULER.html#GUID-A24DEB5D-2EAF-4C0B-8715-30DC947B3F87" title="The DBMS_SCHEDULER package provides a collection of scheduling functions and procedures that can be called from any PL/SQL program."> DBMS_SCHEDULER</a> package) is not captured, no matter how the workload filters are defined. These activities should happen automatically on an appropriately configured replay system.
                              </p>
                           </li>
                           <li>
                              <p>By default, all database instances that were started up in <code class="codeph">RESTRICTED</code> mode using <code class="codeph">STARTUP</code> <code class="codeph">RESTRICT</code> are <code class="codeph">UNRESTRICTED</code> upon a successful invocation of <code class="codeph">START_CAPTURE</code> Use <code class="codeph">FALSE</code> for the <code class="codeph">auto_unrestrict</code> input parameter, if you do not want this behavior.
                              </p>
                           </li>
                           <li>
                              <p>It is important to have a well-defined starting point for the workload so that the replay system can be restored to that point before initiating a replay of the captured workload. To have a well-defined starting point for the workload capture, it is preferable not to have any active user sessions when <code class="codeph">START_CAPTURE</code> is executed. If ongoing sessions have ongoing transactions, those transactions are not replayed properly in subsequent database replays, since only that part of the transaction whose calls were executed after <code class="codeph">START_CAPTURE</code> are replayed.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>