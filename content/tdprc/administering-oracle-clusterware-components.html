<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The main components to manage in your Oracle Clusterware environment are the voting disks and the Oracle Cluster Registry (OCR).">
      <meta name="description" content="The main components to manage in your Oracle Clusterware environment are the voting disks and the Oracle Cluster Registry (OCR).">
      <title>Administering Oracle Clusterware Components</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="2 Day + Real Application Clusters Guide ">
      <meta property="og:description" content="The main components to manage in your Oracle Clusterware environment are the voting disks and the Oracle Cluster Registry (OCR).">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="2 Day + Real Application Clusters Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 17.8.1">
      <link rel="alternate" href="2-day-real-application-clusters-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2017-10-12T06:16:43-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2017">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E85152-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="administering-database-instances-and-cluster-databases.html" title="Previous" type="text/html">
      <link rel="next" href="managing-workloads-using-database-services.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">
            {
                "primary":
                {
                    "category":{
                      "short_name":"database",
                      "element_name":"Database",
                      "display_in_url":true
                    },
                    "suite":{
                      "short_name":"oracle",
                      "element_name":"Oracle",
                      "display_in_url":true
                    },
                    "product_group":{
                      "short_name":"not-applicable",
                      "element_name":"Not applicable",
                      "display_in_url":false
                    },
                    "product":{
                      "short_name":"oracle-database",
                      "element_name":"Oracle Database",
                      "display_in_url":true
                    },
                    "release":{
                      "short_name":"12.2",
                      "element_name":"Release 12.2",
                      "display_in_url":true
                    },
                    "platform":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    },
                    "component":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    }
                }
            }
            </script>
      
    <meta name="dcterms.title" content="2 Day + Real Application Clusters Guide">
    <meta name="dcterms.isVersionOf" content="TDPRC">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="administering-database-instances-and-cluster-databases.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="managing-workloads-using-database-services.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">2 Day + Real Application Clusters Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Administering Oracle Clusterware Components</li>
            </ol>
            <a id="GUID-4598E1DB-63B7-4AB3-A441-826FCC3C1724" name="GUID-4598E1DB-63B7-4AB3-A441-826FCC3C1724"></a><a id="TDPRC221"></a>
            
            <h2 id="TDPRC-GUID-4598E1DB-63B7-4AB3-A441-826FCC3C1724" class="sect2"><span class="enumeration_chapter">7 </span>Administering Oracle Clusterware Components
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The main components to manage in your Oracle Clusterware environment are the voting disks and the Oracle Cluster Registry (OCR).</p>
            </div>
            <div>
               <p><strong>Topics:</strong></p>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-22A2ACB0-8700-408D-845C-17164248FB24">About Oracle Clusterware</a><br>Oracle Clusterware includes a high availability framework for managing any application that runs on your cluster. Oracle Real Application Clusters (Oracle RAC) uses Oracle Clusterware as the infrastructure that binds multiple nodes that then operate as a single server. 
                  </li>
                  <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-8CFDF653-EEC6-4C59-B900-6235D93F8D2D">Managing the Oracle Clusterware Stack</a><br>By default, Oracle Clusterware is configured to restart whenever the server it resides on is restarted. During certain maintenance operations, you may be required to stop or start the Oracle Clusterware stack manually.
                  </li>
                  <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-461F16FA-B9F8-4681-9D28-343943F138C3">Administering Voting Disks for Oracle Clusterware</a><br>Voting disks manage information about node membership. Each voting disk must be accessible by all nodes in the cluster for nodes to be members of the cluster.
                  </li>
                  <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-8B4D4373-DD26-46A3-9138-A8E15F4D291F">Backing Up and Recovering the Oracle Cluster Registry</a><br>Oracle Clusterware automatically creates Oracle Cluster Registry (OCR) backups every four hours. At any one time, Oracle Clusterware always retains the latest three backup copies of the OCR that are four hours old, one day old, and one week old.
                  </li>
                  <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-834FBC6A-9DBE-42E1-ACE6-1C14C772A5CE">Changing the Oracle Cluster Registry Configuration</a><br>To ensure proper operation of Oracle Clusterware, make sure the OCR is highly available.
                  </li>
                  <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-5C81FDB4-4994-4E47-8A96-CD60B68DEC7F">Troubleshooting the Oracle Cluster Registry</a><br>The Oracle Cluster Registry (OCR) manages Oracle Clusterware and Oracle RAC database configuration information.
                  </li>
               </ul>
               <div class="infoboxnotealso" id="GUID-4598E1DB-63B7-4AB3-A441-826FCC3C1724__GUID-B0977DA3-1A55-4A18-98A8-4FDE98A65727">
                  <p class="notep1">See Also:</p>
                  <p></p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><span class="q">"<a href="introduction-to-deploying-a-rac-environment.html#GUID-DB142141-BF7C-4725-B012-C121C0A78A76" title="Oracle Grid Infrastructure for a cluster refers to the installation of the combined products. Oracle Clusterware and Oracle ASM are still individual products, and are referred to by those names.">About Oracle Grid Infrastructure for a Cluster and Oracle RAC</a>"</span></p>
                     </li>
                  </ul>
               </div>
            </div>
            <a id="TDPRC222"></a><div class="props_rev_3"><a id="GUID-22A2ACB0-8700-408D-845C-17164248FB24" name="GUID-22A2ACB0-8700-408D-845C-17164248FB24"></a><h3 id="TDPRC-GUID-22A2ACB0-8700-408D-845C-17164248FB24" class="sect3"><span class="enumeration_section">7.1 </span>About Oracle Clusterware
               </h3>
               <div>
                  <p>Oracle Clusterware includes a high availability framework for managing any application that runs on your cluster. Oracle Real Application Clusters (Oracle RAC) uses Oracle Clusterware as the infrastructure that binds multiple nodes that then operate as a single server. </p>
                  <p>In an Oracle RAC environment, Oracle Clusterware monitors all Oracle components (such as instances and listeners). If a failure occurs, then Oracle Clusterware automatically attempts to restart the failed component and also redirects operations to a surviving component. </p>
                  <p>Oracle Clusterware manages applications to ensure they start when the system starts. Oracle Clusterware also monitors the applications to ensure they are always available. For example, if an application process fails, then Oracle Clusterware attempts to restart the process based on scripts that you customize. If a node in the cluster fails, then you can program application processes that typically run on the failed node to restart on another node in the cluster.</p>
               </div>
               <div>
                  <p><strong>Topics:</strong></p>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-E094C62F-7871-465E-84A0-0B2521FA18CD">About the Voting Disks</a><br>Voting disks are one of the key files for Oracle Clusterware.
                     </li>
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-41DFE7E7-0FDF-402F-B046-B3A4E19F83EA">About Oracle Cluster Registry</a><br>The Oracle Cluster Registry is a file that contains information about the cluster node list and instance-to-node mapping information.
                     </li>
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-72C8DDE5-EE44-452F-95A4-C5AB3A197B47">About High Availability of Oracle Clusterware Files</a><br>High availability configurations have redundant hardware and software that maintain operations by avoiding single points of failure. 
                     </li>
                  </ul>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="introduction-to-deploying-a-rac-environment.html#GUID-DB142141-BF7C-4725-B012-C121C0A78A76" title="Oracle Grid Infrastructure for a cluster refers to the installation of the combined products. Oracle Clusterware and Oracle ASM are still individual products, and are referred to by those names.">About Oracle Grid Infrastructure for a Cluster and Oracle RAC</a></li>
                     </ul>
                  </div>
               </div><a id="TDPRC570"></a><div class="props_rev_3"><a id="GUID-E094C62F-7871-465E-84A0-0B2521FA18CD" name="GUID-E094C62F-7871-465E-84A0-0B2521FA18CD"></a><h4 id="TDPRC-GUID-E094C62F-7871-465E-84A0-0B2521FA18CD" class="sect4"><span class="enumeration_section">7.1.1 </span>About the Voting Disks
                  </h4>
                  <div>
                     <p>Voting disks are one of the key files for Oracle Clusterware.</p>
                     <p>The <a href="glossary.html#GUID-E8F60DA1-9C0E-4521-BF71-5C55F7E49359"><span class="xrefglossterm">voting disk</span></a> records node membership information. A node must be able to access more than half the voting disks at any time. To avoid simultaneous loss of multiple voting disks, each voting disk should be on a storage device that does not share any components (controller, interconnect, and so on) with the storage devices used for the other voting disks.
                     </p>
                     <p>For example, if you have five voting disks configured, then a node must be able to access at least three of the voting disks at any time. If a node cannot access the minimum required number of voting disks, then it is <span class="italic">evicted</span>, or removed, from the cluster. After the cause of the failure has been corrected and access to the voting disks has been restored, you can instruct Oracle Clusterware to recover the failed node and restore it to the cluster. 
                     </p>
                  </div>
               </div><a id="TDPRC571"></a><div class="props_rev_3"><a id="GUID-41DFE7E7-0FDF-402F-B046-B3A4E19F83EA" name="GUID-41DFE7E7-0FDF-402F-B046-B3A4E19F83EA"></a><h4 id="TDPRC-GUID-41DFE7E7-0FDF-402F-B046-B3A4E19F83EA" class="sect4"><span class="enumeration_section">7.1.2 </span>About Oracle Cluster Registry
                  </h4>
                  <div>
                     <p>The Oracle Cluster Registry is a file that contains information about the cluster node list and instance-to-node mapping information.</p>
                     <p>The <a href="glossary.html#GUID-C886431A-1A40-4C79-9DCE-8AB1A86C6E59"><span class="xrefglossterm">Oracle Cluster Registry (OCR) </span></a> also contains information about Oracle Clusterware resource profiles for resources that you have customized. The voting disk data is also backed up in OCR.
                     </p>
                     <p>Each node in a cluster also has a local copy of the OCR, called an <a id="d18546e394" class="indexterm-anchor"></a><a id="d18546e398" class="indexterm-anchor"></a>Oracle Local Registry (OLR), that is created when Oracle Clusterware is installed. Multiple processes on each node have simultaneous read and write access to the OLR particular to the node on which they reside, whether Oracle Clusterware is fully functional. By default, OLR is located at <code><span class="variable">Grid_home</span>/cdata/<span class="variable">$HOSTNAME</span>.olr</code></p>
                  </div>
               </div><a id="TDPRC572"></a><div class="props_rev_3"><a id="GUID-72C8DDE5-EE44-452F-95A4-C5AB3A197B47" name="GUID-72C8DDE5-EE44-452F-95A4-C5AB3A197B47"></a><h4 id="TDPRC-GUID-72C8DDE5-EE44-452F-95A4-C5AB3A197B47" class="sect4"><span class="enumeration_section">7.1.3 </span>About High Availability of Oracle Clusterware Files
                  </h4>
                  <div>
                     <p>High availability configurations have redundant hardware and software that maintain operations by avoiding single points of failure. </p>
                     <p>When a component is down, Oracle Clusterware redirects its managed resources to a redundant component. However, if a disaster strikes, or a massive hardware failure occurs, then having redundant components might not be enough. To fully protect your system it is important to have backups of your critical files.</p>
                     <p>The Oracle Clusterware installation process creates the voting disk and the OCR on shared storage. If you select the option for normal redundant copies during the installation process, then Oracle Clusterware automatically maintains redundant copies of these files to prevent the files from becoming single points of failure. The normal redundancy feature also eliminates the need for third-party storage redundancy solutions. When you use normal redundancy, Oracle Clusterware automatically maintains two copies of the OCR file and three copies of the voting disk file.</p>
                     <div class="infoboxnotealso" id="GUID-72C8DDE5-EE44-452F-95A4-C5AB3A197B47__GUID-2552E231-5EAF-451B-8FC1-982A0A06F9F6">
                        <p class="notep1">See Also:</p>
                        <p><a href="../cwadd/managing-oracle-cluster-registry-and-voting-files.html#CWADD833"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about managing voting disks
                        </p>
                     </div>
                  </div>
               </div>
            </div><a id="TDPRC414"></a><div class="props_rev_3"><a id="GUID-8CFDF653-EEC6-4C59-B900-6235D93F8D2D" name="GUID-8CFDF653-EEC6-4C59-B900-6235D93F8D2D"></a><h3 id="TDPRC-GUID-8CFDF653-EEC6-4C59-B900-6235D93F8D2D" class="sect3"><span class="enumeration_section">7.2 </span>Managing the Oracle Clusterware Stack
               </h3>
               <div>
                  <p>By default, Oracle Clusterware is configured to restart whenever the server it resides on is restarted. During certain maintenance operations, you may be required to stop or start the Oracle Clusterware stack manually.</p>
                  <div class="infoboxnote" id="GUID-8CFDF653-EEC6-4C59-B900-6235D93F8D2D__GUID-26EBE2E1-4FD7-4C5B-A40C-C150BA728F32">
                     <p class="notep1">Note:</p>
                     <p>Do not use Oracle Clusterware Control (CRSCTL) commands on Oracle entities (such as resources, resource types, and server pools) that have names beginning with <code class="codeph">ora</code> unless you are directed to do so by Oracle Support. The Server Control utility (SRVCTL) is the correct utility to use on Oracle entities.
                     </p>
                  </div>
               </div>
               <div>
                  <p><strong>Topics:</strong></p>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-6FAA51CD-47AD-4997-BEE3-4133814ED053">Starting Oracle Clusterware</a><br>You use the CRSCTL utility to manage Oracle Clusterware.
                     </li>
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-3A355129-32C2-49B0-842D-9F7C0136C5FF">Stopping Oracle Clusterware</a><br>You use the CRSCTL utility to manage Oracle Clusterware.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-8CFDF653-EEC6-4C59-B900-6235D93F8D2D__GUID-F9B05E8D-B9F0-49E9-A3C6-5C9A6BEA4351">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="administering-oracle-clusterware-components.html#GUID-22A2ACB0-8700-408D-845C-17164248FB24" title="Oracle Clusterware includes a high availability framework for managing any application that runs on your cluster. Oracle Real Application Clusters (Oracle RAC) uses Oracle Clusterware as the infrastructure that binds multiple nodes that then operate as a single server.">About Oracle Clusterware</a>"</span></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <a id="TDPRC415"></a><div class="props_rev_3"><a id="GUID-6FAA51CD-47AD-4997-BEE3-4133814ED053" name="GUID-6FAA51CD-47AD-4997-BEE3-4133814ED053"></a><h4 id="TDPRC-GUID-6FAA51CD-47AD-4997-BEE3-4133814ED053" class="sect4"><span class="enumeration_section">7.2.1 </span>Starting Oracle Clusterware
                  </h4>
                  <div>
                     <p>You use the CRSCTL utility to manage Oracle Clusterware.</p>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <ul>
                        <li class="stepexpand"><span>If the Oracle High Availability Services daemon (OHASD) is running on all the cluster nodes, then you can start the entire Oracle Clusterware stack (all the processes and resources managed by Oracle Clusterware) on all nodes in the cluster by executing the following command on any node:</span><div><pre class="oac_no_warn" dir="ltr">crsctl start cluster -all
</pre></div>
                        </li>
                        <li class="stepexpand"><span>You can start the Oracle Clusterware stack on specific nodes by using the<code class="codeph"> -n</code> option followed by a space-delimited list of node names, for example:</span><div><pre class="oac_no_warn" dir="ltr">crsctl start cluster -n racnode1 racnode4
</pre></div>
                           <div>To use the <code class="codeph">crsctl start cluster</code> command, the OHASD process must be running on the specified nodes.
                           </div>
                        </li>
                        <li class="stepexpand"><span>To start the entire Oracle Clusterware stack on a node, including the OHASD process, run the following command on that node:</span><div><pre class="oac_no_warn" dir="ltr">crsctl start crs</pre></div>
                        </li>
                     </ul>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-6FAA51CD-47AD-4997-BEE3-4133814ED053__GUID-274D47CC-2D24-4EA5-A229-E6A4C673C3F4">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="administering-oracle-clusterware-components.html#GUID-22A2ACB0-8700-408D-845C-17164248FB24" title="Oracle Clusterware includes a high availability framework for managing any application that runs on your cluster. Oracle Real Application Clusters (Oracle RAC) uses Oracle Clusterware as the infrastructure that binds multiple nodes that then operate as a single server.">About Oracle Clusterware</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="administering-oracle-clusterware-components.html#GUID-8CFDF653-EEC6-4C59-B900-6235D93F8D2D" title="By default, Oracle Clusterware is configured to restart whenever the server it resides on is restarted. During certain maintenance operations, you may be required to stop or start the Oracle Clusterware stack manually.">Managing the Oracle Clusterware Stack</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPRC416"></a><div class="props_rev_3"><a id="GUID-3A355129-32C2-49B0-842D-9F7C0136C5FF" name="GUID-3A355129-32C2-49B0-842D-9F7C0136C5FF"></a><h4 id="TDPRC-GUID-3A355129-32C2-49B0-842D-9F7C0136C5FF" class="sect4"><span class="enumeration_section">7.2.2 </span>Stopping Oracle Clusterware
                  </h4>
                  <div>
                     <p>You use the CRSCTL utility to manage Oracle Clusterware.</p>
                     <div class="section"></div>
                     <!-- class="section" -->
                     <ul>
                        <li class="stepexpand"><span>To stop Oracle Clusterware on all nodes in the cluster, execute the following command on any node:</span><div><pre class="oac_no_warn" dir="ltr">crsctl stop cluster -all
</pre></div>
                           <div>The previous command stops the resources managed by Oracle Clusterware, the Oracle ASM instance, and all the Oracle Clusterware processes (except for OHASD and its dependent processes).</div>
                        </li>
                        <li class="stepexpand"><span>To stop Oracle Clusterware and Oracle ASM on select nodes, include the<code class="codeph"> -n</code> option followed by a space-delimited list of node names, for example:</span><div><pre class="oac_no_warn" dir="ltr">crsctl stop cluster -n racnode1 racnode3
</pre></div>
                           <div>If you do not include either the <code class="codeph">-all</code> or the <code class="codeph">-n</code> option in the <code class="codeph">stop cluster</code> command, then Oracle Clusterware and its managed resources are stopped only on the node where you execute the command.
                           </div>
                        </li>
                        <li class="stepexpand"><span>To completely shut down the entire Oracle Clusterware stack, including the OHASD process, use the <code class="codeph">crsctl stop crs</code> command. </span><div>
                              <p>CRSCTL attempts to gracefully stop the resources managed by Oracle Clusterware during the shutdown of the Oracle Clusterware stack. If any resources that Oracle Clusterware manages are still running after executing the <code class="codeph">crsctl stop crs</code> command, then the command fails. You must then use the <code class="codeph">-f</code> option to unconditionally stop all resources and stop the Oracle Clusterware stack, for example:
                              </p><pre class="oac_no_warn" dir="ltr">crsctl stop crs -f
</pre><div class="infoboxnote" id="GUID-3A355129-32C2-49B0-842D-9F7C0136C5FF__GUID-46B47815-1E67-4D8B-9F94-55F3CCFEED64">
                                 <p class="notep1">Note:</p>
                                 <p>When you shut down the Oracle Clusterware stack, you also shut down the Oracle Automatic Storage Management (Oracle ASM) instances. If the Oracle Clusterware files (voting disk and OCR) are stored in an Oracle ASM disk group, then the only way to shut down the Oracle ASM instances is to shut down the Oracle Clusterware stack.</p>
                              </div>
                           </div>
                        </li>
                     </ul>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-3A355129-32C2-49B0-842D-9F7C0136C5FF__GUID-B365D0C2-1F11-4D74-8F32-A0A10DCEAF5F">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="administering-oracle-clusterware-components.html#GUID-22A2ACB0-8700-408D-845C-17164248FB24" title="Oracle Clusterware includes a high availability framework for managing any application that runs on your cluster. Oracle Real Application Clusters (Oracle RAC) uses Oracle Clusterware as the infrastructure that binds multiple nodes that then operate as a single server.">About Oracle Clusterware</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="administering-oracle-clusterware-components.html#GUID-8CFDF653-EEC6-4C59-B900-6235D93F8D2D" title="By default, Oracle Clusterware is configured to restart whenever the server it resides on is restarted. During certain maintenance operations, you may be required to stop or start the Oracle Clusterware stack manually.">Managing the Oracle Clusterware Stack</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="TDPRC573"></a><div class="props_rev_3"><a id="GUID-461F16FA-B9F8-4681-9D28-343943F138C3" name="GUID-461F16FA-B9F8-4681-9D28-343943F138C3"></a><h3 id="TDPRC-GUID-461F16FA-B9F8-4681-9D28-343943F138C3" class="sect3"><span class="enumeration_section">7.3 </span>Administering Voting Disks for Oracle Clusterware
               </h3>
               <div>
                  <p>Voting disks manage information about node membership. Each voting disk must be accessible by all nodes in the cluster for nodes to be members of the cluster.</p>
               </div>
               <div>
                  <p><strong>Topics:</strong></p>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-AC486EB6-9232-4591-A463-7692D2758E37">Adding and Removing Voting Disks</a><br>You must manually add and remove voting disks if they are stored on local storage.
                     </li>
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-C658A65A-AC70-4618-BBB5-E8D5EFF65AD5">Backing Up and Recovering Voting Disks</a><br>You do not have to back up the voting disk. The voting disk data is automatically backed up in the Oracle Cluster Registry (OCR) as part of any configuration change and is automatically restored to any voting disk added.&nbsp;
                     </li>
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-34FE8C0B-657E-42EE-8664-14B79CEC1B77">Migrating Voting Disks to Oracle ASM Storage</a><br>You should store the Oracle Clusterware voting disk files in an Oracle ASM disk group.
                     </li>
                  </ul>
               </div>
               <a id="TDPRC224"></a><a id="TDPRC223"></a><div class="props_rev_3"><a id="GUID-AC486EB6-9232-4591-A463-7692D2758E37" name="GUID-AC486EB6-9232-4591-A463-7692D2758E37"></a><h4 id="TDPRC-GUID-AC486EB6-9232-4591-A463-7692D2758E37" class="sect4"><span class="enumeration_section">7.3.1 </span>Adding and Removing Voting Disks
                  </h4>
                  <div>
                     <p>You must manually add and remove voting disks if they are stored on local storage.</p>
                     <div class="section">
                        <p>If you choose to store Oracle Clusterware files on Oracle ASM and use redundancy for the disk group, then Oracle ASM automatically maintains the ideal number of voting files based on the redundancy of the disk group. </p>
                        <p>If you use a different form of shared storage to store the voting disks, then you can dynamically add and remove voting disks after installing Oracle RAC. Do this using the following commands where <code class="codeph"><span class="variable">path</span></code> is the fully qualified path for the additional voting disk. 
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To add or remove a voting disk that is stored on disk:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Run the following command as the <code class="codeph">grid</code> user to add a voting disk:</span><div><pre class="pre codeblock"><code>crsctl add css votedisk <span class="italic">path</span>
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Run the following command as the <code class="codeph">grid</code> user to remove a voting disk:</span><div><pre class="pre codeblock"><code>crsctl delete css votedisk <span class="italic">path</span>
</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="TDPRC225"></a><div class="props_rev_3"><a id="GUID-C658A65A-AC70-4618-BBB5-E8D5EFF65AD5" name="GUID-C658A65A-AC70-4618-BBB5-E8D5EFF65AD5"></a><h4 id="TDPRC-GUID-C658A65A-AC70-4618-BBB5-E8D5EFF65AD5" class="sect4"><span class="enumeration_section">7.3.2 </span>Backing Up and Recovering Voting Disks
                  </h4>
                  <div>
                     <p>You do not have to back up the voting disk. The voting disk data is automatically backed up in the Oracle Cluster Registry (OCR) as part of any configuration change and is automatically restored to any voting disk added.&nbsp;</p>
                  </div>
                  <div>
                     <p><strong>Topics:</strong></p>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-92FAF6DD-7D44-4DA5-967D-8E71C2598E63">Backing Up Voting Disks</a><br>The voting disk data is automatically backed up in Oracle Cluster Registry (OCR) as part of any configuration change so you do not have to perform manual backups of the voting disk. 
                        </li>
                        <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-BA0CCC22-4E74-4681-BC1D-B9CF549C5698">Replacing Voting Disks</a><br>You replace a voting disk by deleting the unusable voting disk and then adding a new voting disk to your configuration. 
                        </li>
                        <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-E2EE9A81-B410-4E3A-ACA8-5FBEF5C18508">Restoring Voting Disks</a><br>If all voting disks are corrupted, then you can restore them
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-C658A65A-AC70-4618-BBB5-E8D5EFF65AD5__GUID-617F6F70-A710-4D58-9749-6F54D8747A01">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="administering-oracle-clusterware-components.html#GUID-22A2ACB0-8700-408D-845C-17164248FB24" title="Oracle Clusterware includes a high availability framework for managing any application that runs on your cluster. Oracle Real Application Clusters (Oracle RAC) uses Oracle Clusterware as the infrastructure that binds multiple nodes that then operate as a single server.">About Oracle Clusterware</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../cwadd/managing-oracle-cluster-registry-and-voting-files.html#CWADD833"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about managing voting disks
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <a id="TDPRC574"></a><div class="props_rev_3"><a id="GUID-92FAF6DD-7D44-4DA5-967D-8E71C2598E63" name="GUID-92FAF6DD-7D44-4DA5-967D-8E71C2598E63"></a><h5 id="TDPRC-GUID-92FAF6DD-7D44-4DA5-967D-8E71C2598E63" class="sect5"><span class="enumeration_section">7.3.2.1 </span>Backing Up Voting Disks
                     </h5>
                     <div>
                        <p>The voting disk data is automatically backed up in Oracle Cluster Registry (OCR) as part of any configuration change so you do not have to perform manual backups of the voting disk. </p>
                        <p>The voting disk data is automatically backed up in OCR as part of any configuration change so you do not have to perform manual backups of the voting disk. The voting disk files are backed up automatically by Oracle Clusterware if the contents of the files have changed in the following ways:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Configuration parameters, for example <code class="codeph">misscount</code>, have been added or modified
                              </p>
                           </li>
                           <li>
                              <p>After performing voting disk <code class="codeph">add</code> or <code class="codeph">delete</code> operations
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-92FAF6DD-7D44-4DA5-967D-8E71C2598E63__GUID-635B4A5E-D0A4-4DE5-A8CD-BD6D02454EBB">
                           <p class="notep1">See Also:</p>
                           <p><a href="../cwadd/managing-oracle-cluster-registry-and-voting-files.html#CWADD833"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about managing voting disks
                           </p>
                        </div>
                     </div>
                  </div><a id="TDPRC576"></a><a id="TDPRC575"></a><div class="props_rev_3"><a id="GUID-BA0CCC22-4E74-4681-BC1D-B9CF549C5698" name="GUID-BA0CCC22-4E74-4681-BC1D-B9CF549C5698"></a><h5 id="TDPRC-GUID-BA0CCC22-4E74-4681-BC1D-B9CF549C5698" class="sect5"><span class="enumeration_section">7.3.2.2 </span>Replacing Voting Disks
                     </h5>
                     <div>
                        <p>You replace a voting disk by deleting the unusable voting disk and then adding a new voting disk to your configuration. </p>
                        <div class="section">
                           <p>If a voting disk is damaged, and no longer usable by Oracle Clusterware, then you can replace or re-create the voting disk. The voting disk contents are restored from a backup when a new voting file is added; this occurs regardless of whether the voting disk file is stored in Oracle Automatic Storage Management (Oracle ASM). </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3">To replace a corrupt, damaged, or missing voting disk that is not stored in Oracle ASM:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Use CRSCTL to remove the damaged voting disk. For example, if the damaged voting disk is stored in the disk location <code class="codeph">/dev/sda3</code>, then execute the command:</span><div><pre class="pre codeblock"><code>crsctl delete css votedisk /dev/sda3
</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>Use CRSCTL to create a new voting disk in the same location, for example:</span><div><pre class="pre codeblock"><code>crsctl add css votedisk /dev/sda3
</code></pre></div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-BA0CCC22-4E74-4681-BC1D-B9CF549C5698__GUID-3701EFDF-8F1C-4329-AD2C-A443365A8065">
                              <p class="notep1">See Also:</p>
                              <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=CWADD833"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about managing voting disks
                              </p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TDPRC577"></a><div class="props_rev_3"><a id="GUID-E2EE9A81-B410-4E3A-ACA8-5FBEF5C18508" name="GUID-E2EE9A81-B410-4E3A-ACA8-5FBEF5C18508"></a><h5 id="TDPRC-GUID-E2EE9A81-B410-4E3A-ACA8-5FBEF5C18508" class="sect5"><span class="enumeration_section">7.3.2.3 </span>Restoring Voting Disks
                     </h5>
                     <div>
                        <p>If all voting disks are corrupted, then you can restore them</p>
                        <ul>
                           <li class="stepexpand"><span>The process of restoring voting disks is described in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=CWADD90961"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a>.</span><div>
                                 <div class="infoboxnote" id="GUID-E2EE9A81-B410-4E3A-ACA8-5FBEF5C18508__GUID-CEB26052-0ECB-4A0E-A209-B320C62FF6C2">
                                    <p class="notep1">Note:</p>
                                    <p>Restoring a voting disk from a copy created with the Linux or UNIX operating system <code class="codeph">dd</code> command is not supported
                                    </p>
                                 </div>
                              </div>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TDPRC579"></a><a id="TDPRC578"></a><div class="props_rev_3"><a id="GUID-34FE8C0B-657E-42EE-8664-14B79CEC1B77" name="GUID-34FE8C0B-657E-42EE-8664-14B79CEC1B77"></a><h4 id="TDPRC-GUID-34FE8C0B-657E-42EE-8664-14B79CEC1B77" class="sect4"><span class="enumeration_section">7.3.3 </span>Migrating Voting Disks to Oracle ASM Storage
                  </h4>
                  <div>
                     <p>You should store the Oracle Clusterware voting disk files in an Oracle ASM disk group.</p>
                     <div class="section">
                        <p>If you choose to store your voting disks in Oracle ASM, then Oracle ASM stores all the voting disks for the cluster in the disk group you choose. You cannot combine voting disks stored in Oracle ASM and voting disks not stored in Oracle ASM in the same cluster.</p>
                        <p>The number of voting files you can store in a particular Oracle ASM disk group depends upon the redundancy of the disk group. By default, Oracle ASM puts each voting disk in its own failure group within the disk group. A normal redundancy disk group must contain at least two failure groups but if you are storing your voting disks on Oracle ASM, then a normal redundancy disk group must contain at least three failure groups. A high redundancy disk group must contain at least three failure groups.</p>
                        <p>Once you configure voting disks on Oracle ASM, you can only make changes to the voting disks' configuration using the <code class="codeph">crsctl replace votedisk</code> command. This is true even in cases where there are no working voting disks. Despite the fact that the <code class="codeph">crsctl query css votedisk</code> command reports zero voting disks in use, Oracle Clusterware remembers the fact that Oracle ASM was in use and the <code class="codeph">replace</code> verb is required. Only after you use the <code class="codeph">replace</code> verb to move voting disks back to non-Oracle ASM storage are the CRSCTL commands <code class="codeph">add css votedisk</code> and <code class="codeph">delete css votedisk</code> again usable.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To move voting disks from shared storage to an Oracle ASM disk group:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Use the Oracle ASM Configuration Assistant (ASMCA) to create an Oracle ASM disk group.</span></li>
                        <li class="stepexpand"><span>Verify that the ASM Compatibility attribute for the disk group is set to 12.1.0.0 or higher.</span></li>
                        <li class="stepexpand"><span>Use CRSCTL to create a voting disk in the Oracle ASM disk group by specifying the disk group name in the following command:</span><div><pre class="pre codeblock"><code>crsctl replace votedisk +<span class="variable">ASM_disk_group</span>
</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-34FE8C0B-657E-42EE-8664-14B79CEC1B77__GUID-BA7AB8F9-C965-42F6-9759-C6450FE81A93">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="installing-oracle-db-software-and-creating-database.html#GUID-FABA9C97-18D9-4C96-B3C2-18912DEF406D" title="If you want to use a separate disk group for your Oracle database files or for the fast recovery area, then you must create the additional Oracle ASM disk groups before installing Oracle Database software.">Creating Additional Oracle ASM Disk Groups</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../ostmg/diskgroup-compatibility.html#OSTMG02700"><span class="italic">Oracle Automatic Storage Management Administrator's Guide</span></a> for more information about disk group compatibility attributes
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../cwadd/managing-oracle-cluster-registry-and-voting-files.html#CWADD833"><span class="italic">Oracle Clusterware Administration and Deployment Guide</span></a> for more information about managing voting disks
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="TDPRC229"></a><div class="props_rev_3"><a id="GUID-8B4D4373-DD26-46A3-9138-A8E15F4D291F" name="GUID-8B4D4373-DD26-46A3-9138-A8E15F4D291F"></a><h3 id="TDPRC-GUID-8B4D4373-DD26-46A3-9138-A8E15F4D291F" class="sect3"><span class="enumeration_section">7.4 </span>Backing Up and Recovering the Oracle Cluster Registry
               </h3>
               <div>
                  <p>Oracle Clusterware automatically creates Oracle Cluster Registry (OCR) backups every four hours. At any one time, Oracle Clusterware always retains the latest three backup copies of the OCR that are four hours old, one day old, and one week old.</p>
                  <p>You cannot customize the backup frequencies or the number of files that Oracle Clusterware retains. You can use any backup software to copy the automatically generated backup files at least once daily to a different device from where the primary OCR file resides. </p>
               </div>
               <div>
                  <p><strong>Topics:</strong></p>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-164906F8-1C51-46B9-B4C6-094C00AB5B06">Viewing Available OCR Backups</a><br>Use the <code class="codeph">ocrconfig</code> utility to view the backups generated automatically by Oracle Clusterware.
                     </li>
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-FCCC6C3A-5650-4805-8078-50DDCEC5D4D2">Manually Backing Up the OCR</a><br>Use the <code class="codeph">ocrconfig</code> utility to force Oracle Clusterware to perform a backup of Oracle Cluster Registry (OCR) at any time, rather than wait for the automatic backup that occurs at four-hour intervals.
                     </li>
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-CA7E6D5C-34E4-40BD-9AED-376ED5DFAF87">Recovering the OCR</a><br>There are two methods for recovering the OCR. The first method uses automatically generated OCR file copies and the second method uses manually created OCR export files.
                     </li>
                  </ul>
               </div>
               <a id="TDPRC231"></a><a id="TDPRC230"></a><div class="props_rev_3"><a id="GUID-164906F8-1C51-46B9-B4C6-094C00AB5B06" name="GUID-164906F8-1C51-46B9-B4C6-094C00AB5B06"></a><h4 id="TDPRC-GUID-164906F8-1C51-46B9-B4C6-094C00AB5B06" class="sect4"><span class="enumeration_section">7.4.1 </span>Viewing Available OCR Backups
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">ocrconfig</code> utility to view the backups generated automatically by Oracle Clusterware.
                     </p>
                     <div class="section">
                        <p class="subhead3">To find the most recent backup of the OCR:</p>
                     </div>
                     <!-- class="section" -->
                     <ul>
                        <li class="stepexpand"><span>Run the following command on any node in the cluster:</span><div><pre class="pre codeblock"><code>ocrconfig -showbackup
</code></pre></div>
                        </li>
                     </ul>
                  </div>
               </div><a id="TDPRC527"></a><a id="TDPRC526"></a><div class="props_rev_3"><a id="GUID-FCCC6C3A-5650-4805-8078-50DDCEC5D4D2" name="GUID-FCCC6C3A-5650-4805-8078-50DDCEC5D4D2"></a><h4 id="TDPRC-GUID-FCCC6C3A-5650-4805-8078-50DDCEC5D4D2" class="sect4"><span class="enumeration_section">7.4.2 </span>Manually Backing Up the OCR
                  </h4>
                  <div>
                     <p>Use the <code class="codeph">ocrconfig</code> utility to force Oracle Clusterware to perform a backup of Oracle Cluster Registry (OCR) at any time, rather than wait for the automatic backup that occurs at four-hour intervals.
                     </p>
                     <div class="section">
                        <p>This option is especially useful when you want to obtain a binary backup on demand, such as before you make changes to OCR. The Oracle Local Registry (OLR) only supports manual backups.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To manually backup the contents of the OCR:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Log in as the <code class="codeph">root</code> user.</span></li>
                        <li class="stepexpand"><span>Use the following command to force Oracle Clusterware to perform an immediate backup of the OCR:</span><div><pre class="pre codeblock"><code>ocrconfig -manualbackup
</code></pre></div>
                           <div>
                              <p>The date and identifier of the recently generated OCR backup is displayed.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If you must change the location for the OCR backup files, then use the following command, where <code class="codeph"><span class="variable">directory_name</span></code> is the new location for the backups:</span><div><pre class="pre codeblock"><code>ocrconfig -backuploc <span class="variable">directory_name</span>
</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <p>The default location for generating backups on Oracle Linux systems is <code><span class="variable">Grid_home</span>/cdata/<span class="variable">cluster_name</span></code> where <span class="variable">cluster_name</span> is the name of your cluster and <span class="variable">Grid_home</span> is the home directory of the Oracle Grid Infrastructure for a cluster installation. Because the default backup is on a local file system, Oracle recommends that you include the backup file created with the <code class="codeph">ocrconfig</code> command as part of your operating system backup using standard operating system or third-party tools.
                        </p>
                        <div class="infoboxnote" id="GUID-FCCC6C3A-5650-4805-8078-50DDCEC5D4D2__GUID-7F39AB69-84D8-47C0-9BA9-FE36C774FF8F">
                           <p class="notep1">Note:</p>
                           <p>You can use the <code class="codeph">ocrconfig -backuploc</code> command to change the location where the OCR backups are created.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPRC234"></a><div class="props_rev_3"><a id="GUID-CA7E6D5C-34E4-40BD-9AED-376ED5DFAF87" name="GUID-CA7E6D5C-34E4-40BD-9AED-376ED5DFAF87"></a><h4 id="TDPRC-GUID-CA7E6D5C-34E4-40BD-9AED-376ED5DFAF87" class="sect4"><span class="enumeration_section">7.4.3 </span>Recovering the OCR
                  </h4>
                  <div>
                     <p>There are two methods for recovering the OCR. The first method uses automatically generated OCR file copies and the second method uses manually created OCR export files.</p>
                  </div>
                  <div>
                     <p><strong>Topics:</strong></p>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-34DAC885-2623-4643-8A3F-203B0B19D678">Checking the Status of the OCR</a><br>In event of a failure, before you attempt to restore the Oracle Cluster Registry (OCR), ensure that the OCR is unavailable. 
                        </li>
                        <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-9F748615-4172-46E4-B340-A6CC5B5F90FC">Restoring the OCR from Automatically Generated OCR Backups</a><br>When restoring the OCR from automatically generated backups, you first have to determine which backup file to use for the recovery.
                        </li>
                     </ul>
                  </div>
                  <a id="TDPRC236"></a><a id="TDPRC235"></a><div class="props_rev_3"><a id="GUID-34DAC885-2623-4643-8A3F-203B0B19D678" name="GUID-34DAC885-2623-4643-8A3F-203B0B19D678"></a><h5 id="TDPRC-GUID-34DAC885-2623-4643-8A3F-203B0B19D678" class="sect5"><span class="enumeration_section">7.4.3.1 </span>Checking the Status of the OCR
                     </h5>
                     <div>
                        <p>In event of a failure, before you attempt to restore the Oracle Cluster Registry (OCR), ensure that the OCR is unavailable. </p>
                        <div class="section">
                           <p class="subhead3">To check the status of the OCR:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Run the following command:</span><div><pre class="pre codeblock"><code>ocrcheck 
</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>If this command does not display the message <code class="codeph">'Device/File integrity check succeeded'</code> for at least one copy of the OCR, then all copies of the OCR have failed. You must restore the OCR from a backup or OCR export.</span></li>
                           <li class="stepexpand"><span>If there is at least one copy of the OCR available, then you can use that copy to restore the other copies of the OCR.</span></li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-34DAC885-2623-4643-8A3F-203B0B19D678__GUID-51152684-FC85-45FF-AF76-6C38F5ACE9AF">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="administering-oracle-clusterware-components.html#GUID-0819F45C-B689-47ED-8CD6-F896E663D88E" title="The OCRCHECK utility displays the data block format version used by the Oracle Cluster Registry (OCR), the available space and used space in the OCR, the ID used for the OCR, and the locations you have configured for the OCR.">About the OCRCHECK Utility</a>"</span></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="TDPRC238"></a><a id="TDPRC237"></a><div class="props_rev_3"><a id="GUID-9F748615-4172-46E4-B340-A6CC5B5F90FC" name="GUID-9F748615-4172-46E4-B340-A6CC5B5F90FC"></a><h5 id="TDPRC-GUID-9F748615-4172-46E4-B340-A6CC5B5F90FC" class="sect5"><span class="enumeration_section">7.4.3.2 </span>Restoring the OCR from Automatically Generated OCR Backups
                     </h5>
                     <div>
                        <p>When restoring the OCR from automatically generated backups, you first have to determine which backup file to use for the recovery.</p>
                        <div class="section">
                           <p class="subhead3">To restore the OCR from an automatically generated backup on an Oracle Linux system:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Log in as the <code class="codeph">root</code> user.</span></li>
                           <li class="stepexpand" id="GUID-9F748615-4172-46E4-B340-A6CC5B5F90FC__CHDHHAHB"><span>Identify the available OCR backups using the <code class="codeph">ocrconfig</code> command:</span><div><pre class="pre codeblock"><code>[root]# ocrconfig -showbackup</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>Review the contents of the backup using the following <code class="codeph">ocrdump</code> command, where <span class="variable">file_name</span> is the name of the OCR backup file for which the contents should be written out to the file <span class="variable">ocr_dump_output_file</span>:</span><div><pre class="pre codeblock"><code>[root]# ocrdump <span class="variable">ocr_dump_output_file</span> -backupfile <span class="variable">file_name</span>
</code></pre></div>
                              <div>
                                 <p>If you do not specify an output file name, then the utility writes the OCR contents to a file named <code class="codeph">OCRDUMPFILE</code> in the current directory.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>As the <code class="codeph">root</code> user, stop Oracle Clusterware on all the nodes in your cluster by executing the following command:</span><div><pre class="pre codeblock"><code>[root]# crsctl stop cluster -all
</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>As the <code class="codeph">root</code> user, restore the OCR by applying an OCR backup file that you identified in Step <a href="administering-oracle-clusterware-components.html#GUID-9F748615-4172-46E4-B340-A6CC5B5F90FC__CHDHHAHB">2</a> using the following command, where <span class="variable">file_name</span> is the name of the OCR to restore. Ensure that the OCR devices that you specify in the OCR configuration exist, and that these OCR devices are valid before running this command.</span><div><pre class="pre codeblock"><code>[root]# ocrconfig -restore <span class="variable">file_name</span>
</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>As the <code class="codeph">root</code> user, restart Oracle Clusterware on all the nodes in your cluster by running the following command:</span><div><pre class="pre codeblock"><code>[root]# crsctl start cluster -all
</code></pre></div>
                           </li>
                           <li class="stepexpand"><span>Use the Cluster Verification Utility (CVU) to verify the OCR integrity. Exit the <code class="codeph">root</code> user account, and, as the software owner of the Oracle Grid Infrastructure for a cluster installation, run the following command, where the <code class="codeph">-n all</code> argument retrieves a list of all the cluster nodes that are configured as part of your cluster:</span><div><pre class="pre codeblock"><code>cluvfy comp ocr -n all [-verbose]
</code></pre></div>
                           </li>
                        </ol>
                     </div>
                  </div>
               </div>
            </div><a id="TDPRC247"></a><div class="props_rev_3"><a id="GUID-834FBC6A-9DBE-42E1-ACE6-1C14C772A5CE" name="GUID-834FBC6A-9DBE-42E1-ACE6-1C14C772A5CE"></a><h3 id="TDPRC-GUID-834FBC6A-9DBE-42E1-ACE6-1C14C772A5CE" class="sect3"><span class="enumeration_section">7.5 </span>Changing the Oracle Cluster Registry Configuration
               </h3>
               <div>
                  <p>To ensure proper operation of Oracle Clusterware, make sure the OCR is highly available.</p>
                  <p>The OCR contains information about the cluster node list, which instances run on which nodes, and information about Oracle Clusterware resource profiles for applications that have been modified to be managed by Oracle Clusterware.</p>
                  <div class="infoboxnote" id="GUID-834FBC6A-9DBE-42E1-ACE6-1C14C772A5CE__GUID-D1C272A3-6827-4818-9A6D-CB89DB397281">
                     <p class="notep1">Note:</p>
                     <p>The operations in this section affect the OCR for the entire cluster. However, the <code class="codeph">ocrconfig</code> command cannot modify OCR configuration information for nodes that are shut down or for nodes on which Oracle Clusterware is not running. Avoid shutting down nodes while modifying the OCR using the <code class="codeph">ocrconfig</code> command.
                     </p>
                  </div>
               </div>
               <div>
                  <p><strong>Topics:</strong></p>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-29A62EE5-F0E6-4AB2-8100-5BF80036720D">Adding an OCR Location</a><br>You can add an Oracle Cluster Registry (OCR) location after an upgrade or after completing the Oracle RAC installation. 
                     </li>
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-55E1092B-FFB6-408A-AE8E-DBCD50997B2A">Migrating the OCR to Oracle ASM Storage</a><br>You should store the Oracle Cluster Registry (OCR) in an Oracle Automatic Storage Management (Oracle ASM) disk group. 
                     </li>
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-802FD1AC-F980-4F63-89F3-58ACCB4E8A40">Replacing an OCR</a><br>If you must change the location of an existing Oracle Cluster Registry (OCR), or change the location of a failed OCR to the location of a working one, then you can use this procedure if one OCR file remains online.
                     </li>
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-8F6109B1-D4D1-4950-9BF3-7D61C5D10657">Removing an OCR</a><br>To remove an Oracle Cluster Registry (OCR) file, at least one copy of the OCR must be online.
                     </li>
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-1DCC4CBF-BBC0-4C87-AE85-EF35FFDACD2C">Repairing an OCR Configuration on a Local Node</a><br>If a node in your cluster was not available when you modified the OCR configuration, then you must repair the OCR configuration on that node before it is restarted.
                     </li>
                  </ul>
               </div>
               <a id="TDPRC249"></a><a id="TDPRC248"></a><div class="props_rev_3"><a id="GUID-29A62EE5-F0E6-4AB2-8100-5BF80036720D" name="GUID-29A62EE5-F0E6-4AB2-8100-5BF80036720D"></a><h4 id="TDPRC-GUID-29A62EE5-F0E6-4AB2-8100-5BF80036720D" class="sect4"><span class="enumeration_section">7.5.1 </span>Adding an OCR Location
                  </h4>
                  <div>
                     <p>You can add an Oracle Cluster Registry (OCR) location after an upgrade or after completing the Oracle RAC installation. </p>
                     <div class="section">
                        <p>Oracle Clusterware supports up to five OCR copies. Additional OCR copies provide greater fault tolerance.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To add an OCR file:</p>
                     </div>
                     <!-- class="section" -->
                     <ul>
                        <li class="stepexpand"><span>As the <code class="codeph">root</code> user, enter the following command to add a new OCR file:</span><div><pre class="pre codeblock"><code>[root]# ocrconfig -add <span class="variable">new_ocr_file_name</span> 
</code></pre></div>
                           <div>This command updates the OCR configuration on all the nodes on which Oracle Clusterware is running.</div>
                        </li>
                     </ul>
                  </div>
               </div><a id="TDPRC586"></a><a id="TDPRC585"></a><div class="props_rev_3"><a id="GUID-55E1092B-FFB6-408A-AE8E-DBCD50997B2A" name="GUID-55E1092B-FFB6-408A-AE8E-DBCD50997B2A"></a><h4 id="TDPRC-GUID-55E1092B-FFB6-408A-AE8E-DBCD50997B2A" class="sect4"><span class="enumeration_section">7.5.2 </span>Migrating the OCR to Oracle ASM Storage
                  </h4>
                  <div>
                     <p>You should store the Oracle Cluster Registry (OCR) in an Oracle Automatic Storage Management (Oracle ASM) disk group. </p>
                     <div class="section">
                        <p>To improve Oracle Clusterware storage manageability, OCR is configured, by default, to use Oracle ASM in Oracle Database 12<span class="italic">c</span>. However, if you upgrade from a previous release, then you can migrate OCR to reside on Oracle ASM, and take advantage of the improvements in managing Oracle Clusterware storage.
                        </p>
                        <p>The OCR inherits the redundancy of the disk group. If you want high redundancy for the OCR, then you must create an Oracle ASM disk group with high redundancy. You should use a disk group with at least normal redundancy, unless you have an external mirroring solution. If you store the OCR in an Oracle ASM disk group, and the Oracle ASM instance fails on a node, then the OCR becomes unavailable only on that node. The failure of one Oracle ASM instance does not affect the availability of the entire cluster.</p>
                        <p>Oracle does not support storing the OCR on different storage types simultaneously, such as storing the OCR on both Oracle ASM and a shared file system, except during a migration. After you have migrated the OCR to Oracle ASM storage, you must delete the existing OCR files.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To move the OCR from shared storage to an Oracle ASM disk group:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Ensure the upgrade to Oracle Clusterware 12c is complete. Run the following command to verify the current running version:</span><div><pre class="pre codeblock"><code>$ crsctl query crs activeversion</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>Verify that the ASM Compatibility attribute for the disk group is set to 11.2.0.2 or higher.</span></li>
                        <li class="stepexpand"><span>Use the Oracle ASM Configuration Assistant (ASMCA) to create an Oracle ASM disk group that is at least the same size as the existing OCR and has at least normal redundancy.</span><div>Ensure that Oracle ASM disk groups that you create are mounted on all of the nodes in the cluster.</div>
                        </li>
                        <li class="stepexpand"><span>To add OCR to an Oracle ASM disk group, ensure that the Oracle Clusterware stack is running, then execute the following OCRCONFIG command as the <code class="codeph">root</code> user, specifying the Oracle ASM disk group name:</span><div><pre class="pre codeblock"><code># ocrconfig -add +<span class="variable">ASM_disk_group</span>
</code></pre><p>You can run this command more than once if you add multiple OCR locations. You can have up to five OCR locations. However, each successive run must point to a different disk group.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Remove the non-Oracle ASM storage locations by running the following command as the <code class="codeph">root</code> user:</span><div><pre class="pre codeblock"><code># ocrconfig -delete <span class="variable">old_storage_location</span>
</code></pre><p>You must run this command once for every shared storage location for the OCR that is not using Oracle ASM. For example:</p><pre class="pre codeblock"><code># ocrconfig -delete /ocrdata/ocr_1
# ocrconfig -delete /ocrdata/ocr_2</code></pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-55E1092B-FFB6-408A-AE8E-DBCD50997B2A__GUID-5A297051-9D40-48A6-8E74-2EA0E129B24B">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="installing-oracle-db-software-and-creating-database.html#GUID-FABA9C97-18D9-4C96-B3C2-18912DEF406D" title="If you want to use a separate disk group for your Oracle database files or for the fast recovery area, then you must create the additional Oracle ASM disk groups before installing Oracle Database software.">Creating Additional Oracle ASM Disk Groups</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../ostmg/diskgroup-compatibility.html#OSTMG02700"><span><cite>Oracle Automatic Storage Management Administrator's Guide</cite></span></a> for more information about disk group compatibility attributes
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../cwadd/managing-oracle-cluster-registry-and-voting-files.html#CWADD91099"><span><cite>Oracle Clusterware Administration and Deployment Guide</cite></span></a> for more information about migrating the OCR to Oracle ASM
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPRC251"></a><a id="TDPRC250"></a><div class="props_rev_3"><a id="GUID-802FD1AC-F980-4F63-89F3-58ACCB4E8A40" name="GUID-802FD1AC-F980-4F63-89F3-58ACCB4E8A40"></a><h4 id="TDPRC-GUID-802FD1AC-F980-4F63-89F3-58ACCB4E8A40" class="sect4"><span class="enumeration_section">7.5.3 </span>Replacing an OCR
                  </h4>
                  <div>
                     <p>If you must change the location of an existing Oracle Cluster Registry (OCR), or change the location of a failed OCR to the location of a working one, then you can use this procedure if one OCR file remains online.</p>
                     <div class="section">
                        <p class="subhead3">To change the location of an OCR or replace an OCR file:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Use the OCRCHECK utility to verify that a copy of the OCR other than the one you are going to replace is <span class="italic">online</span>, using the following command:</span><div><pre class="pre codeblock"><code>ocrcheck 
</code></pre></div>
                           <div>
                              <div class="infoboxnote" id="GUID-802FD1AC-F980-4F63-89F3-58ACCB4E8A40__GUID-53FC85C5-955E-4DA8-9A17-428D53989075">
                                 <p class="notep1">Note:</p>
                                 <p>The OCR that you are <span class="italic">replacing</span> can be either online or offline. 
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Use the following command to verify that Oracle Clusterware is running on the node on which you are going to perform the replace operation:</span><div><pre class="pre codeblock"><code>crsctl check cluster -all
</code></pre></div>
                        </li>
                        <li class="stepexpand"><span>As the <code class="codeph">root</code> user, enter the following command to designate a new location for the specified OCR file:</span><div><pre class="pre codeblock"><code>[root]# ocrconfig -replace <span class="variable">source_ocr_file</span> -replacement <span class="variable">destination_ocr_file</span>
</code></pre></div>
                           <div>
                              <p>This command updates the OCR configuration on all the nodes on which Oracle Clusterware is running.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Use the OCRCHECK utility to verify that OCR replacement file is online:</span><div><pre class="pre codeblock"><code>ocrcheck 
</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="TDPRC255"></a><a id="TDPRC254"></a><div class="props_rev_3"><a id="GUID-8F6109B1-D4D1-4950-9BF3-7D61C5D10657" name="GUID-8F6109B1-D4D1-4950-9BF3-7D61C5D10657"></a><h4 id="TDPRC-GUID-8F6109B1-D4D1-4950-9BF3-7D61C5D10657" class="sect4"><span class="enumeration_section">7.5.4 </span>Removing an OCR
                  </h4>
                  <div>
                     <p>To remove an Oracle Cluster Registry (OCR) file, at least one copy of the OCR must be online.</p>
                     <div class="section">
                        <p>You can remove an OCR location to reduce OCR-related overhead or to stop mirroring your OCR because you moved the OCR to a redundant storage system, such as a redundant array of independent disks (RAID). </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To remove an OCR location from your cluster:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Use the OCRCHECK utility to ensure that at least one OCR other than the OCR that you are removing is online.</span><div><pre class="pre codeblock"><code>ocrcheck
</code></pre></div>
                           <div>
                              <div class="infoboxnote" id="GUID-8F6109B1-D4D1-4950-9BF3-7D61C5D10657__GUID-DBE25AC8-36E0-401B-ABC4-2A32CC944264">
                                 <p class="notep1">Note:</p>
                                 <p>Do <span class="italic">not</span> perform this OCR removal procedure unless there is at least one active OCR online.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>As the <code class="codeph">root</code> user, run the following command on any node in the cluster to remove a specific OCR file:</span><div><pre class="pre codeblock"><code>[root]# ocrconfig -delete <span class="variable">ocr_file_name</span>
</code></pre></div>
                           <div>
                              <p>This command updates the OCR configuration on all the nodes on which Oracle Clusterware is running.</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div><a id="TDPRC496"></a><a id="TDPRC495"></a><div class="props_rev_3"><a id="GUID-1DCC4CBF-BBC0-4C87-AE85-EF35FFDACD2C" name="GUID-1DCC4CBF-BBC0-4C87-AE85-EF35FFDACD2C"></a><h4 id="TDPRC-GUID-1DCC4CBF-BBC0-4C87-AE85-EF35FFDACD2C" class="sect4"><span class="enumeration_section">7.5.5 </span>Repairing an OCR Configuration on a Local Node
                  </h4>
                  <div>
                     <p>If a node in your cluster was not available when you modified the OCR configuration, then you must repair the OCR configuration on that node before it is restarted.</p>
                     <div class="section">
                        <p class="subhead3">To repair an OCR configuration:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>As the <code class="codeph">root</code> user, run one or more of the following commands on the node on which Oracle Clusterware is stopped, depending on the number and type of changes that were made to the OCR configuration:</span><div><pre class="pre codeblock"><code>[root]# ocrconfig &#x2013;repair -add <span class="variable">new_ocr_file_name</span>
</code></pre><pre class="pre codeblock"><code>[root]# ocrconfig &#x2013;repair -delete <span class="variable">ocr_file_name</span>
</code></pre><pre class="pre codeblock"><code>[root]# ocrconfig &#x2013;repair -replace <span class="variable">source_ocr_file</span> -replacement <span class="variable">dest_ocr_file</span>
</code></pre></div>
                           <div>
                              <p>These commands update the OCR configuration only on the node from which you run the command.</p>
                              <div class="infoboxnote" id="GUID-1DCC4CBF-BBC0-4C87-AE85-EF35FFDACD2C__GUID-5357D57B-1BE1-4CD0-8ED0-C3BB4F0A2080">
                                 <p class="notep1">Note:</p>
                                 <p>You <span class="italic">cannot</span> perform these operations on a node on which the Oracle Clusterware daemon is running.
                                 </p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Restart Oracle Clusterware on the node you have just repaired.</span></li>
                        <li class="stepexpand"><span>As the <code class="codeph">root</code> user, check the OCR configuration integrity of your cluster using the following command:</span><div><pre class="pre codeblock"><code>[root]# ocrcheck</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="TDPRC256"></a><div class="props_rev_3"><a id="GUID-5C81FDB4-4994-4E47-8A96-CD60B68DEC7F" name="GUID-5C81FDB4-4994-4E47-8A96-CD60B68DEC7F"></a><h3 id="TDPRC-GUID-5C81FDB4-4994-4E47-8A96-CD60B68DEC7F" class="sect3"><span class="enumeration_section">7.6 </span>Troubleshooting the Oracle Cluster Registry
               </h3>
               <div>
                  <p>The Oracle Cluster Registry (OCR) manages Oracle Clusterware and Oracle RAC database configuration information.</p>
               </div>
               <div>
                  <p><strong>Topics:</strong></p>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-0819F45C-B689-47ED-8CD6-F896E663D88E">About the OCRCHECK Utility</a><br>The OCRCHECK utility displays the data block format version used by the Oracle Cluster Registry (OCR), the available space and used space in the OCR, the ID used for the OCR, and the locations you have configured for the OCR.
                     </li>
                     <li class="ulchildlink"><a href="administering-oracle-clusterware-components.html#GUID-9CF62598-2FEC-4AEB-BEC1-06B7973E2FFD">Common Oracle Cluster Registry Problems and Solutions</a><br>The following table describes common Oracle Cluster Registry (OCR) problems and their corresponding solutions.
                     </li>
                  </ul>
               </div>
               <a id="TDPRC257"></a><div class="props_rev_3"><a id="GUID-0819F45C-B689-47ED-8CD6-F896E663D88E" name="GUID-0819F45C-B689-47ED-8CD6-F896E663D88E"></a><h4 id="TDPRC-GUID-0819F45C-B689-47ED-8CD6-F896E663D88E" class="sect4"><span class="enumeration_section">7.6.1 </span>About the OCRCHECK Utility
                  </h4>
                  <div>
                     <p>The OCRCHECK utility displays the data block format version used by the Oracle Cluster Registry (OCR), the available space and used space in the OCR, the ID used for the OCR, and the locations you have configured for the OCR.</p>
                     <p>The OCRCHECK utility calculates a checksum for all the data blocks in all the OCRs that you have configured to verify the integrity of each block. It also returns an individual status for each OCR file and a result for the overall OCR integrity check. The following is a sample of the OCRCHECK output:</p><pre class="pre codeblock"><code>Status of Oracle Cluster Registry is as follows :
   Version                  :          3
   Total space (kbytes)     :     262144
   Used space (kbytes)      :      16256
   Available space (kbytes) :     245888
   ID                       :  570929253
   Device/File Name         : +CRS_DATA
                              Device/File integrity check succeeded
...
                              Decive/File not configured

   Cluster registry integrity check succeeded

   Logical corruption check succeeded
</code></pre><p>The OCRCHECK utility creates a log file in the following directory, where <code class="codeph"><span class="variable">Grid_home</span></code> is the location of the Oracle Grid Infrastructure for a cluster installation, and <code class="codeph"><span class="variable">hostname</span></code> is the name of the local node: <code><span class="variable">Grid_home</span>/log/<span class="variable">hostname</span>/client</code></p>
                     <p>The log files have names of the form <code class="codeph">ocrcheck_<span class="variable">nnnnn</span>.log</code>, where <span class="variable">nnnnn</span> is the process ID of the operating session that issued the <code class="codeph">ocrcheck</code> command. 
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="administering-oracle-clusterware-components.html#GUID-164906F8-1C51-46B9-B4C6-094C00AB5B06" title="Use the ocrconfig utility to view the backups generated automatically by Oracle Clusterware.">Viewing Available OCR Backups</a></li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TDPRC259"></a><a id="TDPRC258"></a><div class="props_rev_3"><a id="GUID-9CF62598-2FEC-4AEB-BEC1-06B7973E2FFD" name="GUID-9CF62598-2FEC-4AEB-BEC1-06B7973E2FFD"></a><h4 id="TDPRC-GUID-9CF62598-2FEC-4AEB-BEC1-06B7973E2FFD" class="sect4"><span class="enumeration_section">7.6.2 </span>Common Oracle Cluster Registry Problems and Solutions
                  </h4>
                  <div>
                     <p>The following table describes common Oracle Cluster Registry (OCR) problems and their corresponding solutions.</p>
                     <div class="tblformal" id="GUID-9CF62598-2FEC-4AEB-BEC1-06B7973E2FFD__GUID-30A9603D-EA35-477A-AA5A-12FCF6B6663E">
                        <p class="titleintable">Table 7-1 Common OCR Problems and Solutions</p>
                        <table cellpadding="4" cellspacing="0" class="Formal" title="Common OCR Problems and Solutions" summary="This 2 column table shows common OCR Problems and solutions. Column 1 is the problem. Column 2 is the solution. " width="100%" frame="hsides" border="1" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th align="left" valign="bottom" width="31%" id="d18546e3342">Problem</th>
                                 <th align="left" valign="bottom" width="69%" id="d18546e3345">Solution</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d18546e3350" headers="d18546e3342 ">
                                    <p>The OCR is not mirrored.</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d18546e3350 d18546e3345 ">
                                    <p>Run the <code class="codeph">ocrconfig</code> command with the <code class="codeph">-add</code> option as described in the section <span class="q">"<a href="administering-oracle-clusterware-components.html#GUID-29A62EE5-F0E6-4AB2-8100-5BF80036720D" title="You can add an Oracle Cluster Registry (OCR) location after an upgrade or after completing the Oracle RAC installation.">Adding an OCR Location</a>"</span>.
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d18546e3371" headers="d18546e3342 ">
                                    <p>A copy of the OCR has failed and you must replace it. Error messages are being reported in Enterprise Manager or the OCR log file.</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d18546e3371 d18546e3345 ">
                                    <p>Run the <code class="codeph">ocrconfig</code> command with the <code class="codeph">-replace</code> option as described in the section <span class="q">"<a href="administering-oracle-clusterware-components.html#GUID-802FD1AC-F980-4F63-89F3-58ACCB4E8A40" title="If you must change the location of an existing Oracle Cluster Registry (OCR), or change the location of a failed OCR to the location of a working one, then you can use this procedure if one OCR file remains online.">Replacing an OCR</a>"</span>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d18546e3392" headers="d18546e3342 ">
                                    <p>OCRCHECK does not find a valid OCR, or all copies of the OCR are corrupted.</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d18546e3392 d18546e3345 ">
                                    <p>Run the <code class="codeph">ocrconfig</code> command with the <code class="codeph">-restore</code> option as described in the section <span class="q">"<a href="administering-oracle-clusterware-components.html#GUID-9F748615-4172-46E4-B340-A6CC5B5F90FC" title="When restoring the OCR from automatically generated backups, you first have to determine which backup file to use for the recovery.">Restoring the OCR from Automatically Generated OCR Backups</a>"</span>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d18546e3413" headers="d18546e3342 ">
                                    <p>The OCR configuration was updated incorrectly.</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d18546e3413 d18546e3345 ">
                                    <p>Run the <code class="codeph">ocrconfig</code> command with the <code class="codeph">-repair</code> option as described in the section <span class="q">"<a href="administering-oracle-clusterware-components.html#GUID-1DCC4CBF-BBC0-4C87-AE85-EF35FFDACD2C" title="If a node in your cluster was not available when you modified the OCR configuration, then you must repair the OCR configuration on that node before it is restarted.">Repairing an OCR Configuration on a Local Node</a>"</span>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d18546e3434" headers="d18546e3342 ">
                                    <p>You are experiencing a severe performance effect from updating multiple OCR files, or you want to remove an OCR file for other reasons.</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d18546e3434 d18546e3345 ">
                                    <p>Run the <code class="codeph">ocrconfig</code> command with the <code class="codeph">-delete</code> option as described in the section <span class="q">"<a href="administering-oracle-clusterware-components.html#GUID-8F6109B1-D4D1-4950-9BF3-7D61C5D10657" title="To remove an Oracle Cluster Registry (OCR) file, at least one copy of the OCR must be online.">Removing an OCR</a>"</span>. 
                                    </p>
                                 </td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td align="left" valign="top" width="31%" id="d18546e3455" headers="d18546e3342 ">
                                    <p>You want to change the location or storage type currently used by the OCR.</p>
                                 </td>
                                 <td align="left" valign="top" width="69%" headers="d18546e3455 d18546e3345 ">
                                    <p>Run the <code class="codeph">ocrconfig</code> command with the <code class="codeph">-replace</code> option while Oracle Clusterware is running, as described in the section <span class="q">"<a href="administering-oracle-clusterware-components.html#GUID-802FD1AC-F980-4F63-89F3-58ACCB4E8A40" title="If you must change the location of an existing Oracle Cluster Registry (OCR), or change the location of a failed OCR to the location of a working one, then you can use this procedure if one OCR file remains online.">Replacing an OCR</a>"</span>. If some cluster nodes are down when you move the OCR, then you must run <code class="codeph">ocrconfig</code> <code class="codeph">-repair</code> on each node that was down before you start Oracle Clusterware on that node.
                                    </p>
                                 </td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>