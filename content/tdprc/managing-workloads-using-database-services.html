<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You can achieve client high availability and scalability in Oracle Real Application Clusters (Oracle RAC) using database services, Fast Application Notification (FAN), Fast Connection Failover (FCF), and Application Continuity. Older applications can use Transparent Application Failover (TAF).">
      <meta name="description" content="You can achieve client high availability and scalability in Oracle Real Application Clusters (Oracle RAC) using database services, Fast Application Notification (FAN), Fast Connection Failover (FCF), and Application Continuity. Older applications can use Transparent Application Failover (TAF).">
      <title>Client High Availability with Services, FAN, FCF, and Application Continuity</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="2 Day + Real Application Clusters Guide ">
      <meta property="og:description" content="You can achieve client high availability and scalability in Oracle Real Application Clusters (Oracle RAC) using database services, Fast Application Notification (FAN), Fast Connection Failover (FCF), and Application Continuity. Older applications can use Transparent Application Failover (TAF).">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="2 Day + Real Application Clusters Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 17.8.1">
      <link rel="alternate" href="2-day-real-application-clusters-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2017-10-12T06:16:43-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2006, 2017">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E85152-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="administering-oracle-clusterware-components.html" title="Previous" type="text/html">
      <link rel="next" href="administering-backup-and-recovery.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">
            {
                "primary":
                {
                    "category":{
                      "short_name":"database",
                      "element_name":"Database",
                      "display_in_url":true
                    },
                    "suite":{
                      "short_name":"oracle",
                      "element_name":"Oracle",
                      "display_in_url":true
                    },
                    "product_group":{
                      "short_name":"not-applicable",
                      "element_name":"Not applicable",
                      "display_in_url":false
                    },
                    "product":{
                      "short_name":"oracle-database",
                      "element_name":"Oracle Database",
                      "display_in_url":true
                    },
                    "release":{
                      "short_name":"12.2",
                      "element_name":"Release 12.2",
                      "display_in_url":true
                    },
                    "platform":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    },
                    "component":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    }
                }
            }
            </script>
      
    <meta name="dcterms.title" content="2 Day + Real Application Clusters Guide">
    <meta name="dcterms.isVersionOf" content="TDPRC">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="administering-oracle-clusterware-components.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="administering-backup-and-recovery.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">2 Day + Real Application Clusters Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Client High Availability with Services, FAN, FCF, and Application Continuity</li>
            </ol>
            <a id="GUID-38E1B0C5-CF5F-482B-87DA-0F4D2BD8CDC4" name="GUID-38E1B0C5-CF5F-482B-87DA-0F4D2BD8CDC4"></a><a id="TDPRC289"></a>
            
            <h2 id="TDPRC-GUID-38E1B0C5-CF5F-482B-87DA-0F4D2BD8CDC4" class="sect2"><span class="enumeration_chapter">8 </span>Client High Availability with Services, FAN, FCF, and Application Continuity
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>You can achieve client high availability and scalability in Oracle Real Application Clusters (Oracle RAC) using database services, Fast Application Notification (FAN), Fast Connection Failover (FCF), and Application Continuity. Older applications can use Transparent Application Failover (TAF).</p>
            </div>
            <div>
               <p><strong>Topics:</strong></p>
               <ul class="ullinks">
                  <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-05437C05-720F-477A-9533-EEB78357F784">About Continuous Service Availability with Database Services</a><br>You can deploy Oracle RAC environments to achieve continuous service in many different ways.
                  </li>
                  <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-8F41DEAB-CE18-48E5-B57A-A4B4FA908217">Creating Services</a><br>You can create a service using Oracle Enterprise Manager or the SRVCTL utility.
                  </li>
                  <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-A59315AA-8EBE-43CC-9FFF-95A4522908BA">Administering Services</a><br>You can create and administer services using Enterprise Manager. You can also use the SRVCTL utility to perform most service management tasks.
                  </li>
                  <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-4E3BE2EB-4E80-49BD-8BD8-DA9858203F6E">Managing Planned Maintenance Without User Interruption</a><br>Using a combination of features, you can stop database services or instances with little to no impact to connected sessions.
                  </li>
                  <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-47706B7C-0CD3-4334-9436-98FD1C8C60B9">Configuring Clients for High Availability</a><br>There are three central elements to consider when automating failover for application clients.
                  </li>
               </ul>
            </div>
            <a id="TDPRC290"></a><div class="props_rev_3"><a id="GUID-05437C05-720F-477A-9533-EEB78357F784" name="GUID-05437C05-720F-477A-9533-EEB78357F784"></a><h3 id="TDPRC-GUID-05437C05-720F-477A-9533-EEB78357F784" class="sect3"><span class="enumeration_section">8.1 </span>About Continuous Service Availability with Database Services
               </h3>
               <div>
                  <p>You can deploy Oracle RAC environments to achieve continuous service in many different ways.</p>
                  <p>Applications using a clustered database generally want to load balance their workload across the cluster. Oracle Real Application Clusters (Oracle RAC) runs on Oracle Clusterware, which provides a highly available (HA) application framework. Oracle Clusterware provides the necessary service and integration points between Oracle RAC and custom enterprise applications using FAN. Across data centers Global Data Services (GDS) also provides these integration points for services and FAN.</p>
                  <p>Depending on the number of nodes and your environment's complexity and objectives, your choices for the optimal workload management and high availability configuration depend on a variety of considerations. </p>
                  <p>To implement continuous service for your applications using Oracle RAC database, use the following features:</p>
               </div>
               <div>
                  <p><strong>Topics:</strong></p>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-6D2CEE13-1EEA-486E-A29A-0E69D7D762A7">About Oracle Database Services</a><br>Services divide workloads into mutually disjoint groupings. Each service represents a workload with common attributes, service-level thresholds, and priorities. 
                     </li>
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-EFAC8C01-0EE7-41B9-81C1-1D7D7D917DB4">About the Database Resource Manager</a><br>The Database Resource Manager is a database feature you can use to control the database resources allocated to users, applications, and services. 
                     </li>
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-FEAE3AA1-8785-432C-B7B3-B2B3AB0430A3">About Oracle RAC High Availability Framework</a><br>The Oracle RAC high availability framework enables Oracle RAC to maintain the database, components, and applications in a running state always. 
                     </li>
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-C32436A0-3706-4E15-96FA-BB7F92007E55">About Fast Application Notification (FAN)</a><br>Fast Application Notification (FAN) is a high availability notification mechanism that Oracle RAC uses to notify other processes about cluster configuration and service-level information, including status changes such as <code class="codeph">UP</code> or <code class="codeph">DOWN</code> events.
                     </li>
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-3D8A5870-E734-48CF-8DA7-338523BE69EE">About FAN Callouts</a><br>FAN callouts are server-side executable files that Oracle RAC runs immediately when high availability events occur. 
                     </li>
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-7F1CE7FC-8A75-4557-94E8-6FE5633986F5">About Application Continuity for Masking Outages</a><br>Application Continuity can mask database outages for both planned and unplanned events.
                     </li>
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-B49734B3-028E-4FA5-A0DB-046E8122DB75">About the Load Balancing Advisory</a><br>The Load Balancing Advisory provides information to applications or clients about the current service levels that the Oracle RAC database instances are providing. 
                     </li>
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-15212171-34EF-4E27-883B-78D2A3842F7D">About Connection Load Balancing</a><br>Oracle Net connection load balancing spreads user connections across all the instances that support the service used to connect to the database.
                     </li>
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-15C02742-9B15-4EEB-985C-A656E310F3D7">About Run-time Connection Load Balancing</a><br>Run-time Connection Load Balancing is a feature of Oracle connection pools that can distribute client work requests across the instances in an Oracle RAC database based on the Load Balancing Advisory information.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-05437C05-720F-477A-9533-EEB78357F784__GUID-8E6792C9-14C1-44D1-A819-29E2200B5A10">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-8F41DEAB-CE18-48E5-B57A-A4B4FA908217" title="You can create a service using Oracle Enterprise Manager or the SRVCTL utility.">Creating Services</a>"</span></p>
                  </div>
               </div>
               <a id="TDPRC291"></a><div class="props_rev_3"><a id="GUID-6D2CEE13-1EEA-486E-A29A-0E69D7D762A7" name="GUID-6D2CEE13-1EEA-486E-A29A-0E69D7D762A7"></a><h4 id="TDPRC-GUID-6D2CEE13-1EEA-486E-A29A-0E69D7D762A7" class="sect4"><span class="enumeration_section">8.1.1 </span>About Oracle Database Services
                  </h4>
                  <div>
                     <p>Services divide workloads into mutually disjoint groupings. Each service represents a workload with common attributes, service-level thresholds, and priorities. </p>
                     <p><span class="bold">Database services</span>, referred to as services, are logical abstractions for managing workloads in Oracle Database. A single service can represent an application, multiple applications or a subset of a single application. For example, the Oracle E-Business suite defines a service for each responsibility, such as general ledger, accounts receivable, order entry, and so on. A service can be active on one or several instances of an Oracle RAC cluster and a single database instance can host multiple services.
                     </p>
                     <div class="infoboxnote" id="GUID-6D2CEE13-1EEA-486E-A29A-0E69D7D762A7__GUID-7D474AF1-F314-467E-9672-2F7FCE9745E8">
                        <p class="notep1">Note:</p>
                        <p>A database service can only be offered on a single network.</p>
                     </div>
                     <p>Services provide the following benefits:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Provide a single entity for managing applications that compete for the same resources</p>
                        </li>
                        <li>
                           <p>Enable each workload to be managed as a unit</p>
                        </li>
                        <li>
                           <p>Hide the complexity of the cluster from the client</p>
                        </li>
                     </ul>
                     <p>You can use services to manage the workload for different types of work. For example, online users can use one service while batch processing can use a different service and reporting can use yet another service type. </p>
                     <p>Traditionally an Oracle database provided a single service and all users connected to the same service. A database always has this default database service that is the database name. This service cannot be modified. It should only be used for administrative tasks because it always enables you to connect to the database. The default database service should not be used for high availability because it cannot be disabled or relocated. Always use user-defined database services for your applications.</p>
                     <div class="infoboxnote" id="GUID-6D2CEE13-1EEA-486E-A29A-0E69D7D762A7__GUID-35E9618A-9F0A-4717-BB58-4084D3B95415">
                        <p class="notep1">Note:</p>
                        <p>Do not use the default database service for application workloads. The default service is for administration purposes only. The default database service has the same name as the <code>DB_NAME</code>, <code>DB_UNIQUE_NAME</code>, or <code>PDBName</code>. The default database service cannot be enabled, disabled, or failed over, and it does not support load balancing.
                        </p>
                        <p>You must create at least one service as described in <span class="q">"<a href="managing-workloads-using-database-services.html#GUID-8F41DEAB-CE18-48E5-B57A-A4B4FA908217" title="You can create a service using Oracle Enterprise Manager or the SRVCTL utility.">Creating Services</a>"</span>.
                        </p>
                     </div>
                     <p>When a user or application connects to a database, Oracle recommends that you use a service for the connection. Oracle Database automatically creates one database service when the database is created. However, for more flexibility in the management of the applications connecting to the database and their workload, you should create one or more application services and specify which database instances offer the services.</p>
                     <p>You can define services for both policy-managed and administrator-managed databases.</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Policy-managed database</span>: When you define services for a <a href="glossary.html#GUID-8DBAEFAB-9A98-452A-9BD4-CA1FDBE61076"><span class="xrefglossterm">policy-managed database</span></a>, you assign the service to a server pool where the database is running. You can define the service as either uniform (running on all instances in the server pool) or singleton (running on only one instance in the server pool).
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Administrator-managed database</span>: When you define a service for an <a href="glossary.html#GUID-E4D6B9D8-37AC-4713-9F96-D1B2C1EB99F0"><span class="xrefglossterm">administrator-managed database</span></a>, you define which instances normally support that service. These are known as the <code class="codeph">PREFERRED</code> instances. You can also define other instances to support a service if the preferred instance fails. These are known as <code class="codeph">AVAILABLE</code> instances. A service that runs on an administrator-managed database must have at least one <code class="codeph">PREFERRED</code> instance.
                           </p>
                        </li>
                     </ul>
                     <p>Services are integrated with the Database Resource Manager, which enables you to restrict the resources that a service uses within an instance. In addition, Oracle Scheduler jobs can run using a service, as opposed to using a specific instance.</p>
                  </div>
                  <div>
                     <p><strong>Topics:</strong></p>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-11F2B6B1-42D8-46DA-ABE5-04A764CC184B">About Service Failover in Administrator-Managed Databases</a><br>When configuring service failover in administrator-managed databases, you must configure preferred and available instances.
                        </li>
                        <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-7E65FA3D-9612-488D-AE8C-1C89F88AB036">About Service Failover in Policy-Managed Databases</a><br>Service failover in policy-managed databases behaves differently if the service is UNIFORM or SINGLETON.
                        </li>
                        <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-66916219-FF6E-4CA0-B425-49C57A079C0F">About Automatic Starting of Services</a><br>When you define a service, you can also define the management policy for that service. 
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-6D2CEE13-1EEA-486E-A29A-0E69D7D762A7__GUID-EA1140D7-246C-426E-A2B9-7F372054691B">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-8F41DEAB-CE18-48E5-B57A-A4B4FA908217" title="You can create a service using Oracle Enterprise Manager or the SRVCTL utility.">Creating Services</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-A59315AA-8EBE-43CC-9FFF-95A4522908BA" title="You can create and administer services using Enterprise Manager. You can also use the SRVCTL utility to perform most service management tasks.">Administering Services</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../admin/creating-and-configuring-an-oracle-database.html#ADMIN11125"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about managing application workloads with database services
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <a id="TDPRC292"></a><div class="props_rev_3"><a id="GUID-11F2B6B1-42D8-46DA-ABE5-04A764CC184B" name="GUID-11F2B6B1-42D8-46DA-ABE5-04A764CC184B"></a><h5 id="TDPRC-GUID-11F2B6B1-42D8-46DA-ABE5-04A764CC184B" class="sect5"><span class="enumeration_section">8.1.1.1 </span>About Service Failover in Administrator-Managed Databases
                     </h5>
                     <div>
                        <p>When configuring service failover in administrator-managed databases, you must configure preferred and available instances.</p>
                        <p>During normal operation a service can be running on any combination of the preferred and available instances, up to the cardinality of the service (the number of <code class="codeph">PREFERRED</code> instances defined). Only at initial startup of the service will Oracle Clusterware attempt to start the service on the <code class="codeph">PREFERRED</code> instances. If an instance fails, then the service fails over to one of the combined list of preferred and available instances that is not offering the service. You can also manually relocate the service to one of the instances in the combined list of preferred and available instances not offering the service.
                        </p>
                        <p>If a service fails over to an available instance, then the service is not moved back to its preferred instance automatically. However, you can automate the relocation of a service to its preferred instance by using a FAN callout.</p>
                        <p>If you configure a preferred instance for a service, but do not specify at least one available instance for the service, then the service does not failover to another instance if the preferred instance fails.</p>
                        <p>Using Enterprise Manager, you can also specify an instance as Not Used. This setting means the service does not run on the instance, even if the preferred instance for the service fails.</p>
                        <div class="infoboxnotealso" id="GUID-11F2B6B1-42D8-46DA-ABE5-04A764CC184B__GUID-F0A48CD5-C58A-47B2-A3A5-BBCA6647A3A3">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-3D8A5870-E734-48CF-8DA7-338523BE69EE" title="FAN callouts are server-side executable files that Oracle RAC runs immediately when high availability events occur.">About FAN Callouts</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="http://www.oracle.com/technetwork/database/options/clustering/overview/fastapplicationnotification12c-2538999.pdf">FAST APPLICATION NOTIFICATION WITH ORACLE DATABASE 12C</a> white paper for an example of a callout script in the section "Appendix D Sample Callout program"
                                 </p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-8F41DEAB-CE18-48E5-B57A-A4B4FA908217" title="You can create a service using Oracle Enterprise Manager or the SRVCTL utility.">Creating Services</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=HAOVW128"><span><cite>Oracle Database High Availability Overview</cite></span></a> for more information about the high availability products and features available for Oracle Database
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="TDPRC587"></a><div class="props_rev_3"><a id="GUID-7E65FA3D-9612-488D-AE8C-1C89F88AB036" name="GUID-7E65FA3D-9612-488D-AE8C-1C89F88AB036"></a><h5 id="TDPRC-GUID-7E65FA3D-9612-488D-AE8C-1C89F88AB036" class="sect5"><span class="enumeration_section">8.1.1.2 </span>About Service Failover in Policy-Managed Databases
                     </h5>
                     <div>
                        <p>Service failover in policy-managed databases behaves differently if the service is UNIFORM or SINGLETON.</p>
                        <p>When you specify that a service is UNIFORM, Oracle Clusterware attempts to ensure that the service always runs on all the available instances for the specified server pool. If the instance fails, then the service is no longer available on that instance. If the cardinality of the server pool increases and an instance is added to the database, then the service is started on the new instance. You cannot manually relocate the service to a specific instance.</p>
                        <p>When you specify that a service is SINGLETON, Oracle Clusterware attempts to ensure that the service always runs on only one of the available instances for the specified server pool. If the instance fails, then the service fails over to a different instance in the server pool. You cannot specify which instance in the server pool the service should run on.</p>
                        <p>For SINGLETON services, if a service fails over to a new instance, then the service is not moved back to its original instance when that instance becomes available again. </p>
                        <div class="infoboxnotealso" id="GUID-7E65FA3D-9612-488D-AE8C-1C89F88AB036__GUID-FF17118D-195A-4EAE-BBDB-66CC645DA47A">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-8F41DEAB-CE18-48E5-B57A-A4B4FA908217" title="You can create a service using Oracle Enterprise Manager or the SRVCTL utility.">Creating Services</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../racad/introduction-to-oracle-rac.html#RACAD7276"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about automatic workload management using database services
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="TDPRC500"></a><div class="props_rev_3"><a id="GUID-66916219-FF6E-4CA0-B425-49C57A079C0F" name="GUID-66916219-FF6E-4CA0-B425-49C57A079C0F"></a><h5 id="TDPRC-GUID-66916219-FF6E-4CA0-B425-49C57A079C0F" class="sect5"><span class="enumeration_section">8.1.1.3 </span>About Automatic Starting of Services
                     </h5>
                     <div>
                        <p>When you define a service, you can also define the management policy for that service. </p>
                        <p>You can choose either an automatic or manual management policy:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="bold">Automatic</span>: The service always starts when the database starts.
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">Manual</span>: Requires you to start the service manually after the database starts.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-66916219-FF6E-4CA0-B425-49C57A079C0F__GUID-AABC24AA-0B38-4971-9DEE-177E64D15DA5">
                           <p class="notep1">Note:</p>
                           <p>When you use automatic services in an administrator-managed database, during planned database startup, services may start on the first instances that become available rather than their preferred instances.</p>
                        </div>
                     </div>
                     <div>
                        <div class="relinfo">
                           <p><strong>Related Topics</strong></p>
                           <ul>
                              <li><a href="managing-workloads-using-database-services.html#GUID-8F41DEAB-CE18-48E5-B57A-A4B4FA908217" title="You can create a service using Oracle Enterprise Manager or the SRVCTL utility.">Creating Services</a></li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="TDPRC660"></a><a id="TDPRC293"></a><div class="props_rev_3"><a id="GUID-EFAC8C01-0EE7-41B9-81C1-1D7D7D917DB4" name="GUID-EFAC8C01-0EE7-41B9-81C1-1D7D7D917DB4"></a><h4 id="TDPRC-GUID-EFAC8C01-0EE7-41B9-81C1-1D7D7D917DB4" class="sect4"><span class="enumeration_section">8.1.2 </span>About the Database Resource Manager
                  </h4>
                  <div>
                     <p>The Database Resource Manager is a database feature you can use to control the database resources allocated to users, applications, and services. </p>
                     <p>The Database Resource Manager ensures that users, applications, and services receive their share of the available database resources. The Database Resource Manager enables an Oracle RAC database running on one or more nodes to support multiple applications and mixed workloads with optimal efficiency.</p>
                     <p>The Database Resource Manager provides the ability to prioritize work within an Oracle database or your Oracle RAC environment. For example, high priority users, such as online workers, would get more resources to minimize response time, while lower priority users, such as batch jobs or reports, would get fewer resources, and could take longer to run. Database Resource Manager enables more granular control over resources.</p>
                     <p>Resources are allocated to users according to a resource plan specified by the database administrator. The following terms are used in specifying a resource plan:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A <span class="bold">resource plan</span> specifies how the resources are to be distributed among various users based on resource consumer groups.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Resource consumer groups</span> enable the administrator to group user sessions by resource requirements. Resource consumer groups are different from user roles; one database user can have different sessions assigned to different resource consumer groups.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Resource allocation methods</span> are the methods or policies used by the Database Resource Manager when allocating for a particular resource. Resource consumer groups and resource plans use the resource allocation methods. The database provides the resource allocation methods that are available, but the DBA determines which method to use.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Resource plan directives</span> are a means of assigning consumer groups to particular plans and partitioning resources among consumer groups by specifying parameters for each resource allocation method.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Subplans</span>, which the DBA can create within a resource plan, enable further subdivision of resources among different users of an application.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Levels</span> provide a mechanism to specify distribution of unused resources among available users. Up to eight levels of resource allocation can be specified.
                           </p>
                        </li>
                     </ul>
                     <p>The Database Resource Manager enables you to map a resource consumer group to a service so that users who connect using that service are members of the specified resource consumer group, and thus restricted to the resources available to that resource consumer group. </p>
                     <p>You can access a tutorial for Resource Manager in Enterprise Manager. Simply navigate to the Cluster Database Home page, then, from the <span class="bold">Administration</span> menu, select <span class="bold">Resource Manager</span>, and then <span class="bold">Getting Started</span>. See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=ADMQS033"><span><cite>Oracle Database 2 Day DBA</cite></span></a> for details on logging in to Oracle Enterprise Manager.
                     </p>
                     <div class="infoboxnotealso" id="GUID-EFAC8C01-0EE7-41B9-81C1-1D7D7D917DB4__GUID-8DC19CB4-6E07-41E7-803B-30686F81BC19">
                        <p class="notep1">See Also:</p>
                        <p><a href="../admin/managing-resources-with-oracle-database-resource-manager.html#ADMIN027"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for more information about the Database Resource Manager 
                        </p>
                     </div>
                  </div>
               </div><a id="TDPRC294"></a><div class="props_rev_3"><a id="GUID-FEAE3AA1-8785-432C-B7B3-B2B3AB0430A3" name="GUID-FEAE3AA1-8785-432C-B7B3-B2B3AB0430A3"></a><h4 id="TDPRC-GUID-FEAE3AA1-8785-432C-B7B3-B2B3AB0430A3" class="sect4"><span class="enumeration_section">8.1.3 </span>About Oracle RAC High Availability Framework
                  </h4>
                  <div>
                     <p>The Oracle RAC high availability framework enables Oracle RAC to maintain the database, components, and applications in a running state always. </p>
                     <p>If an instance, component, or application fails, then it can be automatically restarted to keep Oracle Database operating at full capacity.</p>
                     <p>Oracle Database focuses on maintaining service availability. In Oracle RAC, Oracle services are designed to be continuously available with workloads shared across one or more instances. The Oracle RAC high availability framework maintains service availability by storing the configuration information for each service in the Oracle Cluster Registry (OCR). Oracle Clusterware recovers and balances services across instances based on the service definition.</p>
                     <div class="infoboxnotealso" id="GUID-FEAE3AA1-8785-432C-B7B3-B2B3AB0430A3__GUID-86106B0B-D36D-41DF-8426-1D79DADCA9A9">
                        <p class="notep1">See Also:</p>
                        <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=HAOVW002"><span class="italic">Oracle Database High Availability Overview</span></a> for information about determining the high availability requirements for your system
                        </p>
                     </div>
                  </div>
               </div><a id="TDPRC295"></a><div class="props_rev_3"><a id="GUID-C32436A0-3706-4E15-96FA-BB7F92007E55" name="GUID-C32436A0-3706-4E15-96FA-BB7F92007E55"></a><h4 id="TDPRC-GUID-C32436A0-3706-4E15-96FA-BB7F92007E55" class="sect4"><span class="enumeration_section">8.1.4 </span>About Fast Application Notification (FAN)
                  </h4>
                  <div>
                     <p>Fast Application Notification (FAN) is a high availability notification mechanism that Oracle RAC uses to notify other processes about cluster configuration and service-level information, including status changes such as <code class="codeph">UP</code> or <code class="codeph">DOWN</code> events.
                     </p>
                     <p>One of the main requirements of a highly available application is for it to be quickly notified when something happens to critical system components. Notification enables the connection pool or the application server container to execute event-handling programs. FAN is a timely reaction to cluster resource re-organizations, or resource changes (such as an increase or decrease in the amount of resource).</p>
                     <p>FAN enables the automated recovery of applications when cluster components fail. For cluster configuration changes, the Oracle RAC high availability framework publishes a FAN event immediately after a change occurs regarding the state of the instances in the cluster. Instead of waiting for the application to query the database and detect a problem, applications can receive FAN events and react immediately.</p>
                     <p>FAN <code class="codeph">UP</code> and <code class="codeph">DOWN</code> events can apply to instances, services, nodes, and public networks. FAN also publishes Load Balancing Advisory events. FAN <code class="codeph">UP</code> and <code class="codeph">DOWN</code> events provide the following benefits:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>For <code class="codeph">DOWN</code> events, the disruption to the application can be minimized because sessions that are connected to the failed instance or node can be terminated. Incomplete transactions can be terminated and the application user notified immediately. Application users who request new connections are directed to instances that are started and are providing the requested service.
                           </p>
                        </li>
                        <li>
                           <p>For <code class="codeph">UP</code> events, when services and instances are started, new connections can be created so that the application can immediately take advantage of the extra resources.
                           </p>
                        </li>
                     </ul>
                     <p>Oracle Clusterware and Oracle RAC use Oracle Notification Service (ONS) to propagate FAN messages both within the Oracle cluster and to client or mid-tier machines. ONS is installed with Oracle Clusterware and the resources to manage the ONS daemons are created automatically during the installation process. ONS daemons run on each node of the cluster and send and receive messages from a configured list of nodes where other ONS daemons are active; this list of nodes can include nodes outside the cluster, such as application server tiers or client nodes. Auto-configuration of Oracle clients, where the client discovers the ONS daemons using their TNS connect string or URL, was introduced with Oracle Database 12<span class="italic">c</span>.
                     </p>
                     <p>FAN can also be used with Oracle Data Guard, Active Data Guard, Oracle WebLogic Server Active GridLink for RAC, Universal Connection Pool (UCP) clients, Global Data Services, and OCI-based clients including OCI/OCCI, ODP.NET and OCI Session Pool, among others.</p>
                     <div class="infoboxnotealso" id="GUID-C32436A0-3706-4E15-96FA-BB7F92007E55__GUID-3B162BD7-4059-4BB2-99B8-D6B94841C090">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-15212171-34EF-4E27-883B-78D2A3842F7D" title="Oracle Net connection load balancing spreads user connections across all the instances that support the service used to connect to the database.">About Connection Load Balancing</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-B49734B3-028E-4FA5-A0DB-046E8122DB75" title="The Load Balancing Advisory provides information to applications or clients about the current service levels that the Oracle RAC database instances are providing.">About the Load Balancing Advisory</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TDPRC296"></a><div class="props_rev_3"><a id="GUID-3D8A5870-E734-48CF-8DA7-338523BE69EE" name="GUID-3D8A5870-E734-48CF-8DA7-338523BE69EE"></a><h4 id="TDPRC-GUID-3D8A5870-E734-48CF-8DA7-338523BE69EE" class="sect4"><span class="enumeration_section">8.1.5 </span>About FAN Callouts
                  </h4>
                  <div>
                     <p>FAN callouts are server-side executable files that Oracle RAC runs immediately when high availability events occur. </p>
                     <p>A callout is essentially a shell script or precompiled executable written in any programming language. Some examples of how you can use FAN callouts to automate the actions performed when events occur in a cluster configuration are as follows:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Starting and stopping server-side applications</p>
                        </li>
                        <li>
                           <p>Relocating low-priority services when high-priority services come online</p>
                        </li>
                        <li>
                           <p>Sending text or numeric messages to pagers</p>
                        </li>
                     </ul>
                     <p>The executable files for FAN callouts are stored in the <code><span class="variable">Grid_home</span>/racg/usrco</code> subdirectory. If this subdirectory does not exist in your Grid home, then you must create this directory with the same permissions and ownership as the <code><span class="variable">Grid_home</span>/racg/tmp</code> subdirectory.
                     </p>
                     <p>All executables in the <code><span class="variable">Grid_home</span>/racg/usrco</code> subdirectory are executed immediately, in an asynchronous fashion, when a FAN event is received through the Oracle Notification Service (ONS). For most event types, the callout is executed on one node in the cluster (the node generating the event), thus a copy of the executable files used by FAN callouts should be available on every node that runs Oracle Clusterware. An example of a callout script can be found in the section "Appendix D Sample Callout program (PERL based)" in the following white paper, available on Oracle Technology Network: <code class="codeph"><a href="http://www.oracle.com/technetwork/database/options/clustering/overview/fastapplicationnotification12c-2980342.pdf">http://www.oracle.com/technetwork/database/options/clustering/overview/fastapplicationnotification12c-2980342.pdf</a></code></p>
                     <div class="infoboxnotealso" id="GUID-3D8A5870-E734-48CF-8DA7-338523BE69EE__GUID-07C9EF41-D93E-4E44-8B01-4DCE9202C6A9">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="../admin/configuring-automatic-restart-of-an-oracle-database.html#ADMIN13186"><span><cite>Oracle Database Administrator’s Guide</cite></span></a> for more information about using FAN callouts
                              </p>
                           </li>
                           <li>
                              <p><a href="../racad/ensuring-application-continuity.html#RACAD7128"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a> for more information about configuring Fast Application Notification and FAN callouts
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TDPRC617"></a><div class="props_rev_3"><a id="GUID-7F1CE7FC-8A75-4557-94E8-6FE5633986F5" name="GUID-7F1CE7FC-8A75-4557-94E8-6FE5633986F5"></a><h4 id="TDPRC-GUID-7F1CE7FC-8A75-4557-94E8-6FE5633986F5" class="sect4"><span class="enumeration_section">8.1.6 </span>About Application Continuity for Masking Outages
                  </h4>
                  <div>
                     <p>Application Continuity can mask database outages for both planned and unplanned events.</p>
                     <p>Following planned and unplanned outages, <a href="glossary.html#GUID-4B0E85EB-DD77-4EEA-A9F8-A8868142B3A8"><span class="xrefglossterm">Application Continuity</span></a> attempts to mask the outage by rebuilding the database session, and resubmitting the in-flight work following recoverable errors that make the database session unavailable. When Application Continuity is configured, an end-user request is replayed if it did not complete provided that replay was enabled when the outage occurs and replay starts within configurable limits (the <code class="codeph">replay_init_time</code> attribute of the service). When a component fails or becomes unresponsive, Application Continuity attempts to restore the database sessions to the time of the instance failure. When replay succeeds, this feature masks applications from transient outages (such as session failure, instance or node outages, network failures and so on) and from planned outages such as repairs, configuration changes and patching the software.
                     </p>
                     <p>For planned database server outages, the connection pool stops dispensing connections from the instance scheduled for maintenance. New connection requests are routed to the surviving instances where the service is available. On receipt of the Fast Application Notification (FAN) event by the Oracle connection pool or Oracle JDBC driver, idle connections to the down service are removed, and no further connections to that instance are allowed.</p>
                  </div>
                  <div>
                     <p><strong>Topics:</strong></p>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-D0BEE14C-BC1D-4532-9965-2543447862C9">Preparing to Use Application Continuity</a><br>Before you can use Application Continuity, you must complete various checks.
                        </li>
                     </ul>
                  </div>
                  <a id="TDPRC640"></a><div class="props_rev_3"><a id="GUID-D0BEE14C-BC1D-4532-9965-2543447862C9" name="GUID-D0BEE14C-BC1D-4532-9965-2543447862C9"></a><h5 id="TDPRC-GUID-D0BEE14C-BC1D-4532-9965-2543447862C9" class="sect5"><span class="enumeration_section">8.1.6.1 </span>Preparing to Use Application Continuity
                     </h5>
                     <div>
                        <p>Before you can use Application Continuity, you must complete various checks.</p>
                        <div class="section">
                           <p>Application Continuity works on the assumption that the applications are well written in terms of connection usage: borrowing connections and returning them to the connection pool instead of pinning connections. </p>
                           <p>Before you can use Application Continuity, you must configure attributes for the <a href="glossary.html#GUID-494C3882-0525-4F50-AF11-A2F0582F788D"><span class="xrefglossterm">database services</span></a> used by the applications. The beginning and end <a href="glossary.html#GUID-2ABCD22C-2E58-4E00-A03F-805AD513CCFF"><span class="xrefglossterm">request boundary</span></a> needs to be added if one of the integrated pools (UCP, WLS data source) is not being used. You may also need to mark request boundaries if not returning connections to the Oracle Connection Pool and a property is not available to unpin.
                           </p>
                           <p>To use Application Continuity with an Oracle RAC database, use the following configuration checklist:</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3">Service Configuration Checks</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Create a database service (also referred to as an <span class="italic">application service</span>) to connect to the database. Do not use the Oracle SID, instance name, or the default database service to connect to an Oracle RAC or Oracle Data Guard database.
                                 </p>
                              </li>
                              <li>
                                 <p>For the service, set <code class="codeph">failovertype</code> to <code class="codeph">TRANSACTION</code>, <code class="codeph">commit_outcome</code> to <code class="codeph">TRUE</code> and <code class="codeph">notification</code> to <code class="codeph">TRUE</code>. Optionally, to find the best connections to use, set <code class="codeph">rlb_goa</code> to <code class="codeph">SERVICE_TIME</code> and <code class="codeph">clb_gloal</code> to <code class="codeph">SHORT</code>. See <span class="q">"<a href="managing-workloads-using-database-services.html#GUID-59430519-270F-4C9A-921D-03BC611B5CFE" title="SRVCTL is a command-line interface that you can use to create services and administer Oracle Database objects that Oracle Clusterware manages. For functionality that is not available with Oracle Enterprise Manager Database Express, you can use SRVCTL commands instead.">Creating Services Using SRVCTL</a>"</span>.
                                 </p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3">Software Configuration Checks (Database and Middle-tier)</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Use Oracle Database 12<span class="italic">c </span>Release 1 (12.1) or later.
                                 </p>
                              </li>
                              <li>
                                 <p>Use any of the following:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>ODP.NET, Unmanaged Driver</p>
                                    </li>
                                    <li>
                                       <p>OCI Session Pool </p>
                                    </li>
                                    <li>
                                       <p>Universal Connection Pool</p>
                                    </li>
                                    <li>
                                       <p>WebLogic Server</p>
                                    </li>
                                    <li>
                                       <p>JDBC Thin Oracle replay driver</p>
                                    </li>
                                    <li>
                                       <p>Oracle Tuxedo</p>
                                    </li>
                                    <li>
                                       <p>SQL*Plus</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p>	If a statement cache at the application server level is enabled (for example, the WebLogic or third-party application server statement cache), then this <span class="italic">must</span> be disabled when the replay is used. Instead, configure the JDBC statement cache, which supports Application Continuity. The JDBC statement cache also performs better because it is optimized for JDBC and Oracle. Use <code class="codeph">oracle.jdbc.implicitstatementcachesize=</code><span class="italic"><code class="codeph">nnn</code></span>.
                                 </p>
                              </li>
                              <li>
                                 <p>Use FAN and FCF for WebLogic Active GridLink Data Source, Universal Connection Pool, ODP.NET Connection Pool or OCI driver or, as an option, use JDBC 12.2 driver that contains FAN for third-party Java containers and applications.</p>
                              </li>
                              <li>
                                 <p>Check the resource requirements; ensure there is sufficient CPU and memory at the middle tier.</p>
                                 <p>Application Continuity is managed on the server-side. On the client side, additional CPU costs are incurred for garbage collection. The replay driver requires more memory than the base driver because the calls are retained until the end of a <a href="glossary.html#GUID-8C955EDC-2782-4530-B995-18F054C11FEA"><span class="xrefglossterm">request</span></a>. At the end of the request, the calls are released to the garbage collector. This action differs from the base driver that releases closed calls.
                                 </p>
                                 <div class="infoboxnote" id="GUID-D0BEE14C-BC1D-4532-9965-2543447862C9__GUID-060C0EA1-2128-467D-9180-75DD561CEDD7">
                                    <p class="notep1">Note:</p>
                                    <p>CPU overhead is reduced on the database side for platforms with current Intel and SPARC chips where validation is assisted by the hardware.</p>
                                 </div>
                              </li>
                              <li>
                                 <p>Determine whether the application uses <span class="bold"><a href="glossary.html#GUID-9112E6BC-D60A-43BC-878B-F59A01D5D13B"><span class="xrefglossterm">mutables</span></a></span>, or sequential data that might be different on a different instance. If so, then you configure the application to keep the original values for <code class="codeph">SYSDATE</code>, <code class="codeph">SYSTIMESTAMP</code>, <code class="codeph">SYS_GUID</code>, and sequences during failover. 
                                 </p>
                                 <p>See <a href="../sqlrf/GRANT.html#SQLRF01603"><span><cite>Oracle Database SQL Language Reference</cite></span></a> for information on issuing the <code class="codeph">GRANT</code> privilege to users for <code class="codeph">KEEP</code> <code class="codeph">[DATE TIME|SYSGUID|</code><span class="italic"><code class="codeph">Sequence</code></span><code class="codeph">]</code>.
                                 </p>
                              </li>
                              <li>
                                 <p>Grant <code class="codeph">EXECUTE</code> on the <code class="codeph">DBMS_APP_CONT</code> PL/SQL package to the users that will use Application Continuity.
                                 </p>
                              </li>
                              <li>
                                 <p>After consulting the application certification, assign the <code class="codeph">GRANT</code> privilege for keeping mutables to the users that will use replay.
                                 </p>
                              </li>
                              <li>
                                 <p>Check with the application developers to determine if any requests should not be replayed. The application must explicitly call an API to disable replay for those requests. Instead of modifying the application you can instead use a connection to a service that is not enabled for Application Continuity for this request.</p>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3">Application Code Checks (consult with the application developer)</p>
                           <p>Application Continuity masks outages with few or no application changes when you use the Oracle integrated stack. The Application Continuity for OCI solution is embedded in SQL*Plus, OCI Session Pool, Oracle Tuxedo, Oracle WebLogic Active GridLink, ODP.NET, Unmanaged Driver, and is also available with the OCI driver. Applications must be tested to ensure that they are suitable for replay before releasing with Application Continuity.</p>
                           <p>For information about ensuring automatic application continuity for an application, refer to <a href="../racad/ensuring-application-continuity.html#RACAD-GUID-815F5DF2-6B6E-4E5B-922D-6FCAA4A0AD81"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a>.
                           </p>
                           <div class="infoboxnotealso" id="GUID-D0BEE14C-BC1D-4532-9965-2543447862C9__GUID-5B7312E2-201B-4EC6-A91F-3F0999E2B73B">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="../racad/ensuring-application-continuity.html#RACAD-GUID-91427DA2-2C5F-46E9-93D4-B5FF6427A69B"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a> for more information on how Application Continuity works, and how you can use it in applications
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../cncpt/introduction-to-oracle-database.html#CNCPT966"><span><cite>Oracle Database Concepts</cite></span></a> for more information about transactions
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../jjdbc/application-continuity.html#JJDBC29059"><span><cite>Oracle Database JDBC Developer’s Guide</cite></span></a> for more information about Application Continuity for Java applications
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-8F41DEAB-CE18-48E5-B57A-A4B4FA908217" title="You can create a service using Oracle Enterprise Manager or the SRVCTL utility.">Creating Services</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><a href="../odpnt/InstallODP.html#ODPNT151"><span><cite>Oracle Data Provider for .NET Developer's Guide for Microsoft Windows</cite></span></a> for information about installing the ODP.NET Unmanaged Drivers
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../lnoci/oci-programming-advanced-topics.html#LNOCI16617"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a> for information about OCI Session Pooling
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="../sqpug/starting-SQL-Plus.html#SQPUG-GUID-41344314-43A7-4391-AABF-6A98EA98BEDF"><span><cite>SQL*Plus User's Guide and Reference</cite></span></a></p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=JDBCA-GUID-A378A444-CC09-4FE4-A527-790AC389C782"><span class="italic">Administering JDBC Data Sources for Oracle WebLogic Server</span></a> for information about using Active GridLink data sources
                                    </p>
                                 </li>
                                 <li>
                                    <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=JDBCA478"><span class="italic">Administering JDBC Data Sources for Oracle WebLogic Server</span></a> for information about configuring Oracle WebLogic Server to use Application Continuity
                                    </p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div><a id="TDPRC297"></a><div class="props_rev_3"><a id="GUID-B49734B3-028E-4FA5-A0DB-046E8122DB75" name="GUID-B49734B3-028E-4FA5-A0DB-046E8122DB75"></a><h4 id="TDPRC-GUID-B49734B3-028E-4FA5-A0DB-046E8122DB75" class="sect4"><span class="enumeration_section">8.1.7 </span>About the Load Balancing Advisory
                  </h4>
                  <div>
                     <p>The Load Balancing Advisory provides information to applications or clients about the current service levels that the Oracle RAC database instances are providing. </p>
                     <p>Applications can take advantage of the load balancing Fast Application Notification (FAN) events to direct work requests to the instance in the cluster that provides the best performance based on the workload management directives that you have defined for that service. Also, when an instance is restarted, Oracle RAC uses FAN events to notify the application's connection pool so that the connection pool can create connections to the recently started instance and take advantage of the additional resources that this instance provides.</p>
                     <p>The load balancing advisory is integrated with the Automatic Workload Repository built into Oracle Database 12<span class="italic">c</span>. The Automatic Workload Repository measures response time and CPU consumption for each service. 
                     </p>
                     <p>The advice given by the Load Balancing Advisory takes into account the power of the server and the current workload of the service on the server. Enabling the Load Balancing Advisory helps improve the throughput of applications by not sending work to instances that are overworked, running slowly, not responding, or have failed.</p>
                     <p>Your application can take advantage of the Load Balancing Advisory without any programmatic changes if you use an integrated Oracle client, one that has the Run-time Connection Load Balancing feature. Due to the integration with FAN, Oracle integrated clients are more aware of the current status of an Oracle cluster. This prevents client connections from waiting or trying to connect to an instance that is no longer available. The integrated clients for FAN events include the Universal Connection Pool (UCP) used by Oracle Database 12<span class="italic">c</span> JDBC, Oracle Database 12<span class="italic">c</span> ODP.NET, and Oracle Database 12<span class="italic">c</span> Oracle Call Interface (OCI).
                     </p>
                     <p>You configure your Oracle RAC environment to use the Load Balancing Advisory by defining service-level goals for each service used. Defining a service-level goal enables the Load Balancing Advisory for that service and enables the publication of FAN load balancing events. There are two types of service-level goals for Run-time Connection Load Balancing:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Service Time. The Load Balancing Advisory attempts to direct work requests to instances according to their response time. Load Balancing Advisory data is based on the elapsed time for work done by connections using the service, and the available bandwidth to the service. This goal is best suited for workloads that require varying lengths of time to complete, for example, an internet shopping system.</p>
                        </li>
                        <li>
                           <p>Throughput. The Load Balancing Advisory measures the percentage of the total response time that the CPU consumes for the service. This measures the efficiency of an instance, rather than the response time. This goal is best suited for workloads where each work request completes in a similar amount of time, for example, a trading system.</p>
                        </li>
                     </ul>
                     <p>If you do not select the Enable Load Balancing Advisory option, then the service-level goal is set to None, which disables load balancing for that service.</p>
                     <div class="infoboxnotealso" id="GUID-B49734B3-028E-4FA5-A0DB-046E8122DB75__GUID-2F288BA3-37F7-4880-B728-99E73583D057">
                        <p class="notep1">See Also:</p>
                        <p></p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-C32436A0-3706-4E15-96FA-BB7F92007E55" title="Fast Application Notification (FAN) is a high availability notification mechanism that Oracle RAC uses to notify other processes about cluster configuration and service-level information, including status changes such as UP or DOWN events.">About Fast Application Notification (FAN)</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-47706B7C-0CD3-4334-9436-98FD1C8C60B9" title="There are three central elements to consider when automating failover for application clients.">Configuring Clients for High Availability</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-A59315AA-8EBE-43CC-9FFF-95A4522908BA" title="You can create and administer services using Enterprise Manager. You can also use the SRVCTL utility to perform most service management tasks.">Administering Services</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-05437C05-720F-477A-9533-EEB78357F784" title="You can deploy Oracle RAC environments to achieve continuous service in many different ways.">About Continuous Service Availability with Database Services</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../racad/workload-management-with-dynamic-database-services.html#RACAD7134"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for more information about integrated Oracle clients
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TDPRC298"></a><div class="props_rev_3"><a id="GUID-15212171-34EF-4E27-883B-78D2A3842F7D" name="GUID-15212171-34EF-4E27-883B-78D2A3842F7D"></a><h4 id="TDPRC-GUID-15212171-34EF-4E27-883B-78D2A3842F7D" class="sect4"><span class="enumeration_section">8.1.8 </span>About Connection Load Balancing
                  </h4>
                  <div>
                     <p>Oracle Net connection load balancing spreads user connections across all the instances that support the service used to connect to the database.</p>
                     <p>Oracle Net is a software component that resides on the client and on the Oracle database server. It establishes and maintains the connection between the client application and the server, and exchanges messages between them using industry standard protocols. For the client application and a database to communicate, the client application must specify location details for the database it wants to connect to, and the database must provide some sort of identification or address.</p>
                     <p>On the database server, the Oracle Net Listener, commonly known as the listener, is a process that listens for client connection requests. The configuration file for the listener is the <code class="codeph">listener.ora</code>.
                     </p>
                     <p>Oracle Database 12<span class="italic">c</span> database clients use <a href="glossary.html#GUID-6236DFEE-5B13-4BEC-9587-17CFD3B594D4"><span class="xrefglossterm">SCAN</span></a> to connect to the database. SCAN can resolve to multiple IP addresses, reflecting multiple listeners in the cluster handling public client connections. Oracle recommends against using the easy connect method with SCAN as it provides no high availability support. Instead, applications should use an Oracle Net connect descriptor with the following format: 
                     </p><pre class="pre codeblock"><code>(DESCRIPTION =
 &nbsp;&nbsp;&nbsp;&nbsp; (CONNECT_TIMEOUT=90) (RETRY_COUNT=20)(RETRY_DELAY=3) (TRANSPORT_CONNECT_TIMEOUT=3)
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (ADDRESS_LIST =
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(LOAD_BALANCE=on)
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ADDRESS = (PROTOCOL = TCP)(HOST=<span class="variable">primary-scan</span>)(PORT=1521))
 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(CONNECT_DATA=(SERVICE_NAME = <span class="variable">service_name</span>))))</code></pre><p><span class="italic">SCAN</span> represents the SCAN for your cluster. If you do not specify a port number, then the default value of 1521 is used for the TCP port identifier. The <span class="italic">service_name</span> is the name of a database service.
                     </p>
                     <p>You can also use Net Configuration Assistant (NETCA) to create a <span class="bold"><a href="glossary.html#GUID-E0C6C8F3-3459-4BBF-9438-55E68247B173"><span class="xrefglossterm">net service name</span></a></span>. The net service name resolves to the <a href="glossary.html#GUID-F383954D-EF5A-4DA9-8AA5-7840AFC49251"><span class="xrefglossterm">connect descriptor</span></a>. The address portion of the connect descriptor is actually the protocol address of the <a href="glossary.html#GUID-B6C6FFD7-EA46-4EB9-BA1D-87D89FA3A94A"><span class="xrefglossterm">listener</span></a>. The client uses a connect descriptor to specify the database or instance to which the client wants to connect. 
                     </p>
                     <p>When a net service name is used, establishing a connection to a database instance takes place by first mapping the net service name to the connect descriptor. This mapped information is stored in one or more repositories of information that are accessed using naming methods. The most commonly used naming method is Local Naming, where the net service names and their connect descriptors are stored in a localized configuration file named <code class="codeph">tnsnames.ora</code>.
                     </p>
                     <p>When the client connects to the cluster database using a service, you can use the Oracle Net connection load balancing feature to spread user connections across all the instances that are supporting that service. There are two types of load balancing that you can implement: client-side and server-side load balancing. In an Oracle RAC database, client connections should use both types of connection load balancing. When you create an Oracle RAC database using Oracle Database Configuration Assistant (DBCA), DBCA configures and enables server-side load balancing by default.</p>
                  </div>
                  <div>
                     <p><strong>Topics:</strong></p>
                     <ul class="ullinks">
                        <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-F3299C01-53C1-4035-9107-B34085C63E49">About Client-Side Load Balancing</a><br>Client-side load balancing balances the connection requests across the listeners.
                        </li>
                        <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-6EC8C849-AF66-4878-8B40-23DC1C51D05F">About Server-Side Load Balancing</a><br>With server-side load balancing, the listener directs a connection request to the best instance currently providing the service by using information from the Load Balancing Advisory. 
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-15212171-34EF-4E27-883B-78D2A3842F7D__GUID-531D058C-BF06-44BE-8D20-110624EB397B">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-05437C05-720F-477A-9533-EEB78357F784" title="You can deploy Oracle RAC environments to achieve continuous service in many different ways.">About Continuous Service Availability with Database Services</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-5179D010-2D9A-4339-8C3B-C0B71D6F8ABA" title="By configuring and using a SCAN for your cluster, you no longer have to modify the network setup on each client. Using the lsnrctl utility you can verify that the new service is recognized by Oracle Net and available to the database clients.">Verifying Oracle Net Supports Newly Created Services</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../admqs/configuring-the-network-environment.html#ADMQS041"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about network configurations
                              </p>
                           </li>
                           <li>
                              <p><a href="../admqs/configuring-the-network-environment.html#ADMQS12313"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about client connections
                              </p>
                           </li>
                           <li>
                              <p><a href="../admqs/configuring-the-network-environment.html#ADMQS042"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about the tools you can use for configuring the network
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <a id="TDPRC299"></a><div class="props_rev_3"><a id="GUID-F3299C01-53C1-4035-9107-B34085C63E49" name="GUID-F3299C01-53C1-4035-9107-B34085C63E49"></a><h5 id="TDPRC-GUID-F3299C01-53C1-4035-9107-B34085C63E49" class="sect5"><span class="enumeration_section">8.1.8.1 </span>About Client-Side Load Balancing
                     </h5>
                     <div>
                        <p>Client-side load balancing balances the connection requests across the listeners.</p>
                        <p>When the listener receives the connection request, the listener connects the user to an instance that the listener knows provides the requested service.</p>
                        <p>Client-side load balancing is defined in your client connection definition by setting the parameter <code class="codeph">LOAD_BALANCE=yes</code> in the <code class="codeph">tnsnames.ora</code> file. When you set this parameter to <code class="codeph">yes</code>, the Oracle client randomly selects an address from the address list, and connects to that node's listener. This balances client connections across the available listeners in the cluster. 
                        </p>
                        <p>When you create an Oracle RAC database using DBCA, the assistant creates a sample load balancing connection definition in the <code class="codeph">tnsnames.ora</code> file.
                        </p>
                        <p>Client-side load balancing includes connection failover. With connection failover, if an error is returned from the chosen address, then Oracle Net Services tries the next address in the address list until either a successful connection is made or it has exhausted all the addresses in the list.</p>
                        <div class="infoboxnotealso" id="GUID-F3299C01-53C1-4035-9107-B34085C63E49__GUID-DB0522F5-141F-4546-80B3-8B80ACBB64BC">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-15212171-34EF-4E27-883B-78D2A3842F7D" title="Oracle Net connection load balancing spreads user connections across all the instances that support the service used to connect to the database.">About Connection Load Balancing</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-B49734B3-028E-4FA5-A0DB-046E8122DB75" title="The Load Balancing Advisory provides information to applications or clients about the current service levels that the Oracle RAC database instances are providing.">About the Load Balancing Advisory</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../admqs/configuring-the-network-environment.html#ADMQS041"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about network configurations
                                 </p>
                              </li>
                              <li>
                                 <p><a href="../admqs/configuring-the-network-environment.html#ADMQS12313"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about client connections
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=ADMQS042"><span class="italic">Oracle Database 2 Day DBA</span></a> for more information about the tools you can use for configuring the network
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div><a id="TDPRC300"></a><div class="props_rev_3"><a id="GUID-6EC8C849-AF66-4878-8B40-23DC1C51D05F" name="GUID-6EC8C849-AF66-4878-8B40-23DC1C51D05F"></a><h5 id="TDPRC-GUID-6EC8C849-AF66-4878-8B40-23DC1C51D05F" class="sect5"><span class="enumeration_section">8.1.8.2 </span>About Server-Side Load Balancing
                     </h5>
                     <div>
                        <p>With server-side load balancing, the listener directs a connection request to the best instance currently providing the service by using information from the Load Balancing Advisory. </p>
                        <p>For each service, you can define the method the listener uses for load balancing by setting the connection load balancing goal. You can use a goal of either long or short for connection load balancing. These goals have the following characteristics:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Short—When the connection load balancing goal is set to <code class="codeph">SHORT</code>, the connections are distributed based on response time or throughput depending on which Run-time Connection Load Balancing goal is set. Use the Short connection load balancing goal for applications that have connections of brief duration. 
                              </p>
                           </li>
                           <li>
                              <p>Long—Connections are distributed across instances based on the number of sessions in each instance, for each instance that supports the service. Use the Long connection load balancing goal for applications that have connections of long duration. This is typical for connection pools and SQL*Forms sessions. Long is the default connection load balancing goal.</p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-6EC8C849-AF66-4878-8B40-23DC1C51D05F__GUID-B1161F97-1D8D-41FC-B70A-EBD97CA07883">
                           <p class="notep1">Note:</p>
                           <p>If you did not use DBCA to create your database, or if you are using listener ports other than the default of 1521, then you must configure the <code class="codeph">LOCAL_LISTENER</code> and <code class="codeph">REMOTE_LISTENER</code> database initialization parameters for your cluster database to point to <span class="italic"><code class="codeph">SCAN:port</code></span>.
                           </p>
                        </div>
                        <div class="infoboxnotealso" id="GUID-6EC8C849-AF66-4878-8B40-23DC1C51D05F__GUID-21F59695-EF4B-4E83-938B-485AE9208001">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-15212171-34EF-4E27-883B-78D2A3842F7D" title="Oracle Net connection load balancing spreads user connections across all the instances that support the service used to connect to the database.">About Connection Load Balancing</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-B49734B3-028E-4FA5-A0DB-046E8122DB75" title="The Load Balancing Advisory provides information to applications or clients about the current service levels that the Oracle RAC database instances are providing.">About the Load Balancing Advisory</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                  </div>
               </div><a id="TDPRC302"></a><a id="TDPRC301"></a><div class="props_rev_3"><a id="GUID-15C02742-9B15-4EEB-985C-A656E310F3D7" name="GUID-15C02742-9B15-4EEB-985C-A656E310F3D7"></a><h4 id="TDPRC-GUID-15C02742-9B15-4EEB-985C-A656E310F3D7" class="sect4"><span class="enumeration_section">8.1.9 </span>About Run-time Connection Load Balancing
                  </h4>
                  <div>
                     <p>Run-time Connection Load Balancing is a feature of Oracle connection pools that can distribute client work requests across the instances in an Oracle RAC database based on the Load Balancing Advisory information.</p>
                     <p>The connection allocation is based on the current performance level provided by the database instances as indicated by the Load Balancing Advisory FAN events. This provides load balancing at the transaction level, instead of load balancing at the time of the initial database connection.</p>
                     <p>With Run-time Connection Load Balancing, applications use Load Balancing Advisory information to provide better performance to users. OCI Session pools and ODP.NET connection pools support Run-time Connection Load Balancing. For Java applications, Oracle recommends the Universal Connection Pool (UCP). The Universal Connection Pool is integrated to take advantage of Load Balancing Advisory information. UCP, introduced in Oracle Database 11<span class="italic">g</span> patch set 1 (11.1.0.7), can be used against Oracle Database 10<span class="italic">g</span>, Oracle Database 11<span class="italic">g</span>, or Oracle Database 12<span class="italic">c</span>.
                     </p>
                     <p>You must enable the client data source for Run-time Connection Load Balancing with a service that has the following configuration:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The Load Balancing Advisory is enabled and the service-level goal is set to <code class="codeph">SERVICE_TIME</code>, <code class="codeph">THROUGHPUT</code> , or <code class="codeph">NONE</code>.
                           </p>
                        </li>
                        <li>
                           <p>The service connection load balancing goal is set to Short.</p>
                        </li>
                     </ul>
                     <p>The illustration in the steps below illustrates Run-time Connection Load Balancing. In this illustration, the Oracle RAC database has three instances. Suppose that the Load Balancing Advisory indicates that Instance1 and Instance3 have the best performance, while Instance2 currently has less than optimal performance. When Run-time Connection Load Balancing is enabled for the Universal Connection Pool, the following process occurs:</p>
                     <ol>
                        <li>
                           <p>A client requests a connection from the connection pool.</p>
                        </li>
                        <li>
                           <p>Run-time Connection Load Balancing selects the connection that belongs to the most efficient (best) instance from the connection pool. In the illustration in the next step, there are three possible nodes to which the connection can be routed. Instance1, which has the least amount of CPU workload, is currently being assigned about 60 percent of the incoming connections. Instance2, which is currently overloaded, is only being assigned around 10 percent of the incoming connections. Instance3, which has a high workload, is being assigned around 30 percent of the incoming connections. The best instance to handle the connection request in this case would be Instance1.</p>
                        </li>
                        <li>
                           <p>The client receives the connection that would process the work request with the best response time.</p>
                        </li>
                     </ol>
                     <div class="figure" id="GUID-15C02742-9B15-4EEB-985C-A656E310F3D7__GUID-047A38B1-5B4D-42C8-84CA-20401C0F8C0A">
                        <p class="titleinfigure">Figure 8-1 Run-time Connection Load Balancing</p><img src="img/tdprc003.gif" alt="Description of Figure 8-1 follows" title="Description of Figure 8-1 follows" longdesc="img_text/tdprc003.html"><br><a href="img_text/tdprc003.html">Description of "Figure 8-1 Run-time Connection Load Balancing"</a></div>
                     <!-- class="figure" -->
                     <p>Starting with Oracle Database 11<span class="italic">g</span> you can use an additional flag in the load balancing advisory event called <strong class="term">affinity hint</strong>. The affinity hint is a flag that indicates if affinity is a benefit for a particular instance and service combination. Different instances offering the same service can have different settings for the affinity hint. 
                     </p>
                     <p>The affinity hint is automatic when the load balancing advisory is turned on through setting the goal on the service. This flag is for temporary affinity that lasts for the duration of a web session. Web conversations often connect and disconnect many times during the entire session. During each of these connects, it may access the same or similar data, for example, a shopping cart, Siebel, and so on. Affinity can improve buffer cache efficiency, which lowers CPU usage and transaction latency.</p>
                     <p>Applications using Oracle Database 12<span class="italic">c</span> and UCP can take advantage of this new affinity feature. If the affinity flag is turned on in the Load Balancing Advisory event, then UCP creates an Affinity Context for the web session such that when that session does a get connection from the pool, the pool always tries to give it a connection to the instance it connected to the first time it acquired a session. The choice of instance for the first connection is based on the current load balancing advisory information.
                     </p>
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="managing-workloads-using-database-services.html#GUID-15212171-34EF-4E27-883B-78D2A3842F7D" title="Oracle Net connection load balancing spreads user connections across all the instances that support the service used to connect to the database.">About Connection Load Balancing</a></li>
                           <li><a href="managing-workloads-using-database-services.html#GUID-B49734B3-028E-4FA5-A0DB-046E8122DB75" title="The Load Balancing Advisory provides information to applications or clients about the current service levels that the Oracle RAC database instances are providing.">About the Load Balancing Advisory</a></li>
                           <li><a href="managing-workloads-using-database-services.html#GUID-3D8A5870-E734-48CF-8DA7-338523BE69EE" title="FAN callouts are server-side executable files that Oracle RAC runs immediately when high availability events occur.">About FAN Callouts</a></li>
                        </ul>
                     </div>
                  </div>
               </div>
            </div><a id="TDPRC303"></a><div class="props_rev_3"><a id="GUID-8F41DEAB-CE18-48E5-B57A-A4B4FA908217" name="GUID-8F41DEAB-CE18-48E5-B57A-A4B4FA908217"></a><h3 id="TDPRC-GUID-8F41DEAB-CE18-48E5-B57A-A4B4FA908217" class="sect3"><span class="enumeration_section">8.2 </span>Creating Services
               </h3>
               <div>
                  <p>You can create a service using Oracle Enterprise Manager or the SRVCTL utility.</p>
                  <div class="infoboxnote" id="GUID-8F41DEAB-CE18-48E5-B57A-A4B4FA908217__GUID-2334FF94-0829-4168-B201-20B969A02465">
                     <p class="notep1">Note:</p>The <code class="codeph">DBMS_SERVICE</code> package will create the database structures necessary to offer a service, but none of the Oracle Clusterware functionality is configured, such as service placement, failure characteristics and so on.
                  </div>
                  <p>To manage workloads, you can define <a href="glossary.html#GUID-494C3882-0525-4F50-AF11-A2F0582F788D"><span class="xrefglossterm">database services</span></a> that you assign to a particular application or to a subset of an application's operations. You can also use services to manage the workload for different types of work. 
                  </p>
               </div>
               <div>
                  <p><strong>Topics:</strong></p>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-51A2449B-4142-438A-8BC8-A446211DA85F">Creating Services Using Enterprise Manager</a><br>You can use either Oracle Enterprise Manager Cloud Control or Oracle Enterprise Manager Database Express to create services.
                     </li>
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-59430519-270F-4C9A-921D-03BC611B5CFE">Creating Services Using SRVCTL</a><br>SRVCTL is a command-line interface that you can use to create services and administer Oracle Database objects that Oracle Clusterware manages. For functionality that is not available with Oracle Enterprise Manager Database Express, you can use SRVCTL commands instead. 
                     </li>
                  </ul>
               </div>
               <a id="TDPRC304"></a><a id="TDPRC631"></a><div class="props_rev_3"><a id="GUID-51A2449B-4142-438A-8BC8-A446211DA85F" name="GUID-51A2449B-4142-438A-8BC8-A446211DA85F"></a><h4 id="TDPRC-GUID-51A2449B-4142-438A-8BC8-A446211DA85F" class="sect4"><span class="enumeration_section">8.2.1 </span>Creating Services Using Enterprise Manager
                  </h4>
                  <div>
                     <p>You can use either Oracle Enterprise Manager Cloud Control or Oracle Enterprise Manager Database Express to create services.</p>
                     <div class="section">
                        <p class="subhead3">To create a service using Enterprise Manager:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>In Oracle Enterprise Manager, go to the Cluster Database Home page.</span><div>
                              <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=ADMQS033"><span class="italic">Oracle Database 2 Day DBA</span></a> for details on logging in to Oracle Enterprise Manager.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>From the <span class="bold">Availability</span> menu, select <span class="bold">Cluster Managed Database Services</span>. Enter or confirm the credentials for the Oracle RAC database and host operating system and click <span class="bold">Continue</span>.</span><div>
                              <p>The Cluster Managed Database Services page appears.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Click <span class="bold">Create Service</span>.</span><div>
                              <p>The Create Service page appears.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Enter the name of your service in the Service Name field, for example, <code class="codeph">DEVUSERS</code>. </span></li>
                        <li class="stepexpand"><span>Select <span class="bold">Start Service after creation</span> if you want the service to be started after it is created. Select <span class="bold">Update local naming parameter (tnsnames.ora) file</span> if you want Oracle Enterprise Manager Cloud Control to add the new service to the local Oracle Net Services <code class="codeph">tnsnames.ora</code> file.</span><div>
                              <div class="figure" id="GUID-51A2449B-4142-438A-8BC8-A446211DA85F__GUID-B676C8FB-9897-448F-B04C-86BFF3C89A37">
                                 <p class="titleinfigure">Figure 8-2 Create Service Page of Oracle Enterprise Manager</p><img src="img/cc12_create_service_01.gif" alt="Description of Figure 8-2 follows" title="Description of Figure 8-2 follows" longdesc="img_text/cc12_create_service_01.html"><br><a href="img_text/cc12_create_service_01.html">Description of "Figure 8-2 Create Service Page of Oracle Enterprise Manager"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>(Policy-managed databases only) For the service type, select <span class="bold">UNIFORM</span> or SINGLETON.</span><div>
                              <div class="figure" id="GUID-51A2449B-4142-438A-8BC8-A446211DA85F__GUID-AA1A0006-DA8B-43A5-8237-B29CD9DDD21F">
                                 <p class="titleinfigure">Figure 8-3 High Availability Configuration Section on the Create Service Page</p><img src="img/cc12_create_service_02.gif" alt="Description of Figure 8-3 follows" title="Description of Figure 8-3 follows" longdesc="img_text/cc12_create_service_02.html"><br><a href="img_text/cc12_create_service_02.html">Description of "Figure 8-3 High Availability Configuration Section on the Create Service Page"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>(Administrator-managed databases only) For each instance choose whether that instance is a Preferred instance or an Available instance. If you do not want the service to run on an instance under any circumstances, then set the Service Policy for that instance to Not Used.</span><div>
                              <div class="figure" id="GUID-51A2449B-4142-438A-8BC8-A446211DA85F__GUID-1441F27D-372C-46D7-B827-5DEE1AAEFB82"><img src="img/create_service_em13_high_availability.png" alt="Description of create_service_em13_high_availability.png follows" title="Description of create_service_em13_high_availability.png follows" longdesc="img_text/create_service_em13_high_availability.html"><br><a href="img_text/create_service_em13_high_availability.html">Description of the illustration create_service_em13_high_availability.png</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>In the Service Properties section, select <span class="bold">Short</span> for Connection Load Balancing Goal to distribute the connection workload based on elapsed time instead of the overall number of connections. Otherwise, choose <span class="bold">Long</span>. </span></li>
                        <li class="stepexpand"><span>Select <span class="bold">Enable Load Balancing Advisory</span> under the sub-heading Notification Properties to enable the Load Balancing Advisory for this service, as shown in the following screenshot. Choose a service-level goal of either <span class="bold">Service Time</span> or <span class="bold">Throughput</span>.</span><div>
                              <div class="figure" id="GUID-51A2449B-4142-438A-8BC8-A446211DA85F__GUID-2E73220B-9CB4-4A6A-B91E-F336E4BEB2E0">
                                 <p class="titleinfigure">Figure 8-4 Bottom Portion of the Create Service Page</p><img src="img/cc12_create_service_04.gif" alt="Description of Figure 8-4 follows" title="Description of Figure 8-4 follows" longdesc="img_text/cc12_create_service_04.html"><br><a href="img_text/cc12_create_service_04.html">Description of "Figure 8-4 Bottom Portion of the Create Service Page"</a></div>
                              <!-- class="figure" -->
                           </div>
                        </li>
                        <li class="stepexpand"><span>Select <span class="bold">Enable Fast Application Notification</span> under the heading Notification Properties if an Oracle Call Interface (OCI) or ODP.NET application uses this service, and you want to enable FAN.</span></li>
                        <li class="stepexpand"><span>In the Service Threshold Levels section, you can optionally set the service-level thresholds by entering a value in milliseconds for Warning and Critical thresholds for the Elapsed Time and CPU Time metrics.</span></li>
                        <li class="stepexpand"><span>If you want to use a Resource Plan to control the resources used by this service, then select the name of the consumer group from the Consumer Group Mapping list in the Resource Management Properties section. For example, you might choose the <code class="codeph">LOW_GROUP</code> consumer group to give development users low priority to database resources.</span><div>
                              <div class="infoboxnote" id="GUID-51A2449B-4142-438A-8BC8-A446211DA85F__GUID-C475582B-D8A5-438B-8606-576EAF51447D">
                                 <p class="notep1">Note:</p>
                                 <p>You cannot change the consumer group name for a service on the Edit Service page. This is because there may be several consumer groups associated with a given service. However, the Edit Service page contains a link to the Resource Consumer Group Mapping page, where you can modify the consumer group mapping for the service.</p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>If a specific Oracle Scheduler job class uses this service, then you can specify the mapping by selecting the name from the Job Scheduler Mapping list in the Resource Management Properties.</span></li>
                        <li class="stepexpand"><span>Click <span class="bold">OK</span> to create the service.</span></li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-51A2449B-4142-438A-8BC8-A446211DA85F__GUID-7CBA6B17-B7FB-45EE-88F2-27811BA64FB2">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-15212171-34EF-4E27-883B-78D2A3842F7D" title="Oracle Net connection load balancing spreads user connections across all the instances that support the service used to connect to the database.">About Connection Load Balancing</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-B49734B3-028E-4FA5-A0DB-046E8122DB75" title="The Load Balancing Advisory provides information to applications or clients about the current service levels that the Oracle RAC database instances are providing.">About the Load Balancing Advisory</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-C32436A0-3706-4E15-96FA-BB7F92007E55" title="Fast Application Notification (FAN) is a high availability notification mechanism that Oracle RAC uses to notify other processes about cluster configuration and service-level information, including status changes such as UP or DOWN events.">About Fast Application Notification (FAN)</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-A59315AA-8EBE-43CC-9FFF-95A4522908BA" title="You can create and administer services using Enterprise Manager. You can also use the SRVCTL utility to perform most service management tasks.">Administering Services</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="../admin/oracle-scheduler-concepts.html#ADMIN033"><span class="italic">Oracle Database Administrator's Guide</span></a> for more information about the Oracle Scheduler
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPRC633"></a><a id="TDPRC632"></a><div class="props_rev_3"><a id="GUID-59430519-270F-4C9A-921D-03BC611B5CFE" name="GUID-59430519-270F-4C9A-921D-03BC611B5CFE"></a><h4 id="TDPRC-GUID-59430519-270F-4C9A-921D-03BC611B5CFE" class="sect4"><span class="enumeration_section">8.2.2 </span>Creating Services Using SRVCTL
                  </h4>
                  <div>
                     <div><span>SRVCTL is a command-line interface that you can use to create services and administer Oracle Database objects that Oracle Clusterware manages. For functionality that is not available with Oracle Enterprise Manager Database Express, you can use SRVCTL commands instead. </span>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=RACAD005"><span class="italic">Oracle Real Application Clusters Administration and Deployment Guide</span></a> for information about how to use the SRVCTL utility.
                     </div>
                     <div class="section">
                        <p class="subhead3">To configure services for Application Continuity or Transaction Guard using SRVCTL:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>To configure services for Application Continuity, you must set the service attributes <code class="codeph">failovertype</code> to <code class="codeph">TRANSACTION</code>, <code class="codeph">commit_outcome</code> to <code class="codeph">TRUE</code>, and <code class="codeph">notification</code> to <code class="codeph">TRUE</code>. Additionally, you can set values for these other service attributes for Application Continuity and load balancing:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">replay_init_time</code>: Specifies the time in seconds after which replay will not be started; example settings are 60, 300, or 600 seconds; the recommended value is 900 seconds.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">retention</code>: Specifies the time (in seconds) that the commit outcome is retained for Transaction Guard. Recommended value is 86400 (24 hours).
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">failoverretry</code>: Number of connection retries for each replay attempt; recommended value is 30.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">failoverdelay</code>: Delay in seconds between connection retries; recommended value is 10.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">clbgoal</code>: For connection load balancing, use <code class="codeph">SHORT</code> when using run-time load balancing.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">rlbgoal</code>: Set to <code class="codeph">SERVICE_TIME</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">session_state</code>: For Application Continuity support for application requests with more than one database transaction; recommended value is <code class="codeph">DYNAMIC</code>.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">drain_timeout</code>: The number of seconds allowed for resource draining to be completed. Permitted values are <span class="q">""</span>, 0, or any positive integer. The default value is an empty string, which means that this option is not set. If it is zero, then draining occurs immediately.
                                    </p>
                                 </li>
                              </ul>
                              <p>To use SRVCTL to modify the service attributes, use a command similar to the  following, where <code class="codeph"><span class="variable">racdb</span></code> is the name of your Oracle RAC database, and <code class="codeph"><span class="variable">app1</span></code> is the name of the service you are modifying:
                              </p><pre class="oac_no_warn" dir="ltr">srvctl modify service -db <span class="variable">racdb</span> -service <span class="variable">app1</span> -clbgoal SHORT 
-rlbgoal SERVICE_TIME -failoverretry 30 -failoverdelay 10 
-failovertype TRANSACTION -replay_init_time 1800 -retention 86400 
-notification TRUE commit_outcome TRUE
</pre></div>
                        </li>
                        <li class="stepexpand"><span>To create a service for Application Continuity for a policy-managed Oracle RAC database, use a command similar to the following, where <code class="codeph"><span class="variable">racdb</span></code> is the name of your Oracle RAC database, <code class="codeph"><span class="variable">app2</span></code> is the name of the service you are modifying, and <code class="codeph"><span class="variable">Svrpool1</span></code> is the name of the server pool in which the service is offered:</span><div><pre class="pre codeblock"><code>srvctl create service -db <span class="variable">racdb</span> -service <span class="variable">app2</span> -serverpool ora.<span class="variable">Srvpool1</span>
-clbgoal SHORT -rlbgoal SERVICE_TIME -failoverretry 30
-failoverdelay 10 -failovertype TRANSACTION -replay_init_time 1800 
-retention 86400 -notification TRUE -commit_outcome TRUE
</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div><a id="TDPRC307"></a><div class="props_rev_3"><a id="GUID-A59315AA-8EBE-43CC-9FFF-95A4522908BA" name="GUID-A59315AA-8EBE-43CC-9FFF-95A4522908BA"></a><h3 id="TDPRC-GUID-A59315AA-8EBE-43CC-9FFF-95A4522908BA" class="sect3"><span class="enumeration_section">8.3 </span>Administering Services
               </h3>
               <div>
                  <p>You can create and administer services using Enterprise Manager. You can also use the SRVCTL utility to perform most service management tasks.</p>
               </div>
               <div>
                  <p><strong>Topics:</strong></p>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-68C8A269-BDB6-4FFC-A5CF-3FDDB84143BC">About Service Administration Using Enterprise Manager</a><br>The Cluster Managed Database Services page is the master page for beginning all tasks related to services. 
                     </li>
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-31B667D0-5780-42C9-9588-7F768C22E5CE">Using the Cluster Managed Database Services Page</a><br>When managing services using Enterprise Manager, you use the Cluster Managed Database Services page.
                     </li>
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-5179D010-2D9A-4339-8C3B-C0B71D6F8ABA">Verifying Oracle Net Supports Newly Created Services</a><br>By configuring and using a SCAN for your cluster, you no longer have to modify the network setup on each client. Using the <code class="codeph">lsnrctl</code> utility you can verify that the new service is recognized by Oracle Net and available to the database clients.
                     </li>
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-B3322500-4A2A-40F4-BD20-12157A5E2FEA">Managing Groups of Services</a><br>Using SRVCTL, you can manage groups of services with a single command.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-A59315AA-8EBE-43CC-9FFF-95A4522908BA__GUID-FEA02A0A-C05B-41BB-BE84-8733BDF1D95B">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-6D2CEE13-1EEA-486E-A29A-0E69D7D762A7" title="Services divide workloads into mutually disjoint groupings. Each service represents a workload with common attributes, service-level thresholds, and priorities.">About Oracle Database Services</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-8F41DEAB-CE18-48E5-B57A-A4B4FA908217" title="You can create a service using Oracle Enterprise Manager or the SRVCTL utility.">Creating Services</a>"</span></p>
                        </li>
                     </ul>
                  </div>
               </div>
               <a id="TDPRC308"></a><div class="props_rev_3"><a id="GUID-68C8A269-BDB6-4FFC-A5CF-3FDDB84143BC" name="GUID-68C8A269-BDB6-4FFC-A5CF-3FDDB84143BC"></a><h4 id="TDPRC-GUID-68C8A269-BDB6-4FFC-A5CF-3FDDB84143BC" class="sect4"><span class="enumeration_section">8.3.1 </span>About Service Administration Using Enterprise Manager
                  </h4>
                  <div>
                     <p>The Cluster Managed Database Services page is the master page for beginning all tasks related to services. </p>
                     <p>To access this page, go to the Cluster Database Maintenance page, then click <span class="bold">Cluster Managed Database Services</span> in the Services section. You can use this page and links from this page to do the following:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>View a list of services for the cluster.</p>
                        </li>
                        <li>
                           <p>View the instances on which each service is currently running.</p>
                        </li>
                        <li>
                           <p>View the status for each service.</p>
                        </li>
                        <li>
                           <p>Create or edit a service.</p>
                        </li>
                        <li>
                           <p>Start or stop a service.</p>
                        </li>
                        <li>
                           <p>Enable or disable a service.</p>
                        </li>
                        <li>
                           <p>Perform instance-level tasks for a service.</p>
                        </li>
                        <li>
                           <p>Delete a service.</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-68C8A269-BDB6-4FFC-A5CF-3FDDB84143BC__GUID-DA75B9FB-9DA7-4A35-8E52-4F1C1E96E68A">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-6D2CEE13-1EEA-486E-A29A-0E69D7D762A7" title="Services divide workloads into mutually disjoint groupings. Each service represents a workload with common attributes, service-level thresholds, and priorities.">About Oracle Database Services</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-8F41DEAB-CE18-48E5-B57A-A4B4FA908217" title="You can create a service using Oracle Enterprise Manager or the SRVCTL utility.">Creating Services</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
               </div><a id="TDPRC310"></a><a id="TDPRC309"></a><div class="props_rev_3"><a id="GUID-31B667D0-5780-42C9-9588-7F768C22E5CE" name="GUID-31B667D0-5780-42C9-9588-7F768C22E5CE"></a><h4 id="TDPRC-GUID-31B667D0-5780-42C9-9588-7F768C22E5CE" class="sect4"><span class="enumeration_section">8.3.2 </span>Using the Cluster Managed Database Services Page
                  </h4>
                  <div>
                     <p>When managing services using Enterprise Manager, you use the Cluster Managed Database Services page.</p>
                     <div class="section">
                        <p class="subhead3">To access the Cluster Managed Database Services page:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>In Oracle Enterprise Manager, go to the Cluster Database Home page.</span><div>
                              <p>See <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=ADMQS033"><span><cite>Oracle Database 2 Day DBA</cite></span></a> for details on logging in to Oracle Enterprise Manager.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>From the <span class="bold">Availability</span> menu, select <span class="bold">Cluster Managed Database Services</span>. Enter or confirm the credentials for the Oracle RAC database and host operating system and click <span class="bold">Continue</span>.</span><div>
                              <p>The Cluster Managed Database Services page appears and displays the services that are available on the cluster database instances.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Perform any of the following tasks using this page:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>View a list of services for the cluster, the instances on which each service is currently running, the status of each service, the server pool associated with the service, the responsiveness of the service, and any alerts or messages for that service.</p>
                                 </li>
                                 <li>
                                    <p>Start or stop a service.</p>
                                 </li>
                                 <li>
                                    <p>Test the connection for a service, or display the Oracle Net TNS strings being used.</p>
                                 </li>
                                 <li>
                                    <p>Access the Create Service page.</p>
                                 </li>
                                 <li>
                                    <p>Edit, delete, enable, or disable a service.</p>
                                 </li>
                                 <li>
                                    <p>Access the Edit Server Pool page for the server pool associate with each service.</p>
                                 </li>
                              </ul>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-31B667D0-5780-42C9-9588-7F768C22E5CE__GUID-EFB83C0C-73AE-47BA-BF39-DD1273EC856A">
                           <p class="notep1">See Also:</p>
                           <p></p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-68C8A269-BDB6-4FFC-A5CF-3FDDB84143BC" title="The Cluster Managed Database Services page is the master page for beginning all tasks related to services.">About Service Administration Using Enterprise Manager</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-6D2CEE13-1EEA-486E-A29A-0E69D7D762A7" title="Services divide workloads into mutually disjoint groupings. Each service represents a workload with common attributes, service-level thresholds, and priorities.">About Oracle Database Services</a>"</span></p>
                              </li>
                              <li>
                                 <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-8F41DEAB-CE18-48E5-B57A-A4B4FA908217" title="You can create a service using Oracle Enterprise Manager or the SRVCTL utility.">Creating Services</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="TDPRC306"></a><a id="TDPRC305"></a><div class="props_rev_3"><a id="GUID-5179D010-2D9A-4339-8C3B-C0B71D6F8ABA" name="GUID-5179D010-2D9A-4339-8C3B-C0B71D6F8ABA"></a><h4 id="TDPRC-GUID-5179D010-2D9A-4339-8C3B-C0B71D6F8ABA" class="sect4"><span class="enumeration_section">8.3.3 </span>Verifying Oracle Net Supports Newly Created Services
                  </h4>
                  <div>
                     <p>By configuring and using a SCAN for your cluster, you no longer have to modify the network setup on each client. Using the <code class="codeph">lsnrctl</code> utility you can verify that the new service is recognized by Oracle Net and available to the database clients.
                     </p>
                     <div class="section">
                        <div class="infoboxnote" id="GUID-5179D010-2D9A-4339-8C3B-C0B71D6F8ABA__GUID-6535EE9B-1F8C-4797-B734-27C557001184">
                           <p class="notep1">Note:</p>
                           <p>When using utilities to manage your cluster, databases, database instances, Oracle Automatic Storage Management (Oracle ASM), and listeners, use the appropriate binary that is in the home directory of the object or component you are managing. Also, set your <code class="codeph">ORACLE_HOME</code> environment variable to point to this directory. 
                           </p>
                           <p>For example, to use <code class="codeph">lsnrctl</code> to manage the SCAN listener, use the binaries located in the Grid home (where the listener is running), and set the <code class="codeph">ORACLE_HOME</code> environment variable to the location of the Grid home.
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To verify Oracle Net Services supports the newly created service:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Determine if the listener on the local node recognizes the new service by using the following command:</span><div><pre class="pre codeblock"><code><kbd class="userinput">lsnrctl status LISTENER_SCAN1</kbd>
</code></pre></div>
                           <div>You should see a list for the new service, similar to the following:<pre class="pre codeblock"><code><samp class="sysout">Services Summary...
Service "DEVUSERS.example.com" has 2 instance(s).
  Instance "sales1", status READY, has 1 handler(s) for this service...
  Instance "sales2", status READY, has 1 handler(s) for this service...
</samp></code></pre><p>The displayed name for your newly created service, for example <code class="codeph">DEVUSERS.example.com</code>, is the service name you use in your connection strings.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>(Optional) Use a text editor to modify the <code class="codeph">tnsnames.ora</code> file in the <code class="codeph"><span class="codeinlineitalic">Oracle_home</span>/network/admin</code> directory on each node that contains an instance listed as a Preferred or Available instance for the service, and on each client that uses the service to connect to the database. Add an entry similar to the following, specifying the VIP address for each node:</span><div><pre class="oac_no_warn" dir="ltr">DEVUSERS = 
  (DESCRIPTION = 
    (ADDRESS_LIST = 
      (ADDRESS = (PROTOCOL = TCP)(HOST = docrac1-vip)(PORT = 1521))
      (ADDRESS = (PROTOCOL = TCP)(HOST = docrac2-vip)(PORT = 1521))
    (LOAD_BALANCE = yes)
    )
  (CONNECT_DATA = (SERVICE_NAME = DEVUSERS.oracle.com))
   )
</pre></div>
                           <div>
                              <p>In the previous example, the <code class="codeph">ADDRESS_LIST</code> parameter contains one <code class="codeph">ADDRESS</code> for each node that contains an instance configured as either Preferred or Available for the service.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Test the Oracle Net Services configuration by attempting to connect to the Oracle RAC database using SQL*Plus and the SCAN. </span><div>The connect identifier for easy connect naming has the following format:<pre class="oac_no_warn" dir="ltr">"[//]<span class="variable">SCAN</span>[:<span class="variable">port</span>]/<span class="variable">service_name</span>"
</pre><p><span class="variable">SCAN</span> is the SCAN for your cluster, which defaults to <span class="variable">cluster_name</span>.<span class="variable">GNS_sub_domain</span>. The <span class="variable">service_name</span> is the name of the database service you want to use for connecting to the database. You can optionally specify the TCP port number on which the Oracle SCAN listener listens for connections.
                              </p>
                           </div>
                           <div>
                              <p>For example, you might use the following commands to connect to the DEVUSERS service for Oracle RAC database in the <code class="codeph">docrac</code> cluster, which belongs to the <code class="codeph">example.com</code> domain:
                              </p><pre class="oac_no_warn" dir="ltr">$ sqlplus system@\"docrac.example.com/DEVUSERS.example.com\"
Enter password: <span class="variable">password</span>
</pre></div>
                           <div>
                              <p>After you enter the password, you should see a message indicating you are successfully connected to the Oracle RAC database. If you get an error message, then examine the connect identifier and verify the user name, password, and service name were typed in correctly and all the information is correct for your Oracle RAC environment. </p>
                           </div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-5179D010-2D9A-4339-8C3B-C0B71D6F8ABA__GUID-623F618E-D58A-4315-A18C-C3D79EF8945E">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-15212171-34EF-4E27-883B-78D2A3842F7D" title="Oracle Net connection load balancing spreads user connections across all the instances that support the service used to connect to the database.">About Connection Load Balancing</a>"</span></p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=ADMQS043"><span><cite>Oracle Database 2 Day DBA</cite></span></a> for details on how to view the listener configuration
                                 </p>
                              </li>
                              <li>
                                 <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=ADMQS045"><span><cite>Oracle Database 2 Day DBA</cite></span></a> for details on how to connect to an Oracle database from a client computer
                                 </p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-B3322500-4A2A-40F4-BD20-12157A5E2FEA" name="GUID-B3322500-4A2A-40F4-BD20-12157A5E2FEA"></a><h4 id="TDPRC-GUID-B3322500-4A2A-40F4-BD20-12157A5E2FEA" class="sect4"><span class="enumeration_section">8.3.4 </span>Managing Groups of Services
                  </h4>
                  <div>
                     <p>Using SRVCTL, you can manage groups of services with a single command.</p>
                     <div class="section">
                        <p>Many enterprises run a large number of services, whether it be many services offered by a single database or instance, or many databases offering a few services running on the same node. You no longer need to run SRVCTL commands for each individual service but need only specify the node name, database name, pluggable database (PDB) name, or the instance name for all affected services.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-B3322500-4A2A-40F4-BD20-12157A5E2FEA__GUID-66239B1D-FC81-42C3-A78E-6E2A79AFD6DF">
                        <p class="titleinexample">Example 8-1 Starting All Services on a Node</p>
                        <p>To start all services running on a given node, use a command similar to the following:</p><pre class="pre codeblock"><code>srvctl start service &#x2013;node racnode01 </code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B3322500-4A2A-40F4-BD20-12157A5E2FEA__GUID-210BB031-A4EB-48D0-9F70-B93886A3D50F">
                        <p class="titleinexample">Example 8-2 Starting All Services for a Database</p>
                        <p>To start all services supported by a database, use a command similar to the following:</p><pre class="pre codeblock"><code>srvctl start service &#x2013;db racdb  </code></pre><p>To start all services for a database instance, use a command similar to the following:</p><pre class="pre codeblock"><code>srvctl start service &#x2013;db racdb &#x2013;inst racdb1  </code></pre><p>To start all services for a pluggable database, use a command similar to the following:</p><pre class="pre codeblock"><code>srvctl start service &#x2013;db racdb -pdb pdb_region1</code></pre></div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B3322500-4A2A-40F4-BD20-12157A5E2FEA__GUID-714FB548-9DAA-4756-9741-AAC8943F755A">
                        <p class="titleinexample">Example 8-3 Stopping All Services on a Node</p>
                        <p>To stop all services running on the specified node, giving connections 60 seconds to migrate to a surviving instance before being disconnected, use a command similar to the following:</p><pre class="pre codeblock"><code>srvctl stop service &#x2013;node racnode01 -drain_timeout 60 -stopoption IMMEDIATE</code></pre><p>This command stops all services running on <code class="codeph">racnode01</code>, allowing a drain interval of 60 seconds. After 60 seconds any remaining sessions will be stopped using the IMMEDIATE option. The 60 second drain timeout setting overrides any attribute setting on a given service.
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B3322500-4A2A-40F4-BD20-12157A5E2FEA__GUID-371B92D5-634E-4A58-875A-FF465115839D">
                        <p class="titleinexample">Example 8-4 Stopping All Services for a Database</p>
                        <p>To stop all services supported by a database and any of its PDBs, use a command similar to the following:</p><pre class="pre codeblock"><code>srvctl stop service &#x2013;db racdb &#x2013;drain_timeout 15 &#x2013;stopoption IMMEDIATE</code></pre><p>This command stops all services for the <code class="codeph">racdb</code> database, allowing a drain interval of 15 seconds. After 15 seconds any remaining sessions will be stopped using the IMMEDIATE option. The 15 second drain timeout setting overrides any attribute setting on a given service.
                        </p>
                        <p>To stop all services for a database instance, use a command similar to the following:</p><pre class="pre codeblock"><code>srvctl stop service &#x2013;db racdb &#x2013;inst racdb1 &#x2013;drain_timeout 15 &#x2013;stopoption IMMEDIATE</code></pre><p>This command stops all services for the <code class="codeph">racdb1</code> database instance, allowing a drain interval of 15 seconds. After 15 seconds any remaining sessions will be stopped using the IMMEDIATE option. The 15 second drain timeout setting overrides any attribute setting on a given service.
                        </p>
                        <p>To stop all services for a pluggable database, use a command similar to the following:</p><pre class="pre codeblock"><code>srvctl stop service &#x2013;db racdb &#x2013;pdb pdb_region1 &#x2013;drain_timeout 15 &#x2013;stopoption TRANSACTIONAL</code></pre><p>This command stops all services for the <code class="codeph">pdb_region1</code> pluggable database, allowing a drain interval of 15 seconds. After 15 seconds any remaining sessions will be stopped using the TRANSACTIONAL option. The 15 second drain timeout setting overrides any attribute setting on a given service.
                        </p>
                        <p>You can also specify a list of services to stop for a specific database. For example, to stop only some of the services offered by a PDB, use a command similar to the following:</p><pre class="pre codeblock"><code>srvctl stop service &#x2013;db racdb &#x2013;pdb pdb_region1 &#x2013;service “crm_service, hr_service, batch_service” &#x2013;drain_timeout 60 &#x2013;stopoption IMMEDIATE</code></pre><p>In the previous command, <code class="codeph">crm_service</code>, <code class="codeph">hr_service</code>, and <code class="codeph">batch_service</code> are all the names of services.
                        </p>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B3322500-4A2A-40F4-BD20-12157A5E2FEA__GUID-02AF0748-54FB-4310-A151-6608C8EE5ECF">
                        <p class="titleinexample">Example 8-5 Stopping All Database Instances on a Node</p>
                        <p>To stop all databases or database instances on a node, use a command similar to the following:</p><pre class="pre codeblock"><code>srvctl stop database -node racnode01 -drain_timeout 60 &#x2013;stopoption IMMEDIATE -failover &#x2013;force </code></pre><p>When <code class="codeph">-failover</code> is specified, then the following actions occur:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>All services are relocated, if possible, respecting the <code class="codeph">&#x2013;drain_timeout</code> and <code class="codeph">&#x2013;stopoption</code> attributes.
                              </p>
                           </li>
                           <li>
                              <p>Any services that cannot be failed over are stopped, using an action that corresponds with the value specified for <code class="codeph">&#x2013;stopoption</code> .
                              </p>
                           </li>
                           <li>
                              <p>Services are stopped so no further sessions are accepted for the instances being shut down.</p>
                           </li>
                           <li>
                              <p>After a period of time specified by <code class="codeph">&#x2013;drain_timeout</code>, or after all sessions using the targeted services have disconnected, the instances are shut down.
                              </p>
                           </li>
                           <li>
                              <p>The instances are stopped using the method specified by <code class="codeph">&#x2013;stopoption</code>.
                              </p>
                           </li>
                        </ul>
                        <p>If <code class="codeph">&#x2013;force</code> is specified, then the following actions occur:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The remaining services are stopped respecting the <code class="codeph">&#x2013;drain_timeout</code> and <code class="codeph">&#x2013;stopoption</code> values.
                              </p>
                           </li>
                           <li>
                              <p>Services are stopped so no further sessions are accepted for the instances being shut down.</p>
                           </li>
                           <li>
                              <p>After a period of time specified by <code class="codeph">&#x2013;drain_timeout</code>, or after all sessions using the targeted services have disconnected, the instances are shut down.
                              </p>
                           </li>
                           <li>
                              <p>The instances are stopped using the ABORT option.</p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="example" -->
                     <div class="example" id="GUID-B3322500-4A2A-40F4-BD20-12157A5E2FEA__GUID-72809BC3-D95C-400D-8941-6CA2162E647A">
                        <p class="titleinexample">Example 8-6 Relocating a Group of Services</p>
                        <p>You can use the <code class="codeph">srvctl relocate service</code> command to relocate a group of services to a target destination, which can be an instance, a node, a database, or a pluggable database. For example:
                        </p><pre class="pre codeblock"><code>srvctl relocate service &#x2013;database racdb &#x2013;oldinst racdb01 &#x2013;newinst racdb02
  -drain_timeout 30 -force</code></pre><p>In the preceding command example, all services are relocated from the database instance <code class="codeph">racdb01</code> to the database instance <code class="codeph">racdb02</code>. The services relocate only if the target can support that service, as defined by the service configuration. Any services that cannot be relocated remain at the original location.
                        </p>
                     </div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div><a id="TDPRC641"></a><div class="props_rev_3"><a id="GUID-4E3BE2EB-4E80-49BD-8BD8-DA9858203F6E" name="GUID-4E3BE2EB-4E80-49BD-8BD8-DA9858203F6E"></a><h3 id="TDPRC-GUID-4E3BE2EB-4E80-49BD-8BD8-DA9858203F6E" class="sect3"><span class="enumeration_section">8.4 </span>Managing Planned Maintenance Without User Interruption
               </h3>
               <div>
                  <p>Using a combination of features, you can stop database services or instances with little to no impact to connected sessions.</p>
                  <p>You may have to stop database instances for many reasons, such as upgrading the Oracle software, patching, and replacing hardware. The steps in this topic result in the least impact to users and does not interrupt running applications.</p>
                  <p>You can assign services to one or more instances in an administrator-managed Oracle RAC database or to server pools in a policy-managed Oracle RAC database. If Oracle RAC detects an outage, then Oracle Clusterware isolates the failed component and recovers the dependent components. For services, if the failed component is an instance, then Oracle Clusterware attempts to maintain the current levels of service availability (cardinality of the service). If the service definition allows for failover and that is necessary to maintain cardinality, then failover occurs.</p>
                  <p>For planned maintenance, the recommended approach is to drain database connections over a controlled time period from fast application notification (FAN)-enabled Oracle connection pools. The service attributes <code class="codeph">-drain_timeout</code> and <code class="codeph">-stopoption</code> control the drain time period, and also define how to handle sessions that have not completed their work within the specified time period. Requests that complete their work and then check back in to the pool or close their connection, can be directed to a new location that is not affected by the planned maintenance.
                  </p>
                  <p>Both <code class="codeph">-drain_timeout</code> and <code class="codeph">-stopoption</code> are service attributes that can be defined when creating or modifying the service. The advantage of setting the attributes on the service is that they are set once and then used for all future SRVCTL planned maintenance operations. You can also specify these attributes on the SRVCTL command line to override the current settings.
                  </p>
                  <p>Using any FAN-aware pool with FAN configured (Oracle Call Interface (OCI), Universal Connection Pool (UCP), Database Resident Connection Pooling (DRCP), WebLogic Server, or Oracle Data Provider for .NET), the steps to manage planned maintenance without user interruption are as follows:</p>
                  <ol>
                     <li>
                        <p>Use the SRVCTL <code class="codeph">relocate</code> command to relocate the service from the instance being shut down without disrupting the sessions, or if a uniform service is being used, then stop the service on this instance. If the parameter <code class="codeph">&#x2013;stopoption</code> is used on the SRVCTL command line, then <code class="codeph">-force</code> must be used when either <code class="codeph">srvctl stop service</code> or <code class="codeph">srvctl relocate service</code> is used. For example:
                        </p><pre class="pre codeblock"><code>srvctl relocate service &#x2013;database racdb &#x2013;service myservice &#x2013;drain_timeout 60
  &#x2013;stopoption IMMEDIATE &#x2013;oldinst racdb1 -force</code></pre></li>
                     <li>
                        <p>The stop of the service (through issuing either <code class="codeph">srvctl relocate service</code> or <code class="codeph">srvctl stop service</code>) causes the FAN DOWN event to be sent. FAN-aware pools then clear idle sessions immediately and mark active sessions to be released at the next check-in. The pool waits an amount of time equal to the value of <code class="codeph">drain_timeout</code> in seconds for the check-in to occur. If <code class="codeph">drain_timeout</code> is set to zero or NULL, then there is no delay for draining and the service is stopped immediately with the method specified by <code class="codeph">-stopoption</code>.
                        </p>
                        <p>The draining interval can be set for a given service, through the service attribute <code class="codeph">drain_timeout</code> or on the SRVCTL command line via <code class="codeph">&#x2013;drain_timeout</code>.
                        </p>
                        <p>Existing connections on other instances remain usable, and new connections can be opened to these instances if required.</p>
                     </li>
                     <li>
                        <p>Applications should close all sessions, but in reality this does not always happen. It is best practice to set a time interval (<code class="codeph">-drain_timeout</code>) during which work can complete. When the draining time out interval has elapsed, the services are stopped
                        </p>
                     </li>
                     <li>
                        <p>You can now stop the database instance without disconnecting user sessions.</p>
                     </li>
                     <li>
                        <p>After performing the maintenance operations, restart the instance and services. Run-time load balancing, if enabled, balances the sessions back to use the restored instance. A FAN <code class="codeph">UP</code> event for the service invokes moving the services back to the preferred instances gradually when using a FAN-aware client.
                        </p>
                     </li>
                  </ol>
               </div>
            </div><a id="TDPRC311"></a><div class="props_rev_3"><a id="GUID-47706B7C-0CD3-4334-9436-98FD1C8C60B9" name="GUID-47706B7C-0CD3-4334-9436-98FD1C8C60B9"></a><h3 id="TDPRC-GUID-47706B7C-0CD3-4334-9436-98FD1C8C60B9" class="sect3"><span class="enumeration_section">8.5 </span>Configuring Clients for High Availability
               </h3>
               <div>
                  <p>There are three central elements to consider when automating failover for application clients.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>First, clients that are connected at the time of failure must be quickly and automatically notified that a failure has occurred to avoid waiting for TCP/IP network time-outs before attempting to connect to the new database instance (such time-outs range anywhere from eight minutes to two hours, depending on operating system). Oracle RAC configurations use Fast Application Notification (FAN) to notify JDBC clients, OCI clients, and ODP.NET clients. FAN event notifications and callouts enable automatic and fast redirection of clients after a site failure.</p>
                     </li>
                     <li>
                        <p>The second central element of client failover, is the redirection of new incoming requests to the new instance after a failure has occurred, which can be implemented using application services. When you create and activate application services on several instances of an Oracle RAC database, then if the service becomes unavailable on one instance, clients connections are redirected to other instances where the service is available. Applications need only provide the name of the database service in their connect strings&#x2013;there is no need to specify an instance name because, using listener cross registration, SCAN listeners and other remote listeners in the cluster are aware of which instances are currently providing a service when a connection request comes in.</p>
                     </li>
                     <li>
                        <p>The third central element is masking the outage from the client and the application. Masking outages of the database session is a complex task for application development and, therefore, errors and timeouts are often exposed to the client. Application Continuity attempts to mask outages from applications by replaying incomplete application requests after unplanned and planned outages.</p>
                     </li>
                  </ul>
                  <p>For applications that are unable to take advantage of Application Continuity, two additional features are available: Transparent Application Failover (TAF) for OCI based applications and Transaction Guard. Transaction Guard enables applications to build their own masking of outages by knowing the outcome of the last in-flight transaction.</p>
                  <p>This section deals with configuring high availability for application clients.</p>
               </div>
               <div>
                  <p><strong>Topics:</strong></p>
                  <ul class="ullinks">
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-175B39D9-FD92-4DA3-A98C-88594844EACE">Configuring Oracle Net Services Parameters For Highly Available Connections</a><br>When using services to connect to a database, there are various parameters you can set to configure high availability.
                     </li>
                     <li class="ulchildlink"><a href="managing-workloads-using-database-services.html#GUID-CF240F46-F779-4647-A934-930A61209158">Configuring Application Clients for High Availability</a><br>You can configure Oracle Call Interface (OCI), Java Database Connectivity (JDBC), and Oracle Data Provider for .NET (ODP.NET) clients to be highly available and use Application Continuity and Transaction Guard.
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-47706B7C-0CD3-4334-9436-98FD1C8C60B9__GUID-5F341F08-1570-4F2E-89E9-08386061FE96">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-C32436A0-3706-4E15-96FA-BB7F92007E55" title="Fast Application Notification (FAN) is a high availability notification mechanism that Oracle RAC uses to notify other processes about cluster configuration and service-level information, including status changes such as UP or DOWN events.">About Fast Application Notification (FAN)</a>"</span></p>
                        </li>
                        <li>
                           <p><span class="q">"<a href="managing-workloads-using-database-services.html#GUID-6D2CEE13-1EEA-486E-A29A-0E69D7D762A7" title="Services divide workloads into mutually disjoint groupings. Each service represents a workload with common attributes, service-level thresholds, and priorities.">About Oracle Database Services</a>"</span></p>
                        </li>
                        <li>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=RACAD8277"><span><cite>Oracle Real Application Clusters Administration and Deployment Guide</cite></span></a> for information about client-side connection configuration
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <a id="TDPRC642"></a><div class="props_rev_3"><a id="GUID-175B39D9-FD92-4DA3-A98C-88594844EACE" name="GUID-175B39D9-FD92-4DA3-A98C-88594844EACE"></a><h4 id="TDPRC-GUID-175B39D9-FD92-4DA3-A98C-88594844EACE" class="sect4"><span class="enumeration_section">8.5.1 </span>Configuring Oracle Net Services Parameters For Highly Available Connections
                  </h4>
                  <div>
                     <p>When using services to connect to a database, there are various parameters you can set to configure high availability.</p>
                     <ul>
                        <li class="stepexpand"><span>For applications that need to connect to an Oracle Database, use the following Oracle Net Services parameters to minimize connection wait times:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><code class="codeph">CONNECT_TIMEOUT</code>:  controls the amount of time to wait when attempting to connect to an address
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">RETRY_COUNT</code>: controls the number of times the application attempts to connect to the database
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">RETRY_DELAY</code>: specifies the delay in seconds between subsequent retries for a connection. This parameter works in conjunction with the <code class="codeph">RETRY_COUNT</code> parameter.
                                    </p>
                                 </li>
                                 <li>
                                    <p><code class="codeph">TRANSPORT_CONNECT_TIME</code>: controls the amount of time allowed for a client to establish a TCP connection to the database
                                    </p>
                                 </li>
                              </ul>
                              <p>You can specify these parameters in either the timeout section of the <code class="codeph">tnsnames.ora</code> file or at the <code class="codeph">DESCRIPTION</code> level of a connect string, for example:
                              </p><pre class="pre codeblock"><code><span class="variable">net_service_name</span>=
 (DESCRIPTION= 
  (CONNECT_TIMEOUT=60)(RETRY_COUNT=3)(RETRY_DELAY=2)(TRANSPORT_CONNECT_TIMEOUT=3
  (ADDRESS_LIST=
    (LOAD_BALANCE=ON)
    (ADDRESS=(PROTOCOL=tcp)(HOST=docrac-scan.example.com)(PORT=1521))
    (CONNECT_DATA=
      (SERVICE_NAME=racdb.example.com)))
</code></pre><div class="infoboxnote" id="GUID-175B39D9-FD92-4DA3-A98C-88594844EACE__GUID-534CDE52-ECB3-4655-990F-FA30B386CE09">
                                 <p class="notep1">Note:</p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>The <code class="codeph">CONNECT_TIMEOUT</code> parameter is equivalent to the <code class="codeph">sqlnet.ora</code> parameter <code class="codeph">sqlnet</code>.<code class="codeph">OUTBOUND_CONNECT_TIMEOUT</code> and overrides it.
                                       </p>
                                    </li>
                                    <li>
                                       <p>You should not configure the <code class="codeph">sqlnet.outbound_connection_timeout</code> parameter on the server <code class="codeph">sqlnet.ora</code> file, as this can impact Oracle Clusterware operations.
                                       </p>
                                    </li>
                                    <li>
                                       <p>The <code class="codeph">TRANSPORT_CONNECT_TIMEOUT</code> parameter is equivalent to the <code class="codeph">sqlnet</code>.<code class="codeph">ora</code> parameter <code class="codeph">tcp</code>.<code class="codeph">CONNECT_TIMEOUT</code> and overrides it.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </div>
                        </li>
                     </ul>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-175B39D9-FD92-4DA3-A98C-88594844EACE__GUID-2FB3E477-C6BB-4E27-B51A-6724A95B9DD9">
                           <p class="notep1">See Also:</p>
                           <p><a href="../netrf/local-naming-parameters-in-tnsnames-ora-file.html#NETRF1434"><span class="italic">Oracle Database Net Services Reference</span></a> for more information about the timeout and retry parameters for Oracle Net Services 
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-CF240F46-F779-4647-A934-930A61209158" name="GUID-CF240F46-F779-4647-A934-930A61209158"></a><h4 id="TDPRC-GUID-CF240F46-F779-4647-A934-930A61209158" class="sect4"><span class="enumeration_section">8.5.2 </span>Configuring Application Clients for High Availability
                  </h4>
                  <div>
                     <p>You can configure Oracle Call Interface (OCI), Java Database Connectivity (JDBC), and Oracle Data Provider for .NET (ODP.NET) clients to be highly available and use Application Continuity and Transaction Guard.</p>
                     <div class="section">
                        <p class="subhead3">Configuring JDBC Client for High Availability</p>
                        <p>An application that uses JDBC connections should use a connection pool, so an existing connection can be used in the pool instead of making a new connection to the database every time you access data. The Universal Connection Pool (UCP) is a Java-based connection pool that supports any type of connection (JDBC, LDAP, JCA), to any type of database (Oracle or non-Oracle) with any middle tier (Oracle or non-Oracle). It also supports standalone deployments such as TopLink or BPEL. UCP also supports integration features of Oracle Database such as Fast Connection Failover, Run-time Connection Load Balancing, Web Affinity, Application Continuity, and Transaction Guard with Oracle RAC when using the JDBC Thin driver.</p>
                        <p>For information on configuring JDBC Clients for high availability, refer to the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"Oracle RAC Fast Application Notification"</span> in <a href="../jjdbc/Oracle-RAC-FAN-API.html#JJDBC28934"><span><cite>Oracle Database JDBC Developer’s Guide</cite></span></a> for information about configuring FAN and Oracle Notification System (ONS)
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"About Configuring Oracle JDBC for Application Continuity for Java"</span> in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=JJDBC29073"><span><cite>Oracle Database JDBC Developer’s Guide</cite></span></a> for information about configuring Application Continuity
                              </p>
                           </li>
                           <li>
                              <p><span class="q">"Ensuring Application Continuity"</span> in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=JJUCP8254"><span><cite>Oracle Universal Connection Pool Developer’s Guide</cite></span></a> for information about using Application Continuity with the Universal Connection Pool
                              </p>
                           </li>
                           <li>
                              <p><span class="q">""Transaction Guard for Java"</span> in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=JJDBC29121"><span><cite>Oracle Database JDBC Developer’s Guide</cite></span></a> for information about configuring Transaction Guard
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Configuring OCI Clients for High Availability</p>
                        <p>The Oracle Call Interface (OCI) provides integration with FAN and Load Balancing Advisory events. To take advantage of the Load Balancing Advisory, you must enable the OCI Session pool.</p>
                        <p>For information on configuring OCI Clients for high availability, refer to the following:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"OCI Programming Advanced Topics"</span> in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=LNOCI090"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a> for information about configuring FAN, Transparent Application Failover, and Runtime Connection Load Balancing
                              </p>
                           </li>
                           <li>
                              <p><span class="q">""OCI and Transaction Guard"</span> in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=LNOCI-GUID-A675AF7B-6FF0-460D-A6E6-C15E7C328C8F"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a> for information about configuring Transaction Guard
                              </p>
                           </li>
                           <li>
                              <p><span class="q">""OCI and Application Continuity"</span> in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=LNOCI-GUID-A8DD9422-2F82-42A9-9555-134296416E8F"><span><cite>Oracle Call Interface Programmer's Guide</cite></span></a> for information about configuring Application Continuity
                              </p>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Configuring ODP.NET Clients for High Availability</p>Oracle Data Provider for .NET (ODP.NET) connection pools subscribe to FAN notifications from Oracle RAC that indicate when nodes are down and when services are up or down. Based on these notifications, the ODP.NET connection pool:
                     </div>
                     <!-- class="section" -->
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Interrupts active sessions so they do not wait on TCP/IP timeouts, and</p>
                        </li>
                        <li>
                           <p>Clears idle sessions previously connected to the down node or instance or network so they are not passed to user sessions</p>
                        </li>
                        <li>
                           <p>Creates new connections to healthy nodes, if possible</p>
                        </li>
                     </ul>
                     <p>ODP.NET provides Run-time Connection Load Balancing to provide enhanced load balancing of the application workload. Instead of randomly selecting an available connection from the connection pool, it chooses the connection that can provide the best service based on the current workload information.</p>
                     <p>For information on configuring ODP.NET Clients for high availability, refer to the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="q">"Real Application Clusters and Global Data Services"</span> in <a href="../odpnt/featRAC.html#ODPNT8176"><span><cite>Oracle Data Provider for .NET Developer's Guide for Microsoft Windows</cite></span></a> for information about configuring FAN, Fast Connection Failover and Runtime Connection Load Balancing
                           </p>
                        </li>
                        <li>
                           <p><span class="q">"Using Transaction Guard to Prevent Logical Corruption"</span> in <a href="../odpnt/featTG.html#ODPNT8183"><span><cite>Oracle Data Provider for .NET Developer's Guide for Microsoft Windows</cite></span></a> 
                           </p>
                        </li>
                        <li>
                           <p><span class="q">"GetLogicalTransactionStatus"</span> in <a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/tdprc&amp;id=ODPNT941"><span><cite>Oracle Data Provider for .NET Developer's Guide for Microsoft Windows</cite></span></a> for an example of using Transaction Guard in an ODP.NET application
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>