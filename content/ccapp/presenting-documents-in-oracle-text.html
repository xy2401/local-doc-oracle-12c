<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Presenting Documents in Oracle Text</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Application Developer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Application Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 17.8.1">
      <link rel="alternate" href="text-application-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2017-10-10T16:34:47-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2017">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E85649-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="querying-with-oracle-text.html" title="Previous" type="text/html">
      <link rel="next" href="classifying-documents-in-oracle-text.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">
            {
                "primary":
                {
                    "category":{
                      "short_name":"database",
                      "element_name":"Database",
                      "display_in_url":true
                    },
                    "suite":{
                      "short_name":"oracle",
                      "element_name":"Oracle",
                      "display_in_url":true
                    },
                    "product_group":{
                      "short_name":"not-applicable",
                      "element_name":"Not applicable",
                      "display_in_url":false
                    },
                    "product":{
                      "short_name":"oracle-database",
                      "element_name":"Oracle Database",
                      "display_in_url":true
                    },
                    "release":{
                      "short_name":"12.2",
                      "element_name":"Release 12.2",
                      "display_in_url":true
                    },
                    "platform":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    },
                    "component":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    }
                }
            }
            </script>
      
    <meta name="dcterms.title" content="Text Application Developer's Guide">
    <meta name="dcterms.isVersionOf" content="CCAPP">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="querying-with-oracle-text.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="classifying-documents-in-oracle-text.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Application Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Presenting Documents in Oracle Text</li>
            </ol>
            <a id="GUID-F4081D3C-0057-4C55-A178-D8608704699F" name="GUID-F4081D3C-0057-4C55-A178-D8608704699F"></a><a id="CCAPP0700"></a>
            
            <h2 id="CCAPP-GUID-F4081D3C-0057-4C55-A178-D8608704699F" class="sect2"><span class="enumeration_chapter">5 </span> Presenting Documents in Oracle Text
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>Oracle Text provides various methods for presenting documents in results for query applications. This chapter describes document presentation.</p>
               <p>This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="presenting-documents-in-oracle-text.html#GUID-30DA7E8C-A718-4F17-AFC1-286B208C5E86">Highlighting Query Terms</a></p>
                  </li>
                  <li>
                     <p><a href="presenting-documents-in-oracle-text.html#GUID-CFB27531-DF84-4E28-9D19-BDC148B0F6C5">Obtaining Part-of-Speech Information for a Document</a></p>
                  </li>
                  <li>
                     <p><a href="presenting-documents-in-oracle-text.html#GUID-7E4094C7-2835-400E-B13D-830D39C4C8AD">Obtaining Lists of Themes, Gists, and Theme Summaries</a></p>
                  </li>
                  <li>
                     <p><a href="presenting-documents-in-oracle-text.html#GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A">Document Presentation and Highlighting</a></p>
                  </li>
               </ul>
            </div><a id="CCAPP9192"></a><div class="props_rev_3"><a id="GUID-30DA7E8C-A718-4F17-AFC1-286B208C5E86" name="GUID-30DA7E8C-A718-4F17-AFC1-286B208C5E86"></a><h3 id="CCAPP-GUID-30DA7E8C-A718-4F17-AFC1-286B208C5E86" class="sect3"><span class="enumeration_section">5.1 </span>Highlighting Query Terms
               </h3>
               <div>
                  <p>In Oracle Text query applications, you can present selected documents with query terms highlighted for text queries or with themes highlighted for <code class="codeph">ABOUT</code> queries.
                  </p>
                  <p>You can generate three types of output associated with highlighting: </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>A marked-up version of the document</p>
                     </li>
                     <li>
                        <p>Query offset information for the document</p>
                     </li>
                     <li>
                        <p>A concordance of the document, in which occurrences of the query term are returned with their surrounding text</p>
                     </li>
                  </ul>
                  <p>This section contains the following topics:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="presenting-documents-in-oracle-text.html#GUID-920CB350-7264-4D83-8CC7-4E277F4E3EEA">Text highlighting</a></p>
                     </li>
                     <li>
                        <p><a href="presenting-documents-in-oracle-text.html#GUID-29EA1AE1-6E73-4906-930B-51DEB794D00B">Theme Highlighting</a></p>
                     </li>
                     <li>
                        <p><a href="presenting-documents-in-oracle-text.html#GUID-7095CF02-8B41-4F0E-ADBA-19D3E8D49BF9">CTX_DOC Highlighting Procedures</a></p>
                     </li>
                  </ul>
               </div><a id="CCAPP9193"></a><div class="props_rev_3"><a id="GUID-920CB350-7264-4D83-8CC7-4E277F4E3EEA" name="GUID-920CB350-7264-4D83-8CC7-4E277F4E3EEA"></a><h4 id="CCAPP-GUID-920CB350-7264-4D83-8CC7-4E277F4E3EEA" class="sect4"><span class="enumeration_section">5.1.1 </span>Text highlighting
                  </h4>
                  <div>
                     <p>For text highlighting, you supply the query, and Oracle Text highlights words in the document that satisfy the query. You can obtain plain-text or HTML highlighting.</p>
                  </div>
               </div><a id="CCAPP9194"></a><div class="props_rev_3"><a id="GUID-29EA1AE1-6E73-4906-930B-51DEB794D00B" name="GUID-29EA1AE1-6E73-4906-930B-51DEB794D00B"></a><h4 id="CCAPP-GUID-29EA1AE1-6E73-4906-930B-51DEB794D00B" class="sect4"><span class="enumeration_section">5.1.2 </span>Theme Highlighting
                  </h4>
                  <div>
                     <p>For <code class="codeph">ABOUT</code> queries, the <code class="codeph">CTX_DOC</code> procedures highlight and mark up words or phrases that best represent the <code class="codeph">ABOUT</code> query. 
                     </p>
                  </div>
               </div><a id="CCAPP9195"></a><div class="props_rev_3"><a id="GUID-7095CF02-8B41-4F0E-ADBA-19D3E8D49BF9" name="GUID-7095CF02-8B41-4F0E-ADBA-19D3E8D49BF9"></a><h4 id="CCAPP-GUID-7095CF02-8B41-4F0E-ADBA-19D3E8D49BF9" class="sect4"><span class="enumeration_section">5.1.3 </span>CTX_DOC Highlighting Procedures
                  </h4>
                  <div>
                     <p>These are the highlighting procedures in <code class="codeph">CTX_DOC</code>:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">CTX_DOC.MARKUP</code> and <code class="codeph">CTX_DOC.POLICY_MARKUP</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CTX_DOC.HIGHLIGHT</code> and <code class="codeph">CTX_DOC.POLICY_HIGHLIGHT</code></p>
                        </li>
                        <li>
                           <p><code class="codeph">CTX_DOC.SNIPPET</code> and <code class="codeph">CTX_DOC.POLICY_SNIPPET</code></p>
                        </li>
                     </ul>
                     <p>The <code class="codeph">POLICY</code> and non-<code class="codeph">POLICY</code> versions of the procedures are equivalent, except that the <code class="codeph">POLICY</code> versions do not require an index.
                     </p>
                     <div class="infoboxnote" id="GUID-7095CF02-8B41-4F0E-ADBA-19D3E8D49BF9__GUID-DF207712-80FE-4069-91E5-617A4B52693C">
                        <p class="notep1">Note:</p>
                        <p><code class="codeph">SNIPPET</code> can also be generated using the Result Set Interface.
                        </p>
                     </div>
                     <div class="infoboxnotealso" id="GUID-7095CF02-8B41-4F0E-ADBA-19D3E8D49BF9__GUID-EFFF5C1D-5B73-4772-BAE1-5D35B650B6FE">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccref/CTX_QUERY-package.html#CCREF24104"><span class="italic">Oracle Text Reference</span></a> for information on <code class="codeph">CTX_QUERY.RESULT_SET</code></p>
                     </div>
                     <p>This section contains these topics:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="presenting-documents-in-oracle-text.html#GUID-C1856378-9769-4D5A-8839-5699EC0D6F94">Markup Procedure</a></p>
                        </li>
                        <li>
                           <p><a href="presenting-documents-in-oracle-text.html#GUID-909E8E44-5B0F-4FC2-8685-38DEAA4E0C1D">Highlight Procedure</a></p>
                        </li>
                        <li>
                           <p><a href="presenting-documents-in-oracle-text.html#GUID-EB1024E5-7E65-43D9-9878-A4DF4F324D2B">Concordance</a></p>
                        </li>
                     </ul>
                  </div><a id="CCAPP9687"></a><a id="CCAPP9196"></a><div class="props_rev_3"><a id="GUID-C1856378-9769-4D5A-8839-5699EC0D6F94" name="GUID-C1856378-9769-4D5A-8839-5699EC0D6F94"></a><h5 id="CCAPP-GUID-C1856378-9769-4D5A-8839-5699EC0D6F94" class="sect5"><span class="enumeration_section">5.1.3.1 </span>Markup Procedure
                     </h5>
                     <div>
                        <p>The <code class="codeph">CTX_DOC.MARKUP</code> and <code class="codeph">CTX_DOC.POLICY_MARKUP</code> procedures take a document reference and a query, and return a marked-up version of the document. The output can be either marked-up plaintext or marked-up HTML. For example, you might specify that a marked-up document be returned with the query term surrounded by angle brackets (<span class="italic">&lt;&lt;&lt;tansu&gt;&gt;&gt;</span>) or HTML (<span class="italic">&lt;b&gt;tansu&lt;/b&gt;</span>).
                        </p>
                        <p><code class="codeph">CTX_DOC.MARKUP</code> and <code class="codeph">CTX_DOC.POLICY_MARKUP</code> are equivalent, except that <code class="codeph">CTX_DOC.POLICY_MARKUP</code> does not require an index.
                        </p>
                        <p>You can customize the markup sequence for HTML navigation.</p>
                        <div class="section">
                           <p class="subhead3">CTX_DOC.MARKUP Example</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p>The following example is taken from the Web application described in <a href="CONTEXT-query-application.html#GUID-1F1B44E8-ACCA-446A-84EA-67FA692476BA"> CONTEXT Query Application</a>. The procedure <code class="codeph">showDoc</code> takes an HTML document and a query, creates the highlight markup—in this case, the query term will display in red—and outputs the result to an in-memory buffer. It then uses htp.print to display it in the browser.
                           </p><pre class="oac_no_warn" dir="ltr">procedure showDoc (p_id in varchar2, p_query in varchar2) is

 v_clob_selected   CLOB;
 v_read_amount     integer;
 v_read_offset     integer;
 v_buffer          varchar2(32767);
 v_query           varchar(2000);
 v_cursor          integer;

 begin
   htp.p('&lt;html&gt;&lt;title&gt;HTML version with highlighted terms&lt;/title&gt;');
   htp.p('&lt;body bgcolor="#ffffff"&gt;');
   htp.p('&lt;b&gt;HTML version with highlighted terms&lt;/b&gt;');

   begin
     ctx_doc.markup (index_name =&gt; 'idx_search_table',
                     textkey    =&gt; p_id,
                     text_query =&gt; p_query,
                     restab     =&gt; v_clob_selected,
                     starttag   =&gt; '&lt;i&gt;&lt;font color=red&gt;',
                     endtag     =&gt; '&lt;/font&gt;&lt;/i&gt;');

     v_read_amount := 32767;
     v_read_offset := 1;
     begin
      loop
        dbms_lob.read(v_clob_selected,v_read_amount,v_read_offset,v_buffer);
        htp.print(v_buffer);
        v_read_offset := v_read_offset + v_read_amount;
        v_read_amount := 32767;
      end loop;
     exception
      when no_data_found then
         null;
     end;

     exception
      when others then
        null; --showHTMLdoc(p_id);
   end;
end showDoc;
end;
/
show errors
set define on</pre><div class="infoboxnotealso" id="GUID-C1856378-9769-4D5A-8839-5699EC0D6F94__GUID-E636A4FA-74C5-4A9A-810A-116FA8CBFD67">
                              <p class="notep1">See Also:</p>
                              <p><a href="../ccref/CTX_DOC-package.html#CCREF0710"><span class="italic">Oracle Text Reference</span></a> for more information about <code class="codeph">CTX_DOC.MARKUP</code> and <code class="codeph">CTX_DOC.POLICY_SNIPPET</code></p>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="CCAPP9198"></a><div class="props_rev_3"><a id="GUID-909E8E44-5B0F-4FC2-8685-38DEAA4E0C1D" name="GUID-909E8E44-5B0F-4FC2-8685-38DEAA4E0C1D"></a><h5 id="CCAPP-GUID-909E8E44-5B0F-4FC2-8685-38DEAA4E0C1D" class="sect5"><span class="enumeration_section">5.1.3.2 </span>Highlight Procedure
                     </h5>
                     <div>
                        <p><code class="codeph">CTX_DOC.HIGHLIGHT</code> and <code class="codeph">CTX_DOC.POLICY_HIGHLIGHT</code> take a query and a document and return offset information for the query in either plaintext or HTML formats.  This offset information can be used to write your own custom routines for displaying documents. 
                        </p>
                        <p><code class="codeph">CTX_DOC.HIGHLIGHT</code> and <code class="codeph">CTX_DOC.POLICY_HIGHLIGHT</code> are equivalent, except that <code class="codeph">CTX_DOC.POLICY_HIGHLIGHT</code> does not require an index.
                        </p>
                        <p>With offset information, you can display a highlighted version of document as desired. For example, you can display the document with different font types or colors rather than using the standard plain text markup obtained from <code class="codeph">CTX_DOC.MARKUP</code>.
                        </p>
                        <div class="infoboxnotealso" id="GUID-909E8E44-5B0F-4FC2-8685-38DEAA4E0C1D__GUID-DD4FF4F5-B97F-4113-8969-828420605B9C">
                           <p class="notep1">See Also:</p>
                           <p><a href="../ccref/CTX_DOC-package.html#CCREF0706"><span class="italic">Oracle Text Reference</span></a> for more information about using <code class="codeph">CTX_DOC.HIGHLIGHT</code> and <code class="codeph">CTX_DOC.POLICY_HIGHLIGHT</code></p>
                        </div>
                     </div>
                  </div><a id="CCAPP9199"></a><div class="props_rev_3"><a id="GUID-EB1024E5-7E65-43D9-9878-A4DF4F324D2B" name="GUID-EB1024E5-7E65-43D9-9878-A4DF4F324D2B"></a><h5 id="CCAPP-GUID-EB1024E5-7E65-43D9-9878-A4DF4F324D2B" class="sect5"><span class="enumeration_section">5.1.3.3 </span>Concordance
                     </h5>
                     <div>
                        <p><code class="codeph">CTX_DOC.SNIPPET</code> and <code class="codeph">CTX_DOC.POLICY_SNIPPET</code> produce a <span class="italic">concordance</span> of the document, in which occurrences of the query term are returned with their surrounding text. This result is sometimes known as Key Word in Context, or KWIC, because instead of returning the entire document (with or without the query term highlighted), it returns the query term in text fragments, allowing a user to see it in context. You can control the way the query term is highlighted in the returned fragments. 
                        </p>
                        <p><code class="codeph">CTX_DOC.SNIPPET</code> and <code class="codeph">CTX_DOC.POLICY_SNIPPET</code> are equivalent, except that <code class="codeph">CTX_DOC.POLICY_SNIPPET</code> does not require an index. <code class="codeph">CTX_DOC.POLICY_SNIPPET</code> and <code class="codeph">CTX_DOC.SNIPPET</code> include two new attributes: <code class="codeph">radius</code> and <code class="codeph">max_length</code>. The <code class="codeph">radius</code> attribute specifies the approximate desired length of each segment. Whereas, <code class="codeph">max_length</code> puts an upper bound on the length of the sum of all segments.
                        </p>
                        <div class="infoboxnotealso" id="GUID-EB1024E5-7E65-43D9-9878-A4DF4F324D2B__GUID-83FA341B-6DAD-4F16-9328-E4068AB4A1D1">
                           <p class="notep1">See Also:</p>
                           <p><a href="https://www.oracle.com/pls/topic/lookup?ctx=en/database/oracle/oracle-database/12.2/ccapp&amp;id=CCREF0702"><span class="italic">Oracle Text Reference</span></a> for more information about <code class="codeph">CTX_DOC.SNIPPET</code> and <code class="codeph">CTX_DOC.POLICY_SNIPPET</code></p>
                        </div>
                     </div>
                  </div>
               </div>
            </div><a id="CCAPP9661"></a><div class="props_rev_3"><a id="GUID-CFB27531-DF84-4E28-9D19-BDC148B0F6C5" name="GUID-CFB27531-DF84-4E28-9D19-BDC148B0F6C5"></a><h3 id="CCAPP-GUID-CFB27531-DF84-4E28-9D19-BDC148B0F6C5" class="sect3"><span class="enumeration_section">5.2 </span>Obtaining Part-of-Speech Information for a Document
               </h3>
               <div>
                  <p>The <code class="codeph">CTX_DOC</code> package contains procedures to create policies for obtaining part-of-speech information for a given document. This is described under <code class="codeph">POLICY_NOUN_PHRASES</code> in <a href="../ccref/CTX_DOC-package.html#CCREF99027"><span class="italic">Oracle Text Reference</span></a> and <code class="codeph">POLICY_PART_OF_SPEECH</code> in <a href="../ccref/CTX_DOC-package.html#CCREF99028"><span class="italic">Oracle Text Reference</span></a>.
                  </p>
               </div>
            </div><a id="CCAPP9506"></a><a id="CCAPP9200"></a><div class="props_rev_3"><a id="GUID-7E4094C7-2835-400E-B13D-830D39C4C8AD" name="GUID-7E4094C7-2835-400E-B13D-830D39C4C8AD"></a><h3 id="CCAPP-GUID-7E4094C7-2835-400E-B13D-830D39C4C8AD" class="sect3"><span class="enumeration_section">5.3 </span>Obtaining Lists of Themes, Gists, and Theme Summaries
               </h3>
               <div>
                  <p>The following table describes lists of themes, gists, and theme summaries.</p>
                  <div class="tblformal" id="GUID-7E4094C7-2835-400E-B13D-830D39C4C8AD__GUID-15B3D69D-549C-406A-8374-04018B255DEB">
                     <p class="titleintable">Table 5-1 Lists of Themes, Gists, and Theme Summaries</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Lists of Themes, Gists, and Theme Summaries" summary="This table describes lists of themes, gists, and theme summaries." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="21%" id="d23499e884">Output Type</th>
                              <th align="left" valign="bottom" width="79%" id="d23499e887">Description</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d23499e892" headers="d23499e884 ">
                                 <p>List of Themes<a id="d23499e895" class="indexterm-anchor"></a></p>
                              </td>
                              <td align="left" valign="top" width="79%" headers="d23499e892 d23499e887 ">
                                 <p>A list of the main concepts of a document. </p>
                                 <p>You can generate list of themes where each theme is a single word or phrase or where each theme is a hierarchical list of parent themes.</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d23499e905" headers="d23499e884 ">
                                 <p>Gist<a id="d23499e908" class="indexterm-anchor"></a></p>
                              </td>
                              <td align="left" valign="top" width="79%" headers="d23499e905 d23499e887 ">
                                 <p>Text in a document that best represents what the document is about as a whole. </p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="21%" id="d23499e916" headers="d23499e884 ">
                                 <p>Theme Summary<a id="d23499e919" class="indexterm-anchor"></a></p>
                              </td>
                              <td align="left" valign="top" width="79%" headers="d23499e916 d23499e887 ">
                                 <p>Text in a document that best represents a given theme in the document.</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>To obtain this output, you use procedures in the <code class="codeph">CTX_DOC</code> supplied package. With this package, you can do the following:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>Identify documents by <code class="codeph">ROWID</code> in addition to primary key
                        </p>
                     </li>
                     <li>
                        <p>Store results in-memory for improved performance</p>
                     </li>
                  </ul>
               </div><a id="CCAPP9201"></a><div class="props_rev_3"><a id="GUID-72BF3726-37E0-4AE2-8A24-6D329913FD13" name="GUID-72BF3726-37E0-4AE2-8A24-6D329913FD13"></a><h4 id="CCAPP-GUID-72BF3726-37E0-4AE2-8A24-6D329913FD13" class="sect4"><span class="enumeration_section">5.3.1 </span>Lists of Themes
                  </h4>
                  <div>
                     <p>A list of themes is a list of the main concepts in a document. Use the <code class="codeph">CTX_DOC.THEMES</code> procedure to generate lists of themes.
                     </p>
                     <div class="infoboxnotealso" id="GUID-72BF3726-37E0-4AE2-8A24-6D329913FD13__GUID-7D0F6ABF-96CF-42E9-9F6A-AEFB188F5783">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccref/CTX_DOC-package.html#CCREF0716"><span class="italic">Oracle Text Reference</span></a> to learn more about the command syntax for <code class="codeph">CTX_DOC.THEMES</code></p>
                     </div>
                     <p>The following In-Memory Theme example generates the top 10 themes for document 1 and stores them in an in-memory table called <code class="codeph">the_themes</code>. The example then loops through the table to display the document themes.
                     </p><pre class="oac_no_warn" dir="ltr">declare
 the_themes ctx_doc.theme_tab;

begin
 ctx_doc.themes('myindex','1',the_themes, numthemes=&gt;10);
 for i in 1..the_themes.count loop
  dbms_output.put_line(the_themes(i).theme||':'||the_themes(i).weight);
  end loop;
end;
</pre><p>The following example create a Result Table Theme.</p><pre class="oac_no_warn" dir="ltr">create table ctx_themes (query_id number, 
                         theme varchar2(2000), 
                         weight number);

</pre><p>To<a id="d23499e1027" class="indexterm-anchor"></a> obtain a list of themes where each element in the list is a single theme, enter the following:
                     </p><pre class="oac_no_warn" dir="ltr">begin
ctx_doc.themes('newsindex','34','CTX_THEMES',1,full_themes =&gt; FALSE);
end;
</pre><p>To<a id="d23499e1036" class="indexterm-anchor"></a> obtain a list of themes where each element in the list is a hierarchical list of parent themes, enter the following:
                     </p><pre class="oac_no_warn" dir="ltr">begin
ctx_doc.themes('newsindex','34','CTX_THEMES',1,full_themes =&gt; TRUE);
end;</pre></div>
               </div><a id="CCAPP9206"></a><div class="props_rev_3"><a id="GUID-0A39D418-0955-470B-9CC1-1CD4B054B8F6" name="GUID-0A39D418-0955-470B-9CC1-1CD4B054B8F6"></a><h4 id="CCAPP-GUID-0A39D418-0955-470B-9CC1-1CD4B054B8F6" class="sect4"><span class="enumeration_section">5.3.2 </span>Gist and Theme Summary
                  </h4>
                  <div>
                     <p>A gist is the text of a document that best represents what the document is about as a whole. A theme summary is the text of a document that best represents a single theme in the document.</p>
                     <p>Use the procedure <code class="codeph">CTX_DOC.GIST</code> to generate gists and theme summaries. You can specify the size of the gist or theme summary when you call the procedure. 
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="presenting-documents-in-oracle-text.html#GUID-11CBDEB1-4003-479E-AEEA-8ECE44BBCF63">In-Memory Gist</a></p>
                        </li>
                        <li>
                           <p><a href="presenting-documents-in-oracle-text.html#GUID-352E4941-9F7A-4299-93C5-859AFA6FA383">Result Table Gists</a></p>
                        </li>
                        <li>
                           <p><a href="presenting-documents-in-oracle-text.html#GUID-C9D5DB22-AA2D-448F-876B-2BCCA10EC5C8">Theme Summary</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-0A39D418-0955-470B-9CC1-1CD4B054B8F6__GUID-BDBD8701-7213-47E9-B3E2-1004F6D43F63">
                        <p class="notep1">See Also:</p>
                        <p><a href="../ccref/CTX_DOC-package.html#CCREF0704"><span class="italic">Oracle Text Reference</span></a> to learn about the command syntax for <code class="codeph">CTX_DOC.GIST</code></p>
                     </div>
                  </div><a id="CCAPP9207"></a><div class="props_rev_3"><a id="GUID-11CBDEB1-4003-479E-AEEA-8ECE44BBCF63" name="GUID-11CBDEB1-4003-479E-AEEA-8ECE44BBCF63"></a><h5 id="CCAPP-GUID-11CBDEB1-4003-479E-AEEA-8ECE44BBCF63" class="sect5"><span class="enumeration_section">5.3.2.1 </span>In-Memory Gist
                     </h5>
                     <div>
                        <p>The following example generates a nondefault size generic gist of at most 10 paragraphs. The result is stored in memory in a <code class="codeph">CLOB</code> locator. The code then de-allocates the returned <code class="codeph">CLOB</code> locator after using it.
                        </p><pre class="oac_no_warn" dir="ltr">declare
  gklob clob;
  amt number := 40;
  line varchar2(80);

begin
 ctx_doc.gist('newsindex','34','gklob',1,glevel =&gt; 'P',pov =&gt; 'GENERIC',       numParagraphs =&gt; 10);
  -- gklob is NULL when passed-in, so ctx-doc.gist will allocate a temporary
  -- CLOB for us and place the results there.
  
  dbms_lob.read(gklob, amt, 1, line);
  dbms_output.put_line('FIRST 40 CHARS ARE:'||line);
  -- have to de-allocate the temp lob
  dbms_lob.freetemporary(gklob);
 end;</pre></div>
                  </div><a id="CCAPP9208"></a><div class="props_rev_3"><a id="GUID-352E4941-9F7A-4299-93C5-859AFA6FA383" name="GUID-352E4941-9F7A-4299-93C5-859AFA6FA383"></a><h5 id="CCAPP-GUID-352E4941-9F7A-4299-93C5-859AFA6FA383" class="sect5"><span class="enumeration_section">5.3.2.2 </span>Result Table Gists
                     </h5>
                     <div>
                        <p>To create a gist table:</p><pre class="oac_no_warn" dir="ltr">create table ctx_gist (query_id  number,
                       pov       varchar2(80), 
                       gist      CLOB);
</pre><p>The following example returns a default sized paragraph level gist for document 34: </p><pre class="oac_no_warn" dir="ltr">begin
ctx_doc.gist('newsindex','34','CTX_GIST',1,'PARAGRAPH', pov =&gt;'GENERIC');
end;
</pre><p>The following example generates a nondefault size gist of ten paragraphs:</p><pre class="oac_no_warn" dir="ltr">begin
ctx_doc.gist('newsindex','34','CTX_GIST',1,'PARAGRAPH', pov =&gt;'GENERIC',        numParagraphs =&gt; 10);
end;
</pre><p>The following example generates a gist whose number of paragraphs is ten percent of the total paragraphs in document:</p><pre class="oac_no_warn" dir="ltr">begin 
ctx_doc.gist('newsindex','34','CTX_GIST',1, 'PARAGRAPH', pov =&gt;'GENERIC', maxPercent =&gt; 10);
end;</pre></div>
                  </div><a id="CCAPP9209"></a><div class="props_rev_3"><a id="GUID-C9D5DB22-AA2D-448F-876B-2BCCA10EC5C8" name="GUID-C9D5DB22-AA2D-448F-876B-2BCCA10EC5C8"></a><h5 id="CCAPP-GUID-C9D5DB22-AA2D-448F-876B-2BCCA10EC5C8" class="sect5"><span class="enumeration_section">5.3.2.3 </span>Theme Summary
                     </h5>
                     <div>
                        <p>The following example returns a theme summary on the theme of <span class="italic">insects</span> for document with textkey 34. The default Gist size is returned.
                        </p><pre class="oac_no_warn" dir="ltr">begin
ctx_doc.gist('newsindex','34','CTX_GIST',1, 'PARAGRAPH', pov =&gt; 'insects');
end;</pre></div>
                  </div>
               </div>
            </div><a id="CCAPP9507"></a><a id="CCAPP9508"></a><a id="CCAPP9210"></a><div class="props_rev_3"><a id="GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A" name="GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A"></a><h3 id="CCAPP-GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A" class="sect3"><span class="enumeration_section">5.4 </span>Document Presentation and Highlighting
               </h3>
               <div>
                  <p>Typically, a query application enables the user to view the documents returned by a query. The user selects a document from the hit list and then the application presents the document in some form.</p>
                  <p>With Oracle Text, you can display a document in different ways. For example, you can present documents with query terms highlighted. Highlighted query terms can be either the words of a word query or the themes of an <code class="codeph">ABOUT</code> query in English.
                  </p>
                  <p>You can also obtain gist (document summary) and theme information from documents with the <code class="codeph">CTX_DOC</code> PL/SQL package.
                  </p>
                  <p><a href="presenting-documents-in-oracle-text.html#GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A__G1007640" title="This table shows CTX_DOC output.">Table 5-2</a> describes the different output you can obtain and which procedure to use to obtain each type.
                  </p>
                  <div class="tblformal" id="GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A__G1007640">
                     <p class="titleintable">Table 5-2 CTX_DOC Output</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="CTX_DOC Output" summary="This table shows CTX_DOC output." width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="58%" id="d23499e1441">Output</th>
                              <th align="left" valign="bottom" width="42%" id="d23499e1444">Procedure</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="58%" id="d23499e1449" headers="d23499e1441 ">
                                 <p>Plain text version, no highlights</p>
                              </td>
                              <td align="left" valign="top" width="42%" headers="d23499e1449 d23499e1444 ">
                                 <p><code class="codeph">CTX_DOC.FILTER</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="58%" id="d23499e1457" headers="d23499e1441 ">
                                 <p>HTML version of document, no highlights</p>
                              </td>
                              <td align="left" valign="top" width="42%" headers="d23499e1457 d23499e1444 ">
                                 <p><code class="codeph">CTX_DOC.FILTER</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="58%" id="d23499e1465" headers="d23499e1441 ">
                                 <p>Highlighted document, plain text version</p>
                              </td>
                              <td align="left" valign="top" width="42%" headers="d23499e1465 d23499e1444 ">
                                 <p><code class="codeph">CTX_DOC.MARKUP</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="58%" id="d23499e1473" headers="d23499e1441 ">
                                 <p>Highlighted document, HTML version</p>
                              </td>
                              <td align="left" valign="top" width="42%" headers="d23499e1473 d23499e1444 ">
                                 <p><code class="codeph">CTX_DOC.MARKUP</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="58%" id="d23499e1481" headers="d23499e1441 ">
                                 <p>Highlight offset information for plain text version</p>
                              </td>
                              <td align="left" valign="top" width="42%" headers="d23499e1481 d23499e1444 ">
                                 <p><code class="codeph">CTX_DOC.HIGHLIGHT</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="58%" id="d23499e1489" headers="d23499e1441 ">
                                 <p>Highlight offset information for HTML version</p>
                              </td>
                              <td align="left" valign="top" width="42%" headers="d23499e1489 d23499e1444 ">
                                 <p><code class="codeph">CTX_DOC.HIGHLIGHT</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="58%" id="d23499e1497" headers="d23499e1441 ">
                                 <p>Theme summaries and gist of document.</p>
                              </td>
                              <td align="left" valign="top" width="42%" headers="d23499e1497 d23499e1444 ">
                                 <p><code class="codeph">CTX_DOC.GIST</code></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="58%" id="d23499e1505" headers="d23499e1441 ">
                                 <p>List of themes in document.</p>
                              </td>
                              <td align="left" valign="top" width="42%" headers="d23499e1505 d23499e1444 ">
                                 <p><code class="codeph">CTX_DOC.THEMES</code></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <div class="infoboxnotealso" id="GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A__GUID-6211CB06-3351-43AC-99AF-7953BCBD92EA">
                     <p class="notep1">See Also:</p>
                     <p><a href="../ccref/CTX_DOC-package.html#CCREF0700"><span class="italic">Oracle Text Reference</span></a></p>
                  </div>
                  <p><a href="presenting-documents-in-oracle-text.html#GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A__BABCGIIH">Figure 5-1</a> shows an original document to which we can apply highlighting, gisting, and theme extraction in the following sections. 
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="presenting-documents-in-oracle-text.html#GUID-2908DB24-3408-49D8-AB18-E5F011C4BA16">Highlighting Example</a></p>
                     </li>
                     <li>
                        <p><a href="presenting-documents-in-oracle-text.html#GUID-7D68A97C-0123-4B2C-AFE4-418B50D94065">Document List of Themes Example</a></p>
                     </li>
                     <li>
                        <p><a href="presenting-documents-in-oracle-text.html#GUID-FC40E543-C864-4383-B0B5-DCD86B2E2E58">Gist Example</a></p>
                     </li>
                  </ul>
                  <div class="figure" id="GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A__BABCGIIH">
                     <p class="titleinfigure">Figure 5-1 Sample Document for Highlighting, Gisting, and Theme Extraction</p><img src="img/pet01b.png" width="608" alt="Description of Figure 5-1 follows" title="Description of Figure 5-1 follows" longdesc="img_text/pet01b.html"><br><a href="img_text/pet01b.html">Description of "Figure 5-1 Sample Document for Highlighting, Gisting, and Theme Extraction"</a></div>
                  <!-- class="figure" -->
               </div><a id="CCAPP9509"></a><a id="CCAPP9211"></a><div class="props_rev_3"><a id="GUID-2908DB24-3408-49D8-AB18-E5F011C4BA16" name="GUID-2908DB24-3408-49D8-AB18-E5F011C4BA16"></a><h4 id="CCAPP-GUID-2908DB24-3408-49D8-AB18-E5F011C4BA16" class="sect4"><span class="enumeration_section">5.4.1 </span>Highlighting Example
                  </h4>
                  <div>
                     <p><a href="presenting-documents-in-oracle-text.html#GUID-2908DB24-3408-49D8-AB18-E5F011C4BA16__CEGDAJHB">Figure 5-2</a> is a screen shot of a query application presenting the document shown in <a href="presenting-documents-in-oracle-text.html#GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A__BABCGIIH">Figure 5-1</a> with the query term <span class="italic">pet</span> highlighted. This output was created using the text query application described in <a href="CONTEXT-query-application.html#GUID-1F1B44E8-ACCA-446A-84EA-67FA692476BA"> CONTEXT Query Application</a>.
                     </p>
                     <div class="figure" id="GUID-2908DB24-3408-49D8-AB18-E5F011C4BA16__CEGDAJHB">
                        <p class="titleinfigure">Figure 5-2 Pet Highlighted in Pet Magnet Document</p><img width="556" src="img/pethilitb.png" alt="Description of Figure 5-2 follows" title="Description of Figure 5-2 follows" longdesc="img_text/pethilitb.html"><br><a href="img_text/pethilitb.html">Description of "Figure 5-2 Pet Highlighted in Pet Magnet Document"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="CCAPP9510"></a><a id="CCAPP9212"></a><div class="props_rev_3"><a id="GUID-7D68A97C-0123-4B2C-AFE4-418B50D94065" name="GUID-7D68A97C-0123-4B2C-AFE4-418B50D94065"></a><h4 id="CCAPP-GUID-7D68A97C-0123-4B2C-AFE4-418B50D94065" class="sect4"><span class="enumeration_section">5.4.2 </span>Document List of Themes Example
                  </h4>
                  <div>
                     <p><a href="presenting-documents-in-oracle-text.html#GUID-7D68A97C-0123-4B2C-AFE4-418B50D94065__i1006508">Figure 5-3</a> is a screen shot of a query application presenting a list of themes for the document shown in <a href="presenting-documents-in-oracle-text.html#GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A__BABCGIIH">Figure 5-1</a>. This output was created using the text query application described in <a href="CONTEXT-query-application.html#GUID-1F1B44E8-ACCA-446A-84EA-67FA692476BA"> CONTEXT Query Application</a>.
                     </p>
                     <div class="figure" id="GUID-7D68A97C-0123-4B2C-AFE4-418B50D94065__i1006508">
                        <p class="titleinfigure">Figure 5-3 Query Application Displaying Document Themes</p><img width="535" src="img/petthemeb.png" alt="Description of Figure 5-3 follows" title="Description of Figure 5-3 follows" longdesc="img_text/petthemeb.html"><br><a href="img_text/petthemeb.html">Description of "Figure 5-3 Query Application Displaying Document Themes"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="CCAPP9511"></a><a id="CCAPP9213"></a><div class="props_rev_3"><a id="GUID-FC40E543-C864-4383-B0B5-DCD86B2E2E58" name="GUID-FC40E543-C864-4383-B0B5-DCD86B2E2E58"></a><h4 id="CCAPP-GUID-FC40E543-C864-4383-B0B5-DCD86B2E2E58" class="sect4"><span class="enumeration_section">5.4.3 </span>Gist Example
                  </h4>
                  <div>
                     <p><a href="presenting-documents-in-oracle-text.html#GUID-FC40E543-C864-4383-B0B5-DCD86B2E2E58__i1006519">Figure 5-4</a> is a screen shot of a query application presenting a gist of the document shown in <a href="presenting-documents-in-oracle-text.html#GUID-9D0E630D-8AA7-4DCD-9D99-10BB71E76B7A__BABCGIIH">Figure 5-1</a>. This output was created using the text query application produced described in <a href="CONTEXT-query-application.html#GUID-1F1B44E8-ACCA-446A-84EA-67FA692476BA"> CONTEXT Query Application</a>.
                     </p>
                     <div class="figure" id="GUID-FC40E543-C864-4383-B0B5-DCD86B2E2E58__i1006519">
                        <p class="titleinfigure">Figure 5-4 Query Application Presenting Document Gist</p><img width="558" src="img/petgist1b.png" alt="Description of Figure 5-4 follows" title="Description of Figure 5-4 follows" longdesc="img_text/petgist1b.html"><br><a href="img_text/petgist1b.html">Description of "Figure 5-4 Query Application Presenting Document Gist"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>