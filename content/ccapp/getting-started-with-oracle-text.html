<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Getting Started with Oracle Text</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Application Developer's Guide ">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Application Developer's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 17.8.1">
      <link rel="alternate" href="text-application-developers-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2017-10-10T16:34:47-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2001, 2017">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E85649-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="understanding-oracle-text-application-development.html" title="Previous" type="text/html">
      <link rel="next" href="indexing-with-oracle-text.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">
            {
                "primary":
                {
                    "category":{
                      "short_name":"database",
                      "element_name":"Database",
                      "display_in_url":true
                    },
                    "suite":{
                      "short_name":"oracle",
                      "element_name":"Oracle",
                      "display_in_url":true
                    },
                    "product_group":{
                      "short_name":"not-applicable",
                      "element_name":"Not applicable",
                      "display_in_url":false
                    },
                    "product":{
                      "short_name":"oracle-database",
                      "element_name":"Oracle Database",
                      "display_in_url":true
                    },
                    "release":{
                      "short_name":"12.2",
                      "element_name":"Release 12.2",
                      "display_in_url":true
                    },
                    "platform":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    },
                    "component":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    }
                }
            }
            </script>
      
    <meta name="dcterms.title" content="Text Application Developer's Guide">
    <meta name="dcterms.isVersionOf" content="CCAPP">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="understanding-oracle-text-application-development.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="indexing-with-oracle-text.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Application Developer's Guide </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Getting Started with Oracle Text</li>
            </ol>
            <a id="GUID-D954F00B-1019-475A-ACD6-82E32DE8773B" name="GUID-D954F00B-1019-475A-ACD6-82E32DE8773B"></a><a id="CCAPP0200"></a>
            
            <h2 id="CCAPP-GUID-D954F00B-1019-475A-ACD6-82E32DE8773B" class="sect2"><span class="enumeration_chapter">2 </span> Getting Started with Oracle Text
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter discuses the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="getting-started-with-oracle-text.html#GUID-2F586496-2F56-49D5-B61E-4344E4A6577C">Overview of Getting Started with Oracle Text</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-oracle-text.html#GUID-2654C316-2C70-4CD1-AFA4-5FD601D8624F">Creating an Oracle Text User</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-oracle-text.html#GUID-8D1FF789-F5F2-4C0A-9D8E-978DADBBC4F2">Query Application Quick Tour</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-oracle-text.html#GUID-7648841D-DE6D-441D-8C1B-5883675C236F">Catalog Application Quick Tour</a></p>
                  </li>
                  <li>
                     <p><a href="getting-started-with-oracle-text.html#GUID-0AA9ED63-E6F8-4123-A3A9-7BB5676BC040">Classification Application Quick Tour</a></p>
                  </li>
               </ul>
            </div><a id="CCAPP9013"></a><div class="props_rev_3"><a id="GUID-2F586496-2F56-49D5-B61E-4344E4A6577C" name="GUID-2F586496-2F56-49D5-B61E-4344E4A6577C"></a><h3 id="CCAPP-GUID-2F586496-2F56-49D5-B61E-4344E4A6577C" class="sect3"><span class="enumeration_section">2.1 </span>Overview of Getting Started with Oracle Text
               </h3>
               <div>
                  <p>This chapter provides basic information about how to create an Oracle Text developer user account, and how to build simple text query and catalog applications. It also provides information about basic SQL statements for each type of application to load, index, and query tables.</p>
                  <p>More complete application examples are given in the Appendices.</p>
                  <div class="infoboxnote" id="GUID-2F586496-2F56-49D5-B61E-4344E4A6577C__GUID-CE3DA49C-4C7A-43EE-BB0E-B4911E9CA747">
                     <p class="notep1">Note:</p>
                     <p>The <code class="codeph">SQL&gt;</code> prompt has been omitted in this chapter, in part to improve readability and in part to make it easier for you to cut and paste text.
                     </p>
                  </div>
                  <div class="infoboxnotealso" id="GUID-2F586496-2F56-49D5-B61E-4344E4A6577C__GUID-04F9E5C2-B4E7-440C-A23E-AAE9F5EFAC3D">
                     <p class="notep1">See Also:</p>
                     <p><span class="q">"<a href="classifying-documents-in-oracle-text.html#GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF"> Classifying Documents in Oracle Text</a>"</span> to learn more about building document classification applications
                     </p>
                  </div>
               </div>
            </div><a id="CCAPP9014"></a><div class="props_rev_3"><a id="GUID-2654C316-2C70-4CD1-AFA4-5FD601D8624F" name="GUID-2654C316-2C70-4CD1-AFA4-5FD601D8624F"></a><h3 id="CCAPP-GUID-2654C316-2C70-4CD1-AFA4-5FD601D8624F" class="sect3"><span class="enumeration_section">2.2 </span>Creating an Oracle Text User
               </h3>
               <div>
                  <div class="section">
                     <p>Before you can create Oracle Text indexes and use Oracle Text PL/SQL packages, you need to create a user with the <a id="d5342e213" class="indexterm-anchor"></a><code class="codeph">CTXAPP</code> role. This role enables you to do the following:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Create and delete Oracle Text indexing preferences</p>
                        </li>
                        <li>
                           <p>Use the Oracle Text PL/SQL packages</p>
                        </li>
                     </ul>
                     <p><a id="d5342e227" class="indexterm-anchor"></a>To create an Oracle Text application developer user, perform the following steps as the system administrator user: 
                     </p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Create the user</span><div>
                           <p>The following SQL statement creates a user called <code class="codeph">MYUSER</code> with a password of <code class="codeph"><span class="codeinlineitalic">password</span></code>:
                           </p><pre class="oac_no_warn" dir="ltr">CREATE USER myuser IDENTIFIED BY <span class="italic">password</span>;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Grant roles to the user</span><div>
                           <p>The following SQL statement grants the required roles of <a id="d5342e257" class="indexterm-anchor"></a><code class="codeph">RESOURCE</code>, <a id="d5342e262" class="indexterm-anchor"></a><code class="codeph">CONNECT</code>, and <a id="d5342e267" class="indexterm-anchor"></a><code class="codeph">CTXAPP</code> to <code class="codeph">MYUSER</code>:
                           </p><pre class="oac_no_warn" dir="ltr">GRANT RESOURCE, CONNECT, CTXAPP TO MYUSER;
</pre></div>
                     </li>
                     <li class="stepexpand"><span>Grant EXECUTE privileges on CTX PL/SQL package</span><div>
                           <p>Oracle Text includes several packages that let you perform actions ranging from synchronizing an Oracle Text index to highlighting documents. For example, the <code class="codeph">CTX_DDL</code> package includes the <a id="d5342e288" class="indexterm-anchor"></a><code class="codeph">SYNC_INDEX</code> procedure, which enables you to synchronize your index. The <a href="../ccref/toc.htm"><span class="italic">Oracle Text Reference</span></a> describes each of these packages in its own chapter.
                           </p>
                           <p>To call any of these procedures from a stored procedure, your application requires execute privileges on the packages. For example, to grant <a id="d5342e300" class="indexterm-anchor"></a><code class="codeph">execute</code> privileges to <code class="codeph">MYUSER</code> on all Oracle Text packages, enter the following SQL statements:
                           </p><pre class="oac_no_warn" dir="ltr">GRANT EXECUTE ON CTXSYS.CTX_CLS TO myuser;
GRANT EXECUTE ON CTXSYS.CTX_DDL TO myuser;
GRANT EXECUTE ON CTXSYS.CTX_DOC TO myuser;
GRANT EXECUTE ON CTXSYS.CTX_OUTPUT TO myuser;
GRANT EXECUTE ON CTXSYS.CTX_QUERY TO myuser;
GRANT EXECUTE ON CTXSYS.CTX_REPORT TO myuser;
GRANT EXECUTE ON CTXSYS.CTX_THES TO myuser;
GRANT EXECUTE ON CTXSYS.CTX_ULEXER TO myuser;</pre><div class="infoboxnote" id="GUID-2654C316-2C70-4CD1-AFA4-5FD601D8624F__GUID-92BBDB28-F3D3-4F4E-8417-26373309687C">
                              <p class="notep1">Note:</p>
                              <p> These permissions are granted to the <code class="codeph">CTXAPP</code> role. However, role permissions do not always work in PL/SQL procedures, so it is safest to explicitly grant these permissions to the user as well as giving them the <code class="codeph">CTXAPP</code> role.
                              </p>
                           </div>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="CCAPP9015"></a><div class="props_rev_3"><a id="GUID-8D1FF789-F5F2-4C0A-9D8E-978DADBBC4F2" name="GUID-8D1FF789-F5F2-4C0A-9D8E-978DADBBC4F2"></a><h3 id="CCAPP-GUID-8D1FF789-F5F2-4C0A-9D8E-978DADBBC4F2" class="sect3"><span class="enumeration_section">2.3 </span>Query Application Quick Tour
               </h3>
               <div>
                  <p>In a basic text query application, users enter query words or phrases and expect the application to return a list of documents that best match the query. Such an application involves creating a <code class="codeph">CONTEXT</code> index and querying it with <code class="codeph">CONTAINS</code>.
                  </p>
                  <p>Typically, query applications require a user interface. An example of how to build such a query application using the <code class="codeph">CONTEXT</code> index type is given in <a href="CONTEXT-query-application.html#GUID-1F1B44E8-ACCA-446A-84EA-67FA692476BA"> CONTEXT Query Application</a>.
                  </p>
                  <p>The examples in this section provide the basic SQL statements to load the text table, index the documents, and query the index.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-A5193144-108C-4DAB-AA36-0EACE8822AD2">Creating the Text Table</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-1921E5CB-5621-49CE-B44B-A785B69E1740">Using SQL*Loader to Load the Table</a></p>
                     </li>
                  </ul>
               </div><a id="CCAPP9645"></a><div class="props_rev_3"><a id="GUID-A5193144-108C-4DAB-AA36-0EACE8822AD2" name="GUID-A5193144-108C-4DAB-AA36-0EACE8822AD2"></a><h4 id="CCAPP-GUID-A5193144-108C-4DAB-AA36-0EACE8822AD2" class="sect4"><span class="enumeration_section">2.3.1 </span>Creating the Text Table
                  </h4>
                  <div>
                     <div class="section">
                        <p>Perform the following steps to create and load documents into a table.</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect as the New User</span><div>
                              <p>Before creating any tables, assume the identity of the user you just created.</p><pre class="oac_no_warn" dir="ltr">CONNECT myuser;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create your Text Table</span><div>
                              <p>The following example creates a table called <code class="codeph">docs</code> with two columns, <code class="codeph">id</code> and <code class="codeph">text</code>, by using the <code class="codeph">CREATE</code> <code class="codeph">TABLE</code> statement. This example makes the <code class="codeph">id</code> column the primary key. The <code class="codeph">text</code> column is <code class="codeph">VARCHAR2</code>.
                              </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE docs (id NUMBER PRIMARY KEY, text VARCHAR2(200));</pre><div class="infoboxnote" id="GUID-A5193144-108C-4DAB-AA36-0EACE8822AD2__GUID-0E070647-2177-4156-97C9-173EBCED60E3">
                                 <p class="notep1">Note:</p>
                                 <p>Primary keys of the following type are supported:NUMBER, VARCHAR2, DATE, CHAR, VARCHAR, and RAW.</p>
                              </div>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Load Documents into Table</span><div>
                              <p>Use the SQL <a id="d5342e518" class="indexterm-anchor"></a><code class="codeph">INSERT</code> statement to load text to a table.
                              </p>
                              <p>To populate the <code class="codeph">docs</code> table, use the <code class="codeph">INSERT</code> statement as follows:
                              </p><pre class="oac_no_warn" dir="ltr">INSERT INTO docs VALUES(1, '&lt;HTML&gt;California is a state in the US.&lt;/HTML&gt;');
INSERT INTO docs VALUES(2, '&lt;HTML&gt;Paris is a city in France.&lt;/HTML&gt;');
INSERT INTO docs VALUES(3, '&lt;HTML&gt;France is in Europe.&lt;/HTML&gt;');</pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="CCAPP9487"></a><div class="props_rev_3"><a id="GUID-1921E5CB-5621-49CE-B44B-A785B69E1740" name="GUID-1921E5CB-5621-49CE-B44B-A785B69E1740"></a><h4 id="CCAPP-GUID-1921E5CB-5621-49CE-B44B-A785B69E1740" class="sect4"><span class="enumeration_section">2.3.2 </span>Using SQL*Loader to Load the Table
                  </h4>
                  <div>
                     <p>You can perform the following steps to optionally load your table in batch with <a id="d5342e590" class="indexterm-anchor"></a>SQL*Loader.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="getting-started-with-oracle-text.html#GUID-A1CFBF33-B275-4DC5-91F7-118D531412C6">Step 1   Create the CONTEXT index</a></p>
                        </li>
                        <li>
                           <p><a href="getting-started-with-oracle-text.html#GUID-73CEE7BD-CD04-4B67-8904-BC71F7A43A14">Step 2   Querying Your Table with CONTAINS</a></p>
                        </li>
                        <li>
                           <p><a href="getting-started-with-oracle-text.html#GUID-5C6662E9-1B74-4189-A454-EEA58516FECF">Step 3   Present the Document</a></p>
                        </li>
                        <li>
                           <p><a href="getting-started-with-oracle-text.html#GUID-85DC69F7-E92F-421D-A615-6A6F960C6031">Step 4   Synchronize the Index After Data Manipulation</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-1921E5CB-5621-49CE-B44B-A785B69E1740__GUID-1FFF5EC3-F66B-48F1-B4F2-A9D5889D738D">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="CONTEXT-query-application.html#GUID-03558FFB-EFEF-4B43-92CA-E9ABB5EC0E6B">Building the PSP Web Application</a>"</span> for an example on how to use SQL*Loader to load a text table from a data file
                        </p>
                     </div>
                  </div><a id="CCAPP9646"></a><div class="props_rev_3"><a id="GUID-A1CFBF33-B275-4DC5-91F7-118D531412C6" name="GUID-A1CFBF33-B275-4DC5-91F7-118D531412C6"></a><h5 id="CCAPP-GUID-A1CFBF33-B275-4DC5-91F7-118D531412C6" class="sect5"><span class="enumeration_section">2.3.2.1 </span>Step 1   Create the CONTEXT index
                     </h5>
                     <div>
                        <p>Index the HTML files by creating a <code class="codeph">CONTEXT</code> index on the text column as follows. Because you are indexing HTML, this example uses the <a id="d5342e697" class="indexterm-anchor"></a><code class="codeph">NULL_FILTER</code> preference type for no filtering and the <a id="d5342e702" class="indexterm-anchor"></a><code class="codeph">HTML_SECTION_GROUP</code> type:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE INDEX idx_docs ON docs(text)
     INDEXTYPE IS CTXSYS.CONTEXT PARAMETERS
     ('FILTER CTXSYS.NULL_FILTER SECTION GROUP CTXSYS.HTML_SECTION_GROUP');
</pre><p>Use the <code class="codeph">NULL_FILTER</code>, because you do not need to filter HTML documents during indexing. However, if you index PDF, Microsoft Word, or other formatted documents, then use the <a id="d5342e714" class="indexterm-anchor"></a><code class="codeph">CTXSYS.AUTO_FILTER</code> (the default) as your <code class="codeph">FILTER</code> preference.
                        </p>
                        <p>This example also uses the <code class="codeph">HTML_SECTION_GROUP</code> section group, which is recommended for indexing HTML documents. Using <code class="codeph">HTML_SECTION_GROUP</code> enables you to search within specific HTML tags and eliminates from the index unwanted markup such as font information.
                        </p>
                     </div>
                  </div><a id="CCAPP9647"></a><div class="props_rev_3"><a id="GUID-73CEE7BD-CD04-4B67-8904-BC71F7A43A14" name="GUID-73CEE7BD-CD04-4B67-8904-BC71F7A43A14"></a><h5 id="CCAPP-GUID-73CEE7BD-CD04-4B67-8904-BC71F7A43A14" class="sect5"><span class="enumeration_section">2.3.2.2 </span>Step 2   Querying Your Table with CONTAINS
                     </h5>
                     <div>
                        <p>First, set the format of the <code class="codeph">SELECT</code> statement's output so it is easily readable. Set the width of the <code class="codeph">text</code> column to 40 characters:
                        </p><pre class="oac_no_warn" dir="ltr">COLUMN text FORMAT a40;
</pre><p>Now query the table with the <a id="d5342e799" class="indexterm-anchor"></a><code class="codeph">SELECT</code> statement with <code class="codeph">CONTAINS</code>. This retrieves the document IDs that satisfy the query. The following query looks for all documents that contain the word <span class="italic">France</span>:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT SCORE(1), id, text FROM docs WHERE CONTAINS(text, 'France', 1) &gt; 0;

  SCORE(1)         ID TEXT
---------- ---------- ----------------------------------------
         4          3 &lt;HTML&gt;France is in Europe.&lt;/HTML&gt;
         4          2 &lt;HTML&gt;Paris is a city in France.&lt;/HTML&gt;</pre></div>
                  </div><a id="CCAPP9648"></a><div class="props_rev_3"><a id="GUID-5C6662E9-1B74-4189-A454-EEA58516FECF" name="GUID-5C6662E9-1B74-4189-A454-EEA58516FECF"></a><h5 id="CCAPP-GUID-5C6662E9-1B74-4189-A454-EEA58516FECF" class="sect5"><span class="enumeration_section">2.3.2.3 </span>Step 3   Present the Document
                     </h5>
                     <div>
                        <p>In a real application, you might want to present the selected document to the user with query terms highlighted. Oracle Text enables you to mark up documents with the <a id="d5342e876" class="indexterm-anchor"></a><code class="codeph">CTX_DOC</code> package.
                        </p>
                        <p>We can demonstrate HTML document markup with an anonymous PL/SQL block in SQL*Plus. However, in a real application you might present the document in a browser.</p>
                        <p>This PL/SQL example uses the in-memory version of <a id="d5342e885" class="indexterm-anchor"></a><code class="codeph">CTX_DOC.MARKUP</code> to highlight the word <span class="italic">France</span> in document 3. It allocates a temporary <a id="d5342e893" class="indexterm-anchor"></a><code class="codeph">CLOB</code> (Character Large Object datatype)<a id="d5342e898" class="indexterm-anchor"></a><a id="d5342e900" class="indexterm-anchor"></a> to store the markup text and reads it back to the standard output. The <code class="codeph">CLOB</code> is then de-allocated before exiting:
                        </p><pre class="oac_no_warn" dir="ltr">SET SERVEROUTPUT ON;
DECLARE
  2  mklob CLOB;
  3  amt NUMBER := 40;
  4  line VARCHAR2(80);
  5  BEGIN
  6    CTX_DOC.MARKUP('idx_docs','3','France', mklob);
  7    DBMS_LOB.READ(mklob, amt, 1, line);
  8    DBMS_OUTPUT.PUT_LINE('FIRST 40 CHARS ARE:'||line);
  9    DBMS_LOB.FREETEMPORARY(mklob);
 10    END;
 11  /
FIRST 40 CHARS ARE:&lt;HTML&gt;&lt;&lt;&lt;France&gt;&gt;&gt; is in Europe.&lt;/HTML&gt;

PL/SQL procedure successfully completed.</pre></div>
                  </div><a id="CCAPP9649"></a><div class="props_rev_3"><a id="GUID-85DC69F7-E92F-421D-A615-6A6F960C6031" name="GUID-85DC69F7-E92F-421D-A615-6A6F960C6031"></a><h5 id="CCAPP-GUID-85DC69F7-E92F-421D-A615-6A6F960C6031" class="sect5"><span class="enumeration_section">2.3.2.4 </span>Step 4   Synchronize the Index After Data Manipulation
                     </h5>
                     <div>
                        <p>When you create a <code class="codeph">CONTEXT</code> index, you need to explicitly synchronize your index to keep it up to date with any inserts, updates, or deletes to the text table.
                        </p>
                        <p>Oracle Text enables you to do so with the <a id="d5342e979" class="indexterm-anchor"></a><code class="codeph">CTX_DDL.SYNC_INDEX</code> procedure.
                        </p>
                        <p>Add some rows to the <code class="codeph">docs</code> table:
                        </p><pre class="oac_no_warn" dir="ltr">INSERT INTO docs VALUES(4, '&lt;HTML&gt;Los Angeles is a city in California.&lt;/HTML&gt;');
INSERT INTO docs VALUES(5, '&lt;HTML&gt;Mexico City is big.&lt;/HTML&gt;');
</pre><p>Because the index is not synchronized, these new rows are not returned with a query on <span class="italic">city</span>:
                        </p><pre class="oac_no_warn" dir="ltr">SELECT SCORE(1), id, text FROM docs WHERE CONTAINS(text, 'city', 1) &gt; 0;

  SCORE(1)         ID TEXT
---------- ---------- --------------------------------------------------
         4          2 &lt;HTML&gt;Paris is a city in France.&lt;/HTML&gt;
</pre><p>Therefore, synchronize the index with 2Mb of memory, and rerun the query:</p><pre class="oac_no_warn" dir="ltr">
EXEC CTX_DDL.SYNC_INDEX('idx_docs', '2M');

PL/SQL procedure successfully completed.

COLUMN text FORMAT a50;
SELECT SCORE(1), id, text FROM docs WHERE CONTAINS(text, 'city', 1) &gt; 0;

  SCORE(1)         ID TEXT
---------- ---------- --------------------------------------------------
         4          5 &lt;HTML&gt;Mexico City is big.&lt;/HTML&gt;
         4          4 &lt;HTML&gt;Los Angeles is a city in California.&lt;/HTML&gt;
         4          2 &lt;HTML&gt;Paris is a city in France.&lt;/HTML&gt;</pre></div>
                  </div>
               </div>
            </div><a id="CCAPP9020"></a><div class="props_rev_3"><a id="GUID-7648841D-DE6D-441D-8C1B-5883675C236F" name="GUID-7648841D-DE6D-441D-8C1B-5883675C236F"></a><h3 id="CCAPP-GUID-7648841D-DE6D-441D-8C1B-5883675C236F" class="sect3"><span class="enumeration_section">2.4 </span>Catalog Application Quick Tour
               </h3>
               <div>
                  <p>The examples in this section provide the basic SQL statements to create a catalog index for an auction site that sells electronic equipment, such as cameras and CD players. New inventory is added everyday and item descriptions, bid dates, and prices must be stored together.</p>
                  <p>The application requires good response time for mixed queries. The key is to determine what columns users frequently search to create a suitable <code class="codeph">CTXCAT</code> index. Queries on this type of index are entered with the <code class="codeph">CATSEARCH</code> operator.
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-6D37D808-7B7C-4DF7-A0D2-B769411100EB">Creating the Table</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-68C6444F-A8EB-4D17-9EAD-64DA136DC54B">Using SQL*Loader to Load the Table</a></p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-7648841D-DE6D-441D-8C1B-5883675C236F__GUID-FF418CB1-E875-4A45-AE56-18E3BF91E93D">
                     <p class="notep1">Note:</p>
                     <p>Typically, query applications require a user interface. An example of how to build such a query application using the <code class="codeph">CATSEARCH</code> index type is given in <a href="CATSEARCH-query-application.html#GUID-72F18A97-92D7-411D-871A-27AD749D6141"> CATSEARCH Query Application </a>.
                     </p>
                  </div>
               </div><a id="CCAPP9650"></a><div class="props_rev_3"><a id="GUID-6D37D808-7B7C-4DF7-A0D2-B769411100EB" name="GUID-6D37D808-7B7C-4DF7-A0D2-B769411100EB"></a><h4 id="CCAPP-GUID-6D37D808-7B7C-4DF7-A0D2-B769411100EB" class="sect4"><span class="enumeration_section">2.4.1 </span>Creating the Table
                  </h4>
                  <div>
                     <div class="section">
                        <p>Perform the following steps to create and load the table.</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect as the Appropriate User</span><div>
                              <p>Connect as the <code class="codeph">CTXAPP</code> role the user <code class="codeph">myuser</code>:
                              </p><pre class="oac_no_warn" dir="ltr">CONNECT myuser;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create Your Table</span><div>
                              <p>Set up an auction table to store your inventory:</p><pre class="oac_no_warn" dir="ltr">CREATE TABLE auction(
item_id NUMBER,
title VARCHAR2(100),
category_id NUMBER,
price NUMBER,
bid_close DATE);
</pre><p><a href="getting-started-with-oracle-text.html#GUID-97869112-A853-4333-8DDC-DB6F2219F853__i1008373">Figure 2-1</a> illustrates this table.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Populate Your Table</span><div>
                              <p>Populate the table with various items, each with an <code class="codeph">id, title, price</code> and <code class="codeph">bid_date</code>:
                              </p><pre class="oac_no_warn" dir="ltr">INSERT INTO AUCTION VALUES(1, 'NIKON CAMERA', 1, 400, '24-OCT-2002');
INSERT INTO AUCTION VALUES(2, 'OLYMPUS CAMERA', 1, 300, '25-OCT-2002');
INSERT INTO AUCTION VALUES(3, 'PENTAX CAMERA', 1, 200, '26-OCT-2002');
INSERT INTO AUCTION VALUES(4, 'CANON CAMERA', 1, 250, '27-OCT-2002'); </pre></div>
                        </li>
                     </ol>
                  </div>
               </div><a id="CCAPP9488"></a><div class="props_rev_3"><a id="GUID-68C6444F-A8EB-4D17-9EAD-64DA136DC54B" name="GUID-68C6444F-A8EB-4D17-9EAD-64DA136DC54B"></a><h4 id="CCAPP-GUID-68C6444F-A8EB-4D17-9EAD-64DA136DC54B" class="sect4"><span class="enumeration_section">2.4.2 </span>Using SQL*Loader to Load the Table
                  </h4>
                  <div>
                     <p>You can perform the steps in this section to optionally load your table in batch with <a id="d5342e1243" class="indexterm-anchor"></a>SQL*Loader.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="getting-started-with-oracle-text.html#GUID-BD1A8A42-07A1-4D63-8E02-C5D2DFA7B52B">Step 1   Determine your Queries</a></p>
                        </li>
                        <li>
                           <p><a href="getting-started-with-oracle-text.html#GUID-59C7BF67-3779-4D63-887E-A4D4AB7A304E">Step 2   Create the Sub-Index to Order by Price</a></p>
                        </li>
                        <li>
                           <p><a href="getting-started-with-oracle-text.html#GUID-97869112-A853-4333-8DDC-DB6F2219F853">Step 3   Create the CTXCAT Index</a></p>
                        </li>
                        <li>
                           <p><a href="getting-started-with-oracle-text.html#GUID-0F97E9D9-C942-4615-BF35-4BC55311CF81">Step 4   Querying Your Table with CATSEARCH</a></p>
                        </li>
                        <li>
                           <p><a href="getting-started-with-oracle-text.html#GUID-1C5652F8-7835-4ED7-942D-7582EEDAE74C">Step 5   Update Your Table</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-68C6444F-A8EB-4D17-9EAD-64DA136DC54B__GUID-73590566-B375-4D38-9687-4CDF73FE8516">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="CONTEXT-query-application.html#GUID-03558FFB-EFEF-4B43-92CA-E9ABB5EC0E6B">Building the PSP Web Application</a>"</span> for an example on how to use SQL*Loader to load a text table from a data file
                        </p>
                     </div>
                  </div><a id="CCAPP9651"></a><div class="props_rev_3"><a id="GUID-BD1A8A42-07A1-4D63-8E02-C5D2DFA7B52B" name="GUID-BD1A8A42-07A1-4D63-8E02-C5D2DFA7B52B"></a><h5 id="CCAPP-GUID-BD1A8A42-07A1-4D63-8E02-C5D2DFA7B52B" class="sect5"><span class="enumeration_section">2.4.2.1 </span>Step 1   Determine your Queries
                     </h5>
                     <div>
                        <p>Determine what criteria are likely to be retrieved. In this example, you determine that all queries search the title column for item descriptions, and most queries order by price. When using the <code class="codeph">CATSEARCH</code> operator later, we'll specify the terms for the text column and the criteria for the structured clause. 
                        </p>
                     </div>
                  </div><a id="CCAPP9652"></a><div class="props_rev_3"><a id="GUID-59C7BF67-3779-4D63-887E-A4D4AB7A304E" name="GUID-59C7BF67-3779-4D63-887E-A4D4AB7A304E"></a><h5 id="CCAPP-GUID-59C7BF67-3779-4D63-887E-A4D4AB7A304E" class="sect5"><span class="enumeration_section">2.4.2.2 </span>Step 2   Create the Sub-Index to Order by Price
                     </h5>
                     <div>
                        <p>For Oracle Text to serve these queries efficiently, we need a <a id="d5342e1392" class="indexterm-anchor"></a>sub-index for the price column, because our queries will order by price. 
                        </p>
                        <p>Therefore, create an index set called <code class="codeph">auction_set</code> and add a sub-index for the price column:
                        </p><pre class="oac_no_warn" dir="ltr">EXEC CTX_DDL.CREATE_INDEX_SET('auction_iset');
EXEC CTX_DDL.ADD_INDEX('auction_iset','price'); /* sub-index A*/</pre></div>
                  </div><a id="CCAPP9489"></a><a id="CCAPP9653"></a><div class="props_rev_3"><a id="GUID-97869112-A853-4333-8DDC-DB6F2219F853" name="GUID-97869112-A853-4333-8DDC-DB6F2219F853"></a><h5 id="CCAPP-GUID-97869112-A853-4333-8DDC-DB6F2219F853" class="sect5"><span class="enumeration_section">2.4.2.3 </span>Step 3   Create the CTXCAT Index
                     </h5>
                     <div>
                        <p>Create the combined catalog index on the <code class="codeph">AUCTION</code> table with <code class="codeph">CREATE</code> <code class="codeph">INDEX</code> as follows:
                        </p><pre class="oac_no_warn" dir="ltr">CREATE INDEX auction_titlex ON AUCTION(title) INDEXTYPE IS CTXSYS.CTXCAT PARAMETERS ('index set auction_iset');
</pre><p><a href="getting-started-with-oracle-text.html#GUID-97869112-A853-4333-8DDC-DB6F2219F853__i1008373">Figure 2-1</a> shows how the <a id="d5342e1473" class="indexterm-anchor"></a><code class="codeph">CTXCAT</code> index and its sub-index relates to the columns.
                        </p>
                        <div class="figure" id="GUID-97869112-A853-4333-8DDC-DB6F2219F853__i1008373">
                           <p class="titleinfigure">Figure 2-1 Auction table schema and CTXCAT index</p><img src="img/ccapp019.gif" width="403" alt="Description of Figure 2-1 follows" title="Description of Figure 2-1 follows" longdesc="img_text/ccapp019.html"><br><a href="img_text/ccapp019.html">Description of "Figure 2-1 Auction table schema and CTXCAT index"</a></div>
                        <!-- class="figure" -->
                     </div>
                  </div><a id="CCAPP9654"></a><div class="props_rev_3"><a id="GUID-0F97E9D9-C942-4615-BF35-4BC55311CF81" name="GUID-0F97E9D9-C942-4615-BF35-4BC55311CF81"></a><h5 id="CCAPP-GUID-0F97E9D9-C942-4615-BF35-4BC55311CF81" class="sect5"><span class="enumeration_section">2.4.2.4 </span>Step 4   Querying Your Table with CATSEARCH
                     </h5>
                     <div>
                        <p>When you have created the <code class="codeph">CTXCAT</code> index on the <code class="codeph">AUCTION</code> table, you can query this index with the <a id="d5342e1550" class="indexterm-anchor"></a><code class="codeph">CATSEARCH</code> operator.
                        </p>
                        <p>First set the output format to make the output readable:</p><pre class="oac_no_warn" dir="ltr">COLUMN title FORMAT a40;
</pre><p>Now run the query:</p><pre class="oac_no_warn" dir="ltr">SELECT title, price FROM auction WHERE CATSEARCH(title, 'CAMERA', 'order by price')&gt; 0;

TITLE                PRICE
--------------- ----------
PENTAX CAMERA          200
CANON CAMERA           250
OLYMPUS CAMERA         300
NIKON CAMERA           400

SELECT title, price FROM auction WHERE CATSEARCH(title, 'CAMERA', 
     'price &lt;= 300')&gt;0;

TITLE                PRICE
--------------- ----------
PENTAX CAMERA          200
CANON CAMERA           250
OLYMPUS CAMERA         300</pre></div>
                  </div><a id="CCAPP9655"></a><div class="props_rev_3"><a id="GUID-1C5652F8-7835-4ED7-942D-7582EEDAE74C" name="GUID-1C5652F8-7835-4ED7-942D-7582EEDAE74C"></a><h5 id="CCAPP-GUID-1C5652F8-7835-4ED7-942D-7582EEDAE74C" class="sect5"><span class="enumeration_section">2.4.2.5 </span>Step 5   Update Your Table
                     </h5>
                     <div>
                        <p>Update your catalog table by adding new rows. When you do so, the <code class="codeph">CTXCAT</code> index is automatically synchronized to reflect the change. 
                        </p>
                        <p>For example, add the following new rows to our table and then rerun the query:</p><pre class="oac_no_warn" dir="ltr">INSERT INTO AUCTION VALUES(5, 'FUJI CAMERA', 1, 350, '28-OCT-2002');
INSERT INTO AUCTION VALUES(6, 'SONY CAMERA', 1, 310, '28-OCT-2002');

SELECT title, price FROM auction WHERE CATSEARCH(title, 'CAMERA', 'order by price')&gt; 0;

TITLE                                    PRICE
----------------------------------- ----------
PENTAX CAMERA                              200
CANON CAMERA                               250
OLYMPUS CAMERA                             300
SONY CAMERA                                310
FUJI CAMERA                                350
NIKON CAMERA                               400

6 rows selected.
</pre><p>Note how the added rows show up immediately in the query.</p>
                     </div>
                  </div>
               </div>
            </div><a id="CCAPP9021"></a><div class="props_rev_3"><a id="GUID-0AA9ED63-E6F8-4123-A3A9-7BB5676BC040" name="GUID-0AA9ED63-E6F8-4123-A3A9-7BB5676BC040"></a><h3 id="CCAPP-GUID-0AA9ED63-E6F8-4123-A3A9-7BB5676BC040" class="sect3"><span class="enumeration_section">2.5 </span>Classification Application Quick Tour
               </h3>
               <div>
                  <p>The function of a classification application is to perform some action based on document content. These actions can include assigning a category ID to a document or sending the document to a user. The result is classification of a document.</p>
                  <p>This section contains the following sections.</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD">About Classification of a Document</a></p>
                     </li>
                     <li>
                        <p><a href="getting-started-with-oracle-text.html#GUID-BE0855FE-7920-4B57-9ED0-F311C5807626">Steps for Creating a Classification Application</a></p>
                     </li>
                  </ul>
               </div><a id="CCAPP9490"></a><a id="CCAPP9695"></a><div class="props_rev_3"><a id="GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD" name="GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD"></a><h4 id="CCAPP-GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD" class="sect4"><span class="enumeration_section">2.5.1 </span>About Classification of a Document
                  </h4>
                  <div>
                     <p>Documents are classified according to predefined rules. These rules select for a category. For instance, a query rule of <span class="italic">'presidential elections'</span> might select documents for a category about politics.
                     </p>
                     <p>Oracle Text provides several types of classification. One type is <a id="d5342e1768" class="indexterm-anchor"></a><a id="d5342e1770" class="indexterm-anchor"></a><span class="italic">simple</span>, or <a id="d5342e1777" class="indexterm-anchor"></a><a id="d5342e1779" class="indexterm-anchor"></a><span class="italic">rule-based</span> classification, discussed here, in which you create both document categories and the rules for categorizing documents. With <a id="d5342e1786" class="indexterm-anchor"></a><span class="italic">supervised</span> classification, Oracle Text derives the rules from a set of training documents you provide. With <a id="d5342e1792" class="indexterm-anchor"></a><span class="italic">clustering</span>, Oracle Text does all the work for you, deriving both rules and categories.
                     </p>
                     <div class="infoboxnotealso" id="GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD__GUID-528FF0FB-78A0-49A1-A1D5-C2FB96E2C9A1">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="classifying-documents-in-oracle-text.html#GUID-69EAD761-8C53-455D-91F3-C85E84F27A70">Overview of Document Classification</a>"</span> for more information on classification
                        </p>
                     </div>
                     <p>To create a simple classification application for document content using Oracle Text, you create <span class="bold">rules</span>. <a id="d5342e1809" class="indexterm-anchor"></a><a id="d5342e1813" class="indexterm-anchor"></a>Rules are essentially a table of queries that categorize document content. You index these rules in a <code class="codeph">CTXRULE</code> index. To classify an incoming stream of text, use the <a id="d5342e1821" class="indexterm-anchor"></a><code class="codeph">MATCHES</code> operator in the <code class="codeph">WHERE</code> clause of a <code class="codeph">SELECT</code> statement. See <a href="getting-started-with-oracle-text.html#GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD__i1008193">Figure 2-2</a> for the general flow of a <a id="d5342e1835" class="indexterm-anchor"></a>classification application.
                     </p>
                     <div class="figure" id="GUID-C17706E8-D438-4CF3-B6D3-6AED543B1BFD__i1008193">
                        <p class="titleinfigure">Figure 2-2 Overview of a Document Classification Application</p><img src="img/ccapp018.gif" width="516" alt="Description of Figure 2-2 follows" title="Description of Figure 2-2 follows" longdesc="img_text/ccapp018.html"><br><a href="img_text/ccapp018.html">Description of "Figure 2-2 Overview of a Document Classification Application"</a></div>
                     <!-- class="figure" -->
                  </div>
               </div><a id="CCAPP9022"></a><div class="props_rev_3"><a id="GUID-BE0855FE-7920-4B57-9ED0-F311C5807626" name="GUID-BE0855FE-7920-4B57-9ED0-F311C5807626"></a><h4 id="CCAPP-GUID-BE0855FE-7920-4B57-9ED0-F311C5807626" class="sect4"><span class="enumeration_section">2.5.2 </span>Steps for Creating a Classification Application
                  </h4>
                  <div>
                     <div class="section">
                        <p>The following example shows how to classify documents by defining simple categories, creating a <code class="codeph">CTXRULE</code> index, and using <code class="codeph">MATCHES</code>, using the <code class="codeph">CTXAPP</code> role user <code class="codeph">myuser</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Connect As the Appropriate User</span><div>
                              <p>Connect as the <code class="codeph">CTXAPP</code> role user <code class="codeph">myuser</code>:
                              </p><pre class="oac_no_warn" dir="ltr">CONNECT myuser;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create the Rule Table</span><div>
                              <p>We must create a <a id="d5342e1940" class="indexterm-anchor"></a>rule table and populate it with query rules. In this example, we create a table called <code class="codeph">queries</code>. Each row defines a category with an ID, and a rule which is a query string:
                              </p><pre class="oac_no_warn" dir="ltr">CREATE TABLE queries (
      query_id      NUMBER,
      query_string  VARCHAR2(80)
    );

    INSERT INTO queries VALUES (1, 'oracle');
    INSERT INTO queries VALUES (2, 'larry or ellison');
    INSERT INTO queries VALUES (3, 'oracle and text');
    INSERT INTO queries VALUES (4, 'market share');
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Create Your CTXRULE Index</span><div>
                              <p>Create a <code class="codeph">CTXRULE</code> index as follows:
                              </p><pre class="oac_no_warn" dir="ltr">CREATE INDEX queryx ON queries(query_string) INDEXTYPE IS CTXSYS.CTXRULE;
</pre></div>
                        </li>
                        <li class="stepexpand"><span>Classify with MATCHES<a id="d5342e1964" class="indexterm-anchor"></a></span><div>
                              <p>Use the <a id="d5342e1969" class="indexterm-anchor"></a><code class="codeph">MATCHES</code> operator in the <code class="codeph">WHERE</code> clause of a <code class="codeph">SELECT</code> statement to match documents to queries and hence classify. 
                              </p><pre class="oac_no_warn" dir="ltr">    COLUMN query_string FORMAT a35;
    SELECT query_id,query_string FROM queries
     WHERE MATCHES(query_string, 
                   'Oracle announced that its market share in databases 
                    increased over the last year.')&gt;0;

  QUERY_ID QUERY_STRING                                                         
---------- -----------------------------------                                  
         1 oracle                                                               
         4 market share                                                         
</pre><p>As shown, the document string matches categories 1 and 4. With this classification you can perform an action, such as writing the document to a specific table or e-mailing a user.</p>
                              <div class="infoboxnotealso" id="GUID-BE0855FE-7920-4B57-9ED0-F311C5807626__GUID-AF31E117-6524-4367-892D-2C85A0B91FB6">
                                 <p class="notep1">See Also:</p>
                                 <p><a href="classifying-documents-in-oracle-text.html#GUID-D694A98B-3B18-48B2-B10E-FB884B436FAF"> Classifying Documents in Oracle Text</a> for more extended classification examples
                                 </p>
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>