<!DOCTYPE html
  SYSTEM "about:legacy-compat">

<!-- saved from url=(0023)https://docs.oracle.com -->

<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Data Masking</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Data Masking and Subsetting Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Data Masking and Subsetting Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 17.8.1">
      <link rel="alternate" href="data-masking-and-subsetting-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2017-10-24T13:51:17-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2014, 2017">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E85965-01">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="application-data-modeling.html" title="Previous" type="text/html">
      <link rel="next" href="data-subsetting.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">
            {
                "primary":
                {
                    "category":{
                      "short_name":"database",
                      "element_name":"Database",
                      "display_in_url":true
                    },
                    "suite":{
                      "short_name":"oracle",
                      "element_name":"Oracle",
                      "display_in_url":true
                    },
                    "product_group":{
                      "short_name":"not-applicable",
                      "element_name":"Not applicable",
                      "display_in_url":false
                    },
                    "product":{
                      "short_name":"oracle-database",
                      "element_name":"Oracle Database",
                      "display_in_url":true
                    },
                    "release":{
                      "short_name":"12.2",
                      "element_name":"Release 12.2",
                      "display_in_url":true
                    },
                    "platform":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    },
                    "component":{
                      "short_name":"",
                      "element_name":"",
                      "display_in_url":false
                    }
                }
            }
            </script>
      
    <meta name="dcterms.title" content="Data Masking and Subsetting User's Guide">
    <meta name="dcterms.isVersionOf" content="DMKSB">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="application-data-modeling.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="data-subsetting.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Data Masking and Subsetting Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Data Masking</li>
            </ol>
            <a id="GUID-E3C164DC-0004-4857-A038-54EC7B1A5118" name="GUID-E3C164DC-0004-4857-A038-54EC7B1A5118"></a>
            
            <h2 id="DMKSB-GUID-E3C164DC-0004-4857-A038-54EC7B1A5118" class="sect2"><span class="enumeration_chapter">4 </span>Data Masking
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter provides conceptual information about the components that comprise Oracle Data Masking, and procedural information about performing the task sequence, such as creating masking formats and masking definitions. Data masking presupposes that you have created an Application Data Model (ADM) with defined sensitive columns.</p>
               <p>The procedures in this chapter are applicable to Oracle Enterprise Manager Cloud Control 12.1 and higher only. You must have the Oracle Data Masking and Subsetting Pack license to use data masking features.</p>
               <div class="infoboxnote" id="GUID-E3C164DC-0004-4857-A038-54EC7B1A5118__GUID-6280C28E-088E-415A-B249-9F2E1FF0004D">
                  <p class="notep1">Note:</p>
                  <p>Performing masking on an 11.2.0.3 database that uses Database Plug-in 12.1.0.3 and higher requires that the database patch #16922826 is applied for masking to run successfully. The Mask-In Export feature (also known as At Source masking) works with Oracle Database 11.1 and higher.</p>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-A36C8E31-E49B-4AA5-983D-8BC4D8E5E99F" name="GUID-A36C8E31-E49B-4AA5-983D-8BC4D8E5E99F"></a><h3 id="DMKSB-GUID-A36C8E31-E49B-4AA5-983D-8BC4D8E5E99F" class="sect3"><span class="enumeration_section">4.1 </span>Overview of Oracle Data Masking
               </h3>
               <div>
                  <p>Enterprises run the risk of breaching sensitive information when copying production data into non-production environments for the purposes of application development, testing, or data analysis. Oracle Data Masking helps reduce this risk by irreversibly replacing the original sensitive data with fictitious data so that production data can be shared safely with non-production users. Accessible through Oracle Enterprise Manager, Oracle Data Masking provides end-to-end secure automation for provisioning test databases from production in compliance with regulations.</p>
               </div>
               <div class="props_rev_3"><a id="GUID-2B0418D5-0D85-4F9B-9A7F-53665681BE25" name="GUID-2B0418D5-0D85-4F9B-9A7F-53665681BE25"></a><h4 id="DMKSB-GUID-2B0418D5-0D85-4F9B-9A7F-53665681BE25" class="sect4"><span class="enumeration_section">4.1.1 </span>Data Masking Concepts
                  </h4>
                  <div>
                     <p><a id="d6556e113" class="indexterm-anchor"></a><a id="d6556e117" class="indexterm-anchor"></a><a id="d6556e121" class="indexterm-anchor"></a><a id="d6556e123" class="indexterm-anchor"></a>Data masking (also known as data scrambling and data anonymization) is the process of replacing sensitive information copied from production databases to test non-production databases with realistic, but scrubbed, data based on masking rules. Data masking is ideal for virtually any situation when confidential or regulated data needs to be shared with non-production users. These users may include internal users such as application developers, or external business partners such as offshore testing companies, suppliers and customers. These non-production users need to access some of the original data, but do not need to see every column of every table, especially when the information is protected by government regulations.
                     </p>
                     <p>Data masking enables organizations to generate realistic and fully functional data with similar characteristics as the original data to replace sensitive or confidential information. This contrasts with encryption or Virtual Private Database, which simply hides data, and the original data can be retrieved with the appropriate access or key. With data masking, the original sensitive data cannot be retrieved or accessed.</p>
                     <p>Names, addresses, phone numbers, and credit card details are examples of data that require protection of the information content from inappropriate visibility. Live production database environments contain valuable and confidential data—access to this information is tightly controlled. However, each production system usually has replicated development copies, and the controls on such test environments are less stringent. This greatly increases the risks that the data might be used inappropriately. Data masking can modify sensitive database records so that they remain usable, but do not contain confidential or personally identifiable information. Yet, the masked test data resembles the original in appearance to ensure the integrity of the application.</p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-E94AE163-E65C-4C30-916D-FBB42C9D4F9A" name="GUID-E94AE163-E65C-4C30-916D-FBB42C9D4F9A"></a><h4 id="DMKSB-GUID-E94AE163-E65C-4C30-916D-FBB42C9D4F9A" class="sect4"><span class="enumeration_section">4.1.2 </span>Roles of Data Masking Users
                  </h4>
                  <div>
                     <p>The following types of users participate in the data masking process for a typical enterprise:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span>Application database administrator or application developer</span></p>
                           <p>This user is knowledgeable about the application and database objects. This user may add additional custom database objects or extensions to packaged applications, such as the Oracle E-Business suite.</p>
                        </li>
                        <li>
                           <p><span>Information security administrator</span></p>
                           <p>This user defines information security policies, enforces security best practices, and also recommends the data to be hidden and protected.</p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-237E72D8-96C2-4191-B5BA-3373E6D1FEB0" name="GUID-237E72D8-96C2-4191-B5BA-3373E6D1FEB0"></a><h4 id="DMKSB-GUID-237E72D8-96C2-4191-B5BA-3373E6D1FEB0" class="sect4"><span class="enumeration_section">4.1.3 </span>Related Oracle Security Offerings
                  </h4>
                  <div>
                     <p>Besides data masking, Oracle offers the following security products:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span>Virtual Private Database</span> or <span>Oracle Label Security</span> — Hides rows and data depending on user access grants.
                           </p>
                        </li>
                        <li>
                           <p><span>Transparent Data Encryption</span> — Hides information stored on disk using encryption. Clients see unencrypted information.
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DBMS_CRYPTO</code> — Provides server packages that enable you to encrypt user data.
                           </p>
                        </li>
                        <li>
                           <p><span>Database Vault</span> — Provides greater access controls on data.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-BCBE0613-0831-4F74-8026-AB77B8273A04" name="GUID-BCBE0613-0831-4F74-8026-AB77B8273A04"></a><h4 id="DMKSB-GUID-BCBE0613-0831-4F74-8026-AB77B8273A04" class="sect4"><span class="enumeration_section">4.1.4 </span>Agent Compatibility for Data Masking
                  </h4>
                  <div>
                     <p>Data masking supports Oracle Database 9<span class="italic">i</span> and newer releases. If you have a version prior to 11.1, you can use it by implementing the following workaround.
                     </p>
                     <p>Replace the following file...</p><pre class="oac_no_warn" dir="ltr">AGENT_HOME/sysman/admin/scripts/db/reorg/reorganize.pl
</pre><p>... with this file:</p><pre class="oac_no_warn" dir="ltr">OMS_HOME/sysman/admin/scripts/db/reorg/reorganize.pl</pre></div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-40056DA2-7316-4729-892A-C9C72F9F7A89" name="GUID-40056DA2-7316-4729-892A-C9C72F9F7A89"></a><h3 id="DMKSB-GUID-40056DA2-7316-4729-892A-C9C72F9F7A89" class="sect3"><span class="enumeration_section">4.2 </span>Format Libraries and Masking Definitions
               </h3>
               <div>
                  <p>To mask data, the Data Masking Pack provides two main features:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a id="d6556e341" class="indexterm-anchor"></a><a id="d6556e343" class="indexterm-anchor"></a><a id="d6556e347" class="indexterm-anchor"></a><span>Masking format library</span></p>
                        <p>The format library contains a collection of ready-to-use masking formats. The library consists of format routines that you can use for masking. A masking format can either be one that you create, or one from the list of Oracle-supplied default masking formats.</p>
                        <p>As a matter of best practice, organizations should create masking formats for all commonly regulated information so that the formats can be applied to the sensitive data regardless of which database the sensitive data resides in. This ensures that all sensitive data is consistently masked across the entire organization.</p>
                     </li>
                     <li>
                        <p><a id="d6556e359" class="indexterm-anchor"></a><a id="d6556e361" class="indexterm-anchor"></a><a id="d6556e365" class="indexterm-anchor"></a><span>Masking definitions</span></p>
                        <p>A masking definition defines a data masking operation to be implemented on one or more tables in a database. Masking definitions associate table columns with formats to use for masking the data. They also maintain the relationship between columns that are not formally declared in the database using related columns.</p>
                        <p>You can create a new masking definition or use an existing definition for a masking operation. To create a <a id="d6556e375" class="indexterm-anchor"></a><a id="d6556e379" class="indexterm-anchor"></a>masking definition, you specify the column of the table for which the data should be masked and the format of masked data. If the columns being masked are involved in unique, <a id="d6556e384" class="indexterm-anchor"></a><a id="d6556e386" class="indexterm-anchor"></a>primary key, or foreign key constraints, data masking generates the values so that the constraints are not violated. Masking ensures uniqueness per character using decimal arithmetic. For example, a 5-character string generates a maximum of only 99999 unique values. Similarly, a 1-character string generates a maximum of only 9 unique values.
                        </p>
                        <p>You would typically export masking definitions to files and import them on other systems. This is important when the test and production sites reside on different Oracle Management Systems or on entirely different sites.</p>
                     </li>
                  </ul>
                  <div class="infoboxnotealso" id="GUID-40056DA2-7316-4729-892A-C9C72F9F7A89__GUID-86EFD601-5DC2-463E-A572-774599094857">
                     <p class="notep1">See Also:</p>
                     <p>The online help topic "Creating a Data Masking Definition" as well as the help for each Data Masking page</p>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-72241525-5253-4183-A55F-82EDFCF24FDF" name="GUID-72241525-5253-4183-A55F-82EDFCF24FDF"></a><h3 id="DMKSB-GUID-72241525-5253-4183-A55F-82EDFCF24FDF" class="sect3"><span class="enumeration_section">4.3 </span>Recommended Data Masking Workflow
               </h3>
               <div>
                  <p>The following figure shows that the production database is cloned to a <a id="d6556e434" class="indexterm-anchor"></a><a id="d6556e436" class="indexterm-anchor"></a>staging region and then masked there. During the masking process, the staging and test areas are tightly controlled like a production site.
                  </p>
                  <div class="figure" id="GUID-72241525-5253-4183-A55F-82EDFCF24FDF__GUID-73181432-C013-47EC-96B0-AAF85A359672">
                     <p class="titleinfigure">Figure 4-1 Data Masking Workflow</p><img src="img/data_masking_workflow.png" alt="Description of Figure 4-1 follows" title="Description of Figure 4-1 follows" longdesc="img_text/data_masking_workflow.html"><br><a href="img_text/data_masking_workflow.html">Description of "Figure 4-1 Data Masking Workflow"</a></div>
                  <!-- class="figure" -->
                  <p>Data masking is an iterative and evolving process handled by the <a id="d6556e448" class="indexterm-anchor"></a><a id="d6556e450" class="indexterm-anchor"></a>security administrator and implemented by the database administrator. When you first configure data masking, try out the masking definition on a test system, then add a greater number of columns to the masking definition and test it to make sure it functions correctly and does not break any application constraints. During this process, you should exercise care when removing all imbedded references to the real data while maintaining referential integrity.
                  </p>
                  <p>After data masking is configured to your satisfaction, you can use the existing definition to repeatedly mask after cloning. The masking definition, however, would need to evolve as new schema changes require new data and columns to be masked.</p>
                  <p>After the masking process is complete, you can distribute the database for wide availability. If you need to ship the database to another third-party site, you are required to use the Data Pump Export utility, and then ship the dump file to the remote site. However, if you are retaining the masked data in-house, see <a id="d6556e459" class="indexterm-anchor"></a><span class="q">"<a href="data-masking.html#GUID-F68B3865-6DC8-45BB-890E-DE7927F9727D">Data Masking Task Sequence</a>"</span>.
                  </p>
                  <p>You can also perform inline, or at the source, data masking while creating a subset definition.</p>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="data-subsetting.html#GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89">Creating a Data Subset Definition</a></li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-F68B3865-6DC8-45BB-890E-DE7927F9727D" name="GUID-F68B3865-6DC8-45BB-890E-DE7927F9727D"></a><h3 id="DMKSB-GUID-F68B3865-6DC8-45BB-890E-DE7927F9727D" class="sect3"><span class="enumeration_section">4.4 </span>Data Masking Task Sequence
               </h3>
               <div>
                  <div class="section">
                     <p><a id="d6556e511" class="indexterm-anchor"></a>The task sequence in this section demonstrates the data masking workflow and refers you to additional information about some of the tasks in the sequence. Before reviewing this sequence, note that there are two options for completing this process:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span>Exporting/importing to another database</span></p>
                           <p>You can <a id="d6556e524" class="indexterm-anchor"></a><a id="d6556e528" class="indexterm-anchor"></a>clone the production database to a staging area, mask it, then export/ import it to another database before delivering it to in-house testers or external customers. This is the most secure approach. 
                           </p>
                        </li>
                        <li>
                           <p><span>Making the staging area the new test region </span></p>
                           <p>You can clone the production database to a mask staging area, then make the staging area the new test region. In this case, you should not grant testers <code class="codeph">SYSDBA</code> access or access to the database files. Doing so would compromise security. The masked database contains the original data in unused blocks and in the free list.   You can only purge this information by exporting/importing the data to another database.
                           </p>
                        </li>
                     </ul>
                     <p>The following basic steps guide you through the data masking process, with references to other sections for supporting information.</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Review the application database and identify the sources of sensitive information.</span></li>
                     <li class="stepexpand"><span>Define mask formats for the sensitive data. The mask formats may be simple or complex depending on the information security needs of the organization.</span></li>
                     <li class="stepexpand"><span>Create a masking definition to associate table columns and edition view objects to these mask formats. Data masking determines the database foreign key relationships and adds foreign key columns to the mask.</span></li>
                     <li class="stepexpand"><span>Save the masking definition and generate the masking script.</span></li>
                     <li class="stepexpand"><span>Verify if the masked data meets the information security requirements. Otherwise, refine the masking definition, restore the altered tables, and reapply the masking definition until the optimal set of masking definitions has been identified.</span></li>
                     <li class="stepexpand"><span>Clone the production database to a staging area, selecting the masking definition to be used after cloning. Note that you can clone using Oracle Enterprise Manager, which enables you to add masking to the Oracle Enterprise Manager clone workflow. However, if you clone outside of Oracle Enterprise Manager, you must initiate masking from Oracle Enterprise Manager after cloning is complete. The cloned database should be controlled with the same privileges as the production system, because it still contains sensitive production data.</span><div>
                           <p>After cloning, make sure you change the passwords as well as update or disable any database links, streams, or references to external data sources. Back up the cloned database, or minimally the tables that contain masked data. This can help you restore the original data if the masking definition needs to be refined further.</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>After masking, test all of your applications, reports, and business processes to ensure they are functional. If everything is working, you can export the masking definition to keep it as a back-up.</span></li>
                     <li class="stepexpand"><span>After masking the staging site, make sure to drop any tables named <code class="codeph">MGMT_DM_TT</code> before cloning to a test region. These temporary tables contain a mapping between the original sensitive column value and the mask values, and are therefore sensitive in nature.</span><div>
                           <p>During masking, Oracle Enterprise Manager automatically drops these temporary tables for you with the default "Drop temporary tables created during masking" option. However, you can preserve these temporary tables by deselecting this option. In this case, you are responsible for deleting the temporary tables before cloning to the test region.</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>After masking is complete, ensure that all tables loaded for use by the substitute column format or table column format are going to be dropped. These tables contain the mask values that table column or substitute formats will use. It is recommended that you purge this information for security reasons.</span></li>
                     <li class="stepexpand"><span>Clone the database to a test region, or use it as the new test region. When cloning the database to an external or unsecured site, you should use Export or Import. Only supply the data in the database, rather than the database files themselves.</span></li>
                     <li class="stepexpand"><span>As part of cloning production for testing, provide the masking definition to the application database administrator to use in masking the database.</span></li>
                  </ol>
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="data-masking.html#GUID-36A1BEC1-1B2E-4F74-8E0C-578C0119AF0C">Creating New Masking Formats</a></li>
                        <li><a href="data-masking.html#GUID-B836A063-AF64-49D5-87B9-E9AE516697E9">Using Oracle-supplied Predefined Masking Formats</a></li>
                        <li><a href="data-masking.html#GUID-F55AD5A1-AF1C-44F0-AF38-5FCE35D86B10">Masking with an Application Data Model and Workloads</a></li>
                        <li><a href="data-masking.html#GUID-EA648FED-030D-480E-A206-ACABEFA1F840">Cloning the Production Database</a></li>
                        <li><a href="data-masking.html#GUID-E850416A-8D19-4711-B5B2-0BC9A24C2ADC">Deterministic Masking Using the Substitute Format</a></li>
                     </ul>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-8F2A793E-ACF7-4D1F-A759-C100EE8E10CF" name="GUID-8F2A793E-ACF7-4D1F-A759-C100EE8E10CF"></a><h3 id="DMKSB-GUID-8F2A793E-ACF7-4D1F-A759-C100EE8E10CF" class="sect3"><span class="enumeration_section">4.5 </span>Defining Masking Formats
               </h3>
               <div>
                  <p><a id="d6556e644" class="indexterm-anchor"></a>A masking definition requires one or more masking formats for any columns included in the masking definition. When <a id="d6556e649" class="indexterm-anchor"></a>adding columns to a masking definition, you can either create masking formats manually or import them from the format library. It is often more efficient to work with masking formats from the format library.
                  </p>
               </div>
               <div class="props_rev_3"><a id="GUID-36A1BEC1-1B2E-4F74-8E0C-578C0119AF0C" name="GUID-36A1BEC1-1B2E-4F74-8E0C-578C0119AF0C"></a><h4 id="DMKSB-GUID-36A1BEC1-1B2E-4F74-8E0C-578C0119AF0C" class="sect4"><span class="enumeration_section">4.5.1 </span>Creating New Masking Formats
                  </h4>
                  <div>
                     <div class="section">
                        <p>This section describes how to create new masking formats using Enterprise Manager.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To create a masking format in the format library:</p>
                        <ol>
                           <li>
                              <p>From the Enterprise menu, select <span class="bold">Quality Management</span>, then <span class="bold">Data Masking Formats</span>. Alternatively, if you are in the Database home page, select <span class="bold">Data Masking Format Library</span> from the Schema menu.
                              </p>
                              <p>The Format Library appears with predefined formats that Oracle Enterprise Manager provides.</p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Create</span>.
                              </p>
                              <p>The Create Format page appears, where you can define a masking format.</p>
                              <div class="infoboxnotealso" id="GUID-36A1BEC1-1B2E-4F74-8E0C-578C0119AF0C__GUID-DCACCA36-6110-40B5-A183-07A582133E4B">
                                 <p class="notep1">See Also:</p>
                                 <p>The online help for information on page user controls</p>
                              </div>
                           </li>
                           <li>
                              <p>Provide a required name for the new format, select a format entry type from the <span class="bold">Add</span> list, then click <span class="bold">Go</span>.
                              </p>
                              <p>A page appears that enables you to provide input for the format entry you have selected. For instance, if you select Array List, the subsequent page enables you to enter a list of values, such as New York, New Jersey, and New Hampshire.</p>
                           </li>
                           <li>
                              <p>Continue adding additional format entries as needed.</p>
                           </li>
                           <li>
                              <p>When done, provide an optional user-defined or post-processing function, then click <span class="bold">OK</span> to save the masking format.
                              </p>
                              <p>The Format Library page reappears with your newly created format displayed in the Format Library table. You can use this format later to mask a column of the same sensitive type.</p>
                              <div class="infoboxnotealso" id="GUID-36A1BEC1-1B2E-4F74-8E0C-578C0119AF0C__GUID-72A776F7-961F-48AF-B6FE-095CCCC4423C">
                                 <p class="notep1">See Also:</p>
                                 <p>The online help for information on the Format Library and Create Format pages</p>
                              </div>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
                  <div>
                     <div class="relinfo">
                        <p><strong>Related Topics</strong></p>
                        <ul>
                           <li><a href="data-masking.html#GUID-70EE60DC-E2EE-4067-B0FA-19028E12614B">Providing User-Defined and Post-Processing Functions</a></li>
                        </ul>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-70EE60DC-E2EE-4067-B0FA-19028E12614B" name="GUID-70EE60DC-E2EE-4067-B0FA-19028E12614B"></a><h5 id="DMKSB-GUID-70EE60DC-E2EE-4067-B0FA-19028E12614B" class="sect5"><span class="enumeration_section">4.5.1.1 </span>Providing User-Defined and Post-Processing Functions
                     </h5>
                     <div>
                        <p></p>
                        <div class="section">
                           <p>If desired, you can provide user-defined and post-processing functions on the Create Format page. A user-defined choice is available in the Add list, and a post-processing function field is available at the bottom of the page.</p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span>User-defined functions</span></p>
                                 <p>To provide a user-defined function, select <span class="bold">User Defined Function</span> from the Add list, then click <span class="bold">Go</span> to access the input fields. 
                                 </p>
                                 <p>A user-defined function passes in the original value as input, and returns a mask value. The data type and uniqueness of the output values must be compatible with the original output values. Otherwise, a failure occurs when the job runs. Combinable, a user-defined function is a PL/SQL function that can be invoked in a <code class="codeph">SELECT</code> statement. Its signature is returned as:
                                 </p><pre class="oac_no_warn" dir="ltr">Function udf_func (rowid varchar2, column_name varchar2, original_value varchar2) return varchar2;
</pre><ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">rowid</code> is the min (rowid) of the rows that contain the value <code class="codeph">original_value</code> 3rd argument.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">column_name</code> is the name of the column being masked.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">original_value</code> is the value being masked.
                                       </p>
                                    </li>
                                 </ul>
                                 <p>That is, it accepts the original value as an input string, and returns the mask value.</p>
                                 <p>Both the input and output values are varchar2. For instance, a user-defined function to mask a number could receive 100 as input, the string representation of the number 100, and return 99, the string representation of the number 99. Values are cast appropriately when inserting to the table. If the value is not castable, masking fails.</p>
                              </li>
                              <li>
                                 <p><a id="d6556e852" class="indexterm-anchor"></a><a id="d6556e856" class="indexterm-anchor"></a><span>Post-processing functions</span></p>
                                 <p>To provide a post-processing function, enter it in the <span class="bold">Post Processing Function</span> field.
                                 </p>
                                 <p>A post-processing function has the same signature as a user-defined function, but passes in the mask value the masking engine generates, and returns the mask value that should be used for masking, as shown in the following example:</p><pre class="oac_no_warn" dir="ltr">Function post_proc_udf_func (rowid varchar2, column_name varchar2, mask_value varchar2) return varchar2;
</pre><ul style="list-style-type: disc;">
                                    <li>
                                       <p><code class="codeph">rowid</code> is the min (rowid) of the rows that contain the value <code class="codeph">mask_value</code>.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">column_name</code> is the name of the column being masked.
                                       </p>
                                    </li>
                                    <li>
                                       <p><code class="codeph">mask_value</code> is the value being masked.
                                       </p>
                                    </li>
                                 </ul>
                              </li>
                           </ul>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-117797C7-77BE-49C0-B536-49D20A85A9B5" name="GUID-117797C7-77BE-49C0-B536-49D20A85A9B5"></a><h5 id="DMKSB-GUID-117797C7-77BE-49C0-B536-49D20A85A9B5" class="sect5"><span class="enumeration_section">4.5.1.2 </span>Using Masking Format Templates
                     </h5>
                     <div>
                        <p><a id="d6556e925" class="indexterm-anchor"></a>After you have created at least one format, you can use the format definition as a template in the Create Format page, where you can implement most of the format using a different name and changing the entries as needed, rather than needing to create a new format from scratch.
                        </p>
                        <p>To create a new format similar to an existing format, select a format on the Format Library page and click <span class="bold">Create Like</span>. The masking format you select can either be one you have previously defined yourself, or one from the list of out-of-box masking formats. You can use these generic masking format definitions for different applications.
                        </p>
                        <p>For instructional details about the various Oracle-supplied predefined masking format definitions and how to modify them to suit your needs, see <span class="q">"<a href="data-masking.html#GUID-B836A063-AF64-49D5-87B9-E9AE516697E9">Using Oracle-supplied Predefined Masking Formats</a>"</span>.
                        </p>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-B836A063-AF64-49D5-87B9-E9AE516697E9" name="GUID-B836A063-AF64-49D5-87B9-E9AE516697E9"></a><h4 id="DMKSB-GUID-B836A063-AF64-49D5-87B9-E9AE516697E9" class="sect4"><span class="enumeration_section">4.5.2 </span>Using Oracle-supplied Predefined Masking Formats
                  </h4>
                  <div>
                     <p><a id="d6556e978" class="indexterm-anchor"></a><a id="d6556e982" class="indexterm-anchor"></a>Enterprise Manager provides several out-of-box predefined formats. All predefined formats and built-in formats are random. The following sections discuss the various Oracle-supplied format definitions and how to modify them to suit your needs:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="data-masking.html#GUID-3726146E-7E7D-4835-A6C4-F8F150D7026C">Patterns of Format Definitions</a></p>
                        </li>
                        <li>
                           <p><a href="data-masking.html#GUID-FDC44167-B874-4DFF-A245-1485F352F040">Category Definitions</a></p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-B836A063-AF64-49D5-87B9-E9AE516697E9__GUID-C728C113-5924-4924-8DAF-533120D7A68A">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="data-masking.html#GUID-49ABFF59-1776-4798-A866-CA73D5103045">Installing the DM_FMTLIB Package</a>"</span> for information on installing the DM_FMTLIB package so that you can use the predefined masking formats
                        </p>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-3726146E-7E7D-4835-A6C4-F8F150D7026C" name="GUID-3726146E-7E7D-4835-A6C4-F8F150D7026C"></a><h5 id="DMKSB-GUID-3726146E-7E7D-4835-A6C4-F8F150D7026C" class="sect5"><span class="enumeration_section">4.5.2.1 </span>Patterns of Format Definitions
                     </h5>
                     <div>
                        <p><a id="d6556e1041" class="indexterm-anchor"></a>All of the format definitions adhere to these typical patterns:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Generate a random number or random digits.</p>
                           </li>
                           <li>
                              <p>Perform post-processing on the above-generated value to ensure that the final result is a valid, realistic value.</p>
                           </li>
                        </ul>
                        <p>For example, a valid credit card number must pass Luhn's check. That is, the last digit of any credit card number is a checksum digit, which is always computed. Also, the first few digits indicate the card type (MasterCard, Amex, Visa, and so forth). Consequently, the format definition of a credit card would be as follows:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>Generate random and unique 10-digit numbers.</p>
                           </li>
                           <li>
                              <p>Using a post-processing function, transform the values above to a proper credit card number by adding well known card type prefixes and computing the last digit.</p>
                           </li>
                        </ul>
                        <p>This format is capable of generating 10 billion unique credit card numbers.</p>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-FDC44167-B874-4DFF-A245-1485F352F040" name="GUID-FDC44167-B874-4DFF-A245-1485F352F040"></a><h5 id="DMKSB-GUID-FDC44167-B874-4DFF-A245-1485F352F040" class="sect5"><span class="enumeration_section">4.5.2.2 </span>Category Definitions
                     </h5>
                     <div>
                        <p>The following sections discuss different categories of these definitions:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="data-masking.html#GUID-C1DD16CA-AF12-4893-A5DD-1517EBFB797D">Credit Card Numbers</a></p>
                           </li>
                           <li>
                              <p><a href="data-masking.html#GUID-D44AA0F1-6835-47BB-AB3C-06B3B3315B78">United States Social Security Numbers</a></p>
                           </li>
                           <li>
                              <p><a href="data-masking.html#GUID-7F79D612-1E07-41E2-A0E8-D08C4FD06F0C">ISBN Numbers</a></p>
                           </li>
                           <li>
                              <p><a href="data-masking.html#GUID-AB8A5AA9-7498-4882-8207-19B3109621CB">UPC Numbers</a></p>
                           </li>
                           <li>
                              <p><a href="data-masking.html#GUID-AFEB1AAB-5CE6-418D-9540-178484CF10FD">Canadian Social Insurance Numbers</a></p>
                           </li>
                           <li>
                              <p><a href="data-masking.html#GUID-A57ACA2A-68D6-4386-9270-67D06C867D17">North American Phone Numbers</a></p>
                           </li>
                           <li>
                              <p><a href="data-masking.html#GUID-BFE295EB-6911-46CF-AAF3-FFB5F02D363F">UK National Insurance Numbers </a></p>
                           </li>
                           <li>
                              <p><a href="data-masking.html#GUID-FFB923DC-685D-4A8F-8741-E5F66A95352E">Auto Mask</a></p>
                           </li>
                        </ul>
                        <p>By default, these mask formats are also available in different format styles, such as a hyphen ( - ) format. If needed, you can modify the format style.</p>
                     </div>
                     <div class="props_rev_3"><a id="GUID-C1DD16CA-AF12-4893-A5DD-1517EBFB797D" name="GUID-C1DD16CA-AF12-4893-A5DD-1517EBFB797D"></a><h6 id="DMKSB-GUID-C1DD16CA-AF12-4893-A5DD-1517EBFB797D" class="sect6"><span class="enumeration_section">4.5.2.2.1 </span>Credit Card Numbers
                        </h6>
                        <div>
                           <p></p>
                           <p><a id="d6556e1181" class="indexterm-anchor"></a>Out of the box, the format library provides many different formats for credit cards. The credit card numbers generated by these formats pass the standard credit card validation tests by the applications, thereby making them appear like valid credit card numbers.
                           </p>
                           <p>Some of the credit card formats you can use include:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>MasterCard numbers</p>
                              </li>
                              <li>
                                 <p>Visa card numbers</p>
                              </li>
                              <li>
                                 <p>American Express card numbers</p>
                              </li>
                              <li>
                                 <p>Discover Card numbers</p>
                              </li>
                              <li>
                                 <p>Any credit card number (credit card numbers belong to all types of cards)</p>
                              </li>
                           </ul>
                           <p>You may want to use different styles for storing credit card numbers, such as:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Pure numbers</p>
                              </li>
                              <li>
                                 <p>'Space' for every four digits</p>
                              </li>
                              <li>
                                 <p>'Hyphen' ( - ) for every four digits, and so forth</p>
                              </li>
                           </ul>
                           <p>To implement the masked values in a certain format style, you can set the <code class="codeph">DM_CC_FORMAT</code> variable of the <code class="codeph">DM_FMTLIB</code> package. To install the package, see <span class="q">"<a href="data-masking.html#GUID-49ABFF59-1776-4798-A866-CA73D5103045">Installing the DM_FMTLIB Package</a>"</span>.
                           </p>
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-D44AA0F1-6835-47BB-AB3C-06B3B3315B78" name="GUID-D44AA0F1-6835-47BB-AB3C-06B3B3315B78"></a><h6 id="DMKSB-GUID-D44AA0F1-6835-47BB-AB3C-06B3B3315B78" class="sect6"><span class="enumeration_section">4.5.2.2.2 </span>United States Social Security Numbers
                        </h6>
                        <div>
                           <p><a id="d6556e1265" class="indexterm-anchor"></a>Out of the box, you can generate valid U.S. Social Security (SSN) numbers. These SSNs pass the normal application tests of a valid SSN.
                           </p>
                           <p>You can affect the format style by setting the <code class="codeph">DM_SSN_FORMAT</code> variable of the <code class="codeph">DM_FMTLIB</code> package. For example, if you set this variable to ‘-', the typical social security number would appear as ‘123-45-6789'.
                           </p>
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-7F79D612-1E07-41E2-A0E8-D08C4FD06F0C" name="GUID-7F79D612-1E07-41E2-A0E8-D08C4FD06F0C"></a><h6 id="DMKSB-GUID-7F79D612-1E07-41E2-A0E8-D08C4FD06F0C" class="sect6"><span class="enumeration_section">4.5.2.2.3 </span>ISBN Numbers
                        </h6>
                        <div>
                           <p><a id="d6556e1315" class="indexterm-anchor"></a>Using the format library, you can generate either 10-digit or 13-digit ISBN numbers. These numbers adhere to standard ISBN number validation tests. All of these ISBN numbers are random in nature. Similar to other format definitions, you can affect the "style" of the ISBN format by setting values to <code class="codeph">DM_ISBN_FORMAT</code>.
                           </p>
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-AB8A5AA9-7498-4882-8207-19B3109621CB" name="GUID-AB8A5AA9-7498-4882-8207-19B3109621CB"></a><h6 id="DMKSB-GUID-AB8A5AA9-7498-4882-8207-19B3109621CB" class="sect6"><span class="enumeration_section">4.5.2.2.4 </span>UPC Numbers
                        </h6>
                        <div>
                           <p><a id="d6556e1359" class="indexterm-anchor"></a>Using the format library, you can generate valid UPC numbers. They adhere to standard tests for valid UPC numbers. You can affect the formatting style by setting the <code class="codeph">DM_UPC_FORMAT</code> value of the <code class="codeph">DM_FMTLIB</code> package.
                           </p>
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-AFEB1AAB-5CE6-418D-9540-178484CF10FD" name="GUID-AFEB1AAB-5CE6-418D-9540-178484CF10FD"></a><h6 id="DMKSB-GUID-AFEB1AAB-5CE6-418D-9540-178484CF10FD" class="sect6"><span class="enumeration_section">4.5.2.2.5 </span>Canadian Social Insurance Numbers
                        </h6>
                        <div>
                           <p><a id="d6556e1406" class="indexterm-anchor"></a>Using the format library, you can generate valid Canadian Social Insurance Numbers (SINs). These numbers adhere to standard tests of Canadian SINs. You can affect the formatting style by setting the <code class="codeph">DM_CN_SIN_FORMAT</code> value of the <code class="codeph">DM_FMTLIB</code> package.
                           </p>
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-A57ACA2A-68D6-4386-9270-67D06C867D17" name="GUID-A57ACA2A-68D6-4386-9270-67D06C867D17"></a><h6 id="DMKSB-GUID-A57ACA2A-68D6-4386-9270-67D06C867D17" class="sect6"><span class="enumeration_section">4.5.2.2.6 </span>North American Phone Numbers
                        </h6>
                        <div>
                           <p><a id="d6556e1454" class="indexterm-anchor"></a>Out of the box, the format library provides various possible U.S. and Canadian phone numbers. These are valid, realistic looking numbers that can pass standard phone number validation tests employed by applications. You can generate the following types of numbers:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Any North American phone numbers</p>
                              </li>
                              <li>
                                 <p>Any Canadian phone number</p>
                              </li>
                              <li>
                                 <p>Any U.S.A. phone number</p>
                              </li>
                           </ul>
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-BFE295EB-6911-46CF-AAF3-FFB5F02D363F" name="GUID-BFE295EB-6911-46CF-AAF3-FFB5F02D363F"></a><h6 id="DMKSB-GUID-BFE295EB-6911-46CF-AAF3-FFB5F02D363F" class="sect6"><span class="enumeration_section">4.5.2.2.7 </span>UK National Insurance Numbers 
                        </h6>
                        <div>
                           <p><a id="d6556e1505" class="indexterm-anchor"></a>Using the format library, you can generate valid unique random UK National Insurance Numbers (NINs). These numbers adhere to standard tests of UK NINs. A typical national insurance number would appear as 'GR 12 56 34 RS'.
                           </p>
                        </div>
                     </div>
                     <div class="props_rev_3"><a id="GUID-FFB923DC-685D-4A8F-8741-E5F66A95352E" name="GUID-FFB923DC-685D-4A8F-8741-E5F66A95352E"></a><h6 id="DMKSB-GUID-FFB923DC-685D-4A8F-8741-E5F66A95352E" class="sect6"><span class="enumeration_section">4.5.2.2.8 </span>Auto Mask
                        </h6>
                        <div>
                           <p><a id="d6556e1546" class="indexterm-anchor"></a>This format scrambles characters and numbers into masked characters and numbers and while retaining the format and length of the data, including special characters; for example, 'ABCD_343-ddg' masked as 'FHDT_657-tte'.
                           </p>
                        </div>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-49ABFF59-1776-4798-A866-CA73D5103045" name="GUID-49ABFF59-1776-4798-A866-CA73D5103045"></a><h5 id="DMKSB-GUID-49ABFF59-1776-4798-A866-CA73D5103045" class="sect5"><span class="enumeration_section">4.5.2.3 </span>Installing the DM_FMTLIB Package
                     </h5>
                     <div>
                        <div class="section">
                           <p><a id="d6556e1589" class="indexterm-anchor"></a>The predefined masking formats use functions defined in the <code class="codeph">DM_FMTLIB</code> package. This package is automatically installed in the <code class="codeph">DBSNMP</code> schema of your Enterprise Manager repository database. To use the predefined masking formats on a target database (other than the repository database), you must manually install the <code class="codeph">DM_FMTLIB</code> package on that database.
                           </p>
                        </div>
                        <!-- class="section" -->
                        <div class="section">
                           <p class="subhead3">To install the DM_FMTLIB package:</p>
                           <ol>
                              <li>
                                 <p>Locate the following scripts in your Enterprise Manager installation: </p><pre class="oac_no_warn" dir="ltr">$PLUGIN_HOME/sql/db/latest/masking/dm_fmtlib_pkgdef.sql
$PLUGIN_HOME/sql/db/latest/masking/dm_fmtlib_pkgbody.sql
</pre><p>Where PLUGIN_HOME can be any of the locations returned by the following SQL SELECT statement, executed as SYSMAN:</p><pre class="oac_no_warn" dir="ltr">select PLUGIN_HOME from gc_current_deployed_plugin where plugin_id='oracle.sysman.db' and destination_type='OMS'; 
</pre></li>
                              <li>
                                 <p>Copy these scripts to a directory in your target database installation and execute them using SQL*Plus, connected as a user that can create packages in the DBSNMP schema.</p>
                                 <p>You can now use the predefined masking formats in your masking definitions. </p>
                              </li>
                              <li>
                                 <p>Select and import any predefined masking format into a masking definition by clicking the <span class="bold">Import Format</span> button on the Define Column Mask page.
                                 </p>
                              </li>
                           </ol>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-77E7E40E-75A9-4CE8-8E88-F375927DD575" name="GUID-77E7E40E-75A9-4CE8-8E88-F375927DD575"></a><h4 id="DMKSB-GUID-77E7E40E-75A9-4CE8-8E88-F375927DD575" class="sect4"><span class="enumeration_section">4.5.3 </span>Providing a Masking Format to Define a Column
                  </h4>
                  <div>
                     <p>When you create a masking definition (<span class="q">"<a href="data-masking.html#GUID-F55AD5A1-AF1C-44F0-AF38-5FCE35D86B10">Masking with an Application Data Model and Workloads</a>"</span>), you will be either importing a format or selecting one from the available types in the Define Column Mask page. <a id="d6556e1669" class="indexterm-anchor"></a><a id="d6556e1673" class="indexterm-anchor"></a>Format entry options are as follows:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><span class="bold">Array List</span></p>
                           <p>Accepts a list of values as input and maps each value in the list to a value in the input column. The number of values in the list should be greater than or equal to the number of distinct values in the masked column. The values in the user-provided list are ordered randomly before mapping them to the original column values. For example, if the original column contains values [10,20,30,40,50] and the Array List specified by the user is [99,100,101,102,103], the first masking run could produce the mapping [10,101], [20,103], [30,100], [40,99], [50,102] and a different masking run can produce [10,100], [20,99], [30,101], [40,102], [50,103].</p>
                           <p>A mapping table is created. The CTAS that creates the mapping table queries from:</p>
                           <ol>
                              <li>
                                 <p>	The original table to fetch the column values being masked and a row number for each column value. The row number is derived from the Oracle-supplied ROW_NUMBER function.</p>
                              </li>
                              <li>
                                 <p>The user-passed list of values — values in the user-passed array list are converted into a table-like record set using the SQL TABLE function. A row number is also retrieved corresponding to each value in the record set. The row number is derived from the ROWNUM pseudo column. The values in the record set are randomly ordered using <span class="apiname">DBMS_RANDOM.VALUE</span> function.
                                 </p>
                              </li>
                              <li>
                                 <p>The mapping table CTAS then joins the row numbers in both sub-queries to map the original value (from sub-query in step 1 above) and a value from the user-list (sub-query in step 2 above). Multiple executions of the CTAS will create a mapping table with different original-masked value mappings because of the random ordering of the user list in step 2. </p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p><span class="bold">Delete</span></p>
                           <p>Deletes a row based on a condition. If the condition matches, then the row is deleted on the target.  A mapping table is created. The “DELETE_VAL” column in the mapping table is set to 1 for rows that are candidates to be deleted. For example, we are masking the SALARY column and the masking definition has conditions on the EMPID column and formats defined as: </p><pre class="pre codeblock"><code>EMPID &lt; 100 
      DELETE 
EMPID &lt; 200
	    RANDOM NUMBER [Start Value:1 End Value:100]
DEFAULT
	    PRESERVE
</code></pre><p>The mapping table will have the DELETE_VAL column set to 1 for SALARY rows with EMPID &lt; 100. DELETE_VAL for all other rows is set to 0. The final masking CTAS SQL which joins the original table and the mapping table to create the masked table filters out rows with DELETE_VAL set to 1. Therefore, the rows in the original table that match the join condition are effectively “deleted”.</p>
                        </li>
                        <li>
                           <p><span class="bold">Encrypt</span></p>
                           <p>The data in the table is fixed and does not change. Encrypts a column based on a regular expression. The column values in all the rows must match the regular expression. For a given value, the format always generates the same masked value. This format implements Format Preserving Encryption (FPE) by invoking dbms_crypto using 3DES with multiple cycles. The format is not trivial and involves significant processing. The function used is:</p><span class="apiname"> function encrypt( orig_value varchar2, fmt mgmt_dm_formatmap,                   max_value number,inpsd number) return varchar2;</span><span class="apiname">                   max_value number,inpsd number) return varchar2;</span><p><code class="codeph">orig_value</code> is the original value of the column before it was masked. <code class="codeph">fmt </code> and <code class="codeph">max_value</code> are specific to the FPE and are known at the time of generating the script. <code class="codeph">inpsd</code> is the input seed the user specifies when executing the generated script. This value is not known during script generation time. When the SQL invoking this function is executed during incremental masking, the seed value is required. One option is to persist it in a table on the target when the user executes the masking script. The PL/SQL code executed during replication will look like this:
                           </p>
                           <ol>
                              <li>
                                 <p>Fetch the seed from the table.</p>
                              </li>
                              <li>
                                 <p>Invoke the SQL query that has a call to encrypt (and possibly other formats). Pass the replicated column value and the seed obtained from step 1 to the procedure. The query will return the masked value.</p>
                              </li>
                           </ol>
                           <p>Encrypt creates a mapping table when there is a combination of formats under conditions. No mapping table is created when Encrypt is the only format available for the column, since the PL/SQL code implementing encrypt is invoked inline from the final masking SQL.</p>
                        </li>
                        <li>
                           <p><span class="bold">Fixed Number</span></p>
                           <p>     This format does not use a lookup or a mapping table. It assigns a fixed number value to a string/number column.</p>
                           <p>The type of column applicable to this entry is a <code class="codeph">NUMBER</code> column or a <code class="codeph">STRING</code> column. For example, if you mask a column that has a social security number, one of the entries can be <span>Fixed Number 900</span>. This format is combinable.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Fixed String</span></p>
                           <p>This format does not use a lookup or a mapping table. It assigns a fixed string value to a string column. </p>
                           <p>The type of column applicable to this entry is a <code class="codeph">STRING</code> column. For example, if you mask a column that has a License Plate Number, one of the entries can be Fixed String CA. This format is combinable.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Null Value</span></p>
                           <p>Masks the column with a value of NULL. It does not use a lookup or a mapping table.</p>
                           <div class="infoboxnote" id="GUID-77E7E40E-75A9-4CE8-8E88-F375927DD575__GUID-50837726-064C-440B-B82E-4EC3F91C6982">
                              <p class="notep1">Note:</p>
                              <p>Fixed number/string and null value formats are implemented through mapping tables when a column is masked through multiple formats. For example, mapping table is used when SALARY is masked with fixed number for EMPID&lt;100 and with random numbers for EMPID&gt;100. Similar to the encrypt format, no mapping table is created when the column does not have a combination of formats. In the example, no mapping table is created when only fixed number is used to mask SALARY for all EMPID values. In this case, the formats are implemented inline in the final masking SQL.</p>
                           </div>
                        </li>
                        <li>
                           <p><span class="bold">Post-Processing Function</span></p>
                           <p>The format allows users to use a custom function to process column values after they are masked using standard data masking formats. For example, the SALARY column can be masked with a SQL expression first, and a post processing function can be applied on the masked values to add a currency symbol, like ‘$’. The function has a fixed signature: </p>
                           <p><span class="apiname">function post_proc_func(rowid varchar2, column_name varchar2, mask_value varchar2) returns varchar2;</span></p>
                           <p>The <span class="bold">ROWID</span> input allows a user to fetch column values from the masked table. The function could these values to mask the input column value, basically to transform the column further after a standard format is applied on the column. This format creates a mapping table. The post processing function gets invoked as part of the mapping table CTAS SQL. The input to the<span class="bold"> mask_value</span> argument of the function is the masked value of the original column. For example, say we are masking the <span class="bold">SALARY</span> column and the mask definition has conditions on the EMPID column and formats are defined this way: 
                           </p><pre class="pre codeblock"><code>EMPID &lt; 100 
      RANDOM NUMBERS [START:100000 END: 10000000]
      POST PROCESSING FUNCTION ppf 
EMPID &lt; 200
	    FIXED NUMBER 100000
DEFAULT
	    PRESERVE
</code></pre></li>
                        <li>
                           <p><span class="bold">Preserve Original Data</span></p>
                           <p>Preserves the original column value. Used in conditional masking with a combination of other formats where only a subset of values needs to be masked based on a condition. </p>
                        </li>
                        <li>
                           <p><span class="bold">Random Dates</span></p>
                           <p>The format creates a mapping table. The mapping table CTAS contains code to generate random dates within a user specified date range. A random date is generated using the following logic:</p><pre class="pre codeblock"><code>TO_DATE(start_date','YYYY-DD-MM HH24:MI:SS') + 
mask_util.genrnd(0, &lt;#of days between the specified date range&gt;)</code></pre></li>
                        <li>
                           <p><span class="bold">Random Decimal Numbers</span></p>
                           <p>If used as part of a mixed random string, these have limited usage for generating unique values. This masking format generates unique values within the specified range. For example, a starting value of 5.5 and ending value of 9.99 generates a decimal number ranging from 5.5 to 9.99, both inclusive. This masking format is combinable.</p>
                        </li>
                        <li>
                           <p><span class="bold">Random Digits</span></p>
                           <p>This format generates unique values within the specified range. For example, for a random digit with a length of [5,5], an integer between [0, 99999] is randomly generated, left padded with '0's to satisfy the length and uniqueness requirement. This is a complementary type of random number, which will not be padded. When using random digits, the random digit pads to the appropriate length in a string. It does not pad when used for a number column. This format is combinable.</p>
                           <p>Data masking ensures that the generated values are unique, but if you do not specify enough digits, you could run out of unique values in that range.</p>
                        </li>
                        <li>
                           <p><span class="bold">Random Numbers</span></p>
                           <p>If used as part of a mixed random string, these have limited usage for generating unique values. This format generates unique values within the specified range. For example, a starting value of 100 and ending value of 200 generates an integer number ranging from 100 to 200, both inclusive. Note that Oracle Enterprise Manager release 10.2.0.4.0 does not support float numbers. This format is combinable.</p>
                        </li>
                        <li>
                           <p><span class="bold">Random Strings</span></p>
                           <p>This format generates unique values within the specified range. For example, a starting length of 2 and ending length of 6 generates a random string of 2 - 6 characters in length. This format is combinable.</p>
                        </li>
                        <li>
                           <p><span class="bold">Regular Expression</span></p>
                           <p>The format uses a lookup table. No mapping table is created. The PL/SQL function that implements the format is invoked directly from the final CTAS which creates the masked table. The lookup table has two columns to store the regular expression and the replacement value specified by the user. The <span class="apiname">SQL REGEXP_REPLACE</span> function is used to implement this format. 
                           </p>
                           <p>The function has the signature:  </p>
                           <p><span class="apiname">regexp_replace(column_value, regex, replacement_val);</span></p>
                           <p>For example, phone numbers in the format<code class="codeph"> nnn.nnn.nnnn</code> can be masked using a regex <code class="codeph">[1-9]{3}[.][0-9]{3}[.][0-9]{4}</code> with a replacement value <code class="codeph">***.***.****</code>. The format invokes the<span class="apiname"> regexp_replace</span> for each regexp-replacement value pair. If the phone number column was masked using regular expression:
                           </p><pre class="pre codeblock"><code>EMPID &lt; 100
  Regular Expression  	Regex: [1-9]{3}[.][0-9]{3}[.][0-9]{4}  Replacement Value: 999.444.555
  Regular Expression  	Regex: [9]{3}[.][4]{3}[.][5]{4} 	  Replacement Value: ***.***.***
</code></pre><p>Each column value matching the first regular expression is first replaced with <code class="codeph">999.444.555</code>, this value then matches the second regular expression and is replaced with<code class="codeph"> ***.***.***</code>. The example is not a real world use case. The behavior probably is a side effect of how the format is implemented, the real use case of specifying multiple regular expression formats to mask a column is to handle cases when the data in the column could match multiple regular expressions. For example:
                           </p><pre class="pre codeblock"><code>EMPID &lt; 100
  Regular Expression  	Regex: [1-9]{3}[.][0-9]{3}[.][0-9]{4}  Replacement Value: ***.***.****
  Regular Expression  	Regex: [1-9]{3}[.][0-9]{3}[.][0-9]{3}  Replacement Value: ***.***.***
</code></pre><p> can be used to mask column values that store 10 digit - nnn.nnn.nnnn - or 9 digit - nnn.nnn.nnn - phone numbers.</p>
                        </li>
                        <li>
                           <p><span class="bold">Shuffle</span></p>
                           <p>This format does not use a lookup or a mapping table. The final CTAS which creates the mapping table  includes a sub query to order the column contents randomly using the <span class="apiname">DBMS_RANDOM.VALUE</span> function. If shuffle is used with a grouping column, the <code class="codeph">PARTITION</code> clause is used to partition by the grouping column and the column is ordered randomly within each partition. The implementation is similar to that of Array List and Table Column. The random ordering for the shuffle format occurs on the column being “shuffle masked”, whereas in Array List, it is on the user-passed list, and in Table Column, the ordering is on the user-specified column.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Substitute</span></p>
                           <p>The format creates a mapping table. It uses a user specified “substitution” table as a source for masked values. The format uses the Oracle supplied hash based partitioning function <span class="apiname">ORA_HASH</span>  to map a column value to its mask value in a lookup (substitution) table. Processing involves querying the substitution table to get a count of distinct values in the mask column. This count &#x2013; say <code class="codeph">n</code> - is then used as the <code class="codeph">max_bucket</code> parameter of <span class="apiname">ORA_HASH</span> to hash the original column values into n buckets. For example, if we are masking <code class="codeph">EMPLOYEE.SALARY</code> and using <code class="codeph">SUBST.SUB_COL</code> column as the substitution column, we first get the count of distinct values in <code class="codeph">SUB_COL</code>. The mapping table CTAS then queries:
                           </p>
                           <ol>
                              <li>
                                 <p>The original column, <code class="codeph">EMPLOYEE.SALARY </code></p>
                              </li>
                              <li>
                                 <p>The user provided substitution table to fetch all the distinct values in <code class="codeph">SUBST.SUB_COL</code> and also fetches the <code class="codeph">ROWNUM</code> associated with each row
                                 </p>
                              </li>
                           </ol>
                           <p>The CTAS SQL then joins 1 and 2 using <span class="apiname">ORA_HASH</span> and equating its output to the <code class="codeph">ROWNUM</code> from step 2. The <code class="codeph">SELECT</code> part of the CTAS SQL is listed below. <code class="codeph">max_bckt</code> is the count of distinct values in the substitution column <code class="codeph">SUBST.SUB_COL</code>:
                           </p><pre class="pre codeblock"><code>select s.orig_val,
       a0.new_val
from ( select orig_val
       from (select "SALARY" orig_val
        	 from "TESTU"."EMPLOYEE") 
       group by orig_val) s,
     (select rownum rn, 
             SUB_COL new_val 
      from (select distinct SUB_COL
            from TESTU.SUBST
            order by SUB_COL)) a0
 where ora_hash(s.orig_val, max_bckt, seed)+1 = a0.rn
</code></pre></li>
                        <li>
                           <p><span class="bold">SQL Expression</span></p>
                           <p>The format does not create a mapping table. It allows a user to use a SQL Expression for masking a column. Data masking uses this expression to generate masked values to replace the original values. The expression is invoked directly from the masking CTAS SQL. The SQL Expression can consist of one or more values, operators, and SQL functions that evaluates to a value. It can also contain substitution columns (columns from the same table as the masked column). Some examples of valid expressions:</p><pre class="pre codeblock"><code>1.	dbms_random.string('u', 8) || '@company.com'
2.	%first_name% || '.' || %last_name% || '@company.com'
3.	dbms_lob.empty_clob()
4.	custom_mask_clob(%CLOB_COL%)
5.	(case when %PARTY_TYPE%='PERSON' then %PERSON_FIRST_NAME%|| ' ' ||%PERSON_LAST_NAME% else (select dbms_random.string('U', 10) from dual) end)
6.	select MASK_ZIPCODE from data_mask.DATA_MASK_ADDR where ADDR_SEQ = ora_hash( %ZIPCODE% , 1000, 1234)</code></pre></li>
                        <li>
                           <p><span class="bold">Substring</span></p>
                           <p> The format creates a mapping table. The mapping table CTAS invokes the Oracle SUBSTR function on the input column. The format accepts a start position and length as input, extracts that data from the input column using <code class="codeph">SUBSTR</code>, and uses that as a mask value. 
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Table Column</span></p>
                           <p>The format creates a mapping table. The format maps original column values to column values in a user specified table. The processing is similar to the array list format. The values in the user specified table are randomly ordered using <code class="codeph">DBMS_RANDOM.VALUE</code> before mapping each value to the original column. Unlike the Substitute format, the format is not deterministic since the substitution column is randomly ordered.
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">Truncate</span></p>
                           <p>The format truncates all rows in a table. It does not create a mapping table. If one of the columns in a table is masked using this format, so no other mask formats can be specified for any of the other columns. </p>
                        </li>
                        <li>
                           <p><span class="bold">User Defined Function</span></p>
                           <p>The format creates a mapping table. The return value of the user defined function is used to mask the column. The function is invoked as part of the mapping table CTAS. The function has a fixed signature:</p><pre class="oac_no_warn" dir="ltr">function userdef_func(rowid varchar2, col_name varchar2, orig_val varchar2) returns varchar2;Function udf_func (rowid varchar2, column_name varchar2, original_value varchar2) return varchar2;
</pre></li>
                     </ul>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-E850416A-8D19-4711-B5B2-0BC9A24C2ADC" name="GUID-E850416A-8D19-4711-B5B2-0BC9A24C2ADC"></a><h4 id="DMKSB-GUID-E850416A-8D19-4711-B5B2-0BC9A24C2ADC" class="sect4"><span class="enumeration_section">4.5.4 </span>Deterministic Masking Using the Substitute Format
                  </h4>
                  <div>
                     <p><a id="d6556e2034" class="indexterm-anchor"></a><a id="d6556e2036" class="indexterm-anchor"></a><a id="d6556e2038" class="indexterm-anchor"></a><a id="d6556e2042" class="indexterm-anchor"></a>You may occasionally need to consistently mask multiple, distinct databases. For instance, if you run HR, payroll, and benefits that have an employee ID concept on three separate databases, the concept may be consistent for all of these databases, in that an employee's ID can be selected to retrieve the employee's HR, payroll, or benefits information. Based on this premise, if you were to mask the employee's ID because it actually contains his/her social security number, you would have to mask this consistently across all three databases.
                     </p>
                     <p>Deterministic masking provides a solution for this problem. You can use the Substitute format to mask employee ID column(s) in all three databases. The Substitute format uses a table of values from which to substitute the original value with a mask value. As long as this table of values does not change, the mask is deterministic or consistent across the three databases.</p>
                     <div class="infoboxnotealso" id="GUID-E850416A-8D19-4711-B5B2-0BC9A24C2ADC__GUID-E7C615FC-1D3D-4313-817D-1741C82F4C2B">
                        <p class="notep1">See Also:</p>
                        <p>The online help for Define Column Mask page for more information on the Substitute format <a id="d6556e2052" class="indexterm-anchor"></a></p>
                     </div>
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-F55AD5A1-AF1C-44F0-AF38-5FCE35D86B10" name="GUID-F55AD5A1-AF1C-44F0-AF38-5FCE35D86B10"></a><h3 id="DMKSB-GUID-F55AD5A1-AF1C-44F0-AF38-5FCE35D86B10" class="sect3"><span class="enumeration_section">4.6 </span>Masking with an Application Data Model and Workloads
               </h3>
               <div>
                  <div class="section">
                     <p>Before creating a masking definition, note the following prerequisites and advisory information:</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a id="d6556e2114" class="indexterm-anchor"></a><a id="d6556e2118" class="indexterm-anchor"></a>Ensure that you have the following minimum privileges for data masking:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="bold">Target Privileges (applicable to all targets): </span></p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p>Connect to any viewable target </p>
                                    </li>
                                    <li>
                                       <p> Execute Command Anywhere </p>
                                    </li>
                                    <li>
                                       <p>View Any Target</p>
                                    </li>
                                 </ul>
                              </li>
                              <li>
                                 <p> <span class="bold">Resource Privileges: </span></p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p> Job System</p>
                                    </li>
                                    <li>
                                       <p>Named Credential </p>
                                    </li>
                                    <li>
                                       <p>Oracle Data Masking and Subsetting resource privilege</p>
                                    </li>
                                 </ul>
                                 <div class="infoboxnote" id="GUID-F55AD5A1-AF1C-44F0-AF38-5FCE35D86B10__GUID-3DCF40D0-0381-4022-BD61-6CD8BEB4BD31">
                                    <p class="notep1">Note:</p>
                                    <p>The <code class="codeph">EM_ALL_OPERATOR</code> privilege for Enterprise Manager Cloud Control users includes all of the above privileges.
                                    </p>
                                 </div>
                              </li>
                              <li>
                                 <p><code class="codeph">SELECT_CATALOG_ROLE</code> for database users
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">SELECT ANY DICTIONARY</code> privilege for database users
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">EXECUTE</code> privileges for the DBMS_CRYPTO package
                                 </p>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Ensure the format you select does not violate check constraints and does not break any applications that use the data.</p>
                        </li>
                        <li>
                           <p>For triggers and PL/SQL packages, data masking recompiles the object.</p>
                        </li>
                        <li>
                           <p>Exercise caution when masking partitioned tables, especially if you are masking the partition key. In this circumstance, the row may move to another partition.</p>
                        </li>
                        <li>
                           <p>Data Masking does not support clustered tables, masking information in object tables, XML tables, and virtual columns. Relational tables are supported for masking.</p>
                        </li>
                        <li>
                           <p>If objects are layered on top of a table such as views, materialized views, and PL/SQL packages, they are recompiled to be valid.</p>
                        </li>
                     </ul>
                     <p>If you plan to mask a test system intended for evaluating performance, the following practices are recommended:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Try to preserve the production statistics and SQL profiles after masking by adding a pre-masking script to export the SQL profiles and statistics to a temporary table, then restoring after masking completes. </p>
                        </li>
                        <li>
                           <p><a id="d6556e2197" class="indexterm-anchor"></a>Run a SQL Performance Analyzer evaluation to understand the masking impact on performance. Any performance changes other than what appears in the evaluation report are usually related to application-specific changes on the masked database.
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2">To create a masking definition:</p>
                     <ol>
                        <li>
                           <p>From the <span class="bold">Enterprise</span> menu, select <span class="bold">Quality Management</span>, then <span class="bold">Data Masking Definitions</span>.
                           </p>
                           <p>The Data Masking Definitions page appears, where you can create and schedule new masking definitions and manage existing masking definitions.</p>
                        </li>
                        <li>
                           <p>Click <span class="bold">Create</span> to go to the Create Masking Definition page. 
                           </p>
                           <p>A masking definition includes information regarding table columns and the format for each column. You can choose which columns to mask, leaving the remaining columns intact.</p>
                        </li>
                        <li>
                           <p>Provide a required <span class="bold">Name</span>, <span class="bold">Application Data Model</span>, and <span class="bold">Reference Database</span>.
                           </p>
                           <p>When you click the search icon and select an Application Data Model (ADM) name from the list, the system automatically populates the Reference Database field.</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Optional: Check Ensure Workload Masking Compatibility if you want to mask Capture files and SQL Tuning Sets.</p>
                                 <p>When you enable this check box, the masking definition is evaluated to determine if the SQL Expression format or conditional masking is being used. If either is in use when you click OK, the option becomes unchecked and an error message appears asking you to remove these items before selecting this option.</p>
                                 <div class="infoboxnote" id="GUID-F55AD5A1-AF1C-44F0-AF38-5FCE35D86B10__GUID-805E8DE5-AC29-4F5F-B684-1C1139429B2A">
                                    <p class="notep1">Note:</p>
                                    <p>Before proceeding to the next step, one or more sensitive columns must already be defined in the Application Data Model. See <span class="q">"<a href="application-data-modeling.html#GUID-E03C9287-4392-4950-AAB3-A08654297509">Creating and Managing Custom Sensitive Column Types</a>"</span> for more information.
                                    </p>
                                 </div>
                              </li>
                           </ul>
                        </li>
                        <li>
                           <p>Click <span class="bold">Add</span> to go to the Add Columns page, where you can choose which sensitive columns in the ADM you want to mask.
                           </p>
                           <p>The results appear in the Columns table. Primary key and foreign key columns appear below the sensitive columns.</p>
                        </li>
                        <li>
                           <p>Use filtering criteria to refine sensitive column results. For example, perhaps you want to isolate all columns that have order in the name (column name=order%). You first may have to expose the filter section (<span class="bold">Show Filters</span>). 
                           </p>
                        </li>
                        <li>
                           <p>Use the disable feature to exclude certain columns from masking consideration. All columns are enabled by default. You can disable selected or all columns. You can also search for a subset of columns (column name=order%) to disable. The Status column on the right changes to reflect a column's disabled state. Note that a column's disabled state persists on export of a data masking definition.</p>
                        </li>
                        <li>
                           <p>Optional. Click the edit icon in the Format column to review and edit the masking format.</p>
                        </li>
                        <li>
                           <p>Expand <span class="bold">Show Advanced Options</span> and decide whether the selected default data masking options are satisfactory. 
                           </p>
                        </li>
                        <li>
                           <p>Click <span class="bold">OK</span> to save your definition and return to the Data Masking Definitions page.
                           </p>
                           <p>At this point, super administrators can see each other's masking definitions. </p>
                        </li>
                        <li>
                           <p>Select the definition and click <span class="bold">Generate Script</span>. The schedule job dialog opens. You may have to log in to the database first.
                           </p>
                           <p>Complete the schedule job dialog by providing the required information, then click <span class="bold">Submit</span>.
                           </p>
                        </li>
                        <li>
                           <p>A message appears denoting that the job was submitted successfully and you return to the Data Masking Definitions page, where the status is "Generating Script." Click <span class="bold">View Job Details</span> to open the job summary page.
                           </p>
                           <p>When the job completes, click <span class="bold">Log Report</span> to check whether sufficient disk space is available for the operation, and to determine the impact on other destination objects, such as users, after masking. If any tables included in the masking definition have columns of data type <code class="codeph">LONG</code>, a warning message may appear.
                           </p>
                        </li>
                        <li>
                           <p>When the status on the Data Masking Definitions page is "Script Generated," select the script and choose from the following actions:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><span class="bold">Clone Database</span>&#x2013;to clone and mask the database using the Clone Database wizard (this requires a <a id="d6556e2324" class="indexterm-anchor"></a>Database Lifecycle Management Pack license).
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Save Script</span>&#x2013;to save the entire PL/SQL script to your desktop.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Save Mask Bundle</span>&#x2013;to download a zip file containing the SQL files generated as part of the At source masking script generation option. You can then extract and execute the script to create a masked dump of the database.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">View Script</span>&#x2013;to view the PL/SQL script, which you can edit and save. You can also view errors and warnings, if any, in the impact report.
                                 </p>
                              </li>
                              <li>
                                 <p><span class="bold">Storage Requirement Report</span>&#x2013;to view the space required for intermittent objects during masking.
                                 </p>
                                 <div class="infoboxnote" id="GUID-F55AD5A1-AF1C-44F0-AF38-5FCE35D86B10__GUID-22B7AD96-5157-4EE8-B039-B9D7B9C6663E">
                                    <p class="notep1">Note:</p>
                                    <p>For accurate storage estimates, ensure that you use <code class="codeph">dbms_stats.gather_table_stats</code> to gather the stats of all the tables participating in the masking process.
                                    </p>
                                 </div>
                              </li>
                           </ul>
                           <p>Click <span class="bold">Go</span> to execute the selected action.
                           </p>
                        </li>
                        <li>
                           <p>If you are already working with a test database and want to directly mask the data in this database, click <span class="bold">Schedule Job</span>.
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>Provide the requisite information and desired options. You can specify the database at execution time to any database. The system assumes that the database you select is a clone of the source database. By default, the source database from the ADM is selected.</p>
                              </li>
                              <li>
                                 <p>Click <span class="bold">Submit</span>.
                                 </p>
                                 <p>The Data Masking Definitions page appears. The job has been submitted to Enterprise Manager and the masking process appears. The Status column on this page indicates the current stage of the process.</p>
                              </li>
                           </ul>
                        </li>
                     </ol>
                     <p>Note that you can also perform data masking at the source as part of a data subsetting definition. See <span class="q">"<a href="data-subsetting.html#GUID-47CA34C8-20CA-4740-A315-E82D7B3A1D89">Creating a Data Subset Definition</a>"</span> for more information.
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
               <div>
                  <div class="relinfo">
                     <p><strong>Related Topics</strong></p>
                     <ul>
                        <li><a href="data-masking.html#GUID-C2AC5829-FD93-4C29-B2FB-724D0BD94647">Selecting Data Masking Advanced Options</a></li>
                        <li><a href="data-masking.html#GUID-3D7C323D-26E0-491F-A296-0F01DA5D6ECD">Scheduling a Script Generation Job</a></li>
                        <li><a href="data-masking.html#GUID-EA648FED-030D-480E-A206-ACABEFA1F840">Cloning the Production Database</a></li>
                        <li><a href="data-masking.html#GUID-47918D17-5138-4894-817A-355B4908F7F5">Scheduling a Data Masking Job</a></li>
                     </ul>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-02A9DA80-1883-4421-879B-C5D7D28AAC3B" name="GUID-02A9DA80-1883-4421-879B-C5D7D28AAC3B"></a><h4 id="DMKSB-GUID-02A9DA80-1883-4421-879B-C5D7D28AAC3B" class="sect4"><span class="enumeration_section">4.6.1 </span>Editing a Data Masking Definition
                  </h4>
                  <div>
                     <div class="section">
                        <p>Use the following procedure to edit or otherwise work with a masking definition:</p>
                        <ol>
                           <li>
                              <p>From the Data Masking Definitions page, click the radio button next to the definition you want to edit, then click <span class="bold">Edit</span>.
                              </p>
                           </li>
                           <li>
                              <p>Add columns or edit format entries as you would when creating a new definition, which is explained starting in Step 3 above.</p>
                           </li>
                           <li>
                              <p>Click <span class="bold">OK</span> on the Edit Masking Definitions page when you have finished editing.
                              </p>
                           </li>
                           <li>
                              <p>Perform these other actions with an existing masking definition by choosing the respective menu item from the <span class="bold">Actions</span> menu:
                              </p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="bold">Create Like</span>&#x2013;to display the masking definition in the Create Masking Definition page where you can customize the definition. 
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Grant Designer</span>&#x2013;to grant Designer privileges on the masking definition to selected roles or administrators, which means the grantees can view and edit the definition. Privileges granted can also be revoked.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Grant Operator</span>&#x2013;to grant Operator privileges on the masking definition to selected roles or administrators, which means the grantees can view and copy but not edit the definition. Privileges granted can also be revoked.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Export</span>&#x2013;to export the definition as an XML file for use in other repositories.
                                    </p>
                                 </li>
                              </ul>
                              <p>Click <span class="bold">Go</span> to execute the selected action.
                              </p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-D7C9E578-AABE-4751-BD4F-A4CE1C8BD2B8" name="GUID-D7C9E578-AABE-4751-BD4F-A4CE1C8BD2B8"></a><h4 id="DMKSB-GUID-D7C9E578-AABE-4751-BD4F-A4CE1C8BD2B8" class="sect4"><span class="enumeration_section">4.6.2 </span>Adding Columns for Masking
                  </h4>
                  <div>
                     <div class="section">
                        <p>Use this page to add one or more columns for masking and automatically add foreign key columns. Select the database columns you want to mask from the corresponding schema. After you select the columns, you specify the format used to mask the data within.</p>
                        <div class="infoboxnote" id="GUID-D7C9E578-AABE-4751-BD4F-A4CE1C8BD2B8__GUID-B12544D8-8A64-484C-BC48-185F95F8AD70">
                           <p class="notep1">Note:</p>
                           <p>You need to add at least one column in the masking definition. Otherwise, you cannot generate a script that creates an impact report that provides information about the objects and resources examined and lists details of any warnings or errors detected.</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Enter search criteria, then click <span class="bold">Search</span>.</span><div>
                              <p>The sensitive columns you defined in the ADM appear in the table below.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Either select one or more columns for later formatting on the Create Masking Definition page, or formatting now if the data types of the columns you have selected are identical.</span></li>
                        <li class="stepexpand"><span><span class="italic">Optional</span>: if you want to <a id="d6556e2548" class="indexterm-anchor"></a>mask selected columns as a group, enable Mask selected columns as a group. The columns that you want to mask as a group must all be from the same table.</span><div>
                              <p>Enable this check box if you want to mask more than one column together, rather than separately. When you select two or more columns and then later define the format on the Define Group Mask page, the columns appear together, and any choices you make for format type or masking table apply collectively to all of the columns.</p>
                              <p>After you define the group and return to this page, the Column Group column in the table shows an identical number for each entry row in the table for all members of the group. For example, if you have defined your first group containing four columns, each of the four entries in this page will show a number 1 in the Column Group column. If you define another group, the entries in the page will show the number 2, and so forth. This helps you to distinguish which columns belong to which column groups.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Either click <span class="bold">Add</span> to add the column to the masking definition, return to the Create Masking Definition page and define the format of the column later, or click <span class="bold">Define Format and Add</span> to define the format for the column now.</span><div>
                              <p>The Define Format and Add feature can save you significant time. When you select multiple columns to add that have the same data type, you do not need to define the format for each column as you would when you click Add. For instance, if you search for Social Security numbers (SSN) and the search yields 100 SSN columns, you could select them all, then click <span class="bold">Define Format and Add</span> to import the SSN format for all of them.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Do one of the following:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p>If you clicked <span class="bold">Add</span> in the previous step:
                                    </p>
                                    <p>You will eventually need to define the format of the column in the Create Masking Definition page before you can continue. When you are ready to do so, click the icon in the page Format column for the column you want to format. Depending on whether you decided to mask selected columns as a group on the Add Columns page, either the Define Column mask or Define Group mask appears. Read further in this step for instructions for both cases.</p>
                                 </li>
                                 <li>
                                    <p>If you clicked <span class="bold">Define Format and Add</span> in the previous step and did not check <span class="bold">Mask selected columns as a group</span>:
                                    </p>
                                    <p>The Define Column Mask page appears, where you can define the format for the column before adding the column to the Create Masking Definition page, as explained below:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Provide a format entry for the required Default condition by either selecting a format entry from the list and clicking <span class="bold">Add</span>, or clicking <span class="bold">Import Format</span>, selecting a predefined format on the Import Format page, then clicking <span class="bold">Import</span>.
                                          </p>
                                          <p>The Import Format page displays the formats that are marked with the same sensitive type as the masked column.</p>
                                       </li>
                                       <li>
                                          <p>Add another condition by clicking <span class="bold">Add Condition</span> to add a new condition row, then provide one or more format entries as described in the previous step.
                                          </p>
                                       </li>
                                       <li>
                                          <p>When you have finished formatting the column, click <span class="bold">OK</span> to return to the Create Masking Definition page.
                                          </p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p>If you clicked <span class="bold">Define Format and Add</span> in the previous step and checked <span class="bold">Mask selected columns as a group</span>:
                                    </p>
                                    <p>The Define Group Mask page appears, where you can add format entries for group columns that appear in the Create Masking Definition page, as explained below:</p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Select one of the available format types. For complete information on the format types, see the online help for the Defining the Group Masking Format topic.</p>
                                       </li>
                                       <li>
                                          <p>Optionally add a column to the group.</p>
                                       </li>
                                       <li>
                                          <p>When you have finished formatting the group, click <span class="bold">OK</span> to return to the Create Masking Definition page.
                                          </p>
                                          <p>The results appear in the Columns table. The sensitive columns you selected earlier now appear on this page. Primary key and foreign key columns appear below the sensitive columns.</p>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                           </div>
                           <div>
                              <div class="infoboxnote" id="GUID-D7C9E578-AABE-4751-BD4F-A4CE1C8BD2B8__GUID-7BD5A427-E448-4673-A5ED-523951058F0A">
                                 <p class="notep1">Note:</p>When you add a column for masking, and select the available format types, you can specify the value for the masking format, and click the <span class="bold">Show Sample</span> icon to view a sample data masking format. However, the <span class="bold">Show Sample</span> icon isn't displayed for the delete, truncate, and null value formats. 
                              </div>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-C2AC5829-FD93-4C29-B2FB-724D0BD94647" name="GUID-C2AC5829-FD93-4C29-B2FB-724D0BD94647"></a><h4 id="DMKSB-GUID-C2AC5829-FD93-4C29-B2FB-724D0BD94647" class="sect4"><span class="enumeration_section">4.6.3 </span>Selecting Data Masking Advanced Options
                  </h4>
                  <div>
                     <p>The following options on the Masking Definitions page are all checked by default, so you need to uncheck the options that you do not want to enable:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="data-masking.html#GUID-AFF7C348-A22E-41AB-A818-CAF60B128A5C">Data Masking Options</a></p>
                        </li>
                        <li>
                           <p><a href="data-masking.html#GUID-B7E4D49E-A052-4AC5-9AEC-0EBAC221607B">Random Number Generation</a></p>
                        </li>
                        <li>
                           <p><a href="data-masking.html#GUID-EC53CD20-AC7B-4B65-AB43-C5E257DCFD61">Pre- and Post-mask Scripts</a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="props_rev_3"><a id="GUID-AFF7C348-A22E-41AB-A818-CAF60B128A5C" name="GUID-AFF7C348-A22E-41AB-A818-CAF60B128A5C"></a><h5 id="DMKSB-GUID-AFF7C348-A22E-41AB-A818-CAF60B128A5C" class="sect5"><span class="enumeration_section">4.6.3.1 </span>Data Masking Options
                     </h5>
                     <div>
                        <p><a id="d6556e2748" class="indexterm-anchor"></a>The data masking options include:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span>Disable redo log generation during masking</span></p>
                              <p>Masking disables redo logging and flashback logging to purge any original unmasked data from logs. However, in certain circumstances when you only want to test masking, roll back changes, and retry with more mask columns, it is easier to uncheck this box and use a flashback database to retrieve the old unmasked data after it has been masked. You can use Enterprise Manager to flashback a database.</p>
                              <div class="infoboxnote" id="GUID-AFF7C348-A22E-41AB-A818-CAF60B128A5C__GUID-F97A576D-1BA8-49F2-99AE-9FFFDF2A4B60">
                                 <p class="notep1">Note:</p>
                                 <p>Disabling this option compromises security. You must ensure this option is enabled in the final mask performed on the copy of the production database.</p>
                              </div>
                           </li>
                           <li>
                              <p><span>Refresh statistics after masking</span></p>
                              <p>If you have already enabled statistics collection and would like to use special options when collecting statistics, such as histograms or different sampling percentages, it is beneficial to turn off this option to disable default statistics collection and run your own statistics collection jobs.</p>
                           </li>
                           <li>
                              <p><span>Drop temporary tables created during masking</span></p>
                              <p>Masking creates temporary tables that map the original sensitive data values to mask values. In some cases, you may want to preserve this information to track how masking changed your data. Note that doing so compromises security. These tables must be dropped before the database is available for unprivileged users.</p>
                           </li>
                           <li>
                              <p>Decrypt encrypted columns</p>
                              <p>This option decrypts columns that were previously masked using Encrypt format. To decrypt a previously encrypted column, the seed value must be the same as the value used to encrypt.</p>
                              <p>Decrypt only recovers the original value if the original format used for the encryption matches the original value. If the originally encrypted value did not conform to the specified regular expression, when decrypted, the encrypted value cannot reproduce the original value.</p>
                           </li>
                           <li>
                              <p><span>Use parallel execution when possible</span></p>
                              <p>Oracle Database can make parallel various SQL operations that can significantly improve their performance. Data Masking uses this feature when you select this option. You can enable Oracle Database to automatically determine the degree of parallelism, or you can specify a value. For more information about using parallel execution and the degree of parallelism, see the <a href="../dwhsg/data-warehouse-optimizations-techniques.html#DWHSG9062"><span class="italic">Oracle Database Data Warehousing Guide</span></a>.
                              </p>
                           </li>
                           <li>
                              <p>Recompile invalid dependent objects after masking</p>
                              <p>The masking process re-creates the table to be masked and as a consequence, all existing dependent objects (packages, procedures, functions, MViews, Views, Triggers) become invalid. You can specify that the masking process recompile these invalid objects after creating the table, by selecting the check box. Otherwise, invalid objects are not recompiled using <code class="codeph">utl_comp</code> procedures at the end of masking.
                              </p>
                              <p>If you choose this option, indicate whether to use serial or parallel execution. You can enable Oracle Database to automatically determine the degree, or you can specify a value. For more information about using parallel execution and the degree of parallelism, see the <span class="italic">Oracle Database Data Warehousing Guide</span>.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-B7E4D49E-A052-4AC5-9AEC-0EBAC221607B" name="GUID-B7E4D49E-A052-4AC5-9AEC-0EBAC221607B"></a><h5 id="DMKSB-GUID-B7E4D49E-A052-4AC5-9AEC-0EBAC221607B" class="sect5"><span class="enumeration_section">4.6.3.2 </span>Random Number Generation
                     </h5>
                     <div>
                        <p><a id="d6556e2842" class="indexterm-anchor"></a>The random number generation options include:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span>Favor Speed</span></p>
                              <p>The <code class="codeph">DBMS_RANDOM</code> package is used for random number generation.
                              </p>
                           </li>
                           <li>
                              <p><span>Favor Security</span></p>
                              <p>The <code class="codeph">DBMS_CRYPTO</code> package is used for random number generation. Additionally, if you use the Substitute format, a seed value is required when you schedule the masking job or database clone job.
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <div class="props_rev_3"><a id="GUID-EC53CD20-AC7B-4B65-AB43-C5E257DCFD61" name="GUID-EC53CD20-AC7B-4B65-AB43-C5E257DCFD61"></a><h5 id="DMKSB-GUID-EC53CD20-AC7B-4B65-AB43-C5E257DCFD61" class="sect5"><span class="enumeration_section">4.6.3.3 </span>Pre- and Post-mask Scripts
                     </h5>
                     <div>
                        <p><a id="d6556e2903" class="indexterm-anchor"></a>When masking a test system to evaluate performance, it is beneficial to preserve the object statistics after masking. You can accomplish this by adding a pre-masking script to export the statistics to a temporary table, then restoring them with a post-masking script after masking concludes.
                        </p>
                        <p>Use the Pre Mask Script text box to specify any user-specified SQL script that must run before masking starts.</p>
                        <p>Use the Post Mask Script text box to specify any user-specified SQL script that must run after masking completes. Since masking modifies data, you can also perform tasks, such as rebalancing books or calling roll-up or aggregation modules, to ensure that related or aggregate information is consistent.</p>
                        <p>The following examples show pre- and post-masking scripts for preserving statistics.</p>
                        <p>This example shows a pre-masking script for preserving statistics.</p><pre class="oac_no_warn" dir="ltr">variable sts_task  VARCHAR2(64);

/*Step :1 Create the staging table for statistics*/

exec dbms_stats.create_stat_table(ownname=&gt;'SCOTT',stattab=&gt;'STATS');
 
/* Step 2: Export the table statistics into the staging table. Cascade results 
in all index and column statistics associated with the specified table being 
exported as well. */
 
exec
dbms_stats.export_table_stats(ownname=&gt;'SCOTT',tabname=&gt;'EMP',
partname=&gt;NULL,stattab=&gt;'STATS',statid=&gt;NULL,cascade=&gt;TRUE,statown=&gt;'SCOTT');
exec
dbms_stats.export_table_stats(ownname=&gt;'SCOTT',tabname=&gt;'DEPT',
partname=&gt;NULL,stattab=&gt;'STATS',statid=&gt;NULL,cascade=&gt;TRUE,statown=&gt;'SCOTT');

/* Step 3: Create analysis task */
3. exec :sts_task := DBMS_SQLPA.create_analysis_task(sqlset_name=&gt;
'scott_test_sts',task_name=&gt;'SPA_TASK', sqlset_owner=&gt;'SCOTT');
 
/*Step 4: Execute the analysis task before masking */
exec DBMS_SQLPA.execute_analysis_task(task_name =&gt; 'SPA_TASK', 
execution_type=&gt; 'explain plan', execution_name  =&gt; 'pre-mask_SPA_TASK'); </pre><p>This example shows a post-masking script for preserving statistics.</p><pre class="oac_no_warn" dir="ltr">*Step 1: Import the statistics from the staging table to the dictionary tables*/
 
exec
dbms_stats.import_table_stats(ownname=&gt;'SCOTT',tabname=&gt;'EMP',
partname=&gt;NULL,stattab=&gt;'STATS',statid=&gt;NULL,cascade=&gt;TRUE,statown=&gt;'SCOTT');
exec
dbms_stats.import_table_stats(ownname=&gt;'SCOTT',tabname=&gt;'DEPT',
partname=&gt;NULL,stattab=&gt;'STATS',statid=&gt;NULL,cascade=&gt;TRUE,statown=&gt;'SCOTT');
 
/* Step 2: Drop the staging table */
 
exec dbms_stats.drop_stat_table(ownname=&gt;'SCOTT',stattab=&gt;'STATS');

/*Step 3: Execute the analysis task before masking */
exec DBMS_SQLPA.execute_analysis_task(task_name=&gt;'SPA_TASK', 
execution_type=&gt;'explain plan', execution_name=&gt;'post-mask_SPA_TASK');
 
/*Step 4: Execute the comparison task */
exec DBMS_SQLPA.execute_analysis_task(task_name =&gt;'SPA_TASK', 
execution_type=&gt;'compare', execution_name=&gt;'compare-mask_SPA_TASK'); </pre><div class="infoboxnotealso" id="GUID-EC53CD20-AC7B-4B65-AB43-C5E257DCFD61__GUID-D74FF6F3-8DBC-43FC-9209-361EEC33E6E0">
                           <p class="notep1">See Also:</p>
                           <p><span class="q">"<a href="data-masking.html#GUID-AD12BB7B-1796-4E74-94AB-8226AEF69CE8">Masking a Test System to Evaluate Performance</a>"</span> for a procedure that explains how to specify the location of these scripts when scheduling a data masking job
                           </p>
                        </div>
                     </div>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-3D7C323D-26E0-491F-A296-0F01DA5D6ECD" name="GUID-3D7C323D-26E0-491F-A296-0F01DA5D6ECD"></a><h4 id="DMKSB-GUID-3D7C323D-26E0-491F-A296-0F01DA5D6ECD" class="sect4"><span class="enumeration_section">4.6.4 </span>Scheduling a Script Generation Job
                  </h4>
                  <div>
                     <div class="section">
                        <p>To schedule a script generation job:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Select the masking definition to generate a script for, then click <span class="bold">Generate Script</span>.</span></li>
                        <li class="stepexpand"><span>Change the default job name to something meaningful, if desired, and provide an optional job description.</span></li>
                        <li class="stepexpand"><span>Select a reference database from the drop-down list.</span></li>
                        <li class="stepexpand" id="GUID-3D7C323D-26E0-491F-A296-0F01DA5D6ECD__SELECTASCRIPTGENERATIONOPTIONMASKIN-BF9AAECA"><span>Select a script generation option:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="bold">Mask In-Database</span>&#x2013;to replace sensitive data in-place with masked data on a specified database (usually copied from production). Use this option only in non-production environments. This differs from the <span class="bold">Actions</span> menu option <span class="bold">Clone Database</span>, which clones the database and then masks the data.
                                    </p>
                                 </li>
                                 <li>
                                    <p><span class="bold">Mask In-Export</span>&#x2013;to export masked data from the specified source database (usually production) using Oracle Data Pump. This option is safe to run in a production environment as it does not modify customer data. Note, however, that this option creates temporary tables that get dropped when the masking operation completes.
                                    </p>
                                 </li>
                              </ul>
                              <p>Note that you can choose both options; that is, a script to mask the database directly and a script to create a masked dump.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Specify credentials to log in to the reference database.</span></li>
                        <li class="stepexpand"><span>Specify to start the job immediately or at a later specified date and time, then click <span class="bold">Submit.</span></span><div>
                              <p>A message confirms that the job has been scheduled. Refresh the page to see the job results.</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-47918D17-5138-4894-817A-355B4908F7F5" name="GUID-47918D17-5138-4894-817A-355B4908F7F5"></a><h4 id="DMKSB-GUID-47918D17-5138-4894-817A-355B4908F7F5" class="sect4"><span class="enumeration_section">4.6.5 </span>Scheduling a Data Masking Job
                  </h4>
                  <div>
                     <div class="section">
                        <p>To set up the data masking job and schedule its execution:</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Select the masking definition for which a script has been generated, then click <span class="bold">Schedule Job</span>.</span></li>
                        <li class="stepexpand"><span>Change the default job name if desired and enter an optional job description.</span></li>
                        <li class="stepexpand"><span>Select a database from the drop-down menu and indicate your preference:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="bold">Mask In-Database</span>&#x2013;to replace sensitive data in-place with masked data on a specified database (usually copied from production). Use this option only in non-production environments. This differs from the <span class="bold">Actions</span> menu option <span class="bold">Clone Database</span>, which clones the database and then masks the data.
                                    </p>
                                    <div class="infoboxnote" id="GUID-47918D17-5138-4894-817A-355B4908F7F5__GUID-25B6C946-9164-46D9-855C-5A1B9A871436">
                                       <p class="notep1">Note:</p>
                                       <p>You must enable the check box indicating that the selected target is not a production database in order to proceed.</p>
                                    </div>
                                 </li>
                                 <li>
                                    <p><span class="bold">Mask In-Export</span>&#x2013;to export masked data from the specified source database (usually production) using Oracle Data Pump. This option is safe to run in a production environment as it does not modify customer data. Note, however, that this option creates temporary tables that get dropped when the masking operation completes.
                                    </p>
                                 </li>
                              </ul>
                              <p>Your selections affect the check box text that appears below the radio buttons as well as other regions on the page.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Proceed according to your selections in Step 3:</span><div>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="bold">Data Mask Options</span>&#x2013;Provide the requisite information as follows:
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>After script generation completes, the data masking script is stored in the Enterprise Manager repository. By default, the data masking job retrieves the script from the repository and copies it to the <code class="codeph">$ORACLE_HOME/dbs</code> directory on the database host, using a generated file name. The Script File Location and Name fields enable you to override the default location and generated file name.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Workloads&#x2013;Select options to mask SQL tuning sets and capture files, as appropriate. Browse to the file location where you want to capture the files.</p>
                                       </li>
                                       <li>
                                          <p>Detect SQL Plan Changes Due to Masking&#x2013;Run the SQL Performance Analyzer to assess the impact of masking. Provide a task name and browse to the corresponding SQL tuning set.</p>
                                       </li>
                                    </ul>
                                 </li>
                                 <li>
                                    <p><span class="bold">Data Export Options</span>&#x2013;Provide the requisite information as follows:
                                    </p>
                                    <ul style="list-style-type: disc;">
                                       <li>
                                          <p>Specify a directory where to save the mask dump. The drop-down list consists of directory objects that you can access. Alternatively, you can select a custom directory path. Click the check box if you want to speed the process by using an external directory. Recommended default: <code class="codeph">DATA_FILE_DIR</code>.
                                          </p>
                                       </li>
                                       <li>
                                          <p>Specify appropriate values if you want to override the defaults: enter a name for the export file; specify a maximum file size in megabytes; specify the maximum number of threads of active execution operating on behalf of the export job. This enables you to consider trade-offs between resource consumption and elapsed time.</p>
                                       </li>
                                       <li>
                                          <p>Specify whether to export only the masked data or the entire database along with the masked data.</p>
                                       </li>
                                       <li>
                                          <p>Select whether to enable dump file compression and encryption. Enter and confirm an encryption password, if appropriate. Log file generation is selected by default.</p>
                                       </li>
                                    </ul>
                                 </li>
                              </ul>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Specify credentials to log in to the database host.</span></li>
                        <li class="stepexpand"><span>Specify credentials to log in to the reference database.</span></li>
                        <li class="stepexpand" id="GUID-47918D17-5138-4894-817A-355B4908F7F5__CHOOSEONEOFTHEFOLLOWINGOPTIONSTOCRE-5069FBC5"><span>Choose one of the following options to create temporary objects:</span><ul>
                              <li>
                                 <p><span class="bold"> Optimize storage using default settings</span> — creates all the mapping tables in the user’s default tablespace. While creating the mapping tables, basic compression is used to compress the mapping tables.
                                 </p>
                                 <p>Mapping tables are used to transform one value to another in an Oracle database.</p> 
                              </li>
                              <li>
                                 <p><span class="bold">Optimize storage using recommended settings</span> — creates a compressed tablespace. All the intermittent objects (mapping tables as well as the copy of original tables being masked) will be created in this tablespace. 
                                 </p>
                                 <div class="infoboxnote" id="GUID-47918D17-5138-4894-817A-355B4908F7F5__GUID-50AFC914-8161-4C0E-8D33-2D3C091D0E48">
                                    <p class="notep1">Note:</p>
                                    <p> If the <code class="codeph">DB_CREATE_FILE_DEST</code> is set, the datafile required for the new tablespace will be managed by Oracle. Otherwise, the datafile for the new tablespace will be created in the directory from where the masking script is being run.
                                    </p>
                                    <p>This tablespace will be dropped when the masking job is completed. However, the tablespace is not dropped if the user chooses not to drop the mapping tables while creating the script.</p>
                                 </div>
                              </li>
                              <li>
                                 <p><span class="bold">Optimize storage using custom settings</span></p>
                                 <ul style="list-style-type: disc;">
                                    <li>
                                       <p><span class="bold">Create temporary objects in a custom tablespace </span>— creates temporary objects in the tablespace specified in step <a href="data-masking.html#GUID-47918D17-5138-4894-817A-355B4908F7F5__IFYOUCHOSECUSTOMSETTINGSINSTEP7SELE-5069F25D">8</a>. Basic compression will be used to compress these temporary objects. 
                                       </p> 
                                    </li>
                                    <li>
                                       <p><span class="bold">Create temporary objects and copy of table being masked in a custom tablespace </span> — creates the temporary objects that are compressed, and creates a copy of the original table that is being masked while moving it to the tablespace specified at <a href="data-masking.html#GUID-47918D17-5138-4894-817A-355B4908F7F5__IFYOUCHOSECUSTOMSETTINGSINSTEP7SELE-5069F25D">Step 8</a>.
                                       </p>
                                    </li>
                                 </ul>
                                 <div class="infoboxnote" id="GUID-47918D17-5138-4894-817A-355B4908F7F5__GUID-AB3F15F1-2C6C-4AA1-8A9F-CFAD7B50BB11">
                                    <p class="notep1">Note:</p>
                                    <p>This option might increase the masking time considerably as it makes a copy of the original table and moves it to the custom tablespace.</p>
                                    <p>For accurate storage estimates, ensure that you use <code class="codeph">dbms_stats.gather_table_stats</code> to gather the stats of all the tables participating in the masking process.
                                    </p>
                                 </div>
                              </li>
                           </ul>
                        </li>
                        <li class="stepexpand" id="GUID-47918D17-5138-4894-817A-355B4908F7F5__IFYOUCHOSECUSTOMSETTINGSINSTEP7SELE-5069F25D"><span>If you chose custom settings in <a href="data-masking.html#GUID-47918D17-5138-4894-817A-355B4908F7F5__CHOOSEONEOFTHEFOLLOWINGOPTIONSTOCRE-5069FBC5">Step 7</a>, select a custom tablespace where the objects must be created.</span></li>
                        <li class="stepexpand"><span>Specify to start the job immediately or at a later specified date and time, then click <span class="bold">Submit.</span></span><div>
                              <p>A message confirms that the job has been scheduled. Refresh the page to see the job results.</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-7C24B5D8-2105-4C18-AA39-B86D80007296" name="GUID-7C24B5D8-2105-4C18-AA39-B86D80007296"></a><h4 id="DMKSB-GUID-7C24B5D8-2105-4C18-AA39-B86D80007296" class="sect4"><span class="enumeration_section">4.6.6 </span>Estimating Space Requirements for Masking Operations
                  </h4>
                  <div>
                     <p>Here are some guidelines for estimating space requirements for masking operations. These estimates are based on a projected largest table size of 500GB. In making masking space estimates, assume a "worst-case scenario."</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>For in-place masking:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>2 * 500GB for the mapping table (the mapping table stores both the original and the masked columns. Worse case is every column is to be masked).</p>
                              </li>
                              <li>
                                 <p>2 * 500GB to accommodate both the original and the masked tables (both exist in the database at some point during the masking process).</p>
                              </li>
                              <li>
                                 <p>2 * 500GB for temporary tablespace (needed for hash joins, sorts, and so forth).</p>
                              </li>
                           </ul>
                           <p>Total space required for the worst case: 3TB.</p>
                        </li>
                        <li>
                           <p>For at-source masking:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p>2 * 500GB for the mapping table (as for in-place masking).</p>
                              </li>
                              <li>
                                 <p>2 * 500GB for temporary tablespace (as for in-place masking).</p>
                              </li>
                              <li>
                                 <p>Sufficient file system space to accommodate the dump file.</p>
                              </li>
                           </ul>
                           <p>Total space required for the worst case: 2TB plus the necessary file system space.</p>
                        </li>
                     </ul>
                     <p>In either case, Oracle recommends that you set the temp and undo tablespaces to auto extend.</p>
                     <p>You can specify a tablespace for mapping tables during script generation. If you do not specify a tablespace, the tables are created in the tablespace of the executing user. Note that space estimations are provided during script generation, with resource warnings as appropriate. There are some situations, for example when using the shuffle format, that do not require a mapping table. In these cases, updates to the original table happen in-line.</p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-779BB0C3-BC5D-40FD-BBE3-00B5E4319D43" name="GUID-779BB0C3-BC5D-40FD-BBE3-00B5E4319D43"></a><h4 id="DMKSB-GUID-779BB0C3-BC5D-40FD-BBE3-00B5E4319D43" class="sect4"><span class="enumeration_section">4.6.7 </span>Adding Dependent Columns
                  </h4>
                  <div>
                     <p><a id="d6556e3319" class="indexterm-anchor"></a>Dependent columns are defined by adding them to the Application Data Model. The following prerequisites apply for the column to be defined as dependent:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>A valid dependent column should not already be included for masking.</p>
                        </li>
                        <li>
                           <p>The column should not be a foreign key column or referenced by a foreign key column.</p>
                        </li>
                        <li>
                           <p>The column data should conform to the data in the parent column.</p>
                        </li>
                     </ul>
                     <p>If the column does not meet these criteria, an "Invalid Dependent Columns" message appears when you attempt to add the dependent column.</p>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-96E5A2A5-BB53-41A6-9A5F-738CD548FABB" name="GUID-96E5A2A5-BB53-41A6-9A5F-738CD548FABB"></a><h4 id="DMKSB-GUID-96E5A2A5-BB53-41A6-9A5F-738CD548FABB" class="sect4"><span class="enumeration_section">4.6.8 </span>Masking Dependent Columns for Packaged Applications
                  </h4>
                  <div>
                     <div class="section">
                        <p>The following procedure explains how to mask data across columns for packaged applications in which the relationships are not defined in the data dictionary. </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To mask dependent columns for packaged applications:</p>
                        <ol>
                           <li>
                              <p>Go to Data Discovery and Modeling and create a new Application Data Model (ADM) using metadata collection for your packaged application suite.</p>
                              <p>When metadata collection is complete, edit the newly created ADM.</p>
                           </li>
                           <li>
                              <p><a id="d6556e3393" class="indexterm-anchor"></a><a id="d6556e3397" class="indexterm-anchor"></a><a id="d6556e3401" class="indexterm-anchor"></a><a id="d6556e3405" class="indexterm-anchor"></a><a id="d6556e3407" class="indexterm-anchor"></a>Manually add a referential relationship:
                              </p>
                              <ol type="a">
                                 <li>
                                    <p>From the Referential Relationships tab, open the <span class="bold">Actions</span> menu, then select <span class="bold">Add Referential Relationship</span>.
                                    </p>
                                    <p>The Add Referential Relationship pop-up window appears.</p>
                                 </li>
                                 <li>
                                    <p>Select the requisite Parent Key and Dependent Key information.</p>
                                 </li>
                                 <li>
                                    <p>In the Columns Name list, select a dependent key column to associate with a parent key column. </p>
                                 </li>
                                 <li>
                                    <p>Click <span class="bold">OK</span> to add the referential relationship to the ADM.
                                    </p>
                                    <p>The new dependent column now appears in the referential relationships list.</p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p><a id="d6556e3440" class="indexterm-anchor"></a><a id="d6556e3444" class="indexterm-anchor"></a>Perform sensitive column discovery.
                              </p>
                              <p>When sensitive column discovery is complete, review the columns found by the discovery job and mark them sensitive or not sensitive as needed. </p>
                              <p>When marked as sensitive, any discovery sensitive column also marks its parent and the other child columns of the parent as sensitive. Consequently, it is advisable to first create the ADM with all relationships. ADM by default, or after running drivers, may not contain denormalized relationships. You need to manually add these.</p>
                              <p>For more information about sensitive column discovery, see <a href="application-data-modeling.html#GUID-0DD53476-B469-41E0-8153-5E091D4A41A2">Performing Sensitive Data Discovery</a>.
                              </p>
                           </li>
                           <li>
                              <p>Go to Data Masking and create a new masking definition.</p>
                           </li>
                           <li>
                              <p>Select the newly created ADM and click <span class="bold">Add</span>, then <span class="bold">Search</span> to view this ADM's sensitive columns.
                              </p>
                           </li>
                           <li>
                              <p>Select columns based on your search results, then import formats for the selected columns.</p>
                              <p>Enterprise Manager displays formats that conform to the privacy attributes. </p>
                           </li>
                           <li>
                              <p>Select the format and generate the script.</p>
                           </li>
                           <li>
                              <p>Execute the masking script.</p>
                              <p>Enterprise Manager executes the generated script on the target database and masks all of your specified columns.</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-430F4A82-323D-4579-AD19-9306B33E0E3F" name="GUID-430F4A82-323D-4579-AD19-9306B33E0E3F"></a><h4 id="DMKSB-GUID-430F4A82-323D-4579-AD19-9306B33E0E3F" class="sect4"><span class="enumeration_section">4.6.9 </span>Importing a Data Masking Template
                  </h4>
                  <div>
                     <div class="section">
                        <p>You can import and re-use a previously exported data masking definition saved as an XML file to the current Enterprise Manager repository. You also can import an Oracle-supplied data masking definition from the Software Library.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Importing a Previously Exported Masking Definition</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p><a id="d6556e3528" class="indexterm-anchor"></a><a id="d6556e3532" class="indexterm-anchor"></a>Note the following advisory information:
                        </p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p>The XML file format must be compliant with the masking definition XML format.</p>
                           </li>
                           <li>
                              <p>Verify that the name of the masking definition to be imported does not already exist in the repository, and the source database name identifies a valid Enterprise Manager target.</p>
                           </li>
                           <li>
                              <p>Verify that the value in the XML file to be imported refers to a valid database target.</p>
                           </li>
                        </ul>
                        <ol>
                           <li>
                              <p>From the Data Masking Definitions page, click <span class="bold">Import</span>.
                              </p>
                              <p>The Import Masking Definition page appears.</p>
                           </li>
                           <li>
                              <p>Specify a name for the masking definition and select the ADM to associate with the template. The Reference Database is automatically provided.</p>
                           </li>
                           <li>
                              <p>Browse for the XML file, or specify the name of the XML file, then click <span class="bold">Continue</span>.
                              </p>
                              <p>The Data Masking Definitions Page reappears and displays the imported definition in the table list for subsequent viewing and masking.</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">Importing a Data Masking Template from the Software Library</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>The Self Update feature ensures that the latest Oracle-supplied data masking templates are available in the Software Library. You can also check for updates. Go to the Self Update page and check for Test Data Management updates. If present, download and apply them so that they are available in the Software Library.</p>
                        <ol>
                           <li>
                              <p>On the Data Masking Definitions page, click <span class="bold">Import from Software Library</span>.
                              </p>
                              <p>The Import Masking Definition page appears.</p>
                           </li>
                           <li>
                              <p>Select a masking template in the Software Library list.</p>
                           </li>
                           <li>
                              <p>Specify a name for the masking definition and select the ADM to associate with the template. The Reference Database is automatically provided.</p>
                           </li>
                           <li>
                              <p>Click <span class="bold">Continue</span>.
                              </p>
                              <p>The Data Masking Definitions Page reappears and displays the imported definition in the table list for subsequent viewing and masking.</p>
                           </li>
                        </ol>
                        <p>You can also export a data masking definition from the Software Library.</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span> On the Data Masking Definitions page, click <span class="bold">Export from Software Library</span>.</span></li>
                        <li class="stepexpand"><span>Select a masking template in the Software Library list.</span></li>
                        <li class="stepexpand"><span>Click <span class="bold">Export</span>.</span><div>
                              <p>Save the template file for import into a different repository.</p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-EA648FED-030D-480E-A206-ACABEFA1F840" name="GUID-EA648FED-030D-480E-A206-ACABEFA1F840"></a><h4 id="DMKSB-GUID-EA648FED-030D-480E-A206-ACABEFA1F840" class="sect4"><span class="enumeration_section">4.6.10 </span>Cloning the Production Database
                  </h4>
                  <div>
                     <div class="section">
                        <p>When you clone and mask the database, a copy of the masking script is saved in the Enterprise Manager repository and then retrieved and executed after the clone process completes. Therefore, it is important to regenerate the script after any schema changes or modifications to the production database.</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To clone and optionally mask the masking definition's target database:</p>
                        <ol>
                           <li id="GUID-EA648FED-030D-480E-A206-ACABEFA1F840__FROMTHEDATAMASKINGDEFINITIONSPAGESE-C8CBD76E">
                              <p>From the Data Masking Definitions page, select the masking definition you want to clone, select <span class="bold">Clone Database</span> from the Actions list, then click <span class="bold">Go</span>.
                              </p>
                              <p>The Clone Database: Source Type page appears.</p>
                              <p>The Clone Database wizard appears, where you can create a test system to run the mask.</p>
                           </li>
                           <li id="GUID-EA648FED-030D-480E-A206-ACABEFA1F840__SPECIFYTHETYPEOFSOURCEDATABASEBACKU-C8CBD97C">
                              <p>Specify the type of source database backup to be used for the cloning operation, then click <span class="bold">Continue</span>.
                              </p>
                           </li>
                           <li id="GUID-EA648FED-030D-480E-A206-ACABEFA1F840__PROCEEDTHROUGHTHEWIZARDSTEPSASYOUOR-C8CBDADC">
                              <p>Proceed through the wizard steps as you ordinarily would to clone a database. For assistance, refer to the online help for each step.</p>
                           </li>
                           <li id="GUID-EA648FED-030D-480E-A206-ACABEFA1F840__CHDBEDJI">
                              <p>In the Database Configuration step of the wizard, add a masking definition, then select the Run SQL Performance Analyzer option as well as other options as desired or necessary.</p>
                           </li>
                           <li>
                              <p>Schedule and then run the clone job.</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-AD12BB7B-1796-4E74-94AB-8226AEF69CE8" name="GUID-AD12BB7B-1796-4E74-94AB-8226AEF69CE8"></a><h3 id="DMKSB-GUID-AD12BB7B-1796-4E74-94AB-8226AEF69CE8" class="sect3"><span class="enumeration_section">4.7 </span>Masking a Test System to Evaluate Performance
               </h3>
               <div>
                  <p><a id="d6556e3730" class="indexterm-anchor"></a>After you have created a data masking definition, you may want to use it to analyze the performance impact from masking on a test system. The procedures in the following sections explain the process for this task for masking only, or cloning and masking.
                  </p>
               </div>
               <div class="props_rev_3"><a id="GUID-4B2D8D76-E23E-4B54-BDB6-9DC11C771C97" name="GUID-4B2D8D76-E23E-4B54-BDB6-9DC11C771C97"></a><h4 id="DMKSB-GUID-4B2D8D76-E23E-4B54-BDB6-9DC11C771C97" class="sect4"><span class="enumeration_section">4.7.1 </span>Using Only Masking for Evaluation
                  </h4>
                  <div>
                     <div class="section">
                        <p class="subhead3">To use only masking to evaluate performance:</p>
                        <ol>
                           <li>
                              <p>From the Data Masking Definitions page, select the masking definition to be analyzed, then click <span class="bold">Schedule Job</span>.
                              </p>
                              <p>The Schedule Data Masking Job page appears.</p>
                           </li>
                           <li id="GUID-4B2D8D76-E23E-4B54-BDB6-9DC11C771C97__CHDIAFHI">
                              <p>At the top of the page, provide the requisite information. </p>
                              <p>The script file location pertains to the masking script, which also contains the pre- and post-masking scripts you created in <span class="q">"<a href="data-masking.html#GUID-EC53CD20-AC7B-4B65-AB43-C5E257DCFD61">Pre- and Post-mask Scripts</a>"</span>.
                              </p>
                           </li>
                           <li>
                              <p>In the Encryption Seed section, provide a text string that you want to use for encryption. </p>
                              <p><a id="d6556e3796" class="indexterm-anchor"></a>This section only appears for masking definitions that use the Substitute or Encrypt formats. The seed is an encryption key used by the encryption/hash-based substitution APIs, and makes masking more deterministic instead of being random.
                              </p>
                           </li>
                           <li>
                              <p>In the Workloads section:</p>
                              <ol type="a">
                                 <li>
                                    <p>Select the <span class="bold">Mask SQL Tuning Sets</span> option, if desired.
                                    </p>
                                    <p>If you use a SQL Tuning Set that has sensitive data to evaluate performance, it is beneficial to mask it for security, consistency of data with the database, and to generate correct evaluation results.</p>
                                 </li>
                                 <li>
                                    <p>Select the <span class="bold">Capture Files</span> option, if desired, then select a capture directory. 
                                    </p>
                                    <p>When you select this option, the contents of the directory is masked. The capture file masking is executed consistently with the database.</p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p>In the Detect SQL Plan Changes Due to Masking section, leave the Run SQL Performance Analyzer option unchecked. </p>
                              <p>You do not need to enable this option because the pre- and post-masking scripts you created, referenced in step <a href="data-masking.html#GUID-4B2D8D76-E23E-4B54-BDB6-9DC11C771C97__CHDIAFHI">2</a>, already execute the analyzer.
                              </p>
                           </li>
                           <li>
                              <p>Provide credentials and scheduling information, then click <span class="bold">Submit</span>.
                              </p>
                              <p>The Data Masking Definitions page reappears, and a message appears stating that the Data Masking job has been submitted successfully. </p>
                              <p>During masking of any database, the AWR bind variable data is purged to protect sensitive bind variables from leaking to a test system.</p>
                           </li>
                           <li>
                              <p>When the job completes successfully, click the link in the SQL Performance Analyzer Task column to view the executed analysis tasks and Trial Comparison Report, which shows any changes in plans, timing, and so forth.</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="props_rev_3"><a id="GUID-C019AE61-A64D-40E8-95B9-30332E888E0B" name="GUID-C019AE61-A64D-40E8-95B9-30332E888E0B"></a><h4 id="DMKSB-GUID-C019AE61-A64D-40E8-95B9-30332E888E0B" class="sect4"><span class="enumeration_section">4.7.2 </span>Using Cloning and Masking for Evaluation
                  </h4>
                  <div>
                     <div class="section">
                        <p><a id="d6556e3879" class="indexterm-anchor"></a>Using both cloning and masking to evaluate performance is very similar to the procedure described in the previous section, except that you specify the options from the Clone Database wizard, rather than from the Schedule Data Masking Job page.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p class="subhead3">To use both cloning and masking to evaluate performance:</p>
                        <ol>
                           <li>
                              <p>From the Data Masking Definitions page, select the masking definition you want to clone, select <span class="bold">Clone Database</span> from the Actions list, then click <span class="bold">Go</span>.
                              </p>
                              <p>The Clone Database: Source Type page appears.</p>
                              <p>The Clone Database wizard appears, where you can create a test system to run the mask.</p>
                           </li>
                           <li>
                              <p>Specify the type of source database backup to be used for the cloning operation, then click <span class="bold">Continue</span>.
                              </p>
                           </li>
                           <li>
                              <p>Proceed through the wizard steps as you ordinarily would to clone a database. For assistance, refer to the online help for each step.</p>
                           </li>
                           <li>
                              <p>In the Database Configuration step of the wizard, add a masking definition, then select the Run SQL Performance Analyzer option as well as other options as desired or necessary.</p>
                              <div class="infoboxnote" id="GUID-C019AE61-A64D-40E8-95B9-30332E888E0B__GUID-0EF11ACE-FF8E-4C33-B8A3-501963EECE9D">
                                 <p class="notep1">Note:</p>
                                 <p> The format of the Database Configuration step appears different from the Schedule Data Masking Job page discussed in <span class="q">"<a href="data-masking.html#GUID-4B2D8D76-E23E-4B54-BDB6-9DC11C771C97">Using Only Masking for Evaluation</a>"</span>, but select options as you would for the Schedule Data Masking Job page. 
                                 </p>
                              </div>
                           </li>
                           <li>
                              <p>Continue with the wizard steps to complete and submit the cloning and masking job.</p>
                           </li>
                        </ol>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-30A07656-8093-43D8-845B-7E5BE244A1BE" name="GUID-30A07656-8093-43D8-845B-7E5BE244A1BE"></a><h3 id="DMKSB-GUID-30A07656-8093-43D8-845B-7E5BE244A1BE" class="sect3"><span class="enumeration_section">4.8 </span>Upgrade Considerations
               </h3>
               <div>
                  <div class="section">
                     <p>Upgrading data masking definitions from 10 or 11 Grid Control to 12<span class="italic">c</span> Cloud Control assumes that you have completed the following tasks:
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Upgraded Enterprise Manager to 12<span class="italic">c</span> 
                           </p>
                        </li>
                        <li>
                           <p>Downloaded the latest database plug-in using Self Update and deployed the plug-in to OMS and Management Agent</p>
                        </li>
                     </ul>
                     <p>Completing these tasks automatically upgrades the masking definitions and creates for each a shell Application Data Model (ADM) that becomes populated with the sensitive columns and their dependent column information from the legacy mask definition. The ADM, and hence data masking, then remains in an unverified state, because it is missing the dictionary relationships.</p>
                     <p>Proceed as follows to complete the masking definition upgrade:</p>
                     <ol>
                        <li>
                           <p>From the <span class="bold">Enterprise</span> menu, select <span class="bold">Quality Management</span>, then select <span class="bold">Data Discovery and Modeling</span>.
                           </p>
                        </li>
                        <li>
                           <p>For each shell ADM (verification status is Needs Upgrade), do the following:</p>
                           <ol type="a">
                              <li>
                                 <p>Select the ADM in the table.</p>
                              </li>
                              <li>
                                 <p>From the Actions menu, select <span class="bold">Upgrade and Verify</span>. 
                                 </p>
                              </li>
                              <li>
                                 <p>Schedule and submit the job. </p>
                                 <p>When the job completes, verification status should be Valid.</p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>From the <span class="bold">Enterprise</span> menu, select <span class="bold">Quality Management</span>, then select <span class="bold">Data Masking Definitions</span>.
                           </p>
                        </li>
                        <li>
                           <p>For each upgraded masking definition, do the following:</p>
                           <ol type="a">
                              <li>
                                 <p>Open the masking definition for editing.</p>
                              </li>
                              <li>
                                 <p>In <span class="bold">Advanced Options</span>, select the "Recompile invalid dependent objects after masking" option, with Parallel and Default settings.
                                 </p>
                              </li>
                              <li>
                                 <p>Click <span class="bold">OK</span> to save your changes.
                                 </p>
                              </li>
                           </ol>
                        </li>
                        <li>
                           <p>Next, schedule a script generation job for each upgraded masking definition.</p>
                        </li>
                     </ol>
                     <p>You can now resume masking with the upgraded data masking definitions.</p>
                     <div class="infoboxnotealso" id="GUID-30A07656-8093-43D8-845B-7E5BE244A1BE__GUID-19F08234-0446-4D25-A03F-CEA8F6344E80">
                        <p class="notep1">See Also:</p>
                        <p><span class="q">"<a href="data-masking.html#GUID-779BB0C3-BC5D-40FD-BBE3-00B5E4319D43">Adding Dependent Columns</a>"</span> for information on dependent columns
                        </p>
                     </div>
                     <p><a id="d6556e4054" class="indexterm-anchor"></a><a id="d6556e4058" class="indexterm-anchor"></a>Consider these other points regarding upgrades:
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You can combine multiple upgraded ADMs by exporting an ADM and performing an Import Content into another ADM.</p>
                        </li>
                        <li>
                           <p>An upgraded ADM uses the same semantics as for upgrading a legacy mask definition (discussed above), in that you would need to perform a validation.</p>
                        </li>
                        <li>
                           <p>An 11.1 Grid Control E-Business Suite (EBS) masking definition based on an EBS masking template shipped from Oracle is treated as a custom application after the upgrade. You can always use the approach discussed in the first bulleted item above to move into a newly created EBS ADM with all of the metadata in place. However, this is not required.</p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-85FE9C7E-5A94-4163-B89D-53C93058272A" name="GUID-85FE9C7E-5A94-4163-B89D-53C93058272A"></a><h3 id="DMKSB-GUID-85FE9C7E-5A94-4163-B89D-53C93058272A" class="sect3"><span class="enumeration_section">4.9 </span>Using the Shuffle Format
               </h3>
               <div>
                  <p><a id="d6556e4110" class="indexterm-anchor"></a>A shuffle format is available that does not preserve data distribution when the column values are not unique and also when it is conditionally masked. For example, consider the Original Table (<a href="data-masking.html#GUID-85FE9C7E-5A94-4163-B89D-53C93058272A__TABLE-122-5F4158D6" title="Original table - data distribution integrity non-preservation">Table 4-1</a>) that shows two columns: EmpName and Salary. The Salary column has three distinct values: 10, 90, and 20.
                  </p>
                  <div class="tblformal" id="GUID-85FE9C7E-5A94-4163-B89D-53C93058272A__TABLE-122-5F4158D6">
                     <p class="titleintable">Table 4-1  Original Table (Non-preservation)</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title=" Original Table (Non-preservation)" summary="Original table - data distribution integrity non-preservation" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d6556e4130">EmpName</th>
                              <th align="left" valign="bottom" width="20%" id="d6556e4132">Salary</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d6556e4136" headers="d6556e4130 ">A</td>
                              <td align="left" valign="top" width="20%" headers="d6556e4136 d6556e4132 ">10</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d6556e4141" headers="d6556e4130 ">B</td>
                              <td align="left" valign="top" width="20%" headers="d6556e4141 d6556e4132 ">90</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d6556e4146" headers="d6556e4130 ">C</td>
                              <td align="left" valign="top" width="20%" headers="d6556e4146 d6556e4132 ">10</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d6556e4151" headers="d6556e4130 ">D</td>
                              <td align="left" valign="top" width="20%" headers="d6556e4151 d6556e4132 ">10</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d6556e4156" headers="d6556e4130 ">E</td>
                              <td align="left" valign="top" width="20%" headers="d6556e4156 d6556e4132 ">90</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d6556e4161" headers="d6556e4130 ">F</td>
                              <td align="left" valign="top" width="20%" headers="d6556e4161 d6556e4132 ">20</td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>If you mask the Salary column with this format, each of the original values is replaced with one of the values from this set. Assume that the shuffle format replaces 10 with 20, 90 with 10, and 20 with 90 (<a href="data-masking.html#GUID-85FE9C7E-5A94-4163-B89D-53C93058272A__MAPPINGTABLENON-PRESERVATION-5F41934D" title="Mapping table - data distribution integrity non-preservation">Table 4-2</a>).
                  </p>
                  <div class="tblformal" id="GUID-85FE9C7E-5A94-4163-B89D-53C93058272A__MAPPINGTABLENON-PRESERVATION-5F41934D">
                     <p class="titleintable">Table 4-2 Mapping Table (Non-preservation)</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Mapping Table (Non-preservation)" summary="Mapping table - data distribution integrity non-preservation" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d6556e4182">EmpName</th>
                              <th align="left" valign="bottom" width="20%" id="d6556e4184">Salary</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d6556e4188" headers="d6556e4182 ">10</td>
                              <td align="left" valign="top" width="20%" headers="d6556e4188 d6556e4184 ">20</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d6556e4193" headers="d6556e4182 ">90</td>
                              <td align="left" valign="top" width="20%" headers="d6556e4193 d6556e4184 ">10</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d6556e4198" headers="d6556e4182 ">20</td>
                              <td align="left" valign="top" width="20%" headers="d6556e4198 d6556e4184 ">90</td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>The result is a shuffled Salary column as shown in the Masked Table (<a href="data-masking.html#GUID-85FE9C7E-5A94-4163-B89D-53C93058272A__MASKEDTABLENON-PRESERVATION-5F41AFD0" title="Masked table - data distribution integrity non-preservation">Table 4-3</a>), but the data distribution is changed. While the value 10 occurs three times in the Salary column of the Original Table, it occurs only twice in the Masked Table.
                  </p>
                  <div class="tblformal" id="GUID-85FE9C7E-5A94-4163-B89D-53C93058272A__MASKEDTABLENON-PRESERVATION-5F41AFD0">
                     <p class="titleintable">Table 4-3 Masked Table (Non-preservation)</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Masked Table (Non-preservation)" summary="Masked table - data distribution integrity non-preservation" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="20%" id="d6556e4219">EmpName</th>
                              <th align="left" valign="bottom" width="20%" id="d6556e4221">Salary</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d6556e4225" headers="d6556e4219 ">A</td>
                              <td align="left" valign="top" width="20%" headers="d6556e4225 d6556e4221 ">20</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d6556e4230" headers="d6556e4219 ">B</td>
                              <td align="left" valign="top" width="20%" headers="d6556e4230 d6556e4221 ">10</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d6556e4235" headers="d6556e4219 ">C</td>
                              <td align="left" valign="top" width="20%" headers="d6556e4235 d6556e4221 ">20</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d6556e4240" headers="d6556e4219 ">D</td>
                              <td align="left" valign="top" width="20%" headers="d6556e4240 d6556e4221 ">20</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d6556e4245" headers="d6556e4219 ">E</td>
                              <td align="left" valign="top" width="20%" headers="d6556e4245 d6556e4221 ">10</td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="20%" id="d6556e4250" headers="d6556e4219 ">F</td>
                              <td align="left" valign="top" width="20%" headers="d6556e4250 d6556e4221 ">90</td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>If the salary values had been unique, the format would have maintained data distribution. </p>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-D2619FCF-CA77-4F29-8317-58FF62AC7F96" name="GUID-D2619FCF-CA77-4F29-8317-58FF62AC7F96"></a><h3 id="DMKSB-GUID-D2619FCF-CA77-4F29-8317-58FF62AC7F96" class="sect3"><span class="enumeration_section">4.10 </span>Using Group Shuffle
               </h3>
               <div>
                  <p>Group shuffle enables you to perform a shuffle within discrete units, or groups, where there is a relationship among the members of the group. Consider the case of shuffling the salaries of employees. <a href="data-masking.html#GUID-D2619FCF-CA77-4F29-8317-58FF62AC7F96__CEGIHGCJ" title="Shows employees within groups and their present and shuffled salaries">Table 4-4</a> illustrates the group shuffle mechanism, where employees are categorized as managers (M) or workers (W), and salaries are shuffled within job category.
                  </p>
                  <div class="tblformal" id="GUID-D2619FCF-CA77-4F29-8317-58FF62AC7F96__CEGIHGCJ">
                     <p class="titleintable">Table 4-4 Group Shuffle Using Job Category </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Group Shuffle Using Job Category " summary="Shows employees within groups and their present and shuffled salaries" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="23%" id="d6556e4310">Employee</th>
                              <th align="left" valign="bottom" width="21%" id="d6556e4313">Job Category</th>
                              <th align="left" valign="bottom" width="25%" id="d6556e4316">Salary</th>
                              <th align="left" valign="bottom" width="31%" id="d6556e4319">Shuffled Salary</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d6556e4324" headers="d6556e4310 ">
                                 <p>Alice</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d6556e4324 d6556e4313 ">
                                 <p>M</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d6556e4324 d6556e4316 ">
                                 <p>90</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d6556e4324 d6556e4319 ">
                                 <p>88</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d6556e4337" headers="d6556e4310 ">
                                 <p>Bill</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d6556e4337 d6556e4313 ">
                                 <p>M</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d6556e4337 d6556e4316 ">
                                 <p>88</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d6556e4337 d6556e4319 ">
                                 <p>90</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d6556e4350" headers="d6556e4310 ">
                                 <p>Carol</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d6556e4350 d6556e4313 ">
                                 <p>W</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d6556e4350 d6556e4316 ">
                                 <p>72</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d6556e4350 d6556e4319 ">
                                 <p>70</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d6556e4363" headers="d6556e4310 ">
                                 <p>Denise</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d6556e4363 d6556e4313 ">
                                 <p>W</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d6556e4363 d6556e4316 ">
                                 <p>57</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d6556e4363 d6556e4319 ">
                                 <p>45</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d6556e4376" headers="d6556e4310 ">
                                 <p>Eddie</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d6556e4376 d6556e4313 ">
                                 <p>W</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d6556e4376 d6556e4316 ">
                                 <p>70</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d6556e4376 d6556e4319 ">
                                 <p>57</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d6556e4389" headers="d6556e4310 ">
                                 <p>Frank</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d6556e4389 d6556e4313 ">
                                 <p>W</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d6556e4389 d6556e4316 ">
                                 <p>45</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d6556e4389 d6556e4319 ">
                                 <p>72</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-2A303E41-DF8A-4D1E-8AAB-45467D66F082" name="GUID-2A303E41-DF8A-4D1E-8AAB-45467D66F082"></a><h3 id="DMKSB-GUID-2A303E41-DF8A-4D1E-8AAB-45467D66F082" class="sect3"><span class="enumeration_section">4.11 </span>Using Conditional Masking
               </h3>
               <div>
                  <p>To demonstrate how conditional masking can handle duplicate values, add to <a href="data-masking.html#GUID-D2619FCF-CA77-4F29-8317-58FF62AC7F96__CEGIHGCJ" title="Shows employees within groups and their present and shuffled salaries">Table 4-4</a> another job category, assistant (A), where the employee in this category, George, earns the same as Frank. Assume the following conditions:
                  </p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p>If job category is M, replace salary with a random number between 1 and 10. </p>
                     </li>
                     <li>
                        <p>If job category is W, set salary to a fixed number (01).</p>
                     </li>
                     <li>
                        <p>Default is to preserve the existing value.</p>
                     </li>
                  </ul>
                  <p>Applying these conditions results in the masked values shown in <a href="data-masking.html#GUID-2A303E41-DF8A-4D1E-8AAB-45467D66F082__CEGDGJAA" title="Shows employees within groups and their present and shuffled salaries">Table 4-5</a>:
                  </p>
                  <div class="tblformal" id="GUID-2A303E41-DF8A-4D1E-8AAB-45467D66F082__CEGDGJAA">
                     <p class="titleintable">Table 4-5 Using Job Category for Group Shuffle </p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="Using Job Category for Group Shuffle " summary="Shows employees within groups and their present and shuffled salaries" width="100%" frame="hsides" border="1" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="23%" id="d6556e4472">Employee</th>
                              <th align="left" valign="bottom" width="21%" id="d6556e4475">Job Category</th>
                              <th align="left" valign="bottom" width="25%" id="d6556e4478">Salary</th>
                              <th align="left" valign="bottom" width="31%" id="d6556e4481">Conditional Result</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d6556e4486" headers="d6556e4472 ">
                                 <p>Alice</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d6556e4486 d6556e4475 ">
                                 <p>M</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d6556e4486 d6556e4478 ">
                                 <p>90</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d6556e4486 d6556e4481 ">
                                 <p>5</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d6556e4499" headers="d6556e4472 ">
                                 <p>Bill</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d6556e4499 d6556e4475 ">
                                 <p>M</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d6556e4499 d6556e4478 ">
                                 <p>88</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d6556e4499 d6556e4481 ">
                                 <p>7</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d6556e4512" headers="d6556e4472 ">
                                 <p>Carol</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d6556e4512 d6556e4475 ">
                                 <p>W</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d6556e4512 d6556e4478 ">
                                 <p>72</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d6556e4512 d6556e4481 ">
                                 <p>01</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d6556e4525" headers="d6556e4472 ">
                                 <p>Denise</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d6556e4525 d6556e4475 ">
                                 <p>W</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d6556e4525 d6556e4478 ">
                                 <p>57</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d6556e4525 d6556e4481 ">
                                 <p>01</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d6556e4538" headers="d6556e4472 ">
                                 <p>Eddie</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d6556e4538 d6556e4475 ">
                                 <p>W</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d6556e4538 d6556e4478 ">
                                 <p>70</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d6556e4538 d6556e4481 ">
                                 <p>01</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d6556e4551" headers="d6556e4472 ">
                                 <p>Frank</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d6556e4551 d6556e4475 ">
                                 <p>W</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d6556e4551 d6556e4478 ">
                                 <p>45</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d6556e4551 d6556e4481 ">
                                 <p>01</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d6556e4564" headers="d6556e4472 ">
                                 <p>George</p>
                              </td>
                              <td align="left" valign="top" width="21%" headers="d6556e4564 d6556e4475 ">
                                 <p>A</p>
                              </td>
                              <td align="left" valign="top" width="25%" headers="d6556e4564 d6556e4478 ">
                                 <p>45</p>
                              </td>
                              <td align="left" valign="top" width="31%" headers="d6556e4564 d6556e4481 ">
                                 <p>45</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>Conditional masking works when there are duplicate values provided there are no dependent columns or foreign keys. If either of these is present, a "bleeding condition" results in the first of two duplicate values becoming the value of the second. So, in the example, George's salary is not preserved, but becomes 01.</p>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-A660FFCC-78C3-44C4-9A77-5352A734B9E9" name="GUID-A660FFCC-78C3-44C4-9A77-5352A734B9E9"></a><h3 id="DMKSB-GUID-A660FFCC-78C3-44C4-9A77-5352A734B9E9" class="sect3"><span class="enumeration_section">4.12 </span>Using Data Masking with LONG Columns
               </h3>
               <div>
                  <p><a id="d6556e4615" class="indexterm-anchor"></a>When data masking script generation completes, an impact report appears. If the masking definition has tables with columns of data type LONG, the following warning message is displayed in the impact report:
                  </p><pre class="oac_no_warn" dir="ltr">The table &lt;table_name&gt; has a LONG column. Data Masking uses "in-place" UPDATE 
to mask tables with LONG columns. This will generate undo information and the
original data will be available in the undo tablespaces during the undo 
retention period. You should purge undo information after masking the data. 
Any orphan rows in this table will not be masked.
</pre></div>
            </div>
            <div class="props_rev_3"><a id="GUID-E0EC45DD-765B-4FFF-AA0A-EE6A8CC6554A" name="GUID-E0EC45DD-765B-4FFF-AA0A-EE6A8CC6554A"></a><h3 id="DMKSB-GUID-E0EC45DD-765B-4FFF-AA0A-EE6A8CC6554A" class="sect3"><span class="enumeration_section">4.13 </span>Debugging a Data Masking Job
               </h3>
               <div>
                  <div class="section">
                     <p>The <code>reorganize.pl</code> script is used internally while a data masking job is being executed. This script contains some useful debugging messages such as <samp class="msgph">ORACLE_HOME</samp>, <samp class="msgph">Protocol</samp>, <samp class="msgph">Host</samp>, <samp class="msgph">Port</samp>, <samp class="msgph">Sid</samp>, and <samp class="msgph">Connection String</samp> that the masking job uses in order to connect to the target database, and run the script.
                     </p>
                     <p>To print the debugging message to <code>user_perl.trc </code>file in<code> $EMSTATE/sysman/log/ </code>, enable agent debug tracing by doing the following:
                     </p>
                     <p><code>$EMSTATE/bin/emctl setproperty agent -name "EMAGENT_PERL_TRACE_LEVEL" -value "DEBUG"</code></p>
                     <p><code>$EMSTATE/bin/emctl setproperty agent -name "userPerlTraceDir" -value "$EMSTATE/sysman/log"</code></p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   </body>
</html>