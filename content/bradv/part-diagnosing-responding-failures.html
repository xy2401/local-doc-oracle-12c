<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Diagnosing and Responding to Failures</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Backup and Recovery User's Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Backup and Recovery User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-03-20T06:03:34-07:00">
      <meta name="dcterms.title" content="Database Backup and Recovery User's Guide">
      <meta name="dcterms.dateCopyrighted" content="2003, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E85627-04">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="managing-recovery-catalog.html" title="Previous" type="text/html">
      <link rel="next" href="rman-data-repair-concepts.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"12.2","element_name":"Release 12.2","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="BRADV">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="managing-recovery-catalog.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="rman-data-repair-concepts.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Backup and Recovery User's Guide</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem"> Diagnosing and Responding to Failures </li>
            </ol>
            <a id="GUID-ED89DC53-A816-450B-BFF4-A712D2694EEC" name="GUID-ED89DC53-A816-450B-BFF4-A712D2694EEC"></a><a id="BRADV325"></a>
            
            <h2 id="BRADV-GUID-ED89DC53-A816-450B-BFF4-A712D2694EEC" class="sect2"><span class="enumeration_part">Part V </span> Diagnosing and Responding to Failures 
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>The following chapters describe how to diagnose and respond to media failures and data corruptions. This part of the book contains the following chapters:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="rman-data-repair-concepts.html#GUID-1805CCF7-4AF2-482D-B65A-998192F89C2B" title="While several problems can halt the normal operation of an Oracle database or affect database I/O operations, only the following typically require DBA intervention and data repair: user errors, application errors, and media failures.User errors occur when, either due to an error in application logic or a manual mistake, data in your database is changed or deleted incorrectly. Sometimes a software malfunction can corrupt data blocks. In a physical corruption, which is also called a media corruption, the database does not recognize the block.A media failure occurs when a problem external to the database prevents it from reading from or writing to a file during normal operations. RMAN provides multiple methods of data repair.In an RMAN restore operation, you select files to be restored and then run the RESTORE command. Typically, you restore files in preparation for media recovery.RMAN uses the records of available backup sets or image copies in the RMAN repository to select the best available backups for use in the restore operation.RMAN automatically uses restore failover to skip corrupted or inaccessible backups and look for usable backups. When a backup is not found, or contains corrupt data, RMAN automatically looks for another backup from which to restore the desired files. RMAN automatically decrypts backup sets that are protected with backup encryption when their contents are restored. Additional steps, if any, depend on the on the technique that was used to encrypt the backups.When Automatic Storage Management (ASM) disk groups are used, an RMAN restore operation creates new copies of data files only if the full name of a data file, including the incarnation, does not match with the name of an existing data file. RMAN uses restore optimization to avoid restoring data files from backup when possible. If a data file is present in the correct location and its header contains the expected information, then RMAN does not restore the data file from backup.In media recovery, RMAN applies changes to restored data to roll forward this data in time. RMAN automates media recovery. RMAN automatically restores and applies both incremental backups and archived redo logs in whatever combination is most efficient.A database incarnation is created whenever you open the database with the RESETLOGS option. RMAN performs certain actions when you open the database with the RESETLOGS option.A pluggable database (PDB) incarnation is a subincarnation of the multitenant container database (CDB) and is expressed as (database_incarnation, pdb_incarnation). When a database goes through multiple incarnations, some backups can become orphaned backups. Orphaned backups are backups created during incarnations of the database that are not in the direct ancestral path.Orphan PDB backups can result when you perform point-in-time recovery on a pluggable database (PDB) and then open the PDB using the RESETLOGS option."> RMAN Data Repair Concepts </a></p>
                  </li>
                  <li>
                     <p><a href="diagnosing-repairing-failures-dra.html#GUID-8C219B50-1F7F-4F7A-95EE-5F029AE7EB2A" title="Data Recovery Advisor is an Oracle Database tool that automatically diagnoses data failures, determines and presents appropriate repair options, and executes repairs at the user's request.You must familiarize yourself with a few concepts before using the Data Recovery Advisor.Data Recovery Advisor has both a command-line and GUI interface. The GUI interface is available in Oracle Enterprise Manager Cloud Control.A checker is a diagnostic operation or procedure registered with the Health Monitor to assess the health of the database or its components. A failure is a persistent data corruption that is detected by a data integrity check.Every failure has a failure status: OPEN or CLOSED. Every failure has a failure priority: CRITICAL, HIGH, or LOW. Data Recovery Advisor only assigns CRITICAL or HIGH priority to diagnosed failures.For clarity, Data Recovery Advisor groups related failures together. The ADVISE FAILURE command can present both manual and automatic repair options. Data Recovery Advisor categorizes manual actions as either mandatory or optional.When possible, Data Recovery Advisor consolidates repairs to fix multiple failures into a single repair. A consolidated repair may contain multiple steps.Whenever Data Recovery Advisor generates an automated repair option, it creates a script that explains which commands RMAN intends to use to repair the failure. Data Recovery Advisor prints the location of this script, which is a text file residing on the operating system. Data Recovery Advisor only supports single-instance databases. Oracle Real Application Clusters (Oracle RAC) databases are not supported.There are some limitation with Data Recovery Advisor in an Oracle Data Guard environment.Data Recovery Advisor can only be used to diagnose and repair data corruptions in non-CDBs and the root of a multitenant container database (CDB). Data Recovery Advisor is not supported for pluggable databases (PDBs).The Data Recovery Advisor workflow begins when you either suspect or discover a failure. You can discover failures in many ways, including error messages, alerts, trace files, and failed data integrity checks.You can use the Data Recovery Advisor to automatically diagnose data failures, determine appropriate repair options, and execute repairs in a CDB. If you suspect or know that one or more database failures have occurred, then use LIST FAILURE to obtain information about them.The easiest way to determine problems that your database is encountering is to use the LIST FAILURE command. Besides providing more verbose output, LIST FAILURE also enables you to restrict output.The database invokes data integrity checks reactively when a user transaction is trying to access corrupted data. In some cases, latent failures can go undetected. Use the ADVISE FAILURE command to display repair options after running LIST FAILURE in an RMAN session. This command prints a summary of the failures and implicitly closes all open failures that are repaired.If one or more failures exist, then you typically use LIST FAILURE to show information about the failures and then ADVISE FAILURE in the same RMAN session to obtain a report of your repair options.You can also request repair options for specific failures. You can specify failures by status (CRITICAL, HIGH, or LOW) or by failure number. You can also use EXCLUDE FAILURE to exclude one or more failures from the report.If ADVISE FAILURE suggests manual repairs, then try these first. If manual repairs are not possible, or if they do not repair all failures, then you can use REPAIR FAILURE to automatically fix failures suggested in the most recent ADVISE FAILURE command in your current RMAN session.By default the script is displayed to standard output. You can use the SPOOL command to write the script to an editable file.In some situations, you may want to use the CHANGE FAILURE command to alter the status or priority of a failure."> Diagnosing and Repairing Failures with Data Recovery Advisor </a></p>
                  </li>
                  <li>
                     <p><a href="validating-database-files-backups.html#GUID-CC967929-9610-410D-B881-66E71353D84C" title="The main purpose of RMAN validation is to check for corrupt blocks and missing files. You can also use RMAN to determine whether backups can be restored.The database prevents operations that result in unusable backup files or corrupted restored data files. A corrupt block is a block that has been changed so that it differs from what Oracle Database expects to find.In a physical corruption, which is also called a media corruption, the database does not recognize the block at all: the checksum is invalid, the block contains all zeros, or the header and footer of the block do not match. You can use the SET MAXCORRUPT command to set the total number of unmarked corruptions permitted in a file for RMAN backups. The default is zero, meaning that RMAN does not tolerate unmarked corrupt blocks of any kind.Oracle Database supports different techniques for detecting, repairing, and monitoring block corruption.You can use the VALIDATE command to manually check for physical and logical corruptions in database files. You can also use the BACKUP VALIDATE command to perform validation.You can run RESTORE...VALIDATE to test whether RMAN can restore a specific file or set of files from a backup. RMAN chooses which backups to use.RMAN enables you to validate multitenant container databases (CDBs) and pluggable databases (PDBs) using the VALIDATE command. The steps to validate a CDB are similar to the ones used to validate a non-CDB. There are multiple methods to validate PDBs.">Validating Database Files and Backups</a></p>
                  </li>
                  <li>
                     <p><a href="rman-complete-database-recovery.html#GUID-D908719C-9D46-4084-850C-0F81C25094EB" title="The decision about when and how to recover depends on the state of the database and the location of its data files.During complete recovery RMAN restores one or more data files and then applies all the redo generated after the restored backup.Use the RESTORE and RECOVER commands with the TABLESPACE option to perform complete recovery of a tablespaceYou can switch to an existing image copy of a data file instead of restoring a damaged data file.You can perform complete database recovery by switching to image copies of damaged data files instead of restoring these data files.Because tablespaces in different PDBs can have the same name, to eliminate ambiguity you must connect directly to a PDB to recover one or more of its tablespaces. In contrast, because data file numbers and paths are unique across the CDB, you can connect to either the root or a PDB to recover PDB data files.RMAN enables you to use the RESTORE and RECOVER commands to perform complete recovery of the application containers without impacting the other containers in the CDB.Use the RESTORE and RECOVER commands to perform complete recovery of the application root.You can perform complete recovery of an application container, which includes the application root and all its application PDBs without impacting the other PDBs within the CDB.Use the RESTORE and RECOVER commands to perform complete recovery of one or more application PDBs.Performing recovery of a database containing sparse data files is very similar to performing recovery of a whole database.Performing recovery of a sparse CDB is very similar to performing the complete recovery of a sparse database."> Performing Complete Database Recovery </a></p>
                  </li>
                  <li>
                     <p><a href="rman-performing-flashback-dbpitr.html#GUID-5463669A-DC89-4FF4-ACCE-136A72DF687B" title="You can perform a Flashback Database operation for a whole multitenant container database (CDB) or for a particular pluggable database (PDB). A multitenant container database (CDB) can use shared undo or local undo. The technique used by RMAN to perform flashback database operations depends on the type of undo configuration for the CDB.You can perform a flashback database operation for a whole multitenant container database (CDB) using the FLASHBACK DATABASE command.You can perform a flashback database operation for a single pluggable database (PDB) in a multitenant container database (CDB) using the FLASHBACK DATABASE command.Use the RESTORE and RECOVER commands to perform point-in-time recovery of an application PDB."> Performing Flashback and Database Point-in-Time Recovery</a></p>
                  </li>
                  <li>
                     <p><a href="rman-block-media-recovery.html#GUID-1E226393-17D0-4AB0-A05D-91210255D8FF" title="The V$DATABASE_BLOCK_CORRUPTION view displays blocks marked corrupt by database components such as RMAN, ANALYZE, and SQL queries."> Performing Block Media Recovery </a></p>
                  </li>
                  <li>
                     <p><a href="rman-recovery-advanced.html#GUID-EA9DB3ED-2481-47DD-908B-A314D5C3F730" title="You can restore backups that were created using older versions of RMAN, up to Oracle Database 9i Release 2 (9.2.0.8)."> Performing RMAN Recovery: Advanced Scenarios</a></p>
                  </li>
                  <li>
                     <p><a href="performing-rman-tspitr.html#GUID-CAACDB53-7C3A-45B4-8249-C5D855D47571" title="It is extremely important that you choose the right target time or SCN for your TSPITR.">Performing RMAN Tablespace Point-in-Time Recovery (TSPITR) </a></p>
                  </li>
                  <li>
                     <p><a href="rman-recovering-tables-partitions.html#GUID-87B7F772-335F-4179-81C9-91678D026D01" title="The RMAN RECOVER command enables you to recover tables and table partitions from RMAN backups.To recover table or table partitions, you need a full backup of undo, SYSTEM, SYSAUX, and the tablespace that contains the table or table partition. RMAN uses the RECOVER command to recover tables or table partitions to a specified point in time.Recovering tables or table partitions into a different schema enables you to avoid name conflicts that may be caused by constraint, index, or trigger names that already existing in the source schema.This example recovers multiple tables to a specified point in time that is represented using SYSDATE.This example uses RMAN backups to recover multiple table partitions.This example recovers multiple tables into a new schema that is different from the source schema."> Recovering Tables and Table Partitions from RMAN Backups</a></p>
                  </li>
               </ul>
            </div>
         </div>
      </article>
   </body>
</html>