<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Recovering Tables and Table Partitions</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Backup and Recovery User's Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Backup and Recovery User's Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-backup-and-recovery-users-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-03-20T06:03:34-07:00">
      <meta name="dcterms.title" content="Database Backup and Recovery User's Guide">
      <meta name="dcterms.dateCopyrighted" content="2003, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E85627-04">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="performing-rman-tspitr.html" title="Previous" type="text/html">
      <link rel="next" href="part-rman-tuning-troubleshooting.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"12.2","element_name":"Release 12.2","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="BRADV">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="performing-rman-tspitr.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="part-rman-tuning-troubleshooting.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Backup and Recovery User's Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="part-diagnosing-responding-failures.html" property="item" typeof="WebPage"><span property="name"> Diagnosing and Responding to Failures </span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Recovering Tables and Table Partitions</li>
            </ol>
            <a id="GUID-87B7F772-335F-4179-81C9-91678D026D01" name="GUID-87B7F772-335F-4179-81C9-91678D026D01"></a><a id="BRADV686"></a>
            
            <h2 id="BRADV-GUID-87B7F772-335F-4179-81C9-91678D026D01" class="sect2"><span class="enumeration_chapter">22 </span>Recovering Tables and Table Partitions
            </h2>
         </header>
         <div class="ind">
            <div>
               <p>This chapter describes how to recover tables and table partitions to a specified point in time. This chapter contains the following topics:</p>
               <ul style="list-style-type: disc;">
                  <li>
                     <p><a href="rman-recovering-tables-partitions.html#GUID-FBD1224C-822F-45E7-898D-1DEC3C6FD7A1" title="The RMAN RECOVER command enables you to recover tables and table partitions from RMAN backups.">Overview of Recovering Tables and Table Partitions from RMAN Backups</a></p>
                  </li>
                  <li>
                     <p><a href="rman-recovering-tables-partitions.html#GUID-27F62B73-7341-4939-9677-5F6D614DE55A">Preparing to Recover Tables and Table Partitions</a></p>
                  </li>
                  <li>
                     <p><a href="rman-recovering-tables-partitions.html#GUID-04D1B794-25D0-4C1E-9A98-F08AD361B41E">Recovering Tables and Table Partitions</a></p>
                  </li>
                  <li>
                     <p><a href="rman-recovering-tables-partitions.html#GUID-B8245791-9B75-4AE7-ACE9-D9EDBC2DACC0">Recovering Tables and Table Partitions in PDBs</a></p>
                  </li>
                  <li>
                     <p><a href="rman-recovering-tables-partitions.html#GUID-DEE9C16C-C30A-46C6-A0CE-2DE060A8EC10" title="This example recovers multiple tables to a specified point in time that is represented using SYSDATE.This example uses RMAN backups to recover multiple table partitions.This example recovers multiple tables into a new schema that is different from the source schema.">Examples: Recovering Tables and Table Partitions From RMAN Backups</a></p>
                  </li>
               </ul>
            </div><a id="BRADV687"></a><div class="props_rev_3"><a id="GUID-FBD1224C-822F-45E7-898D-1DEC3C6FD7A1" name="GUID-FBD1224C-822F-45E7-898D-1DEC3C6FD7A1"></a><h3 id="BRADV-GUID-FBD1224C-822F-45E7-898D-1DEC3C6FD7A1" class="sect3"><span class="enumeration_section">22.1 </span>Overview of Recovering Tables and Table Partitions
               </h3>
               <div>
                  <p>The RMAN <code class="codeph">RECOVER</code> command enables you to recover tables and table partitions from RMAN backups.
                  </p>
                  <div class="infoboxnote" id="GUID-FBD1224C-822F-45E7-898D-1DEC3C6FD7A1__GUID-62C0D687-8B62-4227-B13C-D7EB544A2E62">
                     <p class="notep1">Note:</p>
                     <p>There are other methods of recovering tables to a specified point in time such as Oracle Flashback and TSPITR. For more information about the scenarios in which these methods are useful and how to recover tables using these methods, see:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="rman-performing-flashback-dbpitr.html#GUID-5463669A-DC89-4FF4-ACCE-136A72DF687B" title="You can perform a Flashback Database operation for a whole multitenant container database (CDB) or for a particular pluggable database (PDB). A multitenant container database (CDB) can use shared undo or local undo. The technique used by RMAN to perform flashback database operations depends on the type of undo configuration for the CDB.You can perform a flashback database operation for a whole multitenant container database (CDB) using the FLASHBACK DATABASE command.You can perform a flashback database operation for a single pluggable database (PDB) in a multitenant container database (CDB) using the FLASHBACK DATABASE command.Use the RESTORE and RECOVER commands to perform point-in-time recovery of an application PDB."> Performing Flashback and Database Point-in-Time Recovery</a></p>
                        </li>
                        <li>
                           <p><a href="performing-rman-tspitr.html#GUID-CAACDB53-7C3A-45B4-8249-C5D855D47571" title="It is extremely important that you choose the right target time or SCN for your TSPITR.">Performing RMAN Tablespace Point-in-Time Recovery (TSPITR) </a></p>
                        </li>
                     </ul>
                  </div>
                  <div class="infoboxnotealso" id="GUID-FBD1224C-822F-45E7-898D-1DEC3C6FD7A1__GUID-61ED9564-575B-4A20-A5F2-E0C079B04E07">
                     <p class="notep1">See Also:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><a href="rman-recovering-tables-partitions.html#GUID-F9ECE704-0A06-4582-B6AF-6C05C0EFA8ED">Purpose of Recovering Tables and Table Partitions from RMAN Backups</a></p>
                        </li>
                        <li>
                           <p><a href="rman-recovering-tables-partitions.html#GUID-EEB32689-9ACE-40C6-9874-5FB484C4126D" title="To recover table or table partitions, you need a full backup of undo, SYSTEM, SYSAUX, and the tablespace that contains the table or table partition.">RMAN Backups Required to Recover Tables and Table Partitions</a></p>
                        </li>
                        <li>
                           <p><a href="rman-recovering-tables-partitions.html#GUID-2102898D-E461-4161-8DBC-EE4B37213B60" title="RMAN uses the RECOVER command to recover tables or table partitions to a specified point in time.">Basic Concepts of Recovering Tables and Table Partitions from RMAN Backups</a></p>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV688"></a><div class="props_rev_3"><a id="GUID-F9ECE704-0A06-4582-B6AF-6C05C0EFA8ED" name="GUID-F9ECE704-0A06-4582-B6AF-6C05C0EFA8ED"></a><h4 id="BRADV-GUID-F9ECE704-0A06-4582-B6AF-6C05C0EFA8ED" class="sect4"><span class="enumeration_section">22.1.1 </span>Purpose of Recovering Tables and Table Partitions from RMAN Backups
                  </h4>
                  <div>
                     <p>RMAN enables you to recover one or more tables or table partitions to a specified point in time without affecting the remaining database objects. You can use previously-created RMAN backups to recover tables and table partitions to a specified point in time.</p>
                     <p>Recovering tables and table partitions from RMAN backups is useful in the following scenarios:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>You need to recover a very small number of tables to a particular point in time. In this situation, TSPITR is not the most effective solution because it moves all the objects in the tablespace to a specified point in time. </p>
                        </li>
                        <li>
                           <p>You need to recover tables that have been logically corrupted or have been dropped and purged.</p>
                        </li>
                        <li>
                           <p>Flashback Table is not possible because the desired point-in-time is older than available undo.</p>
                        </li>
                        <li>
                           <p>You want to recover data that is lost after a DDL operation modified the structure of tables. Using Flashback Table is not possible because a DDL was run on the tables between the desired point in time and the current time. Flashback Table cannot rewind tables through structural changes such as a truncate table operation.</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="BRADV808"></a><div class="props_rev_3"><a id="GUID-EEB32689-9ACE-40C6-9874-5FB484C4126D" name="GUID-EEB32689-9ACE-40C6-9874-5FB484C4126D"></a><h4 id="BRADV-GUID-EEB32689-9ACE-40C6-9874-5FB484C4126D" class="sect4"><span class="enumeration_section">22.1.2 </span>RMAN Backups Required to Recover Tables and Table Partitions
                  </h4>
                  <div>
                     <p>To recover table or table partitions, you need a full backup of undo, <code class="codeph">SYSTEM</code>, <code class="codeph">SYSAUX</code>, and the tablespace that contains the table or table partition. 
                     </p>
                     <p>To recover a table, all partitions that contain the dependent objects of the table must be included in the recovery set. If the indexes or partitions for a table in tablespace <code class="codeph">tbs1</code> are contained in tablespace <code class="codeph">tbs2</code>, then you can recover the table only if tablepsace <code class="codeph">tbs2</code> is also included in the recovery set. 
                     </p>
                     <p></p>
                     <p>To recover tables in a PDB, you need backups of the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p><code class="codeph">SYSTEM</code>, <code class="codeph">SYSAUX</code>, and undo tablespace of the root, CDB seed, and the PDB containing the tables
                           </p>
                        </li>
                        <li>
                           <p>Tablespace containing the tables or partitions</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-EEB32689-9ACE-40C6-9874-5FB484C4126D__GUID-6CC906A5-4FE6-4D5A-B62F-19CBAD3C117A">
                        <p class="notep1">See Also:</p><a href="rman-recovering-tables-partitions.html#GUID-5C32C06D-84AC-44D4-AAA2-54886EA30EF0">Prerequisites for Recovering Tables and Table Partitions from RMAN Backups</a></div>
                  </div>
               </div><a id="BRADV689"></a><div class="props_rev_3"><a id="GUID-2102898D-E461-4161-8DBC-EE4B37213B60" name="GUID-2102898D-E461-4161-8DBC-EE4B37213B60"></a><h4 id="BRADV-GUID-2102898D-E461-4161-8DBC-EE4B37213B60" class="sect4"><span class="enumeration_section">22.1.3 </span>Basic Concepts of Recovering Tables and Table Partitions from RMAN Backups
                  </h4>
                  <div>
                     <p>RMAN uses the <code class="codeph">RECOVER</code> command to recover tables or table partitions to a specified point in time.
                     </p>
                     <p>To recover tables and table partitions from an RMAN backup, you need to provide the following information:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Names of tables or table partitions that must be recovered</p>
                        </li>
                        <li>
                           <p>Point in time to which the tables or table partitions must be recovered</p>
                        </li>
                        <li>
                           <p>Whether the recovered tables or table partitions must be imported into the target database</p>
                        </li>
                     </ul>
                     <p>RMAN uses this information to automate the process of recovering the specified tables or table partitions. As part of the recovery process, RMAN creates an auxiliary database that is used to recover tables or table partitions to the specified point in time.</p>
                     <p>If the recovered tables or table partitions need to be renamed, mapped to a new tablespace, or mapped to a new schema, then you must specify the new names for the tables, tablespaces, or schemas.</p>
                     <div class="infoboxnotealso" id="GUID-2102898D-E461-4161-8DBC-EE4B37213B60__GUID-570759F6-1F36-4BDD-8320-939EBBCC3080">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><a href="rman-recovering-tables-partitions.html#GUID-433301FC-51C6-4A59-9FBC-B43C6A74198F">Steps Performed By RMAN to Recover Tables and Table Partitions</a></p>
                           </li>
                           <li>
                              <p><a href="rman-recovering-tables-partitions.html#GUID-E0AECEFE-D384-4EEE-94AA-CB8F847B1621">About the Location of Auxiliary Database Files During RMAN Table Recovery</a></p>
                           </li>
                           <li>
                              <p><a href="rman-recovering-tables-partitions.html#GUID-B80DD4C3-BF33-46C4-BFA5-614A2523877B">About the Data Pump Export Dump File Used During RMAN Table Recovery</a></p>
                           </li>
                           <li>
                              <p><a href="rman-recovering-tables-partitions.html#GUID-F22330E3-071D-40C5-ACC2-A984E6A3EBD8">About Renaming Recovered Tables and Table Partitions During RMAN Recovery</a></p>
                           </li>
                           <li>
                              <p><a href="rman-recovering-tables-partitions.html#GUID-907031B5-B355-43D8-8E2B-A0A6F2283BD7" title="Recovering tables or table partitions into a different schema enables you to avoid name conflicts that may be caused by constraint, index, or trigger names that already existing in the source schema.">About Recovering Tables and Partitions Into a New Schema</a></p>
                           </li>
                        </ul>
                     </div>
                  </div><a id="BRADV690"></a><div class="props_rev_3"><a id="GUID-433301FC-51C6-4A59-9FBC-B43C6A74198F" name="GUID-433301FC-51C6-4A59-9FBC-B43C6A74198F"></a><h5 id="BRADV-GUID-433301FC-51C6-4A59-9FBC-B43C6A74198F" class="sect5"><span class="enumeration_section">22.1.3.1 </span>Steps Performed By RMAN to Recover Tables and Table Partitions
                     </h5>
                     <div>
                        <div class="section">
                           <p>RMAN performs the following steps while automating the process of recovering tables or table partitions from an RMAN backup:</p>
                        </div>
                        <!-- class="section" -->
                        <ol>
                           <li class="stepexpand"><span>Determines which backup contains the tables or table partitions that need to be recovered, based on the point in time specified for the recovery.</span><div></div>
                           </li>
                           <li class="stepexpand"><span>Determines if there is sufficient space on the target host to create the auxiliary instance that will be used during the table or partition recovery process.</span><div>If the required space is not available, then RMAN displays an error and exits the recovery operation.</div>
                           </li>
                           <li class="stepexpand"><span>Creates an auxiliary database on the target host and recovers the specified tables or table partitions, until the specified point in time, into this auxiliary database.</span><div>
                                 <p>You can specify the location on the target host to which the recovered data files are stored in the auxiliary database.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>Creates a Data Pump <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> that contains the recovered tables or table partitions.</span><div>
                                 <p>You can specify the name and the location of the Data Pump <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> used to store the metadata of the recovered tables or table partitions.
                                 </p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>(Optional) Imports the Data Pump export dump file into the target instance.</span><div>
                                 <p>You can choose not to import the export dump file that contains the recovered tables or table partitions into the target database. If you do not import the export dump file as part of the recovery process, you must manually import it later using the Data Pump Import utility.</p>
                              </div>
                           </li>
                           <li class="stepexpand"><span>(Optional) Renames the recovered tables or table partitions in the target database.</span><div>
                                 <p>You can also import recovered objects into a tablespace or schema that is different from the one in which they originally existed.</p>
                              </div>
                           </li>
                        </ol>
                        <div class="section">
                           <div class="infoboxnotealso" id="GUID-433301FC-51C6-4A59-9FBC-B43C6A74198F__GUID-0233E38B-4281-48D9-87FA-95FC87D30747">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><a href="rman-recovering-tables-partitions.html#GUID-E0AECEFE-D384-4EEE-94AA-CB8F847B1621">About the Location of Auxiliary Database Files During RMAN Table Recovery</a></p>
                                 </li>
                                 <li>
                                    <p><a href="rman-recovering-tables-partitions.html#GUID-B80DD4C3-BF33-46C4-BFA5-614A2523877B">About the Data Pump Export Dump File Used During RMAN Table Recovery</a></p>
                                 </li>
                                 <li>
                                    <p><a href="rman-recovering-tables-partitions.html#GUID-87627528-1EC7-42D3-ADB1-232A6C134A2B">About Importing Recovered Tables and Table Partitions into the Target Database</a></p>
                                 </li>
                                 <li>
                                    <p><a href="rman-recovering-tables-partitions.html#GUID-F22330E3-071D-40C5-ACC2-A984E6A3EBD8">About Renaming Recovered Tables and Table Partitions During RMAN Recovery</a></p>
                                 </li>
                                 <li>
                                    <p><a href="rman-recovering-tables-partitions.html#GUID-907031B5-B355-43D8-8E2B-A0A6F2283BD7" title="Recovering tables or table partitions into a different schema enables you to avoid name conflicts that may be caused by constraint, index, or trigger names that already existing in the source schema.">About Recovering Tables and Partitions Into a New Schema</a></p>
                                 </li>
                              </ul>
                           </div>
                        </div>
                        <!-- class="section" -->
                     </div>
                  </div><a id="BRADV693"></a><div class="props_rev_3"><a id="GUID-E0AECEFE-D384-4EEE-94AA-CB8F847B1621" name="GUID-E0AECEFE-D384-4EEE-94AA-CB8F847B1621"></a><h5 id="BRADV-GUID-E0AECEFE-D384-4EEE-94AA-CB8F847B1621" class="sect5"><span class="enumeration_section">22.1.3.2 </span>About the Location of Auxiliary Database Files During RMAN Table Recovery
                     </h5>
                     <div>
                        <p>To recover the specified tables or table partitions, RMAN creates an auxiliary database that it uses during the recovery process. Use one of the following techniques to specify the location, on the target host, that is used to store data files for the auxiliary database:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><code class="codeph">AUXILIARY DESTINATION</code> clause in the <code class="codeph">RECOVER</code> command
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">SET NEWNAME</code> command
                              </p>
                              <p>Use a <code class="codeph">RUN</code> block containing the <code class="codeph">RECOVER</code> command and required <code class="codeph">SET NEWNAME</code> commands that rename the data files.
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnotealso" id="GUID-E0AECEFE-D384-4EEE-94AA-CB8F847B1621__GUID-250C0E4F-CCCC-4828-BB6D-91FECE55E677">
                           <p class="notep1">See Also:</p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">RECOVER</code> command syntax in <a href="../rcmrf/RECOVER.html#RCMRF140"><span class="italic">Oracle Database Backup and Recovery Reference</span></a></p>
                              </li>
                              <li>
                                 <p><code class="codeph">SET</code> command syntax in <a href="../rcmrf/SET.html#RCMRF153"><span class="italic">Oracle Database Backup and Recovery Reference</span></a></p>
                              </li>
                           </ul>
                        </div>
                        <p>It is recommended that you provide a location for data files in the auxiliary database by using the <code class="codeph">AUXILIARY DESTINATION</code> clause. When you use the <code class="codeph">SET NEWNAME</code> command, if you omit the name of even one data file required for the recovery process, the tables or table partitions cannot be recovered.
                        </p>
                     </div>
                  </div><a id="BRADV691"></a><div class="props_rev_3"><a id="GUID-B80DD4C3-BF33-46C4-BFA5-614A2523877B" name="GUID-B80DD4C3-BF33-46C4-BFA5-614A2523877B"></a><h5 id="BRADV-GUID-B80DD4C3-BF33-46C4-BFA5-614A2523877B" class="sect5"><span class="enumeration_section">22.1.3.3 </span>About the Data Pump Export Dump File Used During RMAN Table Recovery
                     </h5>
                     <div>
                        <p>After recovering tables or table partitions to the specified point in time on the auxiliary database, RMAN creates a Data Pump <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> that contains the recovered objects. You can either specify a name and location for this dump file or allow RMAN to use a default name and location.
                        </p>
                        <p>Use the <code class="codeph">DATAPUMP DESTINATION</code> clause of the <code class="codeph">RECOVER</code> command to specify the location in which the Data Pump <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> is created. The location is typically the path of the operating-system directory that stores the dump file. If you omit this clause, the dump file is stored in the location specified by the <code class="codeph">AUXILIARY DESTINATION</code> parameter. If you do not specify an auxiliary destination, the dump file is stored in a default operating system-specific location. On Linux, this default location is <code class="codeph">$ORACLE_HOME/dbs</code>. On Windows, the default location is <code class="codeph">%ORACLE_HOME\database</code>.
                        </p>
                        <p>Use the <code class="codeph">DUMP FILE</code> clause of the <code class="codeph">RECOVER</code> command to specify the name of the Data Pump <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a>. If you omit this clause, RMAN uses a default operating system-specific name for the dump file. On Linux and Windows, the default dump file name is <code class="codeph">tspitr_</code><span class="italic"><code class="codeph">SID-of-clone_n</code></span><code class="codeph">.dmp</code>, where <span class="italic"><code class="codeph">SID-of-clone</code></span> is the Oracle SID of the auxiliary database created by RMAN to perform the recovery and <span class="italic"><code class="codeph">n</code></span> is any randomly-generated number. If a file with the name specified by <code class="codeph">DUMP FILE</code> exists in the location in which the dump file must be created, then the recover operation fails.
                        </p>
                     </div>
                  </div><a id="BRADV694"></a><div class="props_rev_3"><a id="GUID-87627528-1EC7-42D3-ADB1-232A6C134A2B" name="GUID-87627528-1EC7-42D3-ADB1-232A6C134A2B"></a><h5 id="BRADV-GUID-87627528-1EC7-42D3-ADB1-232A6C134A2B" class="sect5"><span class="enumeration_section">22.1.3.4 </span>About Importing Recovered Tables and Table Partitions into the Target Database
                     </h5>
                     <div>
                        <p>By default, RMAN imports the recovered tables or table partitions, which are stored in the <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a>, into the target database. However, you can choose not to import the recovered tables or table partitions by using the <code class="codeph">NOTABLEIMPORT</code> clause of the <code class="codeph">RESTORE</code> command.
                        </p>
                        <p>When <code class="codeph">NOTABLEIMPORT</code> is used, RMAN recovers them to the specified point and then creates the <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a>. However, this dump file is not imported into the target database. You must manually import this dump file into your target database, when required, by using the Data Pump Import utility.
                        </p>
                        <p>If an error occurs during the import operation, RMAN does not delete the <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> at the end of the table recovery. This enables you to manually import the dump file.
                        </p>
                     </div>
                  </div><a id="BRADV692"></a><div class="props_rev_3"><a id="GUID-F22330E3-071D-40C5-ACC2-A984E6A3EBD8" name="GUID-F22330E3-071D-40C5-ACC2-A984E6A3EBD8"></a><h5 id="BRADV-GUID-F22330E3-071D-40C5-ACC2-A984E6A3EBD8" class="sect5"><span class="enumeration_section">22.1.3.5 </span>About Renaming Recovered Tables and Table Partitions During RMAN Recovery
                     </h5>
                     <div>
                        <p>When you recover tables or table partitions, you can rename the recovered objects after they are imported into the target database. The <code class="codeph">REMAP TABLE</code> clause enables you to rename recovered tables or table partitions in your target database. To import the recovered tables or table partitions into a tablespace that is different from the one in which these objects originally existed, use the <code class="codeph">REMAP TABLESPACE</code> clause of the <code class="codeph">RECOVER</code> command. Only the tables or table partitions that are being recovered are remapped, the existing objects are not changed.
                        </p>
                        <p>If a table with the same name as the one that you recovered exists in the target database, RMAN displays an error message indicating that the <code class="codeph">REMAP TABLE</code> clause must be used to rename the recovered table.
                        </p>
                        <p>When you recover table partitions, each table partition is recovered into a separate table. Use the <code class="codeph">REMAP TABLE</code> clause to specify the table names into which each recovered partition must be imported. If you do not explicitly specify table names, RMAN generates table names by concatenating the recovered table name and partition name. The generated names are in the format <span class="italic"><code class="codeph">tablename_partitionname</code></span>. If a table with this name exists in the target database, then RMAN appends _1 to the name. If this name too exists, then RMAN appends _2 to the name and so on.
                        </p>
                        <div class="infoboxnote" id="GUID-F22330E3-071D-40C5-ACC2-A984E6A3EBD8__GUID-26E28F0C-84FD-4222-8823-187EE66157F5">
                           <p class="notep1">Note:</p>
                           <p>When you use the <code class="codeph">REMAP</code> option, any named constraints and indexes are not imported. This is to avoid name conflicts with existing tables.
                           </p>
                        </div>
                     </div>
                  </div>
                  <div class="sect4"><a id="GUID-907031B5-B355-43D8-8E2B-A0A6F2283BD7" name="GUID-907031B5-B355-43D8-8E2B-A0A6F2283BD7"></a><h5 id="BRADV-GUID-907031B5-B355-43D8-8E2B-A0A6F2283BD7" class="sect5"><span class="enumeration_section">22.1.3.6 </span>About Recovering Tables and Partitions Into a New Schema
                     </h5>
                     <div>
                        <p>Recovering tables or table partitions into a different schema enables you to avoid name conflicts that may be caused by constraint, index, or trigger names that already existing in the source schema.</p>
                        <p></p>
                        <p>Starting with Oracle Database 12<span class="italic">c</span> Release 2 (12.2), you can recover tables or table partitions into a schema that is different from the source schema (the schema in which they originally existed). While recovering objects into a different schema, you can either retain their original names or rename them. You can rename tables and remap the schema in a single recovery operation. For example, you can recover the <code class="codeph">HR.EMPLOYEES</code> table either into the <code class="codeph">NEW_HR.EMPLOYEES</code> table, the <code class="codeph">HR.NEW_EMPLOYEES</code> table, or the <code class="codeph">NEW_HR.NEW_EMPLOYEES</code> table. The <code class="codeph">REMAP TABLE</code> clause enables you to rename objects and recover them into a different schema.
                        </p>
                        <p>During table recovery, use the <code class="codeph">REMAP TABLE</code> clause of the <code class="codeph">RECOVER TABLE</code> command to map the source schema to a new schema. The new schema must exist in the target database before you perform the recovery. 
                        </p>
                        <div class="infoboxnote" id="GUID-907031B5-B355-43D8-8E2B-A0A6F2283BD7__GUID-4593CBEB-E063-4CB8-94FD-F9B8E0929442">
                           <p class="notep1">Note:</p>
                           <p>Table recovery is not supported on physical standby databases. For logical standby databases, objects that are recovered on the primary database are propagated to the logical standby.</p>
                        </div>
                        <div class="infoboxnote" id="GUID-907031B5-B355-43D8-8E2B-A0A6F2283BD7__GUID-316A58CF-E60E-4B50-94F3-6619CA707E38">
                           <p class="notep1">Note:</p>
                           <p><a href="rman-recovering-tables-partitions.html#GUID-98525DD5-E08F-46F0-A9D8-A7EC3EB54457" title="This example recovers multiple tables into a new schema that is different from the source schema.">Example: Recovering a Table into a New Schema</a></p>
                        </div>
                     </div>
                  </div>
               </div><a id="BRADV695"></a><div class="props_rev_3"><a id="GUID-526969ED-37C3-44C6-B205-AF1621008DCE" name="GUID-526969ED-37C3-44C6-B205-AF1621008DCE"></a><h4 id="BRADV-GUID-526969ED-37C3-44C6-B205-AF1621008DCE" class="sect4"><span class="enumeration_section">22.1.4 </span>Limitations of Recovering Tables and Table Partitions from RMAN Backups
                  </h4>
                  <div>
                     <p>When you use the <code class="codeph">RECOVER</code> command to recover tables or table partitions contained in an RMAN backup, the following limitations exist.
                     </p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Tables and table partitions belonging to <code class="codeph">SYS</code> schema cannot be recovered.
                           </p>
                        </li>
                        <li>
                           <p>Tables and table partitions from <code class="codeph">SYSTEM</code> and <code class="codeph">SYSAUX</code> tablespaces cannot be recovered.
                           </p>
                        </li>
                        <li>
                           <p>Tables and table partitions on standby databases cannot be recovered.</p>
                        </li>
                        <li>
                           <p>Tables with named <code class="codeph">NOT NULL</code> constraints cannot be recovered with the <code class="codeph">REMAP</code> option.
                           </p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="BRADV696"></a><div class="props_rev_3"><a id="GUID-27F62B73-7341-4939-9677-5F6D614DE55A" name="GUID-27F62B73-7341-4939-9677-5F6D614DE55A"></a><h3 id="BRADV-GUID-27F62B73-7341-4939-9677-5F6D614DE55A" class="sect3"><span class="enumeration_section">22.2 </span>Preparing to Recover Tables and Table Partitions
               </h3>
               <div>
                  <div class="p">Review the limitations described in <span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-526969ED-37C3-44C6-B205-AF1621008DCE">Limitations of Recovering Tables and Table Partitions from RMAN Backups</a>"</span>.
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p>The preparation for recovering tables or table partitions from RMAN backups involves the following steps:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>Verifying that the prerequisites required to recover tables or table partitions are met</p>
                        </li>
                        <li>
                           <p>Determining the point in time to which the tables or table partitions must be recovered</p>
                        </li>
                        <li>
                           <p>Deciding if the recovered tables or table partitions must be imported into the target database</p>
                           <p>By default, RMAN imports the recovered tables or table partitions into the target database. However, you can specify that RMAN must not import the recovered objects.</p>
                        </li>
                        <li>
                           <p>Deciding if the recovered tables or table partitions must be renamed, mapped to a new tablespace, or mapped to a new schema.</p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-27F62B73-7341-4939-9677-5F6D614DE55A__GUID-1422396D-3A48-46BD-959F-A131EC6ACA58">
                        <p class="notep1">See Also:</p>
                        <ul style="list-style-type: disc;">
                           <li><span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-5C32C06D-84AC-44D4-AAA2-54886EA30EF0">Prerequisites for Recovering Tables and Table Partitions from RMAN Backups</a>"</span></li>
                           <li>
                              <p><span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-87627528-1EC7-42D3-ADB1-232A6C134A2B">About Importing Recovered Tables and Table Partitions into the Target Database</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-688A090A-B24F-4C9C-800B-99483F3514C5">Determining the Point-in-time to Which Tables and Table Partitions Must be Recovered</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-F22330E3-071D-40C5-ACC2-A984E6A3EBD8">About Renaming Recovered Tables and Table Partitions During RMAN Recovery</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-907031B5-B355-43D8-8E2B-A0A6F2283BD7" title="Recovering tables or table partitions into a different schema enables you to avoid name conflicts that may be caused by constraint, index, or trigger names that already existing in the source schema.">About Recovering Tables and Partitions Into a New Schema</a>"</span></p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div><a id="BRADV698"></a><div class="props_rev_3"><a id="GUID-5C32C06D-84AC-44D4-AAA2-54886EA30EF0" name="GUID-5C32C06D-84AC-44D4-AAA2-54886EA30EF0"></a><h4 id="BRADV-GUID-5C32C06D-84AC-44D4-AAA2-54886EA30EF0" class="sect4"><span class="enumeration_section">22.2.1 </span>Prerequisites for Recovering Tables and Table Partitions from RMAN Backups
                  </h4>
                  <div>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>The target database must be in read-write mode.</p>
                        </li>
                        <li>
                           <p>The target database must be in <code class="codeph">ARCHIVELOG</code> mode.
                           </p>
                        </li>
                        <li>
                           <p>You must have RMAN backups of the tables or table partitions as they existed at the point in time to which you want recover these objects.</p>
                        </li>
                        <li>
                           <p>To recover single table partitions, the <code class="codeph">COMPATIBLE</code> initialization parameter for target database must be set to 11.1.0 or higher.
                           </p>
                        </li>
                     </ul>
                     <div class="infoboxnotealso" id="GUID-5C32C06D-84AC-44D4-AAA2-54886EA30EF0__GUID-C8B7A056-FE4D-4C11-9775-B2F13A50E4C6">
                        <p class="notep1">See Also:</p><a href="rman-recovering-tables-partitions.html#GUID-EEB32689-9ACE-40C6-9874-5FB484C4126D" title="To recover table or table partitions, you need a full backup of undo, SYSTEM, SYSAUX, and the tablespace that contains the table or table partition.">Backups Required to Recover Tables and Table Partitions</a></div>
                  </div>
               </div><a id="BRADV697"></a><div class="props_rev_3"><a id="GUID-688A090A-B24F-4C9C-800B-99483F3514C5" name="GUID-688A090A-B24F-4C9C-800B-99483F3514C5"></a><h4 id="BRADV-GUID-688A090A-B24F-4C9C-800B-99483F3514C5" class="sect4"><span class="enumeration_section">22.2.2 </span>Determining the Point-in-time to Which Tables and Table Partitions Must be Recovered
                  </h4>
                  <div>
                     <p>It is very important to determine the exact point in time to which you want to recover the tables or table partitions. RMAN enables you to specify the required point in time using one of the following:</p>
                     <ul style="list-style-type: disc;">
                        <li>
                           <p>SCN</p>
                           <p>Recovers tables or table partitions to the state that they were at the time specified by the SCN.</p>
                        </li>
                        <li>
                           <p>Time</p>
                           <p>Recovers tables or table partitions to the state they were in at the specified time. Use the date format specified in the <code class="codeph">NLS_LANG</code> and <code class="codeph">NLS_DATE_FORMAT</code> environment variables. You can also use data constants such as <code class="codeph">SYSDATE</code> to specify the time, for example <code class="codeph">SYSDATE-30</code>.
                           </p>
                        </li>
                        <li>
                           <p>Sequence number</p>
                           <p>Recovers tables or table partitions to the state they were at the time specified by the log sequence number and thread number.</p>
                        </li>
                     </ul>
                  </div>
               </div>
            </div><a id="BRADV809"></a><a id="BRADV699"></a><div class="props_rev_3"><a id="GUID-04D1B794-25D0-4C1E-9A98-F08AD361B41E" name="GUID-04D1B794-25D0-4C1E-9A98-F08AD361B41E"></a><h3 id="BRADV-GUID-04D1B794-25D0-4C1E-9A98-F08AD361B41E" class="sect3"><span class="enumeration_section">22.3 </span>Recovering Tables and Table Partitions
               </h3>
               <div>
                  <div class="section">
                     <p>This section describes the steps required to recover tables or table partitions in a <a href="glossary.html#GUID-62A96A52-3B97-455A-A443-75B999DCAC94"><span class="xrefglossterm">non-CDB</span></a> to a specified point in time.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2">To recover tables or table partitions to a specified point in time:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Perform the planning tasks described in <span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-27F62B73-7341-4939-9677-5F6D614DE55A">Preparing to Recover Tables and Table Partitions</a>"</span>.</span></li>
                     <li class="stepexpand"><span>Start RMAN and connect as <code class="codeph">TARGET</code> to the target database. You must connect as a user with the <code class="codeph">SYSBACKUP</code> or <code class="codeph">SYSDBA</code> privilege.</span><div>
                           <div class="infoboxnotealso" id="GUID-04D1B794-25D0-4C1E-9A98-F08AD361B41E__GUID-DDFDC0D0-8EA9-4E9C-9CD8-FFE876B62AEB">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="To perform useful work, the RMAN client must connect to a database.Users connecting with RMAN to a target or auxiliary database require either the SYSDBA or SYSBACKUP system privilege. RMAN connections to a target or auxiliary database can be made using operating system authentication.Use a password file for either local or remote access. If a database uses a password file to authenticate administrative users, then RMAN can connect using a password.If you start RMAN without a connect string on the operating system command line, then you must issue a CONNECT TARGET command at the RMAN prompt to connect to a target database.To connect to a target database from the operating system command line, enter the rman command followed by the connection information. You can begin executing commands after the RMAN prompt is displayed.You can connect the RMAN client to multitenant container databases (CDBs) and pluggable databases (PDBs).You can perform RMAN operations on a whole CDB, the root only, or one or more PDBs. Certain restrictions apply when you connect directly to a pluggable database (PDB):There are several ways to connect as target to the root. You can connect to a PDB either from the RMAN prompt or the operating system command line.You can make a database connection by creating an RMAN command file containing a CONNECT command..To use the DUPLICATE command, you must connect to an auxiliary instance. Performing tablespace point-in-time recovery (TSPITR) may also require a connection to an auxiliary instance.When you are diagnosing errors that RMAN encounters in connecting to the target, catalog and auxiliary databases, consider using SQL*Plus to connect to the databases directly. This action can reveal underlying problems with the connection information or the databases.RMAN connects to target and auxiliary databases using the SYSDBA or SYSBACKUP privilege. Thus, when you use SQL*Plus to diagnose connection problems to the target or auxiliary databases, request a SYSDBA or SYSBACKUP connection to reproduce RMAN behavior.Use SQL*Plus to diagnose recovery catalog connection problems.">Making Database Connections with RMAN</a>"</span></p>
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Recover the selected tables or table partitions to the specified point in time by using the <code class="codeph">RECOVER TABLE</code> command. You must use the <code class="codeph">AUXILIARY DESTINATION</code> clause and one of the following clauses to specify the point in time for recovery: <code class="codeph">UNTIL TIME</code>, <code class="codeph">UNTIL SCN</code>, or <code class="codeph">UNTIL SEQUENCE</code>.</span><div>
                           <p>You can use the following additional clauses in the <code class="codeph">RECOVER</code> command:
                           </p>
                           <ul style="list-style-type: disc;">
                              <li>
                                 <p><code class="codeph">DUMP FILE</code> and <code class="codeph">DATAPUMP DESTINATION</code></p>
                                 <p>Specifies the name of the <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a> containing recovered tables or table partitions and the location in which it must be stored. See <span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-B80DD4C3-BF33-46C4-BFA5-614A2523877B">About the Data Pump Export Dump File Used During RMAN Table Recovery</a>"</span> for information.
                                 </p>
                              </li>
                              <li>
                                 <p><code class="codeph">NOTABLEIMPORT</code></p>
                                 <p>Indicates that the recovered tables or table partitions must not be imported into the target database. See <span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-87627528-1EC7-42D3-ADB1-232A6C134A2B">About Importing Recovered Tables and Table Partitions into the Target Database</a>"</span></p>
                              </li>
                              <li>
                                 <p><code class="codeph">REMAP TABLE</code></p>
                                 <p>Renames the recovered tables or table partitions in the target database. This clause is also used to recover tables or table partitions into a schema that is different from the source schema.</p>
                                 <p>See <span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-F22330E3-071D-40C5-ACC2-A984E6A3EBD8">About Renaming Recovered Tables and Table Partitions During RMAN Recovery</a> and <a href="rman-recovering-tables-partitions.html#GUID-907031B5-B355-43D8-8E2B-A0A6F2283BD7" title="Recovering tables or table partitions into a different schema enables you to avoid name conflicts that may be caused by constraint, index, or trigger names that already existing in the source schema.">About Recovering Tables and Partitions Into a New Schema</a>"</span></p>
                              </li>
                              <li>
                                 <p><code class="codeph">REMAP TABLESPACE</code></p>
                                 <p>Recovers the tables or table partitions into a tablespace that is different from the one in which these objects originally existed. </p>
                                 <p>See <span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-F22330E3-071D-40C5-ACC2-A984E6A3EBD8">About Renaming Recovered Tables and Table Partitions During RMAN Recovery</a>"</span></p>
                              </li>
                           </ul>
                        </div>
                     </li>
                  </ol>
                  <div class="section">
                     <div class="infoboxnotealso" id="GUID-04D1B794-25D0-4C1E-9A98-F08AD361B41E__GUID-96C46C2E-791B-44FE-8377-B06F470C754D">
                        <p class="notep1">See Also:</p>
                        <p>For examples on recovering tables and table partitions, see:</p>
                        <ul style="list-style-type: disc;">
                           <li>
                              <p><span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-D1C6E45D-44CC-4B07-9C89-E82CD6C0E6A8" title="This example recovers multiple tables to a specified point in time that is represented using SYSDATE.">Example: Recovering Tables to a Specified Point in Time</a>"</span></p>
                           </li>
                           <li>
                              <p><span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-FB30D350-DFF9-4F92-8132-5C824B2A9E68" title="This example uses RMAN backups to recover multiple table partitions.">Example: Recovering Table Partitions to a Specified Log Sequence Number</a>"</span></p>
                           </li>
                           <li>
                              <p><a href="../rcmrf/RECOVER.html#RCMRF140"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for more examples on recovering tables and table partitions
                              </p>
                           </li>
                        </ul>
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="BRADV860"></a><a id="BRADV859"></a><div class="props_rev_3"><a id="GUID-B8245791-9B75-4AE7-ACE9-D9EDBC2DACC0" name="GUID-B8245791-9B75-4AE7-ACE9-D9EDBC2DACC0"></a><h3 id="BRADV-GUID-B8245791-9B75-4AE7-ACE9-D9EDBC2DACC0" class="sect3"><span class="enumeration_section">22.4 </span>Recovering Tables and Table Partitions in PDBs
               </h3>
               <div>
                  <div class="section">
                     <p>RMAN enables you to recover one or more tables or table partitions in a pluggable database (<a href="glossary.html#GUID-993BFB3F-3305-481C-999D-26132095DEC9"><span class="xrefglossterm">PDB</span></a>) to a specified point-in-time without impacting other objects in the PDB. The steps used to recover tables or table partitions in a PDB are similar to the ones used for non-CDBs, with the differences described in this section.
                     </p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2">To recover tables or table partitions in a PDB:</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>Perform the planning tasks described in <span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-27F62B73-7341-4939-9677-5F6D614DE55A">Preparing to Recover Tables and Table Partitions</a>"</span>.</span></li>
                     <li class="stepexpand"><span>Start RMAN and connect to the root as a user with the <code class="codeph">SYSDBA</code> or <code class="codeph">SYSBACKUP</code> privilege.</span><div>
                           <div class="infoboxnotealso" id="GUID-B8245791-9B75-4AE7-ACE9-D9EDBC2DACC0__GUID-0457BDCA-2333-4AFB-AD3D-88F2F140CA89">
                              <p class="notep1">See Also:</p>
                              <p><span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-B397ADD8-D9CF-4DDA-B6AC-8C5FF04447AD" title="You can connect the RMAN client to multitenant container databases (CDBs) and pluggable databases (PDBs).">Making RMAN Connections to a CDB</a>"</span></p>
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span>Recover the tables or table partitions to the specified point in time by using the <code class="codeph">RECOVER TABLE ... OF PLUGGABLE DATABASE</code> command.</span><div>
                           <p>You must use the <code class="codeph">AUXILIARY DESTINATION</code> clause and one of the following clauses: <code class="codeph">UNITL TIME</code>, <code class="codeph">UNTIL SCN</code>, or <code class="codeph">UNTIL SEQUENCE</code>.
                           </p>
                           <p>Depending on your requirements, you may also need to use the one or more of the following clauses: <code class="codeph">DUMP FILE</code>, <code class="codeph">DATAPUMP DESTINATION</code>, <code class="codeph">NOTABLEIMPORT</code>, <code class="codeph">REMAP TABLE</code>, or <code class="codeph">REMAP TABLESPACE</code>.
                           </p>
                           <div class="infoboxnotealso" id="GUID-B8245791-9B75-4AE7-ACE9-D9EDBC2DACC0__GUID-3E56DF68-F9C0-49E5-9063-6B74D7C210C2">
                              <p class="notep1">See Also:</p>
                              <ul style="list-style-type: disc;">
                                 <li>
                                    <p><span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-2102898D-E461-4161-8DBC-EE4B37213B60" title="RMAN uses the RECOVER command to recover tables or table partitions to a specified point in time.">Basic Concepts of Recovering Tables and Table Partitions from RMAN Backups</a>"</span></p>
                                 </li>
                                 <li>
                                    <p><a href="../rcmrf/RECOVER.html#RCMRF140"><span class="italic">Oracle Database Backup and Recovery Reference</span></a> for information about the <code class="codeph">RECOVER</code> command
                                    </p>
                                 </li>
                              </ul>
                           </div>
                           <p>The following command recovers the table <code class="codeph">PDB_EMP</code> in the PDB <code class="codeph">HR_PDB</code> to the state that it was in 4 days before the current date. <code class="codeph">HR</code> is the name of the schema that contains the table. The recovered table is renamed to <code class="codeph">EMP_RECVR</code>.
                           </p><pre class="oac_no_warn" dir="ltr">RECOVER TABLE HR.PDB_EMP OF PLUGGABLE DATABASE HR_PDB
UNTIL TIME 'SYSDATE-4'
AUXILIARY DESTINATION '/tmp/backups'
REMAP TABLE 'HR'.'PDB_EMP':'EMP_RECVR';
</pre></div>
                     </li>
                  </ol>
               </div>
            </div><a id="BRADV700"></a><div class="props_rev_3"><a id="GUID-DEE9C16C-C30A-46C6-A0CE-2DE060A8EC10" name="GUID-DEE9C16C-C30A-46C6-A0CE-2DE060A8EC10"></a><h3 id="BRADV-GUID-DEE9C16C-C30A-46C6-A0CE-2DE060A8EC10" class="sect3"><span class="enumeration_section">22.5 </span>Examples: Recovering Tables and Table Partitions From RMAN Backups
               </h3>
               <div>
                  <p>This section contains the following examples that demonstrate how to recover tables and table partitions to a specified point in time by using RMAN backups:</p>
                  <ul style="list-style-type: disc;">
                     <li>
                        <p><a href="rman-recovering-tables-partitions.html#GUID-D1C6E45D-44CC-4B07-9C89-E82CD6C0E6A8" title="This example recovers multiple tables to a specified point in time that is represented using SYSDATE.">Example: Recovering Tables to a Specified Point in Time</a></p>
                     </li>
                     <li>
                        <p><a href="rman-recovering-tables-partitions.html#GUID-FB30D350-DFF9-4F92-8132-5C824B2A9E68" title="This example uses RMAN backups to recover multiple table partitions.">Example: Recovering Table Partitions to a Specified Log Sequence Number</a></p>
                     </li>
                     <li>
                        <p><a href="rman-recovering-tables-partitions.html#GUID-98525DD5-E08F-46F0-A9D8-A7EC3EB54457" title="This example recovers multiple tables into a new schema that is different from the source schema.">Example: Recovering a Table into a New Schema</a></p>
                     </li>
                  </ul>
               </div><a id="BRADV702"></a><div class="props_rev_3"><a id="GUID-D1C6E45D-44CC-4B07-9C89-E82CD6C0E6A8" name="GUID-D1C6E45D-44CC-4B07-9C89-E82CD6C0E6A8"></a><h4 id="BRADV-GUID-D1C6E45D-44CC-4B07-9C89-E82CD6C0E6A8" class="sect4"><span class="enumeration_section">22.5.1 </span>Example: Recovering Tables to a Specified Point in Time
                  </h4>
                  <div>
                     <p>This example recovers multiple tables to a specified point in time that is represented using <code class="codeph">SYSDATE</code>.
                     </p>
                     <div class="section">
                        <p>Assume that you want to recover two tables <code class="codeph">EMP</code> and <code class="codeph">DEPT</code> to the state they were in two days ago, before some logical corruption occurred. However, you do not want RMAN to import these tables into the target database. RMAN must only create the <a href="glossary.html#GUID-5C2A79F3-E089-41DC-B3F5-879FB6125CE5"><span class="xrefglossterm">export dump file</span></a>, called <code class="codeph">emp_dept_exp_dump.dat</code>, in the location <code class="codeph">/tmp/recover/dumpfiles</code>. Using <code class="codeph">NOTABLEIMPORT</code> indicates that these tables must not be imported into the target database. You can import these tables, when required, by using the Data Pump import utility. The auxiliary destination used during the recovery process is <code class="codeph">/tmp/oracle/recover</code>. 
                        </p>
                        <p>To recover tables <code class="codeph">EMP</code> and <code class="codeph">DEPT</code> without importing them into the target database:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>	Perform the planning tasks described in <span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-27F62B73-7341-4939-9677-5F6D614DE55A">Preparing to Recover Tables and Table Partitions</a>"</span>.</span><div>
                              <p>In this example, you need to recover tables to a point in time specified by an expression that uses <code class="codeph">SYSDATE</code>. However, the recovered tables must not be imported in to the target database.
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Start an RMAN session and connect as <code class="codeph">TARGET</code> to the target database as described in <span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="To perform useful work, the RMAN client must connect to a database.Users connecting with RMAN to a target or auxiliary database require either the SYSDBA or SYSBACKUP system privilege. RMAN connections to a target or auxiliary database can be made using operating system authentication.Use a password file for either local or remote access. If a database uses a password file to authenticate administrative users, then RMAN can connect using a password.If you start RMAN without a connect string on the operating system command line, then you must issue a CONNECT TARGET command at the RMAN prompt to connect to a target database.To connect to a target database from the operating system command line, enter the rman command followed by the connection information. You can begin executing commands after the RMAN prompt is displayed.You can connect the RMAN client to multitenant container databases (CDBs) and pluggable databases (PDBs).You can perform RMAN operations on a whole CDB, the root only, or one or more PDBs. Certain restrictions apply when you connect directly to a pluggable database (PDB):There are several ways to connect as target to the root. You can connect to a PDB either from the RMAN prompt or the operating system command line.You can make a database connection by creating an RMAN command file containing a CONNECT command..To use the DUPLICATE command, you must connect to an auxiliary instance. Performing tablespace point-in-time recovery (TSPITR) may also require a connection to an auxiliary instance.When you are diagnosing errors that RMAN encounters in connecting to the target, catalog and auxiliary databases, consider using SQL*Plus to connect to the databases directly. This action can reveal underlying problems with the connection information or the databases.RMAN connects to target and auxiliary databases using the SYSDBA or SYSBACKUP privilege. Thus, when you use SQL*Plus to diagnose connection problems to the target or auxiliary databases, request a SYSDBA or SYSBACKUP connection to reproduce RMAN behavior.Use SQL*Plus to diagnose recovery catalog connection problems.">Making Database Connections with RMAN</a>"</span>.</span></li>
                        <li class="stepexpand"><span>Recover the tables <code class="codeph">EMP</code> and <code class="codeph">DEPT</code> using the following clauses in the <code class="codeph">RECOVER</code> command: <code class="codeph">DATAPUMP DESTINATION</code>, <code class="codeph">DUMP FILE</code>, <code class="codeph">REMAP TABLE</code>, and <code class="codeph">NOTABLEIMPORT</code>.</span><div>
                              <p>The following <code class="codeph">RECOVER</code> command recovers the <code class="codeph">EMP</code> and <code class="codeph">DEPT</code> tables.
                              </p><pre class="oac_no_warn" dir="ltr">RECOVER TABLE SCOTT.EMP, SCOTT.DEPT
    UNTIL TIME 'SYSDATE-1'
    AUXILIARY DESTINATION '/tmp/oracle/recover'
    DATAPUMP DESTINATION '/tmp/recover/dumpfiles'
    DUMP FILE 'emp_dept_exp_dump.dat'
    NOTABLEIMPORT;
</pre></div>
                        </li>
                     </ol>
                     <div class="section">
                        <div class="infoboxnotealso" id="GUID-D1C6E45D-44CC-4B07-9C89-E82CD6C0E6A8__GUID-5CF428FC-2B4C-48BD-AAF7-8D00BCA78562">
                           <p class="notep1">See Also:</p>
                           <p><a href="../rcmrf/RECOVER.html#RCMRF140"><span><cite>Oracle Database Backup and Recovery Reference</cite></span></a> for additional examples about recovering tables to a specified point in time
                           </p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="BRADV703"></a><div class="props_rev_3"><a id="GUID-FB30D350-DFF9-4F92-8132-5C824B2A9E68" name="GUID-FB30D350-DFF9-4F92-8132-5C824B2A9E68"></a><h4 id="BRADV-GUID-FB30D350-DFF9-4F92-8132-5C824B2A9E68" class="sect4"><span class="enumeration_section">22.5.2 </span>Example: Recovering Table Partitions to a Specified Log Sequence Number
                  </h4>
                  <div>
                     <p>This example uses RMAN backups to recover multiple table partitions.</p>
                     <div class="section">
                        <p>In this example, the table <code class="codeph">sales</code>, in the schema <code class="codeph">sh</code>, contains the following partitions: <code class="codeph">sales_1998</code>, <code class="codeph">sales_1999</code>, <code class="codeph">sales_2000</code>, and <code class="codeph">sales_2001</code>. This table is stored in the <code class="codeph">sales_ts</code> tablespace. You need to recover two partitions, <code class="codeph">sales_1998</code> and <code class="codeph">sales_1999</code>, to a point in time that is specified by a redo log sequence number. The recovered tables must be automatically imported into the target database and mapped to the tablespace <code class="codeph">SALES_PRE_2000_TS</code>.
                        </p>
                        <p>To recover the partitions <code class="codeph">sales_1998</code> and <code class="codeph">sales_1999</code> to a specified log sequence number:
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Perform the planning tasks described in <span class="q">"<a href="rman-recovering-tables-partitions.html#GUID-27F62B73-7341-4939-9677-5F6D614DE55A">Preparing to Recover Tables and Table Partitions</a>"</span>.</span><div>
                              <p>In this example, you need to recover two table partitions to a specified log sequence number and then import these partitions into the target database.</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span>Start an RMAN session and connect as <code class="codeph">TARGET</code> to the target database as described in <span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="To perform useful work, the RMAN client must connect to a database.Users connecting with RMAN to a target or auxiliary database require either the SYSDBA or SYSBACKUP system privilege. RMAN connections to a target or auxiliary database can be made using operating system authentication.Use a password file for either local or remote access. If a database uses a password file to authenticate administrative users, then RMAN can connect using a password.If you start RMAN without a connect string on the operating system command line, then you must issue a CONNECT TARGET command at the RMAN prompt to connect to a target database.To connect to a target database from the operating system command line, enter the rman command followed by the connection information. You can begin executing commands after the RMAN prompt is displayed.You can connect the RMAN client to multitenant container databases (CDBs) and pluggable databases (PDBs).You can perform RMAN operations on a whole CDB, the root only, or one or more PDBs. Certain restrictions apply when you connect directly to a pluggable database (PDB):There are several ways to connect as target to the root. You can connect to a PDB either from the RMAN prompt or the operating system command line.You can make a database connection by creating an RMAN command file containing a CONNECT command..To use the DUPLICATE command, you must connect to an auxiliary instance. Performing tablespace point-in-time recovery (TSPITR) may also require a connection to an auxiliary instance.When you are diagnosing errors that RMAN encounters in connecting to the target, catalog and auxiliary databases, consider using SQL*Plus to connect to the databases directly. This action can reveal underlying problems with the connection information or the databases.RMAN connects to target and auxiliary databases using the SYSDBA or SYSBACKUP privilege. Thus, when you use SQL*Plus to diagnose connection problems to the target or auxiliary databases, request a SYSDBA or SYSBACKUP connection to reproduce RMAN behavior.Use SQL*Plus to diagnose recovery catalog connection problems.">Making Database Connections with RMAN</a>"</span>.</span></li>
                        <li class="stepexpand"><span>Recover partitions using the following <code class="codeph">RECOVER</code> command with the <code class="codeph">REMAP TABLE</code> and <code class="codeph">REMAP TABLESPACE</code> clauses.</span><div><pre class="oac_no_warn" dir="ltr">RECOVER TABLE SH.SALES:SALES_1998, SH.SALES:SALES_1999
    UNTIL SEQUENCE 354
    AUXILIARY DESTINATION '/tmp/oracle/recover'
    REMAP TABLE 'SH'.'SALES':'SALES_1998':'HISTORIC_SALES_1998',
              'SH'.'SALES':'SALES_1999':'HISTORIC_SALES_1999' 
    REMAP TABLESPACE 'SALES_TS':'SALES_PRE_2000_TS';
 </pre><p>In this case, the specified table partitions are imported as separate tables, called <code class="codeph">historic_sales_1998</code> and <code class="codeph">historic_sales_1999</code>, into the <code class="codeph">sales_pre_2000_ts</code> tablespace of the target database. The <code class="codeph">REMAP TABLE</code> clause specifies the names used for the imported tables. The auxiliary destination used during the recovery process is <code class="codeph">/tmp/oracle/recover</code>.
                              </p>
                              <p>If you omit the <code class="codeph">REMAP TABLE</code> clause, RMAN uses default names for the imported tables. The name is a combination of the original table name and the partition name.
                              </p>
                           </div>
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-98525DD5-E08F-46F0-A9D8-A7EC3EB54457" name="GUID-98525DD5-E08F-46F0-A9D8-A7EC3EB54457"></a><h4 id="BRADV-GUID-98525DD5-E08F-46F0-A9D8-A7EC3EB54457" class="sect4"><span class="enumeration_section">22.5.3 </span>Example: Recovering a Table into a New Schema
                  </h4>
                  <div>
                     <p>This example recovers multiple tables into a new schema that is different from the source schema.</p>
                     <div class="section">
                        <p>In this example, the <code class="codeph">HR.DEPARTMENTS</code> and <code class="codeph">SH.CHANNELS</code> tables need to be recovered to the state that they were in one day ago, before a logical corruption occurred. The recovered tables must be renamed as <code class="codeph">NEW_DEPARTMENTS</code> and <code class="codeph">NEW_CHANNELS</code> and imported into the <code class="codeph">EXAMPLE</code> schema. The schema <code class="codeph">EXAMPLE</code> exists at the time this example is run.
                        </p>
                        <p>The <code class="codeph">REMAP TABLE</code> clause is used to indicate how the source schema is mapped to a new target schema. The auxiliary destination used during the recovery process is <code class="codeph">/tmp/auxdest</code>.
                        </p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li class="stepexpand"><span>Perform the planning tasks required to recover tables from RMAN backups. In this example, you need to recover tables to a point in time specified by an expression that uses <code class="codeph">SYSDATE</code>.</span><div>See <a href="rman-recovering-tables-partitions.html#GUID-27F62B73-7341-4939-9677-5F6D614DE55A">Preparing to Recover Tables and Table Partitions</a>.
                           </div>
                        </li>
                        <li class="stepexpand"><span>Start an RMAN session and connect to the target database as described in <span class="q">"<a href="starting-interacting-with-rman-client.html#GUID-E07231B2-F213-4F8F-8D02-E410A6DAE94C" title="To perform useful work, the RMAN client must connect to a database.Users connecting with RMAN to a target or auxiliary database require either the SYSDBA or SYSBACKUP system privilege. RMAN connections to a target or auxiliary database can be made using operating system authentication.Use a password file for either local or remote access. If a database uses a password file to authenticate administrative users, then RMAN can connect using a password.If you start RMAN without a connect string on the operating system command line, then you must issue a CONNECT TARGET command at the RMAN prompt to connect to a target database.To connect to a target database from the operating system command line, enter the rman command followed by the connection information. You can begin executing commands after the RMAN prompt is displayed.You can connect the RMAN client to multitenant container databases (CDBs) and pluggable databases (PDBs).You can perform RMAN operations on a whole CDB, the root only, or one or more PDBs. Certain restrictions apply when you connect directly to a pluggable database (PDB):There are several ways to connect as target to the root. You can connect to a PDB either from the RMAN prompt or the operating system command line.You can make a database connection by creating an RMAN command file containing a CONNECT command..To use the DUPLICATE command, you must connect to an auxiliary instance. Performing tablespace point-in-time recovery (TSPITR) may also require a connection to an auxiliary instance.When you are diagnosing errors that RMAN encounters in connecting to the target, catalog and auxiliary databases, consider using SQL*Plus to connect to the databases directly. This action can reveal underlying problems with the connection information or the databases.RMAN connects to target and auxiliary databases using the SYSDBA or SYSBACKUP privilege. Thus, when you use SQL*Plus to diagnose connection problems to the target or auxiliary databases, request a SYSDBA or SYSBACKUP connection to reproduce RMAN behavior.Use SQL*Plus to diagnose recovery catalog connection problems.">Making Database Connections with RMAN</a>"</span>.</span></li>
                        <li class="stepexpand"><span>Recover the <code class="codeph">HR.DEPARTMENTS</code> and <code class="codeph">SH.CHANNELS</code> tables, rename them to <code class="codeph">NEW_DEPARTMENTS</code> and <code class="codeph">NEW_CHANNELS</code> respectively, and then import them into the <code class="codeph">EXAMPLE</code> schema.</span><div>
                              <p>The following <code class="codeph">RECOVER</code> command performs the required table recovery:
                              </p><pre class="pre codeblock"><code>RECOVER TABLE HR.DEPARTMENTS, SH.CHANNELS
UNTIL TIME 'SYSDATE &#x2013; 1' 
AUXILIARY DESTINATION '/tmp/auxdest'
REMAP TABLE hr.departments:example.new_departments, sh.channels:example.new_channels;</code></pre></div>
                        </li>
                     </ol>
                  </div>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>