<!DOCTYPE html
  SYSTEM "about:legacy-compat">
<html xml:lang="en-us" lang="en-us">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="Use one of three methods to check the state of the Oracle Data Dictionary for diagnosing upgrades and migrations.">
      <meta name="description" content="Use one of three methods to check the state of the Oracle Data Dictionary for diagnosing upgrades and migrations.">
      <title>How to Show the Current State of the Oracle Data Dictionary</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Database Upgrade Guide">
      <meta property="og:description" content="Use one of three methods to check the state of the Oracle Data Dictionary for diagnosing upgrades and migrations.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Database Upgrade Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="database-upgrade-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-03-12T16:09:40-07:00">
      <meta name="dcterms.title" content="Database Upgrade Guide">
      <meta name="dcterms.dateCopyrighted" content="1996, 2018">
      <meta name="dcterms.category" content="database">
      <meta name="dcterms.identifier" content="E86577-04">
      
      <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
      <meta name="dcterms.release" content="Release 12.2">
      <link rel="prev" href="check-upgrade-post-upgrade-status-tool.html" title="Previous" type="text/html">
      <link rel="next" href="required-tasks-complete-upgrading-oracle-database.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"database","element_name":"Database","display_in_url":true},"suite":{"short_name":"oracle","element_name":"Oracle","display_in_url":true},"product_group":{"short_name":"not-applicable","element_name":"Not applicable","display_in_url":false},"product":{"short_name":"oracle-database","element_name":"Oracle Database","display_in_url":true},"release":{"short_name":"12.2","element_name":"Release 12.2","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="UPGRD">
  </head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="check-upgrade-post-upgrade-status-tool.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>Previous</a>
         <a href="required-tasks-complete-upgrading-oracle-database.html" class="pull-right">Next<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a>
         <span class="fa fa-exclamation-triangle" aria-hidden="true"></span> JavaScript must be enabled to correctly display this content
        
      </div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Database Upgrade Guide</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="post-upgrade-tasks-oracle-database.html" property="item" typeof="WebPage"><span property="name">Post-Upgrade Tasks for Oracle Database</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">How to Show the Current State of the Oracle Data Dictionary</li>
            </ol>
            <a id="GUID-57458D9B-9927-4E1A-8F6C-5B2A301B30C4" name="GUID-57458D9B-9927-4E1A-8F6C-5B2A301B30C4"></a><a id="UPGRD60033"></a>
            
            <h2 id="UPGRD-GUID-57458D9B-9927-4E1A-8F6C-5B2A301B30C4" class="sect2">How to Show the Current State of the Oracle Data Dictionary</h2>
         </header>
         <div class="ind">
            <div>
               <p>Use one of three methods to check the state of the Oracle Data Dictionary for diagnosing upgrades and migrations. </p>
               <div class="section">
                  <p class="subhead1">Running the <code>dbupgdiag.sql</code> Script
                  </p>
                  <p>The <code>dbupgdiag.sql</code> script collects upgrade and migration diagnostic information about the current state of the data dictionary.
                  </p>
                  <p>You can run the script in SQL*Plus both before the upgrade on the source database, and after the upgrade on the upgraded database as the SYS user. Refer to My Oracle Support note 556610.1 for more information about using the <code>dbupgdiag.sql</code> script to collect upgrade and migrate diagnostic information. 
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Running a SQL Query on DBA_REGISTERY</p>
                  <p>To show the current state of the dictionary, perform a SQL query similar to the following example:</p><pre class="pre codeblock"><code>SQL&gt; spool /tmp/regInvalid.out
SQL&gt; set echo on
-- query registry
SQL&gt; set lines 80 pages 100
SQL&gt; select substr(comp_id,1,15) comp_id,substr(comp_name,1,30)
      comp_name,substr(version,1,10) version,status
from dba_registry order by modified;
</code></pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1">Running a Query to Check for Invalid Objects</p>
                  <p>To query invalid objects, perform a SQL query similar to the following example:</p><pre class="pre codeblock"><code>SQL&gt; select owner, object_name, object_type from dba_invalid_objects order by owner, object_type;</code></pre><p>After you have upgraded the database, and you have run <code>utlrp.sql</code>, this view query should return no rows. All objects should be valid.
                  </p>
               </div>
               <!-- class="section" -->
            </div>
            <div>
               <div class="relinfo">
                  <p><strong>Related Topics</strong></p>
                  <ul>
                     <li><a href="https://support.oracle.com/rs?type=doc&amp;id=556610.1">https://support.oracle.com/rs?type=doc&amp;id=556610.1</a></li>
                  </ul>
               </div>
            </div>
         </div>
      </article>
   </body>
</html>