<!-- NewPage -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_91) on Tue Feb 28 19:04:31 PST 2017 -->
<title>DBLocaleSource (Oracle Database Globalization Development Kit Java API Reference)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="date" content="2017-02-28">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js">
</script>
<meta name="generator" content="Oracle ST-Doc Jadey 2.5">

    <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
    <meta name="dcterms.created" content="2017-10-17T17:23:26+00:00">
    <meta name="dcterms.title" content="Globalization Development Kit Java API Reference (Javadoc)">
    <meta name="dcterms.category" content="database">
    <meta name="dcterms.isVersionOf" content="JVGDK">
    <meta name="dcterms.product" content="en/database/oracle/oracle-database/12.2">
    <meta name="dcterms.identifier" content="E85601-01">
    <meta name="dcterms.release" content="Release 12.2">
  </head>
<body>
<script type="text/javascript">
<!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="DBLocaleSource (Oracle Database Globalization Development Kit Java API Reference)";
        }
    }
    catch(err) {
    }
//-->
</script><noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="topNav"><a name="navbar_top" id="navbar_top"><!--   --></a>
<div class="skipNav"><a href="#skip_navbar_top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar_top_firstrow" id="navbar_top_firstrow"><!--   --></a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>Oracle® Database Globalization Development Kit Java API Reference<br>
12<i>c</i> Release 2 (12.2.0.1)</b><br>
E85601-01</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="ApplicationDefault.html" title="class in oracle.i18n.servlet.localesource"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="HttpAcceptLanguage.html" title="class in oracle.i18n.servlet.localesource"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html" target="_top">Frames</a></li>
<li><a href="DBLocaleSource.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div><script type="text/javascript">
<!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script></div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_classes_inherited_from_class_oracle_i18n_servlet_localesource_LocaleSource">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#methods_inherited_from_class_oracle_i18n_servlet_localesource_LocaleSource">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<a name="skip_navbar_top" id="skip_navbar_top"><!--   --></a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">oracle.i18n.servlet.localesource</div>
<h2 title="Class DBLocaleSource" class="title">Class DBLocaleSource</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="LocaleSource.html" title="class in oracle.i18n.servlet.localesource">oracle.i18n.servlet.localesource.LocaleSource</a></li>
<li>
<ul class="inheritance">
<li>oracle.i18n.servlet.localesource.DBLocaleSource</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://docs.oracle.com/javase/8/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</a></dd>
</dl>
<hr>
<br>
<pre>
public class <span class="typeNameLabel">DBLocaleSource</span>
extends <a href="LocaleSource.html" title="class in oracle.i18n.servlet.localesource">LocaleSource</a>
</pre>
<div class="block">The <code>DBLocaleSource</code> class is the predefined database locale source that accesses a user profile table including user locale preferences. All user profile information can be specified in the GDK application configuration file. Default caching: This locale source is cached in the session by default
<p>The database locale source should use the special tag <code>&lt;db-locale-source&gt;</code> to include the user profile information in the list of the locale determination rules. The following attributes are required:</p>
<ul>
<li><code>data-source-name</code>: the data source name that must be included in the data source definition file. For example, <code>data-sources.xml</code> is used for the data source in OC4J. All authentication information should be included in the data sources.</li>
<li><code>locale-source-table</code>: the name, optionally qualified with a schema name, of the table that contains the users' locale preferences.</li>
<li><code>user-column</code>: the name of the column in the locale source table that identifies the user for whom the given table row contains locale preference. Usually, the column contains user IDs, such as e-mail addresses, login names, etc. <b>Note:</b> The values in this column are compared case-insensitively.</li>
<li><code>user-key</code>: the name of the key used in the session object of the JSP/Java Servlet application to identify the current authenticated user. If the value for the key is not <code>null</code>, it is used to case-insensitively match the value in the <code>user-column</code> to find the user's locale preference. Otherwise the GDK assumes that no user is authenticated and DBLocaleSource cannot used.</li>
</ul>
<p>The attributes for the locale must be specified in one of the following parameters depending on the scenario:</p>
<p>Scenario 1: If the user locale preference is stored in the form of ISO locale, use:</p>
<ul>
<li><code>locale-column</code>: the column that includes the ISO locale</li>
</ul>
<p>Scenario 2: If the user locale preference is stored in the form of Oracle language and Oracle territory names, use:</p>
<ul>
<li><code>language-column</code>: the column that includes the Oracle language name. This takes precedence over the value in <code>locale-column</code>.</li>
<li><code>territory-column</code>: the column that includes the Oracle territory name. This takes precedence over the value in <code>locale-column</code>.</li>
</ul>
<p>Scenario 3: If the user locale preference is stored in the form of Oracle abbreviation language and territory names, use:</p>
<ul>
<li><code>short-language-column</code>: the column that includes the abbreviation of the Oracle language name. If both <code>language-column</code> and <code>short-language-column</code> are specified, <code>language-column</code> takes precedence.</li>
<li><code>territory-column</code>: the column that includes the Oracle territory name. This takes precedence over the value in <code>locale-column</code>.</li>
</ul>
<p>Additionally, the following attributes may be specified:</p>
<ul>
<li><code>charset-column</code>: the column that includes the Oracle character set for the client. Note this is not the page character set information.</li>
<li><code>timezone-column</code>: the column that includes the time zone ID.</li>
<li><code>linguistic-sort-column</code>: the column that includes the Oracle linguistic sorting name.</li>
<li><code>date-format-column</code>: the column that includes the short date format mask.</li>
<li><code>long-date-format-column</code>: the column that includes the long date format mask.</li>
<li><code>time-format-column</code>: the column that includes the time format mask.</li>
<li><code>date-time-format-column</code>: the column that includes the short date and time format mask.</li>
<li><code>long-date-time-format-column</code>: the column that includes the long date and time format mask.</li>
<li><code>number-format-column</code>: the column that includes the number format mask.</li>
<li><code>currency-format-column</code>: the column that includes the currency format mask.</li>
<li><code>writing-direction-column</code>: the column that includes the writing direction, either <code>LTR</code> or <code>RTL</code>.</li>
<li><code>iso-currency-column</code>: the column that includes the ISO 4217 currency ID.</li>
<li><code>diagnostics-level</code>: sets the amount of diagnostics information logged in the servlet log. The servlet log is the log that the servlet container provides for the Java EE javax.servlet.ServletContext.log() method. If <code>diagnostics-level</code> is set to "0" (default), nothing is logged. If it is set to "1", locale source configuration errors are logged. If it is set to "2", errors in the retrieved DB data are logged as well. Level "3" is reserved for tracing. The behavior for any other value is currently undefined. In a production environment, set the level low to prevent malicious requests from flooding the log file.</li>
</ul>
<p>The locale source table name and all column names must be either double-quoted or unquoted SQL identifiers. Double-quoted identifiers are used verbatim. Unquoted identifiers are converted to uppercase and double-quoted before use. The locale source table name may be prefixed with a schema name, which follows the same quoting rules.</p>
<p>The quoting discussed here pertains to attribute values after they have been retrieved from the XML configuration file, that is, after any XML escaping and quoting has already been interpreted and removed. Also, any character with the Unicode code point U+0020 or less is stripped from the beginning and end of the XML attribute value and from around the period separating schema and table name before the value is interpreted as an SQL identifier.</p>
<p>For example, if the configuration file contains:</p>
<pre>
locale-source-table="app . user_profiles"
</pre>
<p>then the table name is treated as the schema-qualified unquoted identifier <code>app.user_profiles</code> and it is used as follows:</p>
<pre>
SELECT ... FROM "APP"."USER_PROFILES";
</pre>
<p>However, if the configuration file contains:</p>
<pre>
locale-source-table='"user profiles"'
</pre>
<p>or</p>
<pre>
locale-source-table="&amp;quot;user profiles&amp;quot;"
</pre>
<p>then the table name is treated as the quoted identifier <code>"user profiles"</code> and it is used as follows:</p>
<pre>
SELECT ... FROM "user profiles";
</pre>
<p>Example: Let's assume that the user locale and time zone preferences are used for globalized operations and the user schema table is specified as follows:</p>
<pre>
 create table user_profile
 (
   userid varchar2(100) primary key, -- user id
   ... (various user information)
   locale  varchar2(10), -- user locale preference, e.g., ja-JP
   timezone varchar2(50) -- user time zone preference,
                            e.g., America/Los_Angeles
 )
 
</pre>
<p>Let the data source file contain the following connection information:</p>
<pre>
 &lt;data-source class="com.evermind.sql.DriverManagerDataSource" 
   name="OracleDS"
   location="jdbc/OracleCoreDS" 
   xa-location="jdbc/xa/OracleXADS"
   ejb-location="jdbc/OracleDS"
   connection-driver="oracle.jdbc.driver.OracleDriver"
   username="yourapp"
   password="&lt;db password&gt;"
   url="jdbc:oracle:thin:@localhost:1521:orcl" 
   inactivity-timeout="30"
   /&gt;
 
</pre>
<p>Also, the application provides an authentication filter that sets <code>"userinfo"</code> to either the user id or <code>null</code> in the session object so that the database locale source object can determine if the user is authenticated or not.</p>
<p>In such case, the locale determination rule should be specified as follows:</p>
<pre>
 &lt;locale-determine-rule&gt;
   &lt;db-locale-source 
    data-source-name="jdbc_OracleCoreDS" 
    locale-source-table="user_profiles"
    user-key="userinfo" 
    user-column="userid"
    locale-column="locale" 
    timezone-column="timezone" 
  &gt;oracle.i18n.servlet.localesource.DBLocaleSource&lt;/db-locale-source&gt;
  &lt;locale-source&gt;oracle.i18n.servlet.localesource.HttpAcceptLanguage&lt;/locale-source&gt;
 &lt;/locale-determine-rule&gt;
 
</pre></div>
<dl>
<dt><span class="simpleTagLabel">Since:</span></dt>
<dd>10.1.0.2</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../serialized-form.html#oracle_i18n_servlet_localesource_DBLocaleSource">Serialized Form</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList"><!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary" id="nested_class_summary"><!--   --></a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_oracle_i18n_servlet_localesource_LocaleSource" id="nested_classes_inherited_from_class_oracle_i18n_servlet_localesource_LocaleSource"><!--   --></a>
<h3>Nested classes/interfaces inherited from class&nbsp;oracle.i18n.servlet.localesource.<a href="LocaleSource.html" title="class in oracle.i18n.servlet.localesource">LocaleSource</a></h3>
<code><a href="LocaleSource.Alignment.html" title="class in oracle.i18n.servlet.localesource">LocaleSource.Alignment</a>, <a href="LocaleSource.Parameter.html" title="class in oracle.i18n.servlet.localesource">LocaleSource.Parameter</a>, <a href="LocaleSource.WritingDirection.html" title="class in oracle.i18n.servlet.localesource">LocaleSource.WritingDirection</a></code></li>
</ul>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary" id="method_summary"><!--   --></a>
<h3>Method Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_oracle_i18n_servlet_localesource_LocaleSource" id="methods_inherited_from_class_oracle_i18n_servlet_localesource_LocaleSource"><!--   --></a>
<h3>Methods inherited from class&nbsp;oracle.i18n.servlet.localesource.<a href="LocaleSource.html" title="class in oracle.i18n.servlet.localesource">LocaleSource</a></h3>
<code><a href="LocaleSource.html#equals_java_lang_Object_">equals</a>, <a href="LocaleSource.html#getAttribute_java_lang_String_">getAttribute</a>, <a href="LocaleSource.html#getCharacterSet__">getCharacterSet</a>, <a href="LocaleSource.html#getCollator__">getCollator</a>, <a href="LocaleSource.html#getCurrencyFormat__">getCurrencyFormat</a>, <a href="LocaleSource.html#getDateFormat_int_">getDateFormat</a>, <a href="LocaleSource.html#getDateTimeFormat_int_">getDateTimeFormat</a>, <a href="LocaleSource.html#getISOCurrency__">getISOCurrency</a>, <a href="LocaleSource.html#getLocale__">getLocale</a>, <a href="LocaleSource.html#getLocaleSourceClass__">getLocaleSourceClass</a>, <a href="LocaleSource.html#getNumberFormat__">getNumberFormat</a>, <a href="LocaleSource.html#getTimeFormat__">getTimeFormat</a>, <a href="LocaleSource.html#getTimeZone__">getTimeZone</a>, <a href="LocaleSource.html#getWritingDirection__">getWritingDirection</a>, <a href="LocaleSource.html#hashCode__">hashCode</a>, <a href="LocaleSource.html#isCached__">isCached</a>, <a href="LocaleSource.html#isReadOnly__">isReadOnly</a>, <a href="LocaleSource.html#load__">load</a>, <a href="LocaleSource.html#setAttribute_java_lang_String_java_lang_Object_">setAttribute</a>, <a href="LocaleSource.html#setCharacterSet_java_lang_String_">setCharacterSet</a>, <a href="LocaleSource.html#setCollator_oracle_i18n_text_OraCollator_">setCollator</a>, <a href="LocaleSource.html#setCurrencyFormat_oracle_i18n_text_OraNumberFormat_">setCurrencyFormat</a>, <a href="LocaleSource.html#setDateFormat_int_oracle_i18n_text_OraDateFormat_">setDateFormat</a>, <a href="LocaleSource.html#setDateTimeFormat_int_oracle_i18n_text_OraDateFormat_">setDateTimeFormat</a>, <a href="LocaleSource.html#setISOCurrency_java_lang_String_">setISOCurrency</a>, <a href="LocaleSource.html#setLocale_java_util_Locale_">setLocale</a>, <a href="LocaleSource.html#setLocale_java_util_Locale_oracle_i18n_servlet_ApplicationContext_">setLocale</a>, <a href="LocaleSource.html#setLocaleSourceClass_java_lang_Class_">setLocaleSourceClass</a>, <a href="LocaleSource.html#setNumberFormat_oracle_i18n_text_OraNumberFormat_">setNumberFormat</a>, <a href="LocaleSource.html#setTimeFormat_oracle_i18n_text_OraDateFormat_">setTimeFormat</a>, <a href="LocaleSource.html#setTimeZone_java_util_TimeZone_">setTimeZone</a>, <a href="LocaleSource.html#setWritingDirection_oracle_i18n_servlet_localesource_LocaleSource_WritingDirection_">setWritingDirection</a>, <a href="LocaleSource.html#store__">store</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java_lang_Object" id="methods_inherited_from_class_java_lang_Object"><!--   --></a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#clone__" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#finalize__" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#getClass__" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notify__" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#notifyAll__" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#toString__" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait__" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait_long_" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/Object.html?is-external=true#wait_long_int_" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom" id="navbar_bottom"><!--   --></a>
<div class="skipNav"><a href="#skip_navbar_bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar_bottom_firstrow" id="navbar_bottom_firstrow"><!--   --></a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><b>Oracle® Database Globalization Development Kit Java API Reference<br>
12<i>c</i> Release 2 (12.2.0.1)</b><br>
E85601-01</div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="ApplicationDefault.html" title="class in oracle.i18n.servlet.localesource"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="HttpAcceptLanguage.html" title="class in oracle.i18n.servlet.localesource"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html" target="_top">Frames</a></li>
<li><a href="DBLocaleSource.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div><script type="text/javascript">
<!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script></div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_classes_inherited_from_class_oracle_i18n_servlet_localesource_LocaleSource">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#methods_inherited_from_class_oracle_i18n_servlet_localesource_LocaleSource">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li>Method</li>
</ul>
</div>
<a name="skip_navbar_bottom" id="skip_navbar_bottom"><!--   --></a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"></p>
<center><small>Copyright © 2003, 2017, Oracle. All rights reserved.</small></center>
</body>
</html>
